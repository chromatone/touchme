var Hm=Object.defineProperty,Gm=Object.defineProperties;var Ym=Object.getOwnPropertyDescriptors;var zi=Object.getOwnPropertySymbols;var nu=Object.prototype.hasOwnProperty,su=Object.prototype.propertyIsEnumerable;var tu=(n,e,t)=>e in n?Hm(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ne=(n,e)=>{for(var t in e||(e={}))nu.call(e,t)&&tu(n,t,e[t]);if(zi)for(var t of zi(e))su.call(e,t)&&tu(n,t,e[t]);return n},ye=(n,e)=>Gm(n,Ym(e));var Dr=(n,e)=>{var t={};for(var s in n)nu.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&zi)for(var s of zi(n))e.indexOf(s)<0&&su.call(n,s)&&(t[s]=n[s]);return t};const Zm=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};Zm();function Dc(n,e){const t=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)t[s[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const Km="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xm=Dc(Km);function hd(n){return!!n||n===""}function rt(n){if(Te(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=ot(s)?eg(s):rt(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(ot(n))return n;if(Je(n))return n}}const Qm=/;(?![^(]*\))/g,Jm=/:(.+)/;function eg(n){const e={};return n.split(Qm).forEach(t=>{if(t){const s=t.split(Jm);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ts(n){let e="";if(ot(n))e=n;else if(Te(n))for(let t=0;t<n.length;t++){const s=ts(n[t]);s&&(e+=s+" ")}else if(Je(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function tg(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=ir(n[s],e[s]);return t}function ir(n,e){if(n===e)return!0;let t=ru(n),s=ru(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Te(n),s=Te(e),t||s)return t&&s?tg(n,e):!1;if(t=Je(n),s=Je(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ir(n[o],e[o]))return!1}}return String(n)===String(e)}function dd(n,e){return n.findIndex(t=>ir(t,e))}const Ie=n=>ot(n)?n:n==null?"":Te(n)||Je(n)&&(n.toString===md||!Ee(n.toString))?JSON.stringify(n,fd,2):String(n),fd=(n,e)=>e&&e.__v_isRef?fd(n,e.value):Qs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r])=>(t[`${s} =>`]=r,t),{})}:ta(e)?{[`Set(${e.size})`]:[...e.values()]}:Je(e)&&!Te(e)&&!gd(e)?String(e):e,ze={},Xs=[],en=()=>{},ng=()=>!1,sg=/^on[^a-z]/,ea=n=>sg.test(n),Fc=n=>n.startsWith("onUpdate:"),ft=Object.assign,$c=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},rg=Object.prototype.hasOwnProperty,ke=(n,e)=>rg.call(n,e),Te=Array.isArray,Qs=n=>na(n)==="[object Map]",ta=n=>na(n)==="[object Set]",ru=n=>n instanceof Date,Ee=n=>typeof n=="function",ot=n=>typeof n=="string",Vc=n=>typeof n=="symbol",Je=n=>n!==null&&typeof n=="object",pd=n=>Je(n)&&Ee(n.then)&&Ee(n.catch),md=Object.prototype.toString,na=n=>md.call(n),ig=n=>na(n).slice(8,-1),gd=n=>na(n)==="[object Object]",Lc=n=>ot(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,io=Dc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sa=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},og=/-(\w)/g,fn=sa(n=>n.replace(og,(e,t)=>t?t.toUpperCase():"")),ag=/\B([A-Z])/g,wr=sa(n=>n.replace(ag,"-$1").toLowerCase()),ra=sa(n=>n.charAt(0).toUpperCase()+n.slice(1)),Sa=sa(n=>n?`on${ra(n)}`:""),si=(n,e)=>!Object.is(n,e),Js=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},ho=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},fo=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let iu;const cg=()=>iu||(iu=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Lt;class lg{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Lt&&(this.parent=Lt,this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}run(e){if(this.active)try{return Lt=this,e()}finally{Lt=this.parent}}on(){Lt=this}off(){Lt=this.parent}stop(e){if(this.active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function ug(n,e=Lt){e&&e.active&&e.effects.push(n)}function hg(){return Lt}function dg(n){Lt&&Lt.cleanups.push(n)}const Bc=n=>{const e=new Set(n);return e.w=0,e.n=0,e},_d=n=>(n.w&ns)>0,yd=n=>(n.n&ns)>0,fg=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=ns},pg=n=>{const{deps:e}=n;if(e.length){let t=0;for(let s=0;s<e.length;s++){const r=e[s];_d(r)&&!yd(r)?r.delete(n):e[t++]=r,r.w&=~ns,r.n&=~ns}e.length=t}},tc=new WeakMap;let Ur=0,ns=1;const nc=30;let hn;const Ms=Symbol(""),sc=Symbol("");class jc{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,ug(this,s)}run(){if(!this.active)return this.fn();let e=hn,t=Xn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=hn,hn=this,Xn=!0,ns=1<<++Ur,Ur<=nc?fg(this):ou(this),this.fn()}finally{Ur<=nc&&pg(this),ns=1<<--Ur,hn=this.parent,Xn=t,this.parent=void 0}}stop(){this.active&&(ou(this),this.onStop&&this.onStop(),this.active=!1)}}function ou(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let Xn=!0;const vd=[];function Mr(){vd.push(Xn),Xn=!1}function Tr(){const n=vd.pop();Xn=n===void 0?!0:n}function Ft(n,e,t){if(Xn&&hn){let s=tc.get(n);s||tc.set(n,s=new Map);let r=s.get(t);r||s.set(t,r=Bc()),bd(r)}}function bd(n,e){let t=!1;Ur<=nc?yd(n)||(n.n|=ns,t=!_d(n)):t=!n.has(hn),t&&(n.add(hn),hn.deps.push(n))}function In(n,e,t,s,r,i){const o=tc.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Te(n))o.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Te(n)?Lc(t)&&a.push(o.get("length")):(a.push(o.get(Ms)),Qs(n)&&a.push(o.get(sc)));break;case"delete":Te(n)||(a.push(o.get(Ms)),Qs(n)&&a.push(o.get(sc)));break;case"set":Qs(n)&&a.push(o.get(Ms));break}if(a.length===1)a[0]&&rc(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);rc(Bc(c))}}function rc(n,e){for(const t of Te(n)?n:[...n])(t!==hn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const mg=Dc("__proto__,__v_isRef,__isVue"),wd=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Vc)),gg=qc(),_g=qc(!1,!0),yg=qc(!0),au=vg();function vg(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const s=Oe(this);for(let i=0,o=this.length;i<o;i++)Ft(s,"get",i+"");const r=s[e](...t);return r===-1||r===!1?s[e](...t.map(Oe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Mr();const s=Oe(this)[e].apply(this,t);return Tr(),s}}),n}function qc(n=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(n?e?Dg:Ad:e?xd:Ed).get(s))return s;const o=Te(s);if(!n&&o&&ke(au,r))return Reflect.get(au,r,i);const a=Reflect.get(s,r,i);return(Vc(r)?wd.has(r):mg(r))||(n||Ft(s,"get",r),e)?a:gt(a)?!o||!Lc(r)?a.value:a:Je(a)?n?Sd(a):Nt(a):a}}const bg=Md(),wg=Md(!0);function Md(n=!1){return function(t,s,r,i){let o=t[s];if(ri(o)&&gt(o)&&!gt(r))return!1;if(!n&&!ri(r)&&(Cd(r)||(r=Oe(r),o=Oe(o)),!Te(t)&&gt(o)&&!gt(r)))return o.value=r,!0;const a=Te(t)&&Lc(s)?Number(s)<t.length:ke(t,s),c=Reflect.set(t,s,r,i);return t===Oe(i)&&(a?si(r,o)&&In(t,"set",s,r):In(t,"add",s,r)),c}}function Mg(n,e){const t=ke(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&t&&In(n,"delete",e,void 0),s}function Tg(n,e){const t=Reflect.has(n,e);return(!Vc(e)||!wd.has(e))&&Ft(n,"has",e),t}function Eg(n){return Ft(n,"iterate",Te(n)?"length":Ms),Reflect.ownKeys(n)}const Td={get:gg,set:bg,deleteProperty:Mg,has:Tg,ownKeys:Eg},xg={get:yg,set(n,e){return!0},deleteProperty(n,e){return!0}},Ag=ft({},Td,{get:_g,set:wg}),Uc=n=>n,ia=n=>Reflect.getPrototypeOf(n);function Hi(n,e,t=!1,s=!1){n=n.__v_raw;const r=Oe(n),i=Oe(e);e!==i&&!t&&Ft(r,"get",e),!t&&Ft(r,"get",i);const{has:o}=ia(r),a=s?Uc:t?Hc:ii;if(o.call(r,e))return a(n.get(e));if(o.call(r,i))return a(n.get(i));n!==r&&n.get(e)}function Gi(n,e=!1){const t=this.__v_raw,s=Oe(t),r=Oe(n);return n!==r&&!e&&Ft(s,"has",n),!e&&Ft(s,"has",r),n===r?t.has(n):t.has(n)||t.has(r)}function Yi(n,e=!1){return n=n.__v_raw,!e&&Ft(Oe(n),"iterate",Ms),Reflect.get(n,"size",n)}function cu(n){n=Oe(n);const e=Oe(this);return ia(e).has.call(e,n)||(e.add(n),In(e,"add",n,n)),this}function lu(n,e){e=Oe(e);const t=Oe(this),{has:s,get:r}=ia(t);let i=s.call(t,n);i||(n=Oe(n),i=s.call(t,n));const o=r.call(t,n);return t.set(n,e),i?si(e,o)&&In(t,"set",n,e):In(t,"add",n,e),this}function uu(n){const e=Oe(this),{has:t,get:s}=ia(e);let r=t.call(e,n);r||(n=Oe(n),r=t.call(e,n)),s&&s.call(e,n);const i=e.delete(n);return r&&In(e,"delete",n,void 0),i}function hu(){const n=Oe(this),e=n.size!==0,t=n.clear();return e&&In(n,"clear",void 0,void 0),t}function Zi(n,e){return function(s,r){const i=this,o=i.__v_raw,a=Oe(o),c=e?Uc:n?Hc:ii;return!n&&Ft(a,"iterate",Ms),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function Ki(n,e,t){return function(...s){const r=this.__v_raw,i=Oe(r),o=Qs(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=t?Uc:e?Hc:ii;return!e&&Ft(i,"iterate",c?sc:Ms),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function jn(n){return function(...e){return n==="delete"?!1:this}}function Sg(){const n={get(i){return Hi(this,i)},get size(){return Yi(this)},has:Gi,add:cu,set:lu,delete:uu,clear:hu,forEach:Zi(!1,!1)},e={get(i){return Hi(this,i,!1,!0)},get size(){return Yi(this)},has:Gi,add:cu,set:lu,delete:uu,clear:hu,forEach:Zi(!1,!0)},t={get(i){return Hi(this,i,!0)},get size(){return Yi(this,!0)},has(i){return Gi.call(this,i,!0)},add:jn("add"),set:jn("set"),delete:jn("delete"),clear:jn("clear"),forEach:Zi(!0,!1)},s={get(i){return Hi(this,i,!0,!0)},get size(){return Yi(this,!0)},has(i){return Gi.call(this,i,!0)},add:jn("add"),set:jn("set"),delete:jn("delete"),clear:jn("clear"),forEach:Zi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Ki(i,!1,!1),t[i]=Ki(i,!0,!1),e[i]=Ki(i,!1,!0),s[i]=Ki(i,!0,!0)}),[n,t,e,s]}const[Cg,Ng,kg,Ig]=Sg();function Wc(n,e){const t=e?n?Ig:kg:n?Ng:Cg;return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(ke(t,r)&&r in s?t:s,r,i)}const Pg={get:Wc(!1,!1)},Og={get:Wc(!1,!0)},Rg={get:Wc(!0,!1)},Ed=new WeakMap,xd=new WeakMap,Ad=new WeakMap,Dg=new WeakMap;function Fg(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $g(n){return n.__v_skip||!Object.isExtensible(n)?0:Fg(ig(n))}function Nt(n){return ri(n)?n:zc(n,!1,Td,Pg,Ed)}function Vg(n){return zc(n,!1,Ag,Og,xd)}function Sd(n){return zc(n,!0,xg,Rg,Ad)}function zc(n,e,t,s,r){if(!Je(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=$g(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function er(n){return ri(n)?er(n.__v_raw):!!(n&&n.__v_isReactive)}function ri(n){return!!(n&&n.__v_isReadonly)}function Cd(n){return!!(n&&n.__v_isShallow)}function Nd(n){return er(n)||ri(n)}function Oe(n){const e=n&&n.__v_raw;return e?Oe(e):n}function kd(n){return ho(n,"__v_skip",!0),n}const ii=n=>Je(n)?Nt(n):n,Hc=n=>Je(n)?Sd(n):n;function Id(n){Xn&&hn&&(n=Oe(n),bd(n.dep||(n.dep=Bc())))}function Pd(n,e){n=Oe(n),n.dep&&rc(n.dep)}function gt(n){return!!(n&&n.__v_isRef===!0)}function Be(n){return Rd(n,!1)}function Od(n){return Rd(n,!0)}function Rd(n,e){return gt(n)?n:new Lg(n,e)}class Lg{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Oe(e),this._value=t?e:ii(e)}get value(){return Id(this),this._value}set value(e){e=this.__v_isShallow?e:Oe(e),si(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:ii(e),Pd(this))}}function b(n){return gt(n)?n.value:n}const Bg={get:(n,e,t)=>b(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return gt(r)&&!gt(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function Dd(n){return er(n)?n:new Proxy(n,Bg)}class jg{constructor(e,t,s,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new jc(e,()=>{this._dirty||(this._dirty=!0,Pd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=Oe(this);return Id(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function qg(n,e,t=!1){let s,r;const i=Ee(n);return i?(s=n,r=en):(s=n.get,r=n.set),new jg(s,r,i||!r,t)}Promise.resolve();function Qn(n,e,t,s){let r;try{r=s?n(...s):n()}catch(i){oa(i,e,t)}return r}function Wt(n,e,t,s){if(Ee(n)){const i=Qn(n,e,t,s);return i&&pd(i)&&i.catch(o=>{oa(o,e,t)}),i}const r=[];for(let i=0;i<n.length;i++)r.push(Wt(n[i],e,t,s));return r}function oa(n,e,t,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=t;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](n,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Qn(c,null,10,[n,o,a]);return}}Ug(n,t,r,s)}function Ug(n,e,t,s=!0){console.error(n)}let po=!1,ic=!1;const Pt=[];let Sn=0;const Hr=[];let Wr=null,Us=0;const Gr=[];let Hn=null,Ws=0;const Fd=Promise.resolve();let Gc=null,oc=null;function Ii(n){const e=Gc||Fd;return n?e.then(this?n.bind(this):n):e}function Wg(n){let e=Sn+1,t=Pt.length;for(;e<t;){const s=e+t>>>1;oi(Pt[s])<n?e=s+1:t=s}return e}function $d(n){(!Pt.length||!Pt.includes(n,po&&n.allowRecurse?Sn+1:Sn))&&n!==oc&&(n.id==null?Pt.push(n):Pt.splice(Wg(n.id),0,n),Vd())}function Vd(){!po&&!ic&&(ic=!0,Gc=Fd.then(jd))}function zg(n){const e=Pt.indexOf(n);e>Sn&&Pt.splice(e,1)}function Ld(n,e,t,s){Te(n)?t.push(...n):(!e||!e.includes(n,n.allowRecurse?s+1:s))&&t.push(n),Vd()}function Hg(n){Ld(n,Wr,Hr,Us)}function Gg(n){Ld(n,Hn,Gr,Ws)}function Yc(n,e=null){if(Hr.length){for(oc=e,Wr=[...new Set(Hr)],Hr.length=0,Us=0;Us<Wr.length;Us++)Wr[Us]();Wr=null,Us=0,oc=null,Yc(n,e)}}function Bd(n){if(Gr.length){const e=[...new Set(Gr)];if(Gr.length=0,Hn){Hn.push(...e);return}for(Hn=e,Hn.sort((t,s)=>oi(t)-oi(s)),Ws=0;Ws<Hn.length;Ws++)Hn[Ws]();Hn=null,Ws=0}}const oi=n=>n.id==null?1/0:n.id;function jd(n){ic=!1,po=!0,Yc(n),Pt.sort((t,s)=>oi(t)-oi(s));const e=en;try{for(Sn=0;Sn<Pt.length;Sn++){const t=Pt[Sn];t&&t.active!==!1&&Qn(t,null,14)}}finally{Sn=0,Pt.length=0,Bd(),po=!1,Gc=null,(Pt.length||Hr.length||Gr.length)&&jd(n)}}function Yg(n,e,...t){const s=n.vnode.props||ze;let r=t;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||ze;d?r=t.map(f=>f.trim()):h&&(r=t.map(fo))}let a,c=s[a=Sa(e)]||s[a=Sa(fn(e))];!c&&i&&(c=s[a=Sa(wr(e))]),c&&Wt(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Wt(l,n,6,r)}}function qd(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ee(n)){const c=l=>{const u=qd(l,e,!0);u&&(a=!0,ft(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(s.set(n,null),null):(Te(i)?i.forEach(c=>o[c]=null):ft(o,i),s.set(n,o),o)}function Zc(n,e){return!n||!ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(n,e[0].toLowerCase()+e.slice(1))||ke(n,wr(e))||ke(n,e))}let jt=null,aa=null;function mo(n){const e=jt;return jt=n,aa=n&&n.type.__scopeId||null,e}function Kc(n){aa=n}function Xc(){aa=null}function ss(n,e=jt,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Mu(-1);const i=mo(e),o=n(...r);return mo(i),s._d&&Mu(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function Ca(n){const{type:e,vnode:t,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:g}=n;let m,_;const w=mo(n);try{if(t.shapeFlag&4){const I=r||s;m=un(u.call(I,I,h,i,f,d,p)),_=c}else{const I=e;m=un(I.length>1?I(i,{attrs:c,slots:a,emit:l}):I(i,null)),_=e.props?c:Zg(c)}}catch(I){Yr.length=0,oa(I,n,1),m=Ae(pn)}let k=m;if(_&&g!==!1){const I=Object.keys(_),{shapeFlag:T}=k;I.length&&T&7&&(o&&I.some(Fc)&&(_=Kg(_,o)),k=Ns(k,_))}return t.dirs&&(k.dirs=k.dirs?k.dirs.concat(t.dirs):t.dirs),t.transition&&(k.transition=t.transition),m=k,mo(w),m}const Zg=n=>{let e;for(const t in n)(t==="class"||t==="style"||ea(t))&&((e||(e={}))[t]=n[t]);return e},Kg=(n,e)=>{const t={};for(const s in n)(!Fc(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function Xg(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?du(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!Zc(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?du(s,o,l):!0:!!o;return!1}function du(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Zc(t,i))return!0}return!1}function Qg({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const Jg=n=>n.__isSuspense;function e_(n,e){e&&e.pendingBranch?Te(n)?e.effects.push(...n):e.effects.push(n):Gg(n)}function oo(n,e){if(ut){let t=ut.provides;const s=ut.parent&&ut.parent.provides;s===t&&(t=ut.provides=Object.create(s)),t[n]=e}}function Nn(n,e,t=!1){const s=ut||jt;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ee(e)?e.call(s.proxy):e}}function t_(n,e){return Qc(n,null,e)}const fu={};function St(n,e,t){return Qc(n,e,t)}function Qc(n,e,{immediate:t,deep:s,flush:r,onTrack:i,onTrigger:o}=ze){const a=ut;let c,l=!1,u=!1;if(gt(n)?(c=()=>n.value,l=Cd(n)):er(n)?(c=()=>n,s=!0):Te(n)?(u=!0,l=n.some(er),c=()=>n.map(_=>{if(gt(_))return _.value;if(er(_))return ys(_);if(Ee(_))return Qn(_,a,2)})):Ee(n)?e?c=()=>Qn(n,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),Wt(n,a,3,[d])}:c=en,e&&s){const _=c;c=()=>ys(_())}let h,d=_=>{h=m.onStop=()=>{Qn(_,a,4)}};if(ci)return d=en,e?t&&Wt(e,a,3,[c(),u?[]:void 0,d]):c(),en;let f=u?[]:fu;const p=()=>{if(!!m.active)if(e){const _=m.run();(s||l||(u?_.some((w,k)=>si(w,f[k])):si(_,f)))&&(h&&h(),Wt(e,a,3,[_,f===fu?void 0:f,d]),f=_)}else m.run()};p.allowRecurse=!!e;let g;r==="sync"?g=p:r==="post"?g=()=>mt(p,a&&a.suspense):g=()=>{!a||a.isMounted?Hg(p):p()};const m=new jc(c,g);return e?t?p():f=m.run():r==="post"?mt(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&$c(a.scope.effects,m)}}function n_(n,e,t){const s=this.proxy,r=ot(n)?n.includes(".")?Ud(s,n):()=>s[n]:n.bind(s,s);let i;Ee(e)?i=e:(i=e.handler,t=e);const o=ut;ar(this);const a=Qc(r,i.bind(s),t);return o?ar(o):Es(),a}function Ud(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}function ys(n,e){if(!Je(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),gt(n))ys(n.value,e);else if(Te(n))for(let t=0;t<n.length;t++)ys(n[t],e);else if(ta(n)||Qs(n))n.forEach(t=>{ys(t,e)});else if(gd(n))for(const t in n)ys(n[t],e);return n}function Wd(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Er(()=>{n.isMounted=!0}),tl(()=>{n.isUnmounting=!0}),n}const $t=[Function,Array],s_={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$t,onEnter:$t,onAfterEnter:$t,onEnterCancelled:$t,onBeforeLeave:$t,onLeave:$t,onAfterLeave:$t,onLeaveCancelled:$t,onBeforeAppear:$t,onAppear:$t,onAfterAppear:$t,onAppearCancelled:$t},setup(n,{slots:e}){const t=Pi(),s=Wd();let r;return()=>{const i=e.default&&Jc(e.default(),!0);if(!i||!i.length)return;const o=Oe(n),{mode:a}=o,c=i[0];if(s.isLeaving)return Na(c);const l=pu(c);if(!l)return Na(c);const u=ai(l,o,s,t);or(l,u);const h=t.subTree,d=h&&pu(h);let f=!1;const{getTransitionKey:p}=l.type;if(p){const g=p();r===void 0?r=g:g!==r&&(r=g,f=!0)}if(d&&d.type!==pn&&(!ms(l,d)||f)){const g=ai(d,o,s,t);if(or(d,g),a==="out-in")return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,t.update()},Na(c);a==="in-out"&&l.type!==pn&&(g.delayLeave=(m,_,w)=>{const k=Hd(s,d);k[String(d.key)]=d,m._leaveCb=()=>{_(),m._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=w})}return c}}},zd=s_;function Hd(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function ai(n,e,t,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:_,onAppearCancelled:w}=e,k=String(n.key),I=Hd(t,n),T=(y,C)=>{y&&Wt(y,s,9,C)},E={mode:i,persisted:o,beforeEnter(y){let C=a;if(!t.isMounted)if(r)C=g||a;else return;y._leaveCb&&y._leaveCb(!0);const $=I[k];$&&ms(n,$)&&$.el._leaveCb&&$.el._leaveCb(),T(C,[y])},enter(y){let C=c,$=l,U=u;if(!t.isMounted)if(r)C=m||c,$=_||l,U=w||u;else return;let N=!1;const O=y._enterCb=G=>{N||(N=!0,G?T(U,[y]):T($,[y]),E.delayedLeave&&E.delayedLeave(),y._enterCb=void 0)};C?(C(y,O),C.length<=1&&O()):O()},leave(y,C){const $=String(n.key);if(y._enterCb&&y._enterCb(!0),t.isUnmounting)return C();T(h,[y]);let U=!1;const N=y._leaveCb=O=>{U||(U=!0,C(),O?T(p,[y]):T(f,[y]),y._leaveCb=void 0,I[$]===n&&delete I[$])};I[$]=n,d?(d(y,N),d.length<=1&&N()):N()},clone(y){return ai(y,e,t,s)}};return E}function Na(n){if(ca(n))return n=Ns(n),n.children=null,n}function pu(n){return ca(n)?n.children?n.children[0]:void 0:n}function or(n,e){n.shapeFlag&6&&n.component?or(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Jc(n,e=!1){let t=[],s=0;for(let r=0;r<n.length;r++){const i=n[r];i.type===Re?(i.patchFlag&128&&s++,t=t.concat(Jc(i.children,e))):(e||i.type!==pn)&&t.push(i)}if(s>1)for(let r=0;r<t.length;r++)t[r].patchFlag=-2;return t}function Gd(n){return Ee(n)?{setup:n,name:n.name}:n}const go=n=>!!n.type.__asyncLoader,ca=n=>n.type.__isKeepAlive,r_={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=Pi(),s=t.ctx;if(!s.renderer)return e.default;const r=new Map,i=new Set;let o=null;const a=t.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:h}}}=s,d=h("div");s.activate=(w,k,I,T,E)=>{const y=w.component;l(w,k,I,0,a),c(y.vnode,w,k,I,y,a,T,w.slotScopeIds,E),mt(()=>{y.isDeactivated=!1,y.a&&Js(y.a);const C=w.props&&w.props.onVnodeMounted;C&&Vt(C,y.parent,w)},a)},s.deactivate=w=>{const k=w.component;l(w,d,null,1,a),mt(()=>{k.da&&Js(k.da);const I=w.props&&w.props.onVnodeUnmounted;I&&Vt(I,k.parent,w),k.isDeactivated=!0},a)};function f(w){ka(w),u(w,t,a,!0)}function p(w){r.forEach((k,I)=>{const T=dc(k.type);T&&(!w||!w(T))&&g(I)})}function g(w){const k=r.get(w);!o||k.type!==o.type?f(k):o&&ka(o),r.delete(w),i.delete(w)}St(()=>[n.include,n.exclude],([w,k])=>{w&&p(I=>zr(w,I)),k&&p(I=>!zr(k,I))},{flush:"post",deep:!0});let m=null;const _=()=>{m!=null&&r.set(m,Ia(t.subTree))};return Er(_),el(_),tl(()=>{r.forEach(w=>{const{subTree:k,suspense:I}=t,T=Ia(k);if(w.type===T.type){ka(T);const E=T.component.da;E&&mt(E,I);return}f(w)})}),()=>{if(m=null,!e.default)return null;const w=e.default(),k=w[0];if(w.length>1)return o=null,w;if(!bo(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return o=null,k;let I=Ia(k);const T=I.type,E=dc(go(I)?I.type.__asyncResolved||{}:T),{include:y,exclude:C,max:$}=n;if(y&&(!E||!zr(y,E))||C&&E&&zr(C,E))return o=I,k;const U=I.key==null?T:I.key,N=r.get(U);return I.el&&(I=Ns(I),k.shapeFlag&128&&(k.ssContent=I)),m=U,N?(I.el=N.el,I.component=N.component,I.transition&&or(I,I.transition),I.shapeFlag|=512,i.delete(U),i.add(U)):(i.add(U),$&&i.size>parseInt($,10)&&g(i.values().next().value)),I.shapeFlag|=256,o=I,k}}},Yd=r_;function zr(n,e){return Te(n)?n.some(t=>zr(t,e)):ot(n)?n.split(",").includes(e):n.test?n.test(e):!1}function i_(n,e){Zd(n,"a",e)}function o_(n,e){Zd(n,"da",e)}function Zd(n,e,t=ut){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(la(e,s,t),t){let r=t.parent;for(;r&&r.parent;)ca(r.parent.vnode)&&a_(s,e,t,r),r=r.parent}}function a_(n,e,t,s){const r=la(e,n,s,!0);Xd(()=>{$c(s[e],r)},t)}function ka(n){let e=n.shapeFlag;e&256&&(e-=256),e&512&&(e-=512),n.shapeFlag=e}function Ia(n){return n.shapeFlag&128?n.ssContent:n}function la(n,e,t=ut,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Mr(),ar(t);const a=Wt(e,t,n,o);return Es(),Tr(),a});return s?r.unshift(i):r.push(i),i}}const $n=n=>(e,t=ut)=>(!ci||n==="sp")&&la(n,e,t),Kd=$n("bm"),Er=$n("m"),c_=$n("bu"),el=$n("u"),tl=$n("bum"),Xd=$n("um"),l_=$n("sp"),u_=$n("rtg"),h_=$n("rtc");function d_(n,e=ut){la("ec",n,e)}let ac=!0;function f_(n){const e=Jd(n),t=n.proxy,s=n.ctx;ac=!1,e.beforeCreate&&mu(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:w,destroyed:k,unmounted:I,render:T,renderTracked:E,renderTriggered:y,errorCaptured:C,serverPrefetch:$,expose:U,inheritAttrs:N,components:O,directives:G,filters:B}=e;if(l&&p_(l,s,null,n.appContext.config.unwrapInjectedRef),o)for(const re in o){const le=o[re];Ee(le)&&(s[re]=le.bind(t))}if(r){const re=r.call(t,t);Je(re)&&(n.data=Nt(re))}if(ac=!0,i)for(const re in i){const le=i[re],he=Ee(le)?le.bind(t,t):Ee(le.get)?le.get.bind(t,t):en,_e=!Ee(le)&&Ee(le.set)?le.set.bind(t):en,te=Pe({get:he,set:_e});Object.defineProperty(s,re,{enumerable:!0,configurable:!0,get:()=>te.value,set:R=>te.value=R})}if(a)for(const re in a)Qd(a[re],s,t,re);if(c){const re=Ee(c)?c.call(t):c;Reflect.ownKeys(re).forEach(le=>{oo(le,re[le])})}u&&mu(u,n,"c");function Q(re,le){Te(le)?le.forEach(he=>re(he.bind(t))):le&&re(le.bind(t))}if(Q(Kd,h),Q(Er,d),Q(c_,f),Q(el,p),Q(i_,g),Q(o_,m),Q(d_,C),Q(h_,E),Q(u_,y),Q(tl,w),Q(Xd,I),Q(l_,$),Te(U))if(U.length){const re=n.exposed||(n.exposed={});U.forEach(le=>{Object.defineProperty(re,le,{get:()=>t[le],set:he=>t[le]=he})})}else n.exposed||(n.exposed={});T&&n.render===en&&(n.render=T),N!=null&&(n.inheritAttrs=N),O&&(n.components=O),G&&(n.directives=G)}function p_(n,e,t=en,s=!1){Te(n)&&(n=cc(n));for(const r in n){const i=n[r];let o;Je(i)?"default"in i?o=Nn(i.from||r,i.default,!0):o=Nn(i.from||r):o=Nn(i),gt(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function mu(n,e,t){Wt(Te(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Qd(n,e,t,s){const r=s.includes(".")?Ud(t,s):()=>t[s];if(ot(n)){const i=e[n];Ee(i)&&St(r,i)}else if(Ee(n))St(r,n.bind(t));else if(Je(n))if(Te(n))n.forEach(i=>Qd(i,e,t,s));else{const i=Ee(n.handler)?n.handler.bind(t):e[n.handler];Ee(i)&&St(r,i,n)}}function Jd(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(l=>_o(c,l,o,!0)),_o(c,e,o)),i.set(e,c),c}function _o(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&_o(n,i,t,!0),r&&r.forEach(o=>_o(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=m_[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const m_={data:gu,props:fs,emits:fs,methods:fs,computed:fs,beforeCreate:wt,created:wt,beforeMount:wt,mounted:wt,beforeUpdate:wt,updated:wt,beforeDestroy:wt,beforeUnmount:wt,destroyed:wt,unmounted:wt,activated:wt,deactivated:wt,errorCaptured:wt,serverPrefetch:wt,components:fs,directives:fs,watch:__,provide:gu,inject:g_};function gu(n,e){return e?n?function(){return ft(Ee(n)?n.call(this,this):n,Ee(e)?e.call(this,this):e)}:e:n}function g_(n,e){return fs(cc(n),cc(e))}function cc(n){if(Te(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function wt(n,e){return n?[...new Set([].concat(n,e))]:e}function fs(n,e){return n?ft(ft(Object.create(null),n),e):e}function __(n,e){if(!n)return e;if(!e)return n;const t=ft(Object.create(null),n);for(const s in e)t[s]=wt(n[s],e[s]);return t}function y_(n,e,t,s=!1){const r={},i={};ho(i,ua,1),n.propsDefaults=Object.create(null),ef(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Vg(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function v_(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=Oe(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];const f=e[d];if(c)if(ke(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=fn(d);r[p]=lc(c,a,p,f,n,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{ef(n,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!ke(e,h)&&((u=wr(h))===h||!ke(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=lc(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!ke(e,h)&&!0)&&(delete i[h],l=!0)}l&&In(n,"set","$attrs")}function ef(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(io(c))continue;const l=e[c];let u;r&&ke(r,u=fn(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:Zc(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Oe(t),l=a||ze;for(let u=0;u<i.length;u++){const h=i[u];t[h]=lc(r,c,h,l[h],n,!ke(l,h))}}return o}function lc(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=ke(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&Ee(c)){const{propsDefaults:l}=r;t in l?s=l[t]:(ar(r),s=l[t]=c.call(null,e),Es())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===wr(t))&&(s=!0))}return s}function tf(n,e,t=!1){const s=e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!Ee(n)){const u=h=>{c=!0;const[d,f]=tf(h,e,!0);ft(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return s.set(n,Xs),Xs;if(Te(i))for(let u=0;u<i.length;u++){const h=fn(i[u]);_u(h)&&(o[h]=ze)}else if(i)for(const u in i){const h=fn(u);if(_u(h)){const d=i[u],f=o[h]=Te(d)||Ee(d)?{type:d}:d;if(f){const p=bu(Boolean,f.type),g=bu(String,f.type);f[0]=p>-1,f[1]=g<0||p<g,(p>-1||ke(f,"default"))&&a.push(h)}}}const l=[o,a];return s.set(n,l),l}function _u(n){return n[0]!=="$"}function yu(n){const e=n&&n.toString().match(/^\s*function (\w+)/);return e?e[1]:n===null?"null":""}function vu(n,e){return yu(n)===yu(e)}function bu(n,e){return Te(e)?e.findIndex(t=>vu(t,n)):Ee(e)&&vu(e,n)?0:-1}const nf=n=>n[0]==="_"||n==="$stable",nl=n=>Te(n)?n.map(un):[un(n)],b_=(n,e,t)=>{const s=ss((...r)=>nl(e(...r)),t);return s._c=!1,s},sf=(n,e,t)=>{const s=n._ctx;for(const r in n){if(nf(r))continue;const i=n[r];if(Ee(i))e[r]=b_(r,i,s);else if(i!=null){const o=nl(i);e[r]=()=>o}}},rf=(n,e)=>{const t=nl(e);n.slots.default=()=>t},w_=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=Oe(e),ho(e,"_",t)):sf(e,n.slots={})}else n.slots={},e&&rf(n,e);ho(n.slots,ua,1)},M_=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=ze;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:(ft(r,e),!t&&a===1&&delete r._):(i=!e.$stable,sf(e,r)),o=e}else e&&(rf(n,e),o={default:1});if(i)for(const a in r)!nf(a)&&!(a in o)&&delete r[a]};function Pn(n,e){const t=jt;if(t===null)return n;const s=t.proxy,r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=ze]=e[i];Ee(o)&&(o={mounted:o,updated:o}),o.deep&&ys(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l})}return n}function us(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Mr(),Wt(c,t,8,[n.el,a,n,e]),Tr())}}function of(){return{app:null,config:{isNativeTag:ng,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let T_=0;function E_(n,e){return function(s,r=null){r!=null&&!Je(r)&&(r=null);const i=of(),o=new Set;let a=!1;const c=i.app={_uid:T_++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:q_,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Ee(l.install)?(o.add(l),l.install(c,...u)):Ee(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=Ae(s,r);return d.appContext=i,u&&e?e(d,l):n(d,l,h),a=!0,c._container=l,l.__vue_app__=c,al(d.component)||d.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function uc(n,e,t,s,r=!1){if(Te(n)){n.forEach((d,f)=>uc(d,e&&(Te(e)?e[f]:e),t,s,r));return}if(go(s)&&!r)return;const i=s.shapeFlag&4?al(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=n,l=e&&e.r,u=a.refs===ze?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(ot(l)?(u[l]=null,ke(h,l)&&(h[l]=null)):gt(l)&&(l.value=null)),Ee(c))Qn(c,a,12,[o,u]);else{const d=ot(c),f=gt(c);if(d||f){const p=()=>{if(n.f){const g=d?u[c]:c.value;r?Te(g)&&$c(g,i):Te(g)?g.includes(i)||g.push(i):d?u[c]=[i]:(c.value=[i],n.k&&(u[n.k]=c.value))}else d?(u[c]=o,ke(h,c)&&(h[c]=o)):gt(c)&&(c.value=o,n.k&&(u[n.k]=o))};o?(p.id=-1,mt(p,t)):p()}}}const mt=e_;function x_(n){return A_(n)}function A_(n,e){const t=cg();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=en,cloneNode:p,insertStaticContent:g}=n,m=(v,M,x,D=null,L=null,Y=null,K=!1,z=null,X=!!M.dynamicChildren)=>{if(v===M)return;v&&!ms(v,M)&&(D=j(v),V(v,L,Y,!0),v=null),M.patchFlag===-2&&(X=!1,M.dynamicChildren=null);const{type:W,ref:me,shapeFlag:fe}=M;switch(W){case rl:_(v,M,x,D);break;case pn:w(v,M,x,D);break;case ao:v==null&&k(M,x,D,K);break;case Re:G(v,M,x,D,L,Y,K,z,X);break;default:fe&1?E(v,M,x,D,L,Y,K,z,X):fe&6?B(v,M,x,D,L,Y,K,z,X):(fe&64||fe&128)&&W.process(v,M,x,D,L,Y,K,z,X,Z)}me!=null&&L&&uc(me,v&&v.ref,Y,M||v,!M)},_=(v,M,x,D)=>{if(v==null)s(M.el=a(M.children),x,D);else{const L=M.el=v.el;M.children!==v.children&&l(L,M.children)}},w=(v,M,x,D)=>{v==null?s(M.el=c(M.children||""),x,D):M.el=v.el},k=(v,M,x,D)=>{[v.el,v.anchor]=g(v.children,M,x,D,v.el,v.anchor)},I=({el:v,anchor:M},x,D)=>{let L;for(;v&&v!==M;)L=d(v),s(v,x,D),v=L;s(M,x,D)},T=({el:v,anchor:M})=>{let x;for(;v&&v!==M;)x=d(v),r(v),v=x;r(M)},E=(v,M,x,D,L,Y,K,z,X)=>{K=K||M.type==="svg",v==null?y(M,x,D,L,Y,K,z,X):U(v,M,L,Y,K,z,X)},y=(v,M,x,D,L,Y,K,z)=>{let X,W;const{type:me,props:fe,shapeFlag:ge,transition:be,patchFlag:xe,dirs:Fe}=v;if(v.el&&p!==void 0&&xe===-1)X=v.el=p(v.el);else{if(X=v.el=o(v.type,Y,fe&&fe.is,fe),ge&8?u(X,v.children):ge&16&&$(v.children,X,null,D,L,Y&&me!=="foreignObject",K,z),Fe&&us(v,null,D,"created"),fe){for(const Me in fe)Me!=="value"&&!io(Me)&&i(X,Me,null,fe[Me],Y,v.children,D,L,S);"value"in fe&&i(X,"value",null,fe.value),(W=fe.onVnodeBeforeMount)&&Vt(W,D,v)}C(X,v,v.scopeId,K,D)}Fe&&us(v,null,D,"beforeMount");const Ne=(!L||L&&!L.pendingBranch)&&be&&!be.persisted;Ne&&be.beforeEnter(X),s(X,M,x),((W=fe&&fe.onVnodeMounted)||Ne||Fe)&&mt(()=>{W&&Vt(W,D,v),Ne&&be.enter(X),Fe&&us(v,null,D,"mounted")},L)},C=(v,M,x,D,L)=>{if(x&&f(v,x),D)for(let Y=0;Y<D.length;Y++)f(v,D[Y]);if(L){let Y=L.subTree;if(M===Y){const K=L.vnode;C(v,K,K.scopeId,K.slotScopeIds,L.parent)}}},$=(v,M,x,D,L,Y,K,z,X=0)=>{for(let W=X;W<v.length;W++){const me=v[W]=z?Gn(v[W]):un(v[W]);m(null,me,M,x,D,L,Y,K,z)}},U=(v,M,x,D,L,Y,K)=>{const z=M.el=v.el;let{patchFlag:X,dynamicChildren:W,dirs:me}=M;X|=v.patchFlag&16;const fe=v.props||ze,ge=M.props||ze;let be;x&&hs(x,!1),(be=ge.onVnodeBeforeUpdate)&&Vt(be,x,M,v),me&&us(M,v,x,"beforeUpdate"),x&&hs(x,!0);const xe=L&&M.type!=="foreignObject";if(W?N(v.dynamicChildren,W,z,x,D,xe,Y):K||he(v,M,z,null,x,D,xe,Y,!1),X>0){if(X&16)O(z,M,fe,ge,x,D,L);else if(X&2&&fe.class!==ge.class&&i(z,"class",null,ge.class,L),X&4&&i(z,"style",fe.style,ge.style,L),X&8){const Fe=M.dynamicProps;for(let Ne=0;Ne<Fe.length;Ne++){const Me=Fe[Ne],Yt=fe[Me],Ls=ge[Me];(Ls!==Yt||Me==="value")&&i(z,Me,Yt,Ls,L,v.children,x,D,S)}}X&1&&v.children!==M.children&&u(z,M.children)}else!K&&W==null&&O(z,M,fe,ge,x,D,L);((be=ge.onVnodeUpdated)||me)&&mt(()=>{be&&Vt(be,x,M,v),me&&us(M,v,x,"updated")},D)},N=(v,M,x,D,L,Y,K)=>{for(let z=0;z<M.length;z++){const X=v[z],W=M[z],me=X.el&&(X.type===Re||!ms(X,W)||X.shapeFlag&70)?h(X.el):x;m(X,W,me,null,D,L,Y,K,!0)}},O=(v,M,x,D,L,Y,K)=>{if(x!==D){for(const z in D){if(io(z))continue;const X=D[z],W=x[z];X!==W&&z!=="value"&&i(v,z,W,X,K,M.children,L,Y,S)}if(x!==ze)for(const z in x)!io(z)&&!(z in D)&&i(v,z,x[z],null,K,M.children,L,Y,S);"value"in D&&i(v,"value",x.value,D.value)}},G=(v,M,x,D,L,Y,K,z,X)=>{const W=M.el=v?v.el:a(""),me=M.anchor=v?v.anchor:a("");let{patchFlag:fe,dynamicChildren:ge,slotScopeIds:be}=M;be&&(z=z?z.concat(be):be),v==null?(s(W,x,D),s(me,x,D),$(M.children,x,me,L,Y,K,z,X)):fe>0&&fe&64&&ge&&v.dynamicChildren?(N(v.dynamicChildren,ge,x,L,Y,K,z),(M.key!=null||L&&M===L.subTree)&&af(v,M,!0)):he(v,M,x,me,L,Y,K,z,X)},B=(v,M,x,D,L,Y,K,z,X)=>{M.slotScopeIds=z,v==null?M.shapeFlag&512?L.ctx.activate(M,x,D,K,X):ee(M,x,D,L,Y,K,X):Q(v,M,X)},ee=(v,M,x,D,L,Y,K)=>{const z=v.component=F_(v,D,L);if(ca(v)&&(z.ctx.renderer=Z),$_(z),z.asyncDep){if(L&&L.registerDep(z,re),!v.el){const X=z.subTree=Ae(pn);w(null,X,M,x)}return}re(z,v,M,x,L,Y,K)},Q=(v,M,x)=>{const D=M.component=v.component;if(Xg(v,M,x))if(D.asyncDep&&!D.asyncResolved){le(D,M,x);return}else D.next=M,zg(D.update),D.update();else M.component=v.component,M.el=v.el,D.vnode=M},re=(v,M,x,D,L,Y,K)=>{const z=()=>{if(v.isMounted){let{next:me,bu:fe,u:ge,parent:be,vnode:xe}=v,Fe=me,Ne;hs(v,!1),me?(me.el=xe.el,le(v,me,K)):me=xe,fe&&Js(fe),(Ne=me.props&&me.props.onVnodeBeforeUpdate)&&Vt(Ne,be,me,xe),hs(v,!0);const Me=Ca(v),Yt=v.subTree;v.subTree=Me,m(Yt,Me,h(Yt.el),j(Yt),v,L,Y),me.el=Me.el,Fe===null&&Qg(v,Me.el),ge&&mt(ge,L),(Ne=me.props&&me.props.onVnodeUpdated)&&mt(()=>Vt(Ne,be,me,xe),L)}else{let me;const{el:fe,props:ge}=M,{bm:be,m:xe,parent:Fe}=v,Ne=go(M);if(hs(v,!1),be&&Js(be),!Ne&&(me=ge&&ge.onVnodeBeforeMount)&&Vt(me,Fe,M),hs(v,!0),fe&&ce){const Me=()=>{v.subTree=Ca(v),ce(fe,v.subTree,v,L,null)};Ne?M.type.__asyncLoader().then(()=>!v.isUnmounted&&Me()):Me()}else{const Me=v.subTree=Ca(v);m(null,Me,x,D,v,L,Y),M.el=Me.el}if(xe&&mt(xe,L),!Ne&&(me=ge&&ge.onVnodeMounted)){const Me=M;mt(()=>Vt(me,Fe,Me),L)}M.shapeFlag&256&&v.a&&mt(v.a,L),v.isMounted=!0,M=x=D=null}},X=v.effect=new jc(z,()=>$d(v.update),v.scope),W=v.update=X.run.bind(X);W.id=v.uid,hs(v,!0),W()},le=(v,M,x)=>{M.component=v;const D=v.vnode.props;v.vnode=M,v.next=null,v_(v,M.props,D,x),M_(v,M.children,x),Mr(),Yc(void 0,v.update),Tr()},he=(v,M,x,D,L,Y,K,z,X=!1)=>{const W=v&&v.children,me=v?v.shapeFlag:0,fe=M.children,{patchFlag:ge,shapeFlag:be}=M;if(ge>0){if(ge&128){te(W,fe,x,D,L,Y,K,z,X);return}else if(ge&256){_e(W,fe,x,D,L,Y,K,z,X);return}}be&8?(me&16&&S(W,L,Y),fe!==W&&u(x,fe)):me&16?be&16?te(W,fe,x,D,L,Y,K,z,X):S(W,L,Y,!0):(me&8&&u(x,""),be&16&&$(fe,x,D,L,Y,K,z,X))},_e=(v,M,x,D,L,Y,K,z,X)=>{v=v||Xs,M=M||Xs;const W=v.length,me=M.length,fe=Math.min(W,me);let ge;for(ge=0;ge<fe;ge++){const be=M[ge]=X?Gn(M[ge]):un(M[ge]);m(v[ge],be,x,null,L,Y,K,z,X)}W>me?S(v,L,Y,!0,!1,fe):$(M,x,D,L,Y,K,z,X,fe)},te=(v,M,x,D,L,Y,K,z,X)=>{let W=0;const me=M.length;let fe=v.length-1,ge=me-1;for(;W<=fe&&W<=ge;){const be=v[W],xe=M[W]=X?Gn(M[W]):un(M[W]);if(ms(be,xe))m(be,xe,x,null,L,Y,K,z,X);else break;W++}for(;W<=fe&&W<=ge;){const be=v[fe],xe=M[ge]=X?Gn(M[ge]):un(M[ge]);if(ms(be,xe))m(be,xe,x,null,L,Y,K,z,X);else break;fe--,ge--}if(W>fe){if(W<=ge){const be=ge+1,xe=be<me?M[be].el:D;for(;W<=ge;)m(null,M[W]=X?Gn(M[W]):un(M[W]),x,xe,L,Y,K,z,X),W++}}else if(W>ge)for(;W<=fe;)V(v[W],L,Y,!0),W++;else{const be=W,xe=W,Fe=new Map;for(W=xe;W<=ge;W++){const It=M[W]=X?Gn(M[W]):un(M[W]);It.key!=null&&Fe.set(It.key,W)}let Ne,Me=0;const Yt=ge-xe+1;let Ls=!1,Ql=0;const Rr=new Array(Yt);for(W=0;W<Yt;W++)Rr[W]=0;for(W=be;W<=fe;W++){const It=v[W];if(Me>=Yt){V(It,L,Y,!0);continue}let cn;if(It.key!=null)cn=Fe.get(It.key);else for(Ne=xe;Ne<=ge;Ne++)if(Rr[Ne-xe]===0&&ms(It,M[Ne])){cn=Ne;break}cn===void 0?V(It,L,Y,!0):(Rr[cn-xe]=W+1,cn>=Ql?Ql=cn:Ls=!0,m(It,M[cn],x,null,L,Y,K,z,X),Me++)}const Jl=Ls?S_(Rr):Xs;for(Ne=Jl.length-1,W=Yt-1;W>=0;W--){const It=xe+W,cn=M[It],eu=It+1<me?M[It+1].el:D;Rr[W]===0?m(null,cn,x,eu,L,Y,K,z,X):Ls&&(Ne<0||W!==Jl[Ne]?R(cn,x,eu,2):Ne--)}}},R=(v,M,x,D,L=null)=>{const{el:Y,type:K,transition:z,children:X,shapeFlag:W}=v;if(W&6){R(v.component.subTree,M,x,D);return}if(W&128){v.suspense.move(M,x,D);return}if(W&64){K.move(v,M,x,Z);return}if(K===Re){s(Y,M,x);for(let fe=0;fe<X.length;fe++)R(X[fe],M,x,D);s(v.anchor,M,x);return}if(K===ao){I(v,M,x);return}if(D!==2&&W&1&&z)if(D===0)z.beforeEnter(Y),s(Y,M,x),mt(()=>z.enter(Y),L);else{const{leave:fe,delayLeave:ge,afterLeave:be}=z,xe=()=>s(Y,M,x),Fe=()=>{fe(Y,()=>{xe(),be&&be()})};ge?ge(Y,xe,Fe):Fe()}else s(Y,M,x)},V=(v,M,x,D=!1,L=!1)=>{const{type:Y,props:K,ref:z,children:X,dynamicChildren:W,shapeFlag:me,patchFlag:fe,dirs:ge}=v;if(z!=null&&uc(z,null,x,v,!0),me&256){M.ctx.deactivate(v);return}const be=me&1&&ge,xe=!go(v);let Fe;if(xe&&(Fe=K&&K.onVnodeBeforeUnmount)&&Vt(Fe,M,v),me&6)A(v.component,x,D);else{if(me&128){v.suspense.unmount(x,D);return}be&&us(v,null,M,"beforeUnmount"),me&64?v.type.remove(v,M,x,L,Z,D):W&&(Y!==Re||fe>0&&fe&64)?S(W,M,x,!1,!0):(Y===Re&&fe&384||!L&&me&16)&&S(X,M,x),D&&oe(v)}(xe&&(Fe=K&&K.onVnodeUnmounted)||be)&&mt(()=>{Fe&&Vt(Fe,M,v),be&&us(v,null,M,"unmounted")},x)},oe=v=>{const{type:M,el:x,anchor:D,transition:L}=v;if(M===Re){P(x,D);return}if(M===ao){T(v);return}const Y=()=>{r(x),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(v.shapeFlag&1&&L&&!L.persisted){const{leave:K,delayLeave:z}=L,X=()=>K(x,Y);z?z(v.el,Y,X):X()}else Y()},P=(v,M)=>{let x;for(;v!==M;)x=d(v),r(v),v=x;r(M)},A=(v,M,x)=>{const{bum:D,scope:L,update:Y,subTree:K,um:z}=v;D&&Js(D),L.stop(),Y&&(Y.active=!1,V(K,v,M,x)),z&&mt(z,M),mt(()=>{v.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},S=(v,M,x,D=!1,L=!1,Y=0)=>{for(let K=Y;K<v.length;K++)V(v[K],M,x,D,L)},j=v=>v.shapeFlag&6?j(v.component.subTree):v.shapeFlag&128?v.suspense.next():d(v.anchor||v.el),pe=(v,M,x)=>{v==null?M._vnode&&V(M._vnode,null,null,!0):m(M._vnode||null,v,M,null,null,null,x),Bd(),M._vnode=v},Z={p:m,um:V,m:R,r:oe,mt:ee,mc:$,pc:he,pbc:N,n:j,o:n};let de,ce;return e&&([de,ce]=e(Z)),{render:pe,hydrate:de,createApp:E_(pe,de)}}function hs({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function af(n,e,t=!1){const s=n.children,r=e.children;if(Te(s)&&Te(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Gn(r[i]),a.el=o.el),t||af(o,a))}}function S_(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=t[t.length-1],n[r]<l){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<l?i=a+1:o=a;l<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}const C_=n=>n.__isTeleport,sl="components";function yo(n,e){return uf(sl,n,!0,e)||n}const cf=Symbol();function lf(n){return ot(n)?uf(sl,n,!1)||n:n||cf}function uf(n,e,t=!0,s=!1){const r=jt||ut;if(r){const i=r.type;if(n===sl){const a=dc(i);if(a&&(a===e||a===fn(e)||a===ra(fn(e))))return i}const o=wu(r[n]||i[n],e)||wu(r.appContext[n],e);return!o&&s?i:o}}function wu(n,e){return n&&(n[e]||n[fn(e)]||n[ra(fn(e))])}const Re=Symbol(void 0),rl=Symbol(void 0),pn=Symbol(void 0),ao=Symbol(void 0),Yr=[];let Ts=null;function ie(n=!1){Yr.push(Ts=n?null:[])}function N_(){Yr.pop(),Ts=Yr[Yr.length-1]||null}let vo=1;function Mu(n){vo+=n}function hf(n){return n.dynamicChildren=vo>0?Ts||Xs:null,N_(),vo>0&&Ts&&Ts.push(n),n}function ue(n,e,t,s,r,i){return hf(q(n,e,t,s,r,i,!0))}function ht(n,e,t,s,r){return hf(Ae(n,e,t,s,r,!0))}function bo(n){return n?n.__v_isVNode===!0:!1}function ms(n,e){return n.type===e.type&&n.key===e.key}const ua="__vInternal",df=({key:n})=>n!=null?n:null,co=({ref:n,ref_key:e,ref_for:t})=>n!=null?ot(n)||gt(n)||Ee(n)?{i:jt,r:n,k:e,f:!!t}:n:null;function q(n,e=null,t=null,s=0,r=null,i=n===Re?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&df(e),ref:e&&co(e),scopeId:aa,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(ol(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=ot(t)?8:16),vo>0&&!o&&Ts&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ts.push(c),c}const Ae=k_;function k_(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===cf)&&(n=pn),bo(n)){const a=Ns(n,e,!0);return t&&ol(a,t),a}if(j_(n)&&(n=n.__vccOpts),e){e=I_(e);let{class:a,style:c}=e;a&&!ot(a)&&(e.class=ts(a)),Je(c)&&(Nd(c)&&!Te(c)&&(c=ft({},c)),e.style=rt(c))}const o=ot(n)?1:Jg(n)?128:C_(n)?64:Je(n)?4:Ee(n)?2:0;return q(n,e,t,s,r,o,i,!0)}function I_(n){return n?Nd(n)||ua in n?ft({},n):n:null}function Ns(n,e,t=!1){const{props:s,ref:r,patchFlag:i,children:o}=n,a=e?ff(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&df(a),ref:e&&e.ref?t&&r?Te(r)?r.concat(co(e)):[r,co(e)]:co(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Re?i===-1?16:i|16:i,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ns(n.ssContent),ssFallback:n.ssFallback&&Ns(n.ssFallback),el:n.el,anchor:n.anchor}}function il(n=" ",e=0){return Ae(rl,null,n,e)}function P_(n,e){const t=Ae(ao,null,n);return t.staticCount=e,t}function qt(n="",e=!1){return e?(ie(),ht(pn,null,n)):Ae(pn,null,n)}function un(n){return n==null||typeof n=="boolean"?Ae(pn):Te(n)?Ae(Re,null,n.slice()):typeof n=="object"?Gn(n):Ae(rl,null,String(n))}function Gn(n){return n.el===null||n.memo?n:Ns(n)}function ol(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Te(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ol(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(ua in e)?e._ctx=jt:r===3&&jt&&(jt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:jt},t=32):(e=String(e),s&64?(t=16,e=[il(e)]):t=8);n.children=e,n.shapeFlag|=t}function ff(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ts([e.class,s.class]));else if(r==="style")e.style=rt([e.style,s.style]);else if(ea(r)){const i=e[r],o=s[r];o&&i!==o&&!(Te(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Vt(n,e,t,s=null){Wt(n,e,7,[t,s])}function it(n,e,t,s){let r;const i=t&&t[s];if(Te(n)||ot(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,i&&i[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Je(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(n[l],l,a,i&&i[a])}}else r=[];return t&&(t[s]=r),r}const hc=n=>n?pf(n)?al(n)||n.proxy:hc(n.parent):null,wo=ft(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>hc(n.parent),$root:n=>hc(n.root),$emit:n=>n.emit,$options:n=>Jd(n),$forceUpdate:n=>()=>$d(n.update),$nextTick:n=>Ii.bind(n.proxy),$watch:n=>n_.bind(n)}),O_={get({_:n},e){const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(s!==ze&&ke(s,e))return o[e]=1,s[e];if(r!==ze&&ke(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&ke(l,e))return o[e]=3,i[e];if(t!==ze&&ke(t,e))return o[e]=4,t[e];ac&&(o[e]=0)}}const u=wo[e];let h,d;if(u)return e==="$attrs"&&Ft(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==ze&&ke(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,ke(d,e))return d[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return r!==ze&&ke(r,e)?(r[e]=t,!0):s!==ze&&ke(s,e)?(s[e]=t,!0):ke(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==ze&&ke(n,o)||e!==ze&&ke(e,o)||(a=i[0])&&ke(a,o)||ke(s,o)||ke(wo,o)||ke(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?this.set(n,e,t.get(),null):t.value!=null&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},R_=of();let D_=0;function F_(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||R_,i={uid:D_++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new lg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tf(s,r),emitsOptions:qd(s,r),emit:null,emitted:null,propsDefaults:ze,inheritAttrs:s.inheritAttrs,ctx:ze,data:ze,props:ze,attrs:ze,slots:ze,refs:ze,setupState:ze,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Yg.bind(null,i),n.ce&&n.ce(i),i}let ut=null;const Pi=()=>ut||jt,ar=n=>{ut=n,n.scope.on()},Es=()=>{ut&&ut.scope.off(),ut=null};function pf(n){return n.vnode.shapeFlag&4}let ci=!1;function $_(n,e=!1){ci=e;const{props:t,children:s}=n.vnode,r=pf(n);y_(n,t,r,e),w_(n,s);const i=r?V_(n,e):void 0;return ci=!1,i}function V_(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=kd(new Proxy(n.ctx,O_));const{setup:s}=t;if(s){const r=n.setupContext=s.length>1?B_(n):null;ar(n),Mr();const i=Qn(s,n,0,[n.props,r]);if(Tr(),Es(),pd(i)){if(i.then(Es,Es),e)return i.then(o=>{Tu(n,o,e)}).catch(o=>{oa(o,n,0)});n.asyncDep=i}else Tu(n,i,e)}else mf(n,e)}function Tu(n,e,t){Ee(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Je(e)&&(n.setupState=Dd(e)),mf(n,t)}let Eu;function mf(n,e,t){const s=n.type;if(!n.render){if(!e&&Eu&&!s.render){const r=s.template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,l=ft(ft({isCustomElement:i,delimiters:a},o),c);s.render=Eu(r,l)}}n.render=s.render||en}ar(n),Mr(),f_(n),Tr(),Es()}function L_(n){return new Proxy(n.attrs,{get(e,t){return Ft(n,"get","$attrs"),e[t]}})}function B_(n){const e=s=>{n.exposed=s||{}};let t;return{get attrs(){return t||(t=L_(n))},slots:n.slots,emit:n.emit,expose:e}}function al(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Dd(kd(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in wo)return wo[t](n)}}))}function dc(n){return Ee(n)&&n.displayName||n.name}function j_(n){return Ee(n)&&"__vccOpts"in n}const Pe=(n,e)=>qg(n,e,ci);function cl(n,e,t){const s=arguments.length;return s===2?Je(e)&&!Te(e)?bo(e)?Ae(n,null,[e]):Ae(n,e):Ae(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&bo(t)&&(t=[t]),Ae(n,e,t))}const q_="3.2.31",U_="http://www.w3.org/2000/svg",gs=typeof document!="undefined"?document:null,xu=gs&&gs.createElement("template"),W_={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e?gs.createElementNS(U_,n):gs.createElement(n,t?{is:t}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>gs.createTextNode(n),createComment:n=>gs.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>gs.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},cloneNode(n){const e=n.cloneNode(!0);return"_value"in n&&(e._value=n._value),e},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{xu.innerHTML=s?`<svg>${n}</svg>`:n;const a=xu.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function z_(n,e,t){const s=n._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function H_(n,e,t){const s=n.style,r=ot(t);if(t&&!r){for(const i in t)fc(s,i,t[i]);if(e&&!ot(e))for(const i in e)t[i]==null&&fc(s,i,"")}else{const i=s.display;r?e!==t&&(s.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(s.display=i)}}const Au=/\s*!important$/;function fc(n,e,t){if(Te(t))t.forEach(s=>fc(n,e,s));else if(e.startsWith("--"))n.setProperty(e,t);else{const s=G_(n,e);Au.test(t)?n.setProperty(wr(s),t.replace(Au,""),"important"):n[s]=t}}const Su=["Webkit","Moz","ms"],Pa={};function G_(n,e){const t=Pa[e];if(t)return t;let s=fn(e);if(s!=="filter"&&s in n)return Pa[e]=s;s=ra(s);for(let r=0;r<Su.length;r++){const i=Su[r]+s;if(i in n)return Pa[e]=i}return e}const Cu="http://www.w3.org/1999/xlink";function Y_(n,e,t,s,r){if(s&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Cu,e.slice(6,e.length)):n.setAttributeNS(Cu,e,t);else{const i=Xm(e);t==null||i&&!hd(t)?n.removeAttribute(e):n.setAttribute(e,i?"":t)}}function Z_(n,e,t,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const a=t==null?"":t;(n.value!==a||n.tagName==="OPTION")&&(n.value=a),t==null&&n.removeAttribute(e);return}if(t===""||t==null){const a=typeof n[e];if(a==="boolean"){n[e]=hd(t);return}else if(t==null&&a==="string"){n[e]="",n.removeAttribute(e);return}else if(a==="number"){try{n[e]=0}catch{}n.removeAttribute(e);return}}try{n[e]=t}catch{}}let Mo=Date.now,gf=!1;if(typeof window!="undefined"){Mo()>document.createEvent("Event").timeStamp&&(Mo=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);gf=!!(n&&Number(n[1])<=53)}let pc=0;const K_=Promise.resolve(),X_=()=>{pc=0},Q_=()=>pc||(K_.then(X_),pc=Mo());function Kn(n,e,t,s){n.addEventListener(e,t,s)}function J_(n,e,t,s){n.removeEventListener(e,t,s)}function e0(n,e,t,s,r=null){const i=n._vei||(n._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=t0(e);if(s){const l=i[e]=n0(s,r);Kn(n,a,l,c)}else o&&(J_(n,a,o,c),i[e]=void 0)}}const Nu=/(?:Once|Passive|Capture)$/;function t0(n){let e;if(Nu.test(n)){e={};let t;for(;t=n.match(Nu);)n=n.slice(0,n.length-t[0].length),e[t[0].toLowerCase()]=!0}return[wr(n.slice(2)),e]}function n0(n,e){const t=s=>{const r=s.timeStamp||Mo();(gf||r>=t.attached-1)&&Wt(s0(s,t.value),e,5,[s])};return t.value=n,t.attached=Q_(),t}function s0(n,e){if(Te(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const ku=/^on[a-z]/,r0=(n,e,t,s,r=!1,i,o,a,c)=>{e==="class"?z_(n,s,r):e==="style"?H_(n,t,s):ea(e)?Fc(e)||e0(n,e,t,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):i0(n,e,s,r))?Z_(n,e,s,i,o,a,c):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Y_(n,e,s,r))};function i0(n,e,t,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&ku.test(e)&&Ee(t)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||ku.test(e)&&ot(t)?!1:e in n}const qn="transition",Fr="animation",Oi=(n,{slots:e})=>cl(zd,yf(n),e);Oi.displayName="Transition";const _f={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},o0=Oi.props=ft({},zd.props,_f),ds=(n,e=[])=>{Te(n)?n.forEach(t=>t(...e)):n&&n(...e)},Iu=n=>n?Te(n)?n.some(e=>e.length>1):n.length>1:!1;function yf(n){const e={};for(const O in n)O in _f||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=a0(r),g=p&&p[0],m=p&&p[1],{onBeforeEnter:_,onEnter:w,onEnterCancelled:k,onLeave:I,onLeaveCancelled:T,onBeforeAppear:E=_,onAppear:y=w,onAppearCancelled:C=k}=e,$=(O,G,B)=>{ps(O,G?u:a),ps(O,G?l:o),B&&B()},U=(O,G)=>{ps(O,f),ps(O,d),G&&G()},N=O=>(G,B)=>{const ee=O?y:w,Q=()=>$(G,O,B);ds(ee,[G,Q]),Pu(()=>{ps(G,O?c:i),xn(G,O?u:a),Iu(ee)||Ou(G,s,g,Q)})};return ft(e,{onBeforeEnter(O){ds(_,[O]),xn(O,i),xn(O,o)},onBeforeAppear(O){ds(E,[O]),xn(O,c),xn(O,l)},onEnter:N(!1),onAppear:N(!0),onLeave(O,G){const B=()=>U(O,G);xn(O,h),bf(),xn(O,d),Pu(()=>{ps(O,h),xn(O,f),Iu(I)||Ou(O,s,m,B)}),ds(I,[O,B])},onEnterCancelled(O){$(O,!1),ds(k,[O])},onAppearCancelled(O){$(O,!0),ds(C,[O])},onLeaveCancelled(O){U(O),ds(T,[O])}})}function a0(n){if(n==null)return null;if(Je(n))return[Oa(n.enter),Oa(n.leave)];{const e=Oa(n);return[e,e]}}function Oa(n){return fo(n)}function xn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function ps(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function Pu(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let c0=0;function Ou(n,e,t,s){const r=n._endId=++c0,i=()=>{r===n._endId&&s()};if(t)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=vf(n,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,d),i()},d=f=>{f.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,d)}function vf(n,e){const t=window.getComputedStyle(n),s=p=>(t[p]||"").split(", "),r=s(qn+"Delay"),i=s(qn+"Duration"),o=Ru(r,i),a=s(Fr+"Delay"),c=s(Fr+"Duration"),l=Ru(a,c);let u=null,h=0,d=0;e===qn?o>0&&(u=qn,h=o,d=i.length):e===Fr?l>0&&(u=Fr,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?qn:Fr:null,d=u?u===qn?i.length:c.length:0);const f=u===qn&&/\b(transform|all)(,|$)/.test(t[qn+"Property"]);return{type:u,timeout:h,propCount:d,hasTransform:f}}function Ru(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Du(t)+Du(n[s])))}function Du(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function bf(){return document.body.offsetHeight}const wf=new WeakMap,Mf=new WeakMap,l0={name:"TransitionGroup",props:ft({},o0,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Pi(),s=Wd();let r,i;return el(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!f0(r[0].el,t.vnode.el,o))return;r.forEach(u0),r.forEach(h0);const a=r.filter(d0);bf(),a.forEach(c=>{const l=c.el,u=l.style;xn(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=l._moveCb=d=>{d&&d.target!==l||(!d||/transform$/.test(d.propertyName))&&(l.removeEventListener("transitionend",h),l._moveCb=null,ps(l,o))};l.addEventListener("transitionend",h)})}),()=>{const o=Oe(n),a=yf(o);let c=o.tag||Re;r=i,i=e.default?Jc(e.default()):[];for(let l=0;l<i.length;l++){const u=i[l];u.key!=null&&or(u,ai(u,a,s,t))}if(r)for(let l=0;l<r.length;l++){const u=r[l];or(u,ai(u,a,s,t)),wf.set(u,u.el.getBoundingClientRect())}return Ae(c,null,i)}}},Tf=l0;function u0(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function h0(n){Mf.set(n,n.el.getBoundingClientRect())}function d0(n){const e=wf.get(n),t=Mf.get(n),s=e.left-t.left,r=e.top-t.top;if(s||r){const i=n.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",n}}function f0(n,e,t){const s=n.cloneNode();n._vtc&&n._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),t.split(/\s+/).forEach(o=>o&&s.classList.add(o)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:i}=vf(s);return r.removeChild(s),i}const cr=n=>{const e=n.props["onUpdate:modelValue"];return Te(e)?t=>Js(e,t):e};function p0(n){n.target.composing=!0}function Fu(n){const e=n.target;e.composing&&(e.composing=!1,m0(e,"input"))}function m0(n,e){const t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}const g0={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n._assign=cr(r);const i=s||r.props&&r.props.type==="number";Kn(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t?a=a.trim():i&&(a=fo(a)),n._assign(a)}),t&&Kn(n,"change",()=>{n.value=n.value.trim()}),e||(Kn(n,"compositionstart",p0),Kn(n,"compositionend",Fu),Kn(n,"change",Fu))},mounted(n,{value:e}){n.value=e==null?"":e},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:s,number:r}},i){if(n._assign=cr(i),n.composing||document.activeElement===n&&(t||s&&n.value.trim()===e||(r||n.type==="number")&&fo(n.value)===e))return;const o=e==null?"":e;n.value!==o&&(n.value=o)}},_0={deep:!0,created(n,e,t){n._assign=cr(t),Kn(n,"change",()=>{const s=n._modelValue,r=Ef(n),i=n.checked,o=n._assign;if(Te(s)){const a=dd(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const l=[...s];l.splice(a,1),o(l)}}else if(ta(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(xf(n,i))})},mounted:$u,beforeUpdate(n,e,t){n._assign=cr(t),$u(n,e,t)}};function $u(n,{value:e,oldValue:t},s){n._modelValue=e,Te(e)?n.checked=dd(e,s.props.value)>-1:ta(e)?n.checked=e.has(s.props.value):e!==t&&(n.checked=ir(e,xf(n,!0)))}const y0={created(n,{value:e},t){n.checked=ir(e,t.props.value),n._assign=cr(t),Kn(n,"change",()=>{n._assign(Ef(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n._assign=cr(s),e!==t&&(n.checked=ir(e,s.props.value))}};function Ef(n){return"_value"in n?n._value:n.value}function xf(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const v0=["ctrl","shift","alt","meta"],b0={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>v0.some(t=>n[`${t}Key`]&&!e.includes(t))},Af=(n,e)=>(t,...s)=>{for(let r=0;r<e.length;r++){const i=b0[e[r]];if(i&&i(t,e))return}return n(t,...s)},lr={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):$r(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),$r(n,!0),s.enter(n)):s.leave(n,()=>{$r(n,!1)}):$r(n,e))},beforeUnmount(n,{value:e}){$r(n,e)}};function $r(n,e){n.style.display=e?n._vod:"none"}const w0=ft({patchProp:r0},W_);let Vu;function M0(){return Vu||(Vu=x_(w0))}const T0=(...n)=>{const e=M0().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=E0(s);if(!r)return;const i=e._component;!Ee(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function E0(n){return ot(n)?document.querySelector(n):n}function Ri(n){return hg()?(dg(n),!0):!1}const ll=typeof window!="undefined",x0=n=>typeof n=="string",Lu=(n,e,t)=>Math.min(t,Math.max(e,n)),Ra=()=>{};function A0(n,e){function t(...s){n(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})}return t}const Sf=n=>n();function S0(n=Sf){const e=Be(!0);function t(){e.value=!1}function s(){e.value=!0}return{isActive:e,pause:t,resume:s,eventFilter:(...i)=>{e.value&&n(...i)}}}function C0(n,e=!0){Pi()?Kd(n):e?n():Ii(n)}function N0(n,e=!0){Pi()?Er(n):e?n():Ii(n)}var Bu=Object.getOwnPropertySymbols,k0=Object.prototype.hasOwnProperty,I0=Object.prototype.propertyIsEnumerable,P0=(n,e)=>{var t={};for(var s in n)k0.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Bu)for(var s of Bu(n))e.indexOf(s)<0&&I0.call(n,s)&&(t[s]=n[s]);return t};function O0(n,e,t={}){const s=t,{eventFilter:r=Sf}=s,i=P0(s,["eventFilter"]);return St(n,A0(r,e),i)}var R0=Object.defineProperty,D0=Object.defineProperties,F0=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,Nf=Object.prototype.propertyIsEnumerable,ju=(n,e,t)=>e in n?R0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$0=(n,e)=>{for(var t in e||(e={}))Cf.call(e,t)&&ju(n,t,e[t]);if(To)for(var t of To(e))Nf.call(e,t)&&ju(n,t,e[t]);return n},V0=(n,e)=>D0(n,F0(e)),L0=(n,e)=>{var t={};for(var s in n)Cf.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&To)for(var s of To(n))e.indexOf(s)<0&&Nf.call(n,s)&&(t[s]=n[s]);return t};function B0(n,e,t={}){const s=t,{eventFilter:r}=s,i=L0(s,["eventFilter"]),{eventFilter:o,pause:a,resume:c,isActive:l}=S0(r);return{stop:O0(n,e,V0($0({},i),{eventFilter:o})),pause:a,resume:c,isActive:l}}function Jn(n){var e;const t=b(n);return(e=t==null?void 0:t.$el)!=null?e:t}const mn=ll?window:void 0,j0=ll?window.document:void 0;function ur(...n){let e,t,s,r;if(x0(n[0])?([t,s,r]=n,e=mn):[e,t,s,r]=n,!e)return Ra;let i=Ra;const o=St(()=>Jn(e),c=>{i(),c&&(c.addEventListener(t,s,r),i=()=>{c.removeEventListener(t,s,r),i=Ra})},{immediate:!0,flush:"post"}),a=()=>{o(),i()};return Ri(a),a}function kf(n,e,t={}){const{window:s=mn,ignore:r,capture:i=!0}=t;if(!s)return;const o=Be(!0),c=[ur(s,"click",u=>{const h=Jn(n),d=u.composedPath();!h||h===u.target||d.includes(h)||!o.value||r&&r.length>0&&r.some(f=>{const p=Jn(f);return p&&(u.target===p||d.includes(p))})||e(u)},{passive:!0,capture:i}),ur(s,"pointerdown",u=>{const h=Jn(n);o.value=!!h&&!u.composedPath().includes(h)},{passive:!0})];return()=>c.forEach(u=>u())}const q0=n=>typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):n?()=>!0:()=>!1;function U0(n,e,t={}){const{target:s=mn,eventName:r="keydown",passive:i=!1}=t,o=q0(n);return ur(s,r,c=>{o(c)&&e(c)},i)}function W0(n,e={}){const{window:t=mn}=e;let s;const r=Be(!1),i=()=>{!t||(s||(s=t.matchMedia(n)),r.value=s.matches)};return C0(()=>{i(),s&&("addEventListener"in s?s.addEventListener("change",i):s.addListener(i),Ri(()=>{"removeEventListener"in s?s.removeEventListener("change",i):s.removeListener(i)}))}),r}function mc(n,e,t){const s=Be(n);return Pe({get(){return s.value=Lu(s.value,b(e),b(t))},set(r){s.value=Lu(r,b(e),b(t))}})}const gc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_c="__vueuse_ssr_handlers__";gc[_c]=gc[_c]||{};const z0=gc[_c];function If(n,e){return z0[n]||e}function H0(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"||Array.isArray(n)?"object":Number.isNaN(n)?"any":"number"}const G0={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},date:{read:n=>new Date(n),write:n=>n.toISOString()}};function tn(n,e,t,s={}){var r;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,shallow:l,window:u=mn,eventFilter:h,onError:d=E=>{console.error(E)}}=s,f=(l?Od:Be)(e);if(!t)try{t=If("getDefaultStorage",()=>{var E;return(E=mn)==null?void 0:E.localStorage})()}catch(E){d(E)}if(!t)return f;const p=b(e),g=H0(p),m=(r=s.serializer)!=null?r:G0[g],{pause:_,resume:w}=B0(f,()=>k(f.value),{flush:i,deep:o,eventFilter:h});return u&&a&&ur(u,"storage",T),T(),f;function k(E){try{E==null?t.removeItem(n):t.setItem(n,m.write(E))}catch(y){d(y)}}function I(E){if(!(E&&E.key!==n)){_();try{const y=E?E.newValue:t.getItem(n);return y==null?(c&&p!==null&&t.setItem(n,m.write(p)),p):typeof y!="string"?y:m.read(y)}catch(y){d(y)}finally{w()}}}function T(E){E&&E.key!==n||(f.value=I(E))}}function Pf(n){return W0("(prefers-color-scheme: dark)",n)}var Y0=Object.defineProperty,qu=Object.getOwnPropertySymbols,Z0=Object.prototype.hasOwnProperty,K0=Object.prototype.propertyIsEnumerable,Uu=(n,e,t)=>e in n?Y0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X0=(n,e)=>{for(var t in e||(e={}))Z0.call(e,t)&&Uu(n,t,e[t]);if(qu)for(var t of qu(e))K0.call(e,t)&&Uu(n,t,e[t]);return n};function Q0(n={}){const{selector:e="html",attribute:t="class",window:s=mn,storage:r,storageKey:i="vueuse-color-scheme",listenToStorageChanges:o=!0,storageRef:a}=n,c=X0({auto:"",light:"light",dark:"dark"},n.modes||{}),l=Pf({window:s}),u=Pe(()=>l.value?"dark":"light"),h=a||(i==null?Be("auto"):tn(i,"auto",r,{window:s,listenToStorageChanges:o})),d=Pe({get(){return h.value==="auto"?u.value:h.value},set(m){h.value=m}}),f=If("updateHTMLAttrs",(m,_,w)=>{const k=s==null?void 0:s.document.querySelector(m);if(!!k)if(_==="class"){const I=w.split(/\s/g);Object.values(c).flatMap(T=>(T||"").split(/\s/g)).filter(Boolean).forEach(T=>{I.includes(T)?k.classList.add(T):k.classList.remove(T)})}else k.setAttribute(_,w)});function p(m){var _;f(e,t,(_=c[m])!=null?_:m)}function g(m){n.onChanged?n.onChanged(m,p):p(m)}return St(d,g,{flush:"post",immediate:!0}),N0(()=>g(d.value)),d}var J0=Object.defineProperty,e1=Object.defineProperties,t1=Object.getOwnPropertyDescriptors,Wu=Object.getOwnPropertySymbols,n1=Object.prototype.hasOwnProperty,s1=Object.prototype.propertyIsEnumerable,zu=(n,e,t)=>e in n?J0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,r1=(n,e)=>{for(var t in e||(e={}))n1.call(e,t)&&zu(n,t,e[t]);if(Wu)for(var t of Wu(e))s1.call(e,t)&&zu(n,t,e[t]);return n},i1=(n,e)=>e1(n,t1(e));function o1(n={}){const{valueDark:e="dark",valueLight:t="",window:s=mn}=n,r=Q0(i1(r1({},n),{onChanged:(a,c)=>{var l;n.onChanged?(l=n.onChanged)==null||l.call(n,a==="dark"):c(a)},modes:{dark:e,light:t}})),i=Pf({window:s});return Pe({get(){return r.value==="dark"},set(a){a===i.value?r.value="auto":r.value=a?"dark":"light"}})}var Hu=Object.getOwnPropertySymbols,a1=Object.prototype.hasOwnProperty,c1=Object.prototype.propertyIsEnumerable,l1=(n,e)=>{var t={};for(var s in n)a1.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Hu)for(var s of Hu(n))e.indexOf(s)<0&&c1.call(n,s)&&(t[s]=n[s]);return t};function u1(n,e,t={}){const s=t,{window:r=mn}=s,i=l1(s,["window"]);let o;const a=r&&"ResizeObserver"in r,c=()=>{o&&(o.disconnect(),o=void 0)},l=St(()=>Jn(n),h=>{c(),a&&r&&h&&(o=new ResizeObserver(e),o.observe(h,i))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return Ri(u),{isSupported:a,stop:u}}function h1(n){const e=Be(0),t=Be(0),s=Be(0),r=Be(0),i=Be(0),o=Be(0),a=Be(0),c=Be(0);function l(){const u=Jn(n);if(!u){e.value=0,t.value=0,s.value=0,r.value=0,i.value=0,o.value=0,a.value=0,c.value=0;return}const h=u.getBoundingClientRect();e.value=h.height,t.value=h.bottom,s.value=h.left,r.value=h.right,i.value=h.top,o.value=h.width,a.value=h.x,c.value=h.y}return ur("scroll",l,!0),u1(n,l),St(()=>Jn(n),u=>!u&&l()),{height:e,bottom:t,left:s,right:r,top:i,width:o,x:a,y:c,update:l}}function ul(n,e={}){const{immediate:t=!0,window:s=mn}=e,r=Be(!1);function i(){!r.value||!s||(n(),s.requestAnimationFrame(i))}function o(){!r.value&&s&&(r.value=!0,i())}function a(){r.value=!1}return t&&o(),Ri(a),{isActive:r,pause:a,resume:o}}const Gu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];function Yu(n,e={}){const{document:t=j0,autoExit:s=!1}=e,r=n||(t==null?void 0:t.querySelector("html")),i=Be(!1);let o=!1,a=Gu[0];if(!t)o=!1;else for(const g of Gu)if(g[1]in t){a=g,o=!0;break}const[c,l,u,,h]=a;async function d(){!o||(t!=null&&t[u]&&await t[l](),i.value=!1)}async function f(){if(!o)return;await d();const g=Jn(r);g&&(await g[c](),i.value=!0)}async function p(){i.value?await d():await f()}return t&&ur(t,h,()=>{i.value=!!(t!=null&&t[u])},!1),s&&Ri(d),{isSupported:o,isFullscreen:i,enter:f,exit:d,toggle:p}}var Zu,Ku;ll&&(window==null?void 0:window.navigator)&&((Zu=window==null?void 0:window.navigator)==null?void 0:Zu.platform)&&/iP(ad|hone|od)/.test((Ku=window==null?void 0:window.navigator)==null?void 0:Ku.platform);const Of="14.8.38",Xu=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Qu=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),yc=(n,e)=>({startTime:e,type:"setValue",value:n}),Rf=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Df=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),Gs=n=>n.type==="exponentialRampToValue",Eo=n=>n.type==="linearRampToValue",Yn=n=>Gs(n)||Eo(n),hl=n=>n.type==="setValue",An=n=>n.type==="setValueCurve",xo=(n,e,t,s)=>{const r=n[e];return r===void 0?s:Yn(r)||hl(r)?r.value:An(r)?r.values[r.values.length-1]:Df(t,xo(n,e-1,r.startTime,s),r)},Ju=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:Yn(t)?[t.endTime,t.value]:hl(t)?[t.startTime,t.value]:An(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,xo(n,e-1,t.startTime,r)],vc=n=>n.type==="cancelAndHold",bc=n=>n.type==="cancelScheduledValues",Un=n=>vc(n)||bc(n)?n.cancelTime:Gs(n)||Eo(n)?n.endTime:n.startTime,eh=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,th=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),d1=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},f1=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return d1(s,r)},Xi=n=>n.type==="setTarget";class p1{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Un(e);if(vc(e)||bc(e)){const s=this._automationEvents.findIndex(i=>bc(e)&&An(i)?i.startTime+i.duration>=t:Un(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),vc(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Yn(r)){if(Xi(i))throw new Error("The internal list is malformed.");const o=An(i)?i.startTime+i.duration:Un(i),a=An(i)?i.values[i.values.length-1]:i.value,c=Gs(r)?eh(t,o,a,r):th(t,o,a,r),l=Gs(r)?Xu(c,t,this._currenTime):Qu(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&Xi(i)&&this._automationEvents.push(yc(this.getValue(t),t)),i!==void 0&&An(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=Rf(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>Un(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&An(r)&&Un(r)+r.duration>t)return!1;const i=Gs(e)?Xu(e.value,e.endTime,this._currenTime):Eo(e)?Qu(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(An(e)&&t+e.duration>Un(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>Un(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];Xi(r)&&s.unshift(yc(xo(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Un(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Xi(i)&&(s===void 0||!Yn(s)||s.insertTime>e))return Df(e,xo(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&hl(i)&&(s===void 0||!Yn(s)))return i.value;if(i!==void 0&&An(i)&&(s===void 0||!Yn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?f1(e,i):i.values[i.values.length-1];if(i!==void 0&&Yn(i)&&(s===void 0||!Yn(s)))return i.value;if(s!==void 0&&Gs(s)){const[o,a]=Ju(this._automationEvents,r,i,s,this._defaultValue);return eh(e,o,a,s)}if(s!==void 0&&Eo(s)){const[o,a]=Ju(this._automationEvents,r,i,s,this._defaultValue);return th(e,o,a,s)}return this._defaultValue}}const m1=n=>({cancelTime:n,type:"cancelAndHold"}),g1=n=>({cancelTime:n,type:"cancelScheduledValues"}),_1=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),y1=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),v1=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),b1=()=>new DOMException("","AbortError"),w1=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},M1=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},T1=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},hr=new WeakSet,Ff=new WeakMap,dl=new WeakMap,$f=new WeakMap,fl=new WeakMap,ha=new WeakMap,Vf=new WeakMap,wc=new WeakMap,Mc=new WeakMap,Tc=new WeakMap,Lf={construct(){return Lf}},E1=n=>{try{const e=new Proxy(n,Lf);new e}catch{return!1}return!0},nh=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,sh=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(nh);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(nh)}return[t.join(";"),s]},rh=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ih=n=>{if(!E1(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},x1=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,g,m={credentials:"omit"})=>{const _=u.get(p);if(_!==void 0&&_.has(g))return Promise.resolve();const w=l.get(p);if(w!==void 0){const T=w.get(g);if(T!==void 0)return T}const k=i(p),I=k.audioWorklet===void 0?r(g).then(([T,E])=>{const[y,C]=sh(T,E),$=`${y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t($)}).then(()=>{const T=d._AWGS.pop();if(T===void 0)throw new SyntaxError;s(k.currentTime,k.sampleRate,()=>T(class{},void 0,(E,y)=>{if(E.trim()==="")throw e();const C=Mc.get(k);if(C!==void 0){if(C.has(E))throw e();ih(y),rh(y.parameterDescriptors),C.set(E,y)}else ih(y),rh(y.parameterDescriptors),Mc.set(k,new Map([[E,y]]))},k.sampleRate,void 0,void 0))}):Promise.all([r(g),Promise.resolve(n(h,h))]).then(([[T,E],y])=>{const C=f+1;f=C;const[$,U]=sh(T,E),B=`${$};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,ee=new Blob([B],{type:"application/javascript; charset=utf-8"}),Q=URL.createObjectURL(ee);return k.audioWorklet.addModule(Q,m).then(()=>{if(a(k))return k;const re=o(k);return re.audioWorklet.addModule(Q,m).then(()=>re)}).then(re=>{if(c===null)throw new SyntaxError;try{new c(re,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Q))});return w===void 0?l.set(p,new Map([[g,I]])):w.set(g,I),I.then(()=>{const T=u.get(p);T===void 0?u.set(p,new Set([g])):T.add(g)}).finally(()=>{const T=l.get(p);T!==void 0&&T.delete(g)}),I}},nn=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},da=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Bf=(n,e,t,s)=>{const r=nn(n,e),i=da(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Di=n=>nn(Vf,n),dr=n=>{if(hr.has(n))throw new Error("The AudioNode is already stored.");hr.add(n),Di(n).forEach(e=>e(!0))},jf=n=>"port"in n,Fi=n=>{if(!hr.has(n))throw new Error("The AudioNode is not stored.");hr.delete(n),Di(n).forEach(e=>e(!1))},Ec=(n,e)=>{!jf(n)&&e.every(t=>t.size===0)&&Fi(n)},A1=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,g,m,_,w)=>{const{activeInputs:k,passiveInputs:I}=i(g),{outputs:T}=i(p),E=a(p),y=C=>{const $=c(g),U=c(p);if(C){const N=Bf(I,p,m,_);n(k,p,N,!1),!w&&!h(p)&&t(U,$,m,_),d(g)&&dr(g)}else{const N=s(k,p,m,_);e(I,_,N,!1),!w&&!h(p)&&r(U,$,m,_);const O=o(g);if(O===0)u(g)&&Ec(g,k);else{const G=f.get(g);G!==void 0&&clearTimeout(G),f.set(g,setTimeout(()=>{u(g)&&Ec(g,k)},O*1e3))}}};return l(T,[g,m,_],C=>C[0]===g&&C[1]===m&&C[2]===_,!0)?(E.add(y),u(p)?n(k,p,[m,_,y],!0):e(I,_,[p,m,y],!0),!0):!1}},S1=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},C1=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},N1=n=>(e,t)=>{n(e).add(t)},k1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},I1=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u=ne(ne({},k1),c),h=s(l,u),d=i(l)?e():null;super(a,!1,h,d);this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},bt=(n,e)=>n.context===e,P1=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!bt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Ao=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},vn=()=>new DOMException("","IndexSizeError"),pl=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?vn():s}})(n.getChannelData)},O1={numberOfChannels:1},R1=(n,e,t,s,r,i,o,a)=>{let c=null;return class qf{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}=ne(ne({},O1),u);c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(o(p),pl(p)):e(Ao,()=>Ao(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===qf.prototype||n.has(u)}}},xt=-34028234663852886e22,Mt=-xt,kn=n=>hr.has(n),D1={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},F1=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=ne(ne({},D1),u),f=r(h,d),p=o(h),g=p?e():null;super(l,!1,f,g);this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Mt,xt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){dr(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),kn(this)&&Fi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},$1=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=bt(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},V1=n=>"playbackRate"in n,L1=n=>"frequency"in n&&"gain"in n,B1=n=>"offset"in n,j1=n=>!("frequency"in n)&&"gain"in n,q1=n=>"detune"in n&&"frequency"in n,U1=n=>"pan"in n,Tt=n=>nn(Ff,n),$i=n=>nn($f,n),xc=(n,e)=>{const{activeInputs:t}=Tt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||xc(i,[...e,n])}));const s=V1(n)?[n.playbackRate]:jf(n)?Array.from(n.parameters.values()):L1(n)?[n.Q,n.detune,n.frequency,n.gain]:B1(n)?[n.offset]:j1(n)?[n.gain]:q1(n)?[n.detune,n.frequency]:U1(n)?[n.pan]:[];for(const r of s){const i=$i(r);i!==void 0&&i.activeInputs.forEach(([o])=>xc(o,e))}kn(n)&&Fi(n)},Uf=n=>{xc(n.destination,[])},W1=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),z1=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(h===null)throw s();if(!W1(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Uf(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},H1=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),p=d?e(a):null;super(l,!1,f,p);this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},G1=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},Y1=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const T=new Float32Array(1),E=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),y=o(l);let C=!1,$=[0,0,-1,0,1,0],U=[0,0,0];const N=()=>{if(C)return;C=!0;const ee=s(l,256,9,0);ee.onaudioprocess=({inputBuffer:Q})=>{const re=[i(Q,T,0),i(Q,T,1),i(Q,T,2),i(Q,T,3),i(Q,T,4),i(Q,T,5)];re.some((he,_e)=>he!==$[_e])&&(u.setOrientation(...re),$=re);const le=[i(Q,T,6),i(Q,T,7),i(Q,T,8)];le.some((he,_e)=>he!==U[_e])&&(u.setPosition(...le),U=le)},E.connect(ee)},O=ee=>Q=>{Q!==$[ee]&&($[ee]=Q,u.setOrientation(...$))},G=ee=>Q=>{Q!==U[ee]&&(U[ee]=Q,u.setPosition(...U))},B=(ee,Q,re)=>{const le=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q});le.connect(E,0,ee),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return Q}});const he=n({context:c},y,le.offset,Mt,xt);return a(he,"value",_e=>()=>_e.call(he),_e=>te=>{try{_e.call(he,te)}catch(R){if(R.code!==9)throw R}N(),y&&re(te)}),he.cancelAndHoldAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.cancelAndHoldAtTime),he.cancelScheduledValues=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.cancelScheduledValues),he.exponentialRampToValueAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.exponentialRampToValueAtTime),he.linearRampToValueAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.linearRampToValueAtTime),he.setTargetAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.setTargetAtTime),he.setValueAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.setValueAtTime),he.setValueCurveAtTime=(_e=>y?()=>{throw r()}:(...te)=>{const R=_e.apply(he,te);return N(),R})(he.setValueCurveAtTime),he};return{forwardX:B(0,0,O(0)),forwardY:B(1,0,O(1)),forwardZ:B(2,-1,O(2)),positionX:B(6,0,G(0)),positionY:B(7,0,G(1)),positionZ:B(8,0,G(2)),upX:B(3,0,O(3)),upY:B(4,1,O(4)),upZ:B(5,0,O(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:g,positionY:m,positionZ:_,upX:w,upY:k,upZ:I}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return m},get positionZ(){return _},get upX(){return w},get upY(){return k},get upZ(){return I}}},So=n=>"context"in n,Vi=n=>So(n[0]),Fs=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},oh=(n,e,[t,s],r)=>{Fs(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},ah=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):Fs(i,[t,s],o=>o[0]===t,r)},xr=n=>"inputs"in n,Co=(n,e,t,s)=>{if(xr(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},Wf=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},Z1=(n,e,t)=>da(n,s=>s[0]===e&&s[1]===t),zf=(n,e)=>{if(!Di(n).delete(e))throw new Error("Missing the expected event listener.")},Hf=(n,e,t)=>{const s=nn(n,e),r=da(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},No=(n,e,t,s)=>{xr(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Ye=n=>nn(dl,n),li=n=>nn(fl,n),ks=n=>wc.has(n),lo=n=>!hr.has(n),ch=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),Da=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},ko=n=>"context"in n,K1=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=ko(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{ko(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},X1=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=$i(e),{outputs:o}=Tt(n),a=Di(n),c=l=>{const u=Ye(n),h=li(e);if(l){const d=Hf(i,n,t);oh(r,n,d,!1),!s&&!ks(n)&&u.connect(h,t)}else{const d=Z1(r,n,t);ah(i,d,!1),!s&&!ks(n)&&u.disconnect(h,t)}};return Fs(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),kn(n)?oh(r,n,[t,c],!0):ah(i,[n,t,c],!0),!0):!1},Q1=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Tt(e),o=Wf(r[s],n,t);return o===null?[Bf(i,n,t,s)[2],!1]:[o[2],!0]},J1=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=$i(e),i=Wf(s,n,t);return i===null?[Hf(r,n,t)[1],!1]:[i[2],!0]},ml=(n,e,t,s,r)=>{const[i,o]=Q1(n,t,s,r);if(i!==null&&(zf(n,i),o&&!e&&!ks(n)&&No(Ye(n),Ye(t),s,r)),kn(t)){const{activeInputs:a}=Tt(t);Ec(t,a)}},gl=(n,e,t,s)=>{const[r,i]=J1(n,t,s);r!==null&&(zf(n,r),i&&!e&&!ks(n)&&Ye(n).disconnect(li(t),s))},ey=(n,e)=>{const t=Tt(n),s=[];for(const r of t.outputs)Vi(r)?ml(n,e,...r):gl(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},ty=(n,e,t)=>{const s=Tt(n),r=[];for(const i of s.outputs)i[1]===t&&(Vi(i)?ml(n,e,...i):gl(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},ny=(n,e,t,s,r)=>{const i=Tt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Vi(o)?ml(n,e,...o):gl(n,e,...o),i.outputs.delete(o),o[0]))},sy=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,g)=>class extends l{constructor(_,w,k,I){super(k);this._context=_,this._nativeAudioNode=k;const T=u(_);h(T)&&t(ch,()=>ch(T,g))!==!0&&K1(k),dl.set(this,k),Vf.set(this,new Set),_.state!=="closed"&&w&&dr(this),n(this,I,k)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,w=0,k=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const I=u(this._context),T=p(I);if(d(_)||f(_))throw i();if(So(_)){const C=Ye(_);try{const U=Co(this._nativeAudioNode,C,w,k),N=lo(this);(T||N)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!N&&lo(_)&&dr(_)}catch(U){throw U.code===12?i():U}if(e(this,_,w,k,T)){const U=c([this],_);Da(U,s(T))}return _}const E=li(_);if(E.name==="playbackRate"&&E.maxValue===1024)throw o();try{this._nativeAudioNode.connect(E,w),(T||lo(this))&&this._nativeAudioNode.disconnect(E,w)}catch(C){throw C.code===12?i():C}if(X1(this,_,w,T)){const C=c([this],_);Da(C,s(T))}}disconnect(_,w,k){let I;const T=u(this._context),E=p(T);if(_===void 0)I=ey(this,E);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();I=ty(this,E,_)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||So(_)&&k!==void 0&&(k<0||k>=_.numberOfInputs))throw r();if(I=ny(this,E,_,w,k),I.length===0)throw i()}for(const y of I){const C=c([this],y);Da(C,a)}}},ry=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,g,m=null,_=null)=>{const w=new p1(g.defaultValue),k=p?s(w):null,I={get defaultValue(){return g.defaultValue},get maxValue(){return m===null?g.maxValue:m},get minValue(){return _===null?g.minValue:_},get value(){return g.value},set value(T){g.value=T,I.setValueAtTime(T,f.context.currentTime)},cancelAndHoldAtTime(T){if(typeof g.cancelAndHoldAtTime=="function")k===null&&w.flush(f.context.currentTime),w.add(r(T)),g.cancelAndHoldAtTime(T);else{const E=Array.from(w).pop();k===null&&w.flush(f.context.currentTime),w.add(r(T));const y=Array.from(w).pop();g.cancelScheduledValues(T),E!==y&&y!==void 0&&(y.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(y.value,y.endTime):y.type==="linearRampToValue"?g.linearRampToValueAtTime(y.value,y.endTime):y.type==="setValue"?g.setValueAtTime(y.value,y.startTime):y.type==="setValueCurve"&&g.setValueCurveAtTime(y.values,y.startTime,y.duration))}return I},cancelScheduledValues(T){return k===null&&w.flush(f.context.currentTime),w.add(i(T)),g.cancelScheduledValues(T),I},exponentialRampToValueAtTime(T,E){if(T===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;return k===null&&w.flush(f.context.currentTime),w.add(o(T,E)),g.exponentialRampToValueAtTime(T,E),I},linearRampToValueAtTime(T,E){return k===null&&w.flush(f.context.currentTime),w.add(a(T,E)),g.linearRampToValueAtTime(T,E),I},setTargetAtTime(T,E,y){return k===null&&w.flush(f.context.currentTime),w.add(c(T,E,y)),g.setTargetAtTime(T,E,y),I},setValueAtTime(T,E){return k===null&&w.flush(f.context.currentTime),w.add(l(T,E)),g.setValueAtTime(T,E),I},setValueCurveAtTime(T,E,y){const C=T instanceof Float32Array?T:new Float32Array(T);if(h!==null&&h.name==="webkitAudioContext"){const $=E+y,U=f.context.sampleRate,N=Math.ceil(E*U),O=Math.floor($*U),G=O-N,B=new Float32Array(G);for(let Q=0;Q<G;Q+=1){const re=(C.length-1)/y*((N+Q)/U-E),le=Math.floor(re),he=Math.ceil(re);B[Q]=le===he?C[le]:(1-(re-le))*C[le]+(1-(he-re))*C[he]}k===null&&w.flush(f.context.currentTime),w.add(u(B,E,y)),g.setValueCurveAtTime(B,E,y);const ee=O/U;ee<$&&d(I,B[B.length-1],ee),d(I,C[C.length-1],$)}else k===null&&w.flush(f.context.currentTime),w.add(u(C,E,y)),g.setValueCurveAtTime(C,E,y);return I}};return t.set(I,g),e.set(I,f),n(I,k),I},iy=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Gf{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const oy={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},ay=(n,e,t,s,r,i,o,a,c,l,u,h,d,f)=>class extends e{constructor(g,m,_){var w;const k=a(g),I=c(k),T=u(ne(ne({},oy),_));d(T);const E=Mc.get(k),y=E==null?void 0:E.get(m),C=I||k.state!=="closed"?k:(w=o(k))!==null&&w!==void 0?w:k,$=r(C,I?null:g.baseLatency,l,m,y,T),U=I?s(m,T,y):null;super(g,!0,$,U);const N=[];$.parameters.forEach((G,B)=>{const ee=t(this,I,G);N.push([B,ee])}),this._nativeAudioWorkletNode=$,this._onprocessorerror=null,this._parameters=new Gf(N),I&&n(k,this);const{activeInputs:O}=i(this);h($,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const m=typeof g=="function"?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=m;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===m?g:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Io(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const Yf=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},Po=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},cy=(n,e)=>{const t=nn(Tc,n),s=Ye(e);return nn(t,s)},ly=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((m,_)=>m+_,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Tt(n),d=await cy(t,n),f=Po(s.numberOfInputs,s.channelCount),p=Po(s.numberOfOutputs,r),g=Array.from(n.parameters.keys()).reduce((m,_)=>ye(ne({},m),{[_]:new Float32Array(128)}),{});for(let m=0;m<a;m+=128){if(s.numberOfInputs>0&&e!==null)for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<s.channelCount;w+=1)Io(e,f[_],w,w,m);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:_},w)=>{Io(e,g,_,c+w,m)});for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<r[_];w+=1)p[_][w].byteLength===0&&(p[_][w]=new Float32Array(128));try{const _=f.map((k,I)=>h.activeInputs[I].size===0?[]:k),w=o(m/t.sampleRate,t.sampleRate,()=>d.process(_,p,g));if(u!==null)for(let k=0,I=0;k<s.numberOfOutputs;k+=1){for(let T=0;T<r[k];T+=1)Yf(u,p[k],T,I+T,m);I+=r[k]}if(!w)break}catch(_){n.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u},uy=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,g)=>(m,_,w)=>{const k=new WeakMap;let I=null;const T=async(E,y)=>{let C=u(E),$=null;const U=bt(C,y),N=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const O=N.reduce((Q,re)=>Q+re,0),G=r(y,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),B=[];for(let Q=0;Q<E.numberOfOutputs;Q+=1)B.push(s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[Q]}));const ee=o(y,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});ee.connect=e.bind(null,B),ee.disconnect=c.bind(null,B),$=[G,B,ee]}else U||(C=new h(y,m));if(k.set(y,$===null?C:$[2]),$!==null){if(I===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=E.channelCount*E.numberOfInputs,le=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,he=re+le;I=ly(E,he===0?null:await(async()=>{const te=new d(he,Math.ceil(E.context.length/128)*128,y.sampleRate),R=[],V=[];for(let A=0;A<_.numberOfInputs;A+=1)R.push(o(te,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),V.push(r(te,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const oe=await Promise.all(Array.from(E.parameters.values()).map(async A=>{const S=i(te,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:A.value});return await f(te,A,S.offset),S})),P=s(te,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+le)});for(let A=0;A<_.numberOfInputs;A+=1){R[A].connect(V[A]);for(let S=0;S<_.channelCount;S+=1)V[A].connect(P,S,A*_.channelCount+S)}for(const[A,S]of oe.entries())S.connect(P,0,re+A),S.start(0);return P.connect(te.destination),await Promise.all(R.map(A=>p(E,te,A))),g(te)})(),y,_,N,w,l)}const O=await I,G=t(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[B,ee,Q]=$;O!==null&&(G.buffer=O,G.start(0)),G.connect(B);for(let re=0,le=0;re<E.numberOfOutputs;re+=1){const he=ee[re];for(let _e=0;_e<N[re];_e+=1)B.connect(he,le+_e,_e);le+=N[re]}return Q}if(U)for(const[O,G]of E.parameters.entries())await n(y,G,C.parameters.get(O));else for(const[O,G]of E.parameters.entries())await f(y,G,C.parameters.get(O));return await p(E,y,C),C};return{render(E,y){a(y,E);const C=k.get(y);return C!==void 0?Promise.resolve(C):T(E,y)}}},hy=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,g,m,_,w,k)=>class extends p{constructor(T,E){super(T,E);this._nativeContext=T,this._audioWorklet=n===void 0?void 0:{addModule:(y,C)=>n(this,y,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(T,E,y){return new t({length:E,numberOfChannels:T,sampleRate:y})}createBufferSource(){return new s(this)}createChannelMerger(T=6){return new i(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(T=1){return new u(this,{maxDelayTime:T})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(T,E){return new f(this,{feedback:E,feedforward:T})}createOscillator(){return new g(this)}createPanner(){return new m(this)}createPeriodicWave(T,E,y={disableNormalization:!1}){return new _(this,ye(ne({},y),{imag:E,real:T}))}createStereoPanner(){return new w(this)}createWaveShaper(){return new k(this)}decodeAudioData(T,E,y){return l(this._nativeContext,T).then(C=>(typeof E=="function"&&E(C),C),C=>{throw typeof y=="function"&&y(C),C})}},dy={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},fy=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=ne(ne({},dy),u),f=r(h,d),p=o(h),g=p?t():null;super(l,!1,f,g);this._Q=e(this,p,f.Q,Mt,xt),this._detune=e(this,p,f.detune,1200*Math.log2(Mt),-1200*Math.log2(Mt)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Mt),xt),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},py=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=bt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},my=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},gy={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_y=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l=ne(ne({},gy),a),u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},yy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!bt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},vy={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},by=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i(ne(ne({},vy),c)),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},wy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!bt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},My=n=>(e,t,s)=>n(t,e,s),Ty=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return ko(t)?i.connect(t,0,r):i.connect(t,0)},Ey=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},xy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ay=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h=ne(ne({},xy),l),d=s(u,h),f=i(u),p=f?t():null;super(c,!1,d,p);this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Mt,xt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){dr(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),kn(this)&&Fi(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},Sy=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=bt(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Cy=n=>e=>(n[0]=e,n[0]),Ny={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ky=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=ne(ne({},Ny),c),h=t(l,u),f=r(l)?e():null;super(a,!1,h,f);this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},Iy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!bt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),xr(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Py=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},Oy=()=>new DOMException("","DataCloneError"),lh=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}finally{r()}})},Ry=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=t();return Promise.reject(p)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(lh(d).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,g)=>{const m=async()=>{try{await lh(d)}catch{}},_=w=>{g(w),m()};try{f.decodeAudioData(d,w=>{typeof w.copyFromChannel!="function"&&(l(w),pl(w)),n.add(w),m().then(()=>p(w))},w=>{_(w===null?s():w)})}catch(w){_(w)}})},Dy=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=t(c);for(const g of p)if(Vi(g)){const m=s(g[0]);n(f,m,g[1],g[2])}else{const m=r(g[0]);f.connect(m,g[1])}}}else e.set(c,u-l)},Fy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},$y=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h=ne(ne({},Fy),l),d=s(u,h),f=i(u),p=f?t(h.maxDelayTime):null;super(c,!1,d,p);this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},Vy=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=bt(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},Ly=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),By=n=>(e,t)=>{n(e).delete(t)},jy=n=>"delayTime"in n,qy=(n,e,t)=>function s(r,i){const o=So(i)?i:t(n,i);if(jy(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Qi=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},Uy=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Qi(n,e,t).disconnect():ko(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Qi(n,e,s).disconnect(t,0):Qi(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Qi(n,e,s).disconnect(t,0),Wy={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},zy=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=ne(ne({},Wy),u),f=s(h,d),p=o(h),g=p?t():null;super(l,!1,f,g);this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Hy=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=bt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Gy=()=>new DOMException("","EncodingError"),Yy=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),Zy=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},Ky=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Xy=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},Qy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Jy=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u=ne(ne({},Qy),c),h=s(l,u),d=i(l),f=d?t():null;super(a,!1,h,f);this._gain=e(this,d,h.gain,Mt,xt)}get gain(){return this._gain}},ev=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=bt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},tv=(n,e)=>t=>e(n,t),nv=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},sv=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},rv=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},iv=n=>e=>n.get(e),dt=()=>new DOMException("","InvalidStateError"),ov=n=>e=>{const t=n.get(e);if(t===void 0)throw dt();return t},av=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},cv=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},fa=()=>new DOMException("","InvalidAccessError"),lv=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw fa();return e.call(n,t,s,r)})(n.getFrequencyResponse)},uv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},hv=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h=ne(ne({},uv),c),d=e(l,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f);lv(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Zf=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=t[0]*l[f];for(let g=1;g<r;g+=1){const m=d-g&c-1;p+=t[g]*i[m],p-=n[g]*o[m]}for(let g=r;g<s;g+=1)p+=t[g]*i[d-g&c-1];for(let g=r;g<e;g+=1)p-=n[g]*o[d-g&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},dv=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const g=n.getChannelData(p),m=d.getChannelData(p);u.fill(0),h.fill(0),Zf(r,o,i,a,c,u,h,0,l,g,m)}return d},fv=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=e(u);const p=bt(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const m=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,m,m.destination);const _=await r(m);return dv(_,h,i,o)})()}const g=await c;return d.buffer=g,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},pv=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const d of h)if(Vi(d)){const f=s(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},mv=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},gv=(n,e)=>t=>n.has(t)||e(t),_v=(n,e)=>t=>n.has(t)||e(t),yv=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},vv=n=>e=>n!==null&&e instanceof n,bv=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,wv=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,Mv=(n,e)=>t=>n(t)||e(t),Tv=n=>e=>n!==null&&e instanceof n,Ev=n=>n!==null&&n.isSecureContext,xv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null);this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Av={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Sv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c=ne(ne({},Av),o),l=e(a,c);super(i,!1,l,null);this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Cv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null);this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Nv=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},kv=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a);this._nativeContext=a,ha.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ui=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Iv=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Ze=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},at=(n,e)=>{Ze(n,e,"channelCount"),Ze(n,e,"channelCountMode"),Ze(n,e,"channelInterpretation")},uh=n=>typeof n.getFloatTimeDomainData=="function",Pv=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},Ov=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(at(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Ze(r,s,"fftSize"),Ze(r,s,"maxDecibels"),Ze(r,s,"minDecibels"),Ze(r,s,"smoothingTimeConstant"),n(uh,()=>uh(r))||Pv(r),r},Rv=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Xe=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},Dv=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw dt();e.call(n,s,r,i),t=!0}})(n.start)},_l=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},yl=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},Fv=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return at(f,d),Xe(f,d,"playbackRate"),Ze(f,d,"buffer"),Ze(f,d,"loop"),Ze(f,d,"loopEnd"),Ze(f,d,"loopStart"),e(t,()=>t(h))||Dv(f),e(s,()=>s(h))||c(f),e(r,()=>r(h))||l(f,h),e(i,()=>i(h))||_l(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||yl(f),n(h,f),f},$v=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,Vv=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Lv=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,Bv=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},jv=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const m=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(m!==null){const _=d.get(g[1]);_!==void 0?g[1]=_:(g[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),m(w)):m(new ErrorEvent(g[0],ne({},w)))},d.set(m,g[1]))}}return p.call(h,"error",g[1],g[2]),p.call(h,...g)})(h.addEventListener),h.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const m=d.get(g[1]);m!==void 0&&(d.delete(g[1]),g[1]=m)}return p.call(h,"error",g[1],g[2]),p.call(h,g[0],g[1],g[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return Bv(u),e(i,o,l,u)},Kf=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),qv=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),Uv=async(n,e)=>{const t=await qv(e);return new n(t)},Wv=(n,e,t,s)=>{let r=Tc.get(n);r===void 0&&(r=new WeakMap,Tc.set(n,r));const i=Uv(t,s);return r.set(e,i),i},zv=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,g,m)=>{if(m.numberOfInputs===0&&m.numberOfOutputs===0)throw c();const _=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(_.some(x=>x<1))throw c();if(_.length!==m.numberOfOutputs)throw e();if(m.channelCountMode!=="explicit")throw c();const w=m.channelCount*m.numberOfInputs,k=_.reduce((x,D)=>x+D,0),I=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(w+I>6||k>6)throw c();const T=new MessageChannel,E=[],y=[];for(let x=0;x<m.numberOfInputs;x+=1)E.push(o(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),y.push(r(f,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const C=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:x,maxValue:D,minValue:L,name:Y}of g.parameterDescriptors){const K=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:m.parameterData[Y]!==void 0?m.parameterData[Y]:x===void 0?0:x});Object.defineProperties(K.offset,{defaultValue:{get:()=>x===void 0?0:x},maxValue:{get:()=>D===void 0?Mt:D},minValue:{get:()=>L===void 0?xt:L}}),C.push(K)}const $=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+I)}),U=Kf(p,f.sampleRate),N=a(f,U,w+I,Math.max(1,k)),O=r(f,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),G=[];for(let x=0;x<m.numberOfOutputs;x+=1)G.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[x]}));for(let x=0;x<m.numberOfInputs;x+=1){E[x].connect(y[x]);for(let D=0;D<m.channelCount;D+=1)y[x].connect($,D,x*m.channelCount+D)}const B=new Gf(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:x},D)=>{const L=C[D];return L.connect($,0,w+D),L.start(0),[x,L.offset]}));$.connect(N);let ee=m.channelInterpretation,Q=null;const re=m.numberOfOutputs===0?[N]:G,le={get bufferSize(){return U},get channelCount(){return m.channelCount},set channelCount(x){throw t()},get channelCountMode(){return m.channelCountMode},set channelCountMode(x){throw t()},get channelInterpretation(){return ee},set channelInterpretation(x){for(const D of E)D.channelInterpretation=x;ee=x},get context(){return N.context},get inputs(){return E},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror(x){typeof Q=="function"&&le.removeEventListener("processorerror",Q),Q=typeof x=="function"?x:null,typeof Q=="function"&&le.addEventListener("processorerror",Q)},get parameters(){return B},get port(){return T.port2},addEventListener(...x){return N.addEventListener(x[0],x[1],x[2])},connect:n.bind(null,re),disconnect:l.bind(null,re),dispatchEvent(...x){return N.dispatchEvent(x[0])},removeEventListener(...x){return N.removeEventListener(x[0],x[1],x[2])}},he=new Map;T.port1.addEventListener=(x=>(...D)=>{if(D[0]==="message"){const L=typeof D[1]=="function"?D[1]:typeof D[1]=="object"&&D[1]!==null&&typeof D[1].handleEvent=="function"?D[1].handleEvent:null;if(L!==null){const Y=he.get(D[1]);Y!==void 0?D[1]=Y:(D[1]=K=>{u(f.currentTime,f.sampleRate,()=>L(K))},he.set(L,D[1]))}}return x.call(T.port1,D[0],D[1],D[2])})(T.port1.addEventListener),T.port1.removeEventListener=(x=>(...D)=>{if(D[0]==="message"){const L=he.get(D[1]);L!==void 0&&(he.delete(D[1]),D[1]=L)}return x.call(T.port1,D[0],D[1],D[2])})(T.port1.removeEventListener);let _e=null;Object.defineProperty(T.port1,"onmessage",{get:()=>_e,set:x=>{typeof _e=="function"&&T.port1.removeEventListener("message",_e),_e=typeof x=="function"?x:null,typeof _e=="function"&&(T.port1.addEventListener("message",_e),T.port1.start())}}),g.prototype.port=T.port1;let te=null;Wv(f,le,g,m).then(x=>te=x);const V=Po(m.numberOfInputs,m.channelCount),oe=Po(m.numberOfOutputs,_),P=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((x,{name:D})=>ye(ne({},x),{[D]:new Float32Array(128)}),{});let A=!0;const S=()=>{m.numberOfOutputs>0&&N.disconnect(O);for(let x=0,D=0;x<m.numberOfOutputs;x+=1){const L=G[x];for(let Y=0;Y<_[x];Y+=1)O.disconnect(L,D+Y,Y);D+=_[x]}},j=new Map;N.onaudioprocess=({inputBuffer:x,outputBuffer:D})=>{if(te!==null){const L=h(le);for(let Y=0;Y<U;Y+=128){for(let K=0;K<m.numberOfInputs;K+=1)for(let z=0;z<m.channelCount;z+=1)Io(x,V[K],z,z,Y);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:K},z)=>{Io(x,P,K,w+z,Y)});for(let K=0;K<m.numberOfInputs;K+=1)for(let z=0;z<_[K];z+=1)oe[K][z].byteLength===0&&(oe[K][z]=new Float32Array(128));try{const K=V.map((X,W)=>{if(L[W].size>0)return j.set(W,U/128),X;const fe=j.get(W);return fe===void 0?[]:(X.every(ge=>ge.every(be=>be===0))&&(fe===1?j.delete(W):j.set(W,fe-1)),X)});A=u(f.currentTime+Y/f.sampleRate,f.sampleRate,()=>te.process(K,oe,P));for(let X=0,W=0;X<m.numberOfOutputs;X+=1){for(let me=0;me<_[X];me+=1)Yf(D,oe[X],me,W+me,Y);W+=_[X]}}catch(K){A=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:K.colno,filename:K.filename,lineno:K.lineno,message:K.message}))}if(!A){for(let K=0;K<m.numberOfInputs;K+=1){E[K].disconnect(y[K]);for(let z=0;z<m.channelCount;z+=1)y[Y].disconnect($,z,K*m.channelCount+z)}if(g.parameterDescriptors!==void 0){const K=g.parameterDescriptors.length;for(let z=0;z<K;z+=1){const X=C[z];X.disconnect($,0,w+z),X.stop()}}$.disconnect(N),N.onaudioprocess=null,pe?S():ce();break}}}};let pe=!1;const Z=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),de=()=>N.connect(Z).connect(f.destination),ce=()=>{N.disconnect(Z),Z.disconnect()},v=()=>{if(A){ce(),m.numberOfOutputs>0&&N.connect(O);for(let x=0,D=0;x<m.numberOfOutputs;x+=1){const L=G[x];for(let Y=0;Y<_[x];Y+=1)O.connect(L,D+Y,Y);D+=_[x]}}pe=!0},M=()=>{A&&(de(),S()),pe=!1};return de(),d(le,v,M)},Xf=(n,e)=>{const t=n.createBiquadFilter();return at(t,e),Xe(t,e,"Q"),Xe(t,e,"detune"),Xe(t,e,"frequency"),Xe(t,e,"gain"),Ze(t,e,"type"),t},Hv=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),at(r,s),r},Gv=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw dt()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw dt()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw dt()}})},Li=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return at(t,e),Gv(t),t},Yv=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return at(a,o),Xe(a,o,"offset"),e(s,()=>s(i))||_l(a),e(r,()=>r(i))||yl(a),n(i,a),a},Ar=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),Zv=(n,e,t,s)=>(r,a)=>{var c=a,{offset:i}=c,o=Dr(c,["offset"]);const l=r.createBuffer(1,2,44100),u=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(r,ye(ne({},o),{gain:i})),d=l.getChannelData(0);d[0]=1,d[1]=1,u.buffer=l,u.loop=!0;const f={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(m){h.channelCount=m},get channelCountMode(){return h.channelCountMode},set channelCountMode(m){h.channelCountMode=m},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(m){h.channelInterpretation=m},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return u.onended},set onended(m){u.onended=m},addEventListener(...m){return u.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return u.dispatchEvent(m[0])},removeEventListener(...m){return u.removeEventListener(m[0],m[1],m[2])},start(m=0){u.start.call(u,m)},stop(m=0){u.stop.call(u,m)}},p=()=>u.connect(h),g=()=>u.disconnect(h);return n(r,u),s(Ar(f,h),p,g)},Kv=(n,e)=>(t,s)=>{const r=t.createConvolver();if(at(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Ze(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},Qf=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return at(t,e),Xe(t,e,"delayTime"),t},Xv=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(at(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Xe(s,t,"attack"),Xe(s,t,"knee"),Xe(s,t,"ratio"),Xe(s,t,"release"),Xe(s,t,"threshold"),s},kt=(n,e)=>{const t=n.createGain();return at(t,e),Xe(t,e,"gain"),t},Qv=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return at(r,s),r};function Jv(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function eb(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function hh(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=eb(t,e),t[0]+=n[s];return t}const tb=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Kf(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,g=f.length,m=Math.min(p,g);if(p===0||p>20)throw s();if(d[0]===0)throw e();if(g===0||g>20)throw s();if(f[0]===0)throw e();if(d[0]!==1){for(let C=0;C<g;C+=1)f[C]/=d[0];for(let C=1;C<p;C+=1)d[C]/=d[0]}const _=t(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const w=32,k=[],I=[],T=[];for(let C=0;C<o;C+=1){k.push(0);const $=new Float32Array(w),U=new Float32Array(w);$.fill(0),U.fill(0),I.push($),T.push(U)}_.onaudioprocess=C=>{const $=C.inputBuffer,U=C.outputBuffer,N=$.numberOfChannels;for(let O=0;O<N;O+=1){const G=$.getChannelData(O),B=U.getChannelData(O);k[O]=Zf(d,p,f,g,m,I[O],T[O],k[O],w,G,B)}};const E=r.sampleRate/2;return Ar({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(C){_.channelCount=C},get channelCountMode(){return _.channelCountMode},set channelCountMode(C){_.channelCountMode=C},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(C){_.channelInterpretation=C},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...C){return _.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return _.dispatchEvent(C[0])},getFrequencyResponse(C,$,U){if(C.length!==$.length||$.length!==U.length)throw n();const N=C.length;for(let O=0;O<N;O+=1){const G=-Math.PI*(C[O]/E),B=[Math.cos(G),Math.sin(G)],ee=hh(f,B),Q=hh(d,B),re=Jv(ee,Q);$[O]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),U[O]=Math.atan2(re[1],re[0])}},removeEventListener(...C){return _.removeEventListener(C[0],C[1],C[2])}},_)},nb=(n,e)=>n.createMediaElementSource(e.mediaElement),sb=(n,e)=>{const t=n.createMediaStreamDestination();return at(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},rb=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},ib=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},ob=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,ab=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return at(c,a),Xe(c,a,"detune"),Xe(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ze(c,a,"type"),e(t,()=>t(o))||_l(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||yl(c),n(o,c),c},cb=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(at(s,t),Xe(s,t,"orientationX"),Xe(s,t,"orientationY"),Xe(s,t,"orientationZ"),Xe(s,t,"positionX"),Xe(s,t,"positionY"),Xe(s,t,"positionZ"),Ze(s,t,"coneInnerAngle"),Ze(s,t,"coneOuterAngle"),Ze(s,t,"coneOuterGain"),Ze(s,t,"distanceModel"),Ze(s,t,"maxDistance"),Ze(s,t,"panningModel"),Ze(s,t,"refDistance"),Ze(s,t,"rolloffFactor"),s)},lb=(n,e,t,s,r,i,o,a,c,l)=>(u,U)=>{var N=U,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:m,orientationY:_,orientationZ:w,panningModel:k,positionX:I,positionY:T,positionZ:E,refDistance:y,rolloffFactor:C}=N,$=Dr(N,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);const O=u.createPanner();if($.channelCount>2||$.channelCountMode==="max")throw o();at(O,$);const G={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=t(u,ye(ne({},G),{channelInterpretation:"speakers",numberOfInputs:6})),ee=s(u,ye(ne({},$),{gain:1})),Q=s(u,ye(ne({},G),{gain:1})),re=s(u,ye(ne({},G),{gain:0})),le=s(u,ye(ne({},G),{gain:0})),he=s(u,ye(ne({},G),{gain:0})),_e=s(u,ye(ne({},G),{gain:0})),te=s(u,ye(ne({},G),{gain:0})),R=r(u,256,6,1),V=i(u,ye(ne({},G),{curve:new Float32Array([1,1]),oversample:"none"}));let oe=[m,_,w],P=[I,T,E];const A=new Float32Array(1);R.onaudioprocess=({inputBuffer:Z})=>{const de=[c(Z,A,0),c(Z,A,1),c(Z,A,2)];de.some((v,M)=>v!==oe[M])&&(O.setOrientation(...de),oe=de);const ce=[c(Z,A,3),c(Z,A,4),c(Z,A,5)];ce.some((v,M)=>v!==P[M])&&(O.setPosition(...ce),P=ce)},Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(he.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_e.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0});const S={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(Z){if(Z>2)throw o();ee.channelCount=Z,O.channelCount=Z},get channelCountMode(){return O.channelCountMode},set channelCountMode(Z){if(Z==="max")throw o();ee.channelCountMode=Z,O.channelCountMode=Z},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(Z){ee.channelInterpretation=Z,O.channelInterpretation=Z},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(Z){O.coneInnerAngle=Z},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(Z){O.coneOuterAngle=Z},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(Z){if(Z<0||Z>1)throw e();O.coneOuterGain=Z},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(Z){O.distanceModel=Z},get inputs(){return[ee]},get maxDistance(){return O.maxDistance},set maxDistance(Z){if(Z<0)throw new RangeError;O.maxDistance=Z},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return Q.gain},get orientationY(){return re.gain},get orientationZ(){return le.gain},get panningModel(){return O.panningModel},set panningModel(Z){O.panningModel=Z},get positionX(){return he.gain},get positionY(){return _e.gain},get positionZ(){return te.gain},get refDistance(){return O.refDistance},set refDistance(Z){if(Z<0)throw new RangeError;O.refDistance=Z},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(Z){if(Z<0)throw new RangeError;O.rolloffFactor=Z},addEventListener(...Z){return ee.addEventListener(Z[0],Z[1],Z[2])},dispatchEvent(...Z){return ee.dispatchEvent(Z[0])},removeEventListener(...Z){return ee.removeEventListener(Z[0],Z[1],Z[2])}};h!==S.coneInnerAngle&&(S.coneInnerAngle=h),d!==S.coneOuterAngle&&(S.coneOuterAngle=d),f!==S.coneOuterGain&&(S.coneOuterGain=f),p!==S.distanceModel&&(S.distanceModel=p),g!==S.maxDistance&&(S.maxDistance=g),m!==S.orientationX.value&&(S.orientationX.value=m),_!==S.orientationY.value&&(S.orientationY.value=_),w!==S.orientationZ.value&&(S.orientationZ.value=w),k!==S.panningModel&&(S.panningModel=k),I!==S.positionX.value&&(S.positionX.value=I),T!==S.positionY.value&&(S.positionY.value=T),E!==S.positionZ.value&&(S.positionZ.value=E),y!==S.refDistance&&(S.refDistance=y),C!==S.rolloffFactor&&(S.rolloffFactor=C),(oe[0]!==1||oe[1]!==0||oe[2]!==0)&&O.setOrientation(...oe),(P[0]!==0||P[1]!==0||P[2]!==0)&&O.setPosition(...P);const j=()=>{ee.connect(O),n(ee,V,0,0),V.connect(Q).connect(B,0,0),V.connect(re).connect(B,0,1),V.connect(le).connect(B,0,2),V.connect(he).connect(B,0,3),V.connect(_e).connect(B,0,4),V.connect(te).connect(B,0,5),B.connect(R).connect(u.destination)},pe=()=>{ee.disconnect(O),a(ee,V,0,0),V.disconnect(Q),Q.disconnect(B),V.disconnect(re),re.disconnect(B),V.disconnect(le),le.disconnect(B),V.disconnect(he),he.disconnect(B),V.disconnect(_e),_e.disconnect(B),V.disconnect(te),te.disconnect(B),B.disconnect(R),R.disconnect(u.destination)};return l(Ar(S,O),j,pe)},ub=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},Bi=(n,e,t,s)=>n.createScriptProcessor(e,t,s),hb=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return at(i,s),Xe(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},db=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u=ye(ne({},l),{oversample:"none"}),h=(p,g,m,_)=>{const w=new Float32Array(16385),k=new Float32Array(16385);for(let $=0;$<16385;$+=1){const U=$/16384*c;w[$]=Math.cos(U),k[$]=Math.sin(U)}const I=t(p,ye(ne({},l),{gain:0})),T=s(p,ye(ne({},u),{curve:w})),E=s(p,ye(ne({},u),{curve:a})),y=t(p,ye(ne({},l),{gain:0})),C=s(p,ye(ne({},u),{curve:k}));return{connectGraph(){g.connect(I),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(y),E.connect(m),m.connect(T.inputs===void 0?T:T.inputs[0]),m.connect(C.inputs===void 0?C:C.inputs[0]),T.connect(I.gain),C.connect(y.gain),I.connect(_,0,0),y.connect(_,0,1)},disconnectGraph(){g.disconnect(I),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(y),E.disconnect(m),m.disconnect(T.inputs===void 0?T:T.inputs[0]),m.disconnect(C.inputs===void 0?C:C.inputs[0]),T.disconnect(I.gain),C.disconnect(y.gain),I.disconnect(_,0,0),y.disconnect(_,0,1)}}},d=(p,g,m,_)=>{const w=new Float32Array(16385),k=new Float32Array(16385),I=new Float32Array(16385),T=new Float32Array(16385),E=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>E){const le=(re-E)/(16384-E)*c;w[re]=Math.cos(le),k[re]=Math.sin(le),I[re]=0,T[re]=1}else{const le=re/(16384-E)*c;w[re]=1,k[re]=0,I[re]=Math.cos(le),T[re]=Math.sin(le)}const y=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(p,ye(ne({},l),{gain:0})),$=s(p,ye(ne({},u),{curve:w})),U=t(p,ye(ne({},l),{gain:0})),N=s(p,ye(ne({},u),{curve:k})),O=s(p,ye(ne({},u),{curve:a})),G=t(p,ye(ne({},l),{gain:0})),B=s(p,ye(ne({},u),{curve:I})),ee=t(p,ye(ne({},l),{gain:0})),Q=s(p,ye(ne({},u),{curve:T}));return{connectGraph(){g.connect(y),g.connect(O.inputs===void 0?O:O.inputs[0]),y.connect(C,0),y.connect(U,0),y.connect(G,1),y.connect(ee,1),O.connect(m),m.connect($.inputs===void 0?$:$.inputs[0]),m.connect(N.inputs===void 0?N:N.inputs[0]),m.connect(B.inputs===void 0?B:B.inputs[0]),m.connect(Q.inputs===void 0?Q:Q.inputs[0]),$.connect(C.gain),N.connect(U.gain),B.connect(G.gain),Q.connect(ee.gain),C.connect(_,0,0),G.connect(_,0,0),U.connect(_,0,1),ee.connect(_,0,1)},disconnectGraph(){g.disconnect(y),g.disconnect(O.inputs===void 0?O:O.inputs[0]),y.disconnect(C,0),y.disconnect(U,0),y.disconnect(G,1),y.disconnect(ee,1),O.disconnect(m),m.disconnect($.inputs===void 0?$:$.inputs[0]),m.disconnect(N.inputs===void 0?N:N.inputs[0]),m.disconnect(B.inputs===void 0?B:B.inputs[0]),m.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),$.disconnect(C.gain),N.disconnect(U.gain),B.disconnect(G.gain),Q.disconnect(ee.gain),C.disconnect(_,0,0),G.disconnect(_,0,0),U.disconnect(_,0,1),ee.disconnect(_,0,1)}}},f=(p,g,m,_,w)=>{if(g===1)return h(p,m,_,w);if(g===2)return d(p,m,_,w);throw r()};return(p,k)=>{var I=k,{channelCount:g,channelCountMode:m,pan:_}=I,w=Dr(I,["channelCount","channelCountMode","pan"]);if(m==="max")throw r();const T=n(p,ye(ne({},w),{channelCount:1,channelCountMode:m,numberOfInputs:2})),E=t(p,ye(ne({},w),{channelCount:g,channelCountMode:m,gain:1})),y=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:C,disconnectGraph:$}=f(p,g,E,y,T);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const U={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(B){E.channelCount!==B&&(N&&$(),{connectGraph:C,disconnectGraph:$}=f(p,B,E,y,T),N&&C()),E.channelCount=B},get channelCountMode(){return E.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw r();E.channelCountMode=B},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(B){E.channelInterpretation=B},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return y.gain},addEventListener(...B){return E.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return E.dispatchEvent(B[0])},removeEventListener(...B){return E.removeEventListener(B[0],B[1],B[2])}};let N=!1;const O=()=>{C(),N=!0},G=()=>{$(),N=!1};return i(Ar(U,T),O,G)}},fb=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);at(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Ze(l,{curve:u},"curve"),Ze(l,c,"oversample");let h=null,d=!1;return o(l,"curve",g=>()=>g.call(l),g=>m=>(g.call(l,m),d&&(s(m)&&h===null?h=n(a,l):!s(m)&&h!==null&&(h(),h=null)),m)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},pb=(n,e,t,s,r)=>(i,l)=>{var u=l,{curve:o,oversample:a}=u,c=Dr(u,["curve","oversample"]);const h=i.createWaveShaper(),d=i.createWaveShaper();at(h,c),at(d,c);const f=t(i,ye(ne({},c),{gain:1})),p=t(i,ye(ne({},c),{gain:-1})),g=t(i,ye(ne({},c),{gain:1})),m=t(i,ye(ne({},c),{gain:-1}));let _=null,w=!1,k=null;const I={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(y){f.channelCount=y,p.channelCount=y,h.channelCount=y,g.channelCount=y,d.channelCount=y,m.channelCount=y},get channelCountMode(){return h.channelCountMode},set channelCountMode(y){f.channelCountMode=y,p.channelCountMode=y,h.channelCountMode=y,g.channelCountMode=y,d.channelCountMode=y,m.channelCountMode=y},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(y){f.channelInterpretation=y,p.channelInterpretation=y,h.channelInterpretation=y,g.channelInterpretation=y,d.channelInterpretation=y,m.channelInterpretation=y},get context(){return h.context},get curve(){return k},set curve(y){if(y!==null&&y.length<2)throw e();if(y===null)h.curve=y,d.curve=y;else{const C=y.length,$=new Float32Array(C+2-C%2),U=new Float32Array(C+2-C%2);$[0]=y[0],U[0]=-y[C-1];const N=Math.ceil((C+1)/2),O=(C+1)/2-1;for(let G=1;G<N;G+=1){const B=G/N*O,ee=Math.floor(B),Q=Math.ceil(B);$[G]=ee===Q?y[ee]:(1-(B-ee))*y[ee]+(1-(Q-B))*y[Q],U[G]=ee===Q?-y[C-1-ee]:-((1-(B-ee))*y[C-1-ee])-(1-(Q-B))*y[C-1-Q]}$[N]=C%2===1?y[N-1]:(y[N-2]+y[N-1])/2,h.curve=$,d.curve=U}k=y,w&&(s(k)&&_===null?_=n(i,f):_!==null&&(_(),_=null))},get inputs(){return[f]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(y){h.oversample=y,d.oversample=y},addEventListener(...y){return f.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return f.dispatchEvent(y[0])},removeEventListener(...y){return f.removeEventListener(y[0],y[1],y[2])}};o!==null&&(I.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==I.oversample&&(I.oversample=a);const T=()=>{f.connect(h).connect(g),f.connect(p).connect(d).connect(m).connect(g),w=!0,s(k)&&(_=n(i,f))},E=()=>{f.disconnect(h),h.disconnect(g),f.disconnect(p),p.disconnect(d),d.disconnect(m),m.disconnect(g),w=!1,_!==null&&(_(),_=null)};return r(Ar(I,g),T,E)},Et=()=>new DOMException("","NotSupportedError"),mb={numberOfChannels:1},gb=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}=ne(ne({},mb),l),f=s(h,u,d);e(ui,()=>ui(f))||f.addEventListener("statechange",(()=>{let p=0;const g=m=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",g),m.stopImmediatePropagation(),this._waitForThePromiseToSettle(m)):p+=1)};return g})());super(f,h);this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Uf(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},_b={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},yb=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h=ne(ne({},_b),l),d=t(u,h),f=i(u),p=f?s():null,g=c.sampleRate/2;super(c,!1,d,p);this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,g,-g),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){dr(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),kn(this)&&Fi(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},vb=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const f=bt(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},bb={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},wb=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h=ne(ne({},bb),l),d=t(u,h),f=i(u),p=f?s():null;super(c,!1,d,p);this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Mt,xt),this._orientationY=e(this,f,d.orientationY,Mt,xt),this._orientationZ=e(this,f,d.orientationZ,Mt,xt),this._positionX=e(this,f,d.positionX,Mt,xt),this._positionY=e(this,f,d.positionY,Mt,xt),this._positionZ=e(this,f,d.positionZ,Mt,xt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Mb=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let g=null,m=i(f);const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},w=ye(ne({},_),{coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor}),k=bt(m,p);if("bufferSize"in m)g=s(p,ye(ne({},_),{gain:1}));else if(!k){const I=ye(ne({},w),{orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value});m=r(p,I)}if(u.set(p,g===null?m:g),g!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new o(6,f.context.length,p.sampleRate),O=e(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(N.destination),h=(async()=>{const G=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(B,ee)=>{const Q=t(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee===0?1:0});return await a(N,B,Q.offset),Q}));for(let B=0;B<6;B+=1)G[B].connect(O,0,B),G[B].start(0);return l(N)})()}const I=await h,T=s(p,ye(ne({},_),{gain:1}));await c(f,p,T);const E=[];for(let N=0;N<I.numberOfChannels;N+=1)E.push(I.getChannelData(N));let y=[E[0][0],E[1][0],E[2][0]],C=[E[3][0],E[4][0],E[5][0]],$=s(p,ye(ne({},_),{gain:1})),U=r(p,ye(ne({},w),{orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:C[0],positionY:C[1],positionZ:C[2]}));T.connect($).connect(U.inputs[0]),U.connect(g);for(let N=128;N<I.length;N+=128){const O=[E[0][N],E[1][N],E[2][N]],G=[E[3][N],E[4][N],E[5][N]];if(O.some((B,ee)=>B!==y[ee])||G.some((B,ee)=>B!==C[ee])){y=O,C=G;const B=N/p.sampleRate;$.gain.setValueAtTime(0,B),$=s(p,ye(ne({},_),{gain:0})),U=r(p,ye(ne({},w),{orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:C[0],positionY:C[1],positionZ:C[2]})),$.gain.setValueAtTime(1,B),T.connect($).connect(U.inputs[0]),U.connect(g)}}return g}return k?(await n(p,f.orientationX,m.orientationX),await n(p,f.orientationY,m.orientationY),await n(p,f.orientationZ,m.orientationZ),await n(p,f.positionX,m.positionX),await n(p,f.positionY,m.positionY),await n(p,f.positionZ,m.positionZ)):(await a(p,f.orientationX,m.orientationX),await a(p,f.orientationY,m.orientationY),await a(p,f.orientationZ,m.orientationZ),await a(p,f.positionX,m.positionX),await a(p,f.positionY,m.positionY),await a(p,f.positionZ,m.positionZ)),xr(m)?await c(f,p,m.inputs[0]):await c(f,p,m),m};return{render(f,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):d(f,p)}}},Tb={disableNormalization:!1},Eb=(n,e,t,s)=>class Jf{constructor(i,o){const a=e(i),c=s(ne(ne({},Tb),o)),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Jf.prototype||t.has(i)}},xb=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),Ab=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),f=s.context.destination;!t(l)&&(s!==f||!t(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},Sb=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},Cb=(n,e,t,s)=>r=>n(ui,()=>ui(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),Nb=n=>(e,t)=>{n.set(e,t)},kb=n=>(e,t)=>n.set(e,t),Ib=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),pl(u)):e(i,()=>i(u))||a(u),n.add(u),u)),Pb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Ob=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u=ne(ne({},Pb),c),h=t(l,u),d=i(l),f=d?s():null;super(a,!1,h,f);this._pan=e(this,d,h.pan)}get pan(){return this._pan}},Rb=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=bt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),xr(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Db=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},Fb=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},$b=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},Vb=()=>new DOMException("","UnknownError"),Lb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Bb=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h=ne(ne({},Lb),l),d=t(u,h),p=i(u)?s():null;super(c,!0,d,p);this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},jb=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!bt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),xr(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},qb=()=>typeof window=="undefined"?null:window,Ub=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},Wb=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},zb=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},Hb=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},ep=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),tp=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},ji=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},Gb=n=>ye(ne({},n),{outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),Yb=n=>ye(ne({},n),{channelCount:n.numberOfOutputs}),Zb=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?ye(ne({},n),{imag:[0,0],real:[0,0]}):ye(ne({},n),{imag:Array.from(t,()=>0),real:t}):t===void 0?ye(ne({},n),{imag:e,real:Array.from(e,()=>0)}):ye(ne({},n),{imag:e,real:t})},np=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;np(n,e,t+1e-7)}},Kb=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Xb=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Qb=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},vl=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},sp=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},bl=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Jb=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},ew=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},rp=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ar(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Sr=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},tw=w1(Fs),nw=S1(Fs),sw=Ly(da),ip=new WeakMap,rw=sv(ip),rn=my(new Map,new WeakMap),gn=qb(),op=Ov(rn,vn),wl=nv(Tt),_t=Ab(Tt,wl,ks),iw=P1(op,Ye,_t),He=ov(ha),Vn=ob(gn),Ue=Tv(Vn),ap=new WeakMap,cp=Zy(Sr),qi=$v(gn),Ml=vv(qi),Tl=bv(gn),lp=wv(gn),hi=Lv(gn),nt=sy(M1(Ff),A1(tw,nw,Co,sw,No,Tt,rw,Di,Ye,Fs,kn,ks,lo),rn,pv(wc,No,Tt,Ye,li,kn),vn,fa,Et,Dy(Co,wc,Tt,Ye,li,He,kn,Ue),qy(ap,Tt,nn),cp,He,Ml,Tl,lp,Ue,hi),ow=I1(nt,iw,vn,op,He,Ue),El=new WeakSet,dh=Rv(gn),up=Cy(new Uint32Array(1)),xl=Ub(up,vn),Al=Wb(up),hp=R1(El,rn,Et,dh,Vn,Db(dh),xl,Al),pa=C1(kt),dp=Sb(wl,$i,ks),bn=My(dp),Cr=Fv(pa,rn,Kb,Xb,Qb,vl,sp,bl,ew,zb(ji),rp),wn=xb(rv($i),dp),aw=$1(bn,Cr,Ye,wn,_t),on=ry(T1($f),ap,fl,iy,m1,g1,_1,y1,v1,yc,Rf,qi,np),cw=F1(nt,aw,on,dt,Cr,He,Ue,Sr),lw=H1(nt,G1,vn,dt,Vv(kt,ji),He,Ue,_t),uw=py(bn,Xf,Ye,wn,_t),$s=kb(ip),hw=fy(nt,on,uw,fa,Xf,He,Ue,$s),os=Iv(Fs,Tl),dw=Hb(dt,os),as=Hv(qi,dw),fw=yy(as,Ye,_t),pw=_y(nt,fw,as,He,Ue),mw=wy(Li,Ye,_t),gw=by(nt,mw,Li,He,Ue,Yb),_w=Zv(pa,Cr,kt,os),Nr=Yv(pa,rn,_w,vl,bl),yw=Sy(bn,Nr,Ye,wn,_t),vw=Ay(nt,on,yw,Nr,He,Ue,Sr),fp=Kv(Et,ji),bw=Iy(fp,Ye,_t),ww=ky(nt,bw,fp,He,Ue,$s),Mw=Vy(bn,Qf,Ye,wn,_t),Tw=$y(nt,on,Mw,Qf,He,Ue,$s),pp=Xv(Et),Ew=Hy(bn,pp,Ye,wn,_t),xw=zy(nt,on,Ew,pp,Et,He,Ue,$s),Aw=ev(bn,kt,Ye,wn,_t),Sw=Jy(nt,on,Aw,kt,He,Ue),Cw=tb(fa,dt,Bi,Et),ma=Cb(rn,kt,Bi,$b(kt,Vn)),Nw=fv(Cr,Ye,Vn,_t,ma),kw=Qv(Cw),Iw=hv(nt,kw,Nw,He,Ue,$s),Pw=Y1(on,as,Nr,Bi,Et,ep,Ue,ji),mp=new WeakMap,Ow=kv(lw,Pw,cp,Ue,mp,Sr),gp=ab(pa,rn,vl,sp,bl,rp),Rw=vb(bn,gp,Ye,wn,_t),Dw=yb(nt,on,gp,Rw,He,Ue,Sr),_p=Ey(Cr),Fw=pb(_p,dt,kt,tp,os),ga=fb(_p,dt,Fw,tp,os,qi,ji),$w=lb(Co,dt,as,kt,Bi,ga,Et,No,ep,os),yp=cb($w),Vw=Mb(bn,as,Nr,kt,yp,Ye,Vn,wn,_t,ma),Lw=wb(nt,on,yp,Vw,He,Ue,$s),Bw=ub(vn),jw=Eb(Bw,He,new WeakSet,Zb),qw=db(as,Li,kt,ga,Et,os),vp=hb(qw,Et),Uw=Rb(bn,vp,Ye,wn,_t),Ww=Ob(nt,on,vp,Uw,He,Ue),zw=jb(ga,Ye,_t),Hw=Bb(nt,dt,ga,zw,He,Ue,$s),bp=Ev(gn),Sl=Ky(gn),wp=new WeakMap,Gw=av(wp,Vn),Yw=bp?x1(rn,Et,Yy(gn),Sl,Xy(b1),He,Gw,Ue,hi,new WeakMap,new WeakMap,Fb(hi,Vn),gn):void 0,Zw=Mv(Ml,Ue),Kw=Ry(El,rn,Oy,Gy,new WeakSet,He,Zw,Ao,ui,xl,Al),Mp=hy(Yw,ow,hp,cw,hw,pw,gw,vw,ww,Kw,Tw,xw,Sw,Iw,Ow,Dw,Lw,jw,Ww,Hw),Xw=xv(nt,nb,He,Ue),Qw=Sv(nt,sb,He,Ue),Jw=Cv(nt,rb,He,Ue),e2=ib(dt,Ue),t2=Nv(nt,e2,He),n2=z1(Mp,dt,Et,Vb,Xw,Qw,Jw,t2,qi),Cl=cv(mp),s2=N1(Cl),Tp=Ty(vn),r2=By(Cl),Ep=Uy(vn),xp=new WeakMap,i2=tv(xp,nn),o2=zv(Tp,vn,dt,as,Li,Nr,kt,Bi,Et,Ep,Sl,i2,os),a2=jv(dt,o2,kt,Et,os),c2=uy(bn,Tp,Cr,as,Li,Nr,kt,r2,Ep,Sl,Ye,hi,Vn,wn,_t,ma),l2=iv(wp),u2=Nb(xp),fh=bp?ay(s2,nt,on,c2,a2,Tt,l2,He,Ue,hi,Gb,u2,Jb,Sr):void 0,h2=Py(Et,Vn),d2=Ib(El,rn,wl,Cl,ma,Ao,xl,Al),f2=gb(Mp,rn,dt,h2,d2),p2=mv(ha,Ml),m2=gv(dl,Tl),g2=_v(fl,lp),_2=yv(ha,Ue);function Rt(n){return typeof n=="undefined"}function Se(n){return!Rt(n)}function y2(n){return typeof n=="function"}function On(n){return typeof n=="number"}function xs(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function v2(n){return typeof n=="boolean"}function Dt(n){return Array.isArray(n)}function Rn(n){return typeof n=="string"}function Ji(n){return Rn(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function we(n,e){if(!n)throw new Error(e)}function sn(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Ap(n){!n.isOffline&&n.state!=="running"&&_a('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Sp=!1,ph=!1;function mh(n){Sp=n}function b2(n){Rt(n)&&Sp&&!ph&&(ph=!0,_a("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Cp=console;function w2(...n){Cp.log(...n)}function _a(...n){Cp.warn(...n)}function M2(n){return new n2(n)}function T2(n,e,t){return new f2(n,e,t)}const As=typeof self=="object"?self:null,E2=As&&(As.hasOwnProperty("AudioContext")||As.hasOwnProperty("webkitAudioContext"));function x2(n,e,t){return we(Se(fh),"This node only works in a secure context (https or localhost)"),new fh(n,e,t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function an(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function tt(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}class A2{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Is(n){return g2(n)}function es(n){return m2(n)}function uo(n){return _2(n)}function zs(n){return p2(n)}function S2(n){return n instanceof hp}function C2(n,e){return n==="value"||Is(e)||es(e)||S2(e)}function Ss(n,...e){if(!e.length)return n;const t=e.shift();if(xs(n)&&xs(t))for(const s in t)C2(s,t[s])?n[s]=t[s]:xs(t[s])?(n[s]||Object.assign(n,{[s]:{}}),Ss(n[s],t[s])):Object.assign(n,{[s]:t[s]});return Ss(n,...e)}function N2(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function J(n,e,t=[],s){const r={},i=Array.from(e);if(xs(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(Ss(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&xs(i[0]))Ss(r,i[0]);else for(let o=0;o<t.length;o++)Se(i[o])&&(r[t[o]]=i[o]);return Ss(n,r)}function k2(n){return n.constructor.getDefaults()}function tr(n,e){return Rt(n)?e:n}function vs(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Ln{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||As&&this.toString()===As.TONE_DEBUG_CLASS)&&w2(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ln.version=Of;const Nl=1e-6;function fr(n,e){return n>e+Nl}function Ac(n,e){return fr(n,e)||Kt(n,e)}function Oo(n,e){return n+Nl<e}function Kt(n,e){return Math.abs(n-e)<Nl}function I2(n,e,t){return Math.max(Math.min(n,t),e)}class zt extends Ln{constructor(){super();this.name="Timeline",this._timeline=[];const e=J(zt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(we(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];we(Ac(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Kt(this._timeline[t].time,e)){for(let s=t;s>=0&&Kt(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Ac(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Kt(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Kt(u[t],e))o=l;else break}return o}else{if(Oo(a[t],e)&&fr(c[t],e))return o;fr(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Kt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Kt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Np=[];function ya(n){Np.push(n)}function P2(n){Np.forEach(e=>e(n))}const kp=[];function va(n){kp.push(n)}function O2(n){kp.forEach(e=>e(n))}class Ui extends Ln{constructor(){super(...arguments);this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Rt(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Ui.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ip extends Ui{constructor(){super(...arguments);this.isOffline=!1}toJSON(){return{}}}class Wi extends Ip{constructor(){var e,t;super();this.name="Context",this._constants=new Map,this._timeouts=new zt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const s=J(Wi.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=M2({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new A2(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(P2(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return we(zs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return we(zs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return we(zs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){we(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){we(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){we(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){we(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return x2(this.rawContext,e,t)}addAudioWorkletModule(e,t){return tt(this,void 0,void 0,function*(){we(Se(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return tt(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return zs(this._context)?this._context.resume():Promise.resolve()}close(){return tt(this,void 0,void 0,function*(){zs(this._context)&&(yield this._context.close()),this._initialized&&O2(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class R2 extends Ip{constructor(){super(...arguments);this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return tt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function De(n,e){Dt(e)?e.forEach(t=>De(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function kl(n,e){Dt(e)?e.forEach(t=>kl(n,t)):Object.defineProperty(n,e,{writable:!0})}const $e=()=>{};class Ve extends Ln{constructor(){super();this.name="ToneAudioBuffer",this.onload=$e;const e=J(Ve.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Rn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:$e,onload:$e,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ot().sampleRate}set(e){return e instanceof Ve?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return tt(this,void 0,void 0,function*(){const t=Ve.load(e).then(s=>{this.set(s),this.onload(this)});Ve.downloads.push(t);try{yield t}finally{const s=Ve.downloads.indexOf(t);Ve.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Dt(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=Ot(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(On(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(On(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){we(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);we(s<r,"The start time must be less than the end time");const i=r-s,o=Ot().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Ve(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ve().fromArray(e)}static fromUrl(e){return tt(this,void 0,void 0,function*(){return yield new Ve().load(e)})}static load(e){return tt(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let l=c[0];for(const u of c)if(Ve.supportsType(u)){l=u;break}e=e.replace(t[0],l)}const s=Ve.baseUrl===""||Ve.baseUrl.endsWith("/")?Ve.baseUrl:Ve.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Ot().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return tt(this,void 0,void 0,function*(){for(yield Promise.resolve();Ve.downloads.length;)yield Ve.downloads[0]})}}Ve.baseUrl="";Ve.downloads=[];class ba extends Wi{constructor(){super({clockSource:"offline",context:uo(arguments[0])?arguments[0]:T2(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:uo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]});this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=uo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return tt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return tt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Ve(t)})}close(){return Promise.resolve()}}const Pp=new R2;let bs=Pp;function Ot(){return bs===Pp&&E2&&D2(new Wi),bs}function D2(n,e=!1){e&&bs.dispose(),zs(n)?bs=new Wi(n):uo(n)?bs=new ba(n):bs=n}function F2(){return bs.resume()}if(As&&!As.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Of} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function $2(n){return Math.pow(10,n/20)}function V2(n){return 20*(Math.log(n)/Math.LN10)}function Op(n){return Math.pow(2,n/12)}let wa=440;function L2(){return wa}function B2(n){wa=n}function ws(n){return Math.round(Rp(n))}function Rp(n){return 69+12*Math.log2(n/wa)}function Dp(n){return wa*Math.pow(2,(n-69)/12)}class Il extends Ln{constructor(e,t,s){super();this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Il&&this.fromType(this._val),Rt(this._val))return this._noArg();if(Rn(this._val)&&Rt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(xs(this._val)){let e=0;for(const t in this._val)if(Se(this._val[t])){const s=this._val[t];e+=new this.constructor(this.context,t).valueOf()*s}return e}if(Se(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Rn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Xt extends Il{constructor(){super(...arguments);this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Xt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new Xt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Xt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ws(this.toFrequency())}_now(){return this.context.now()}}class At extends Xt{constructor(){super(...arguments);this.name="Frequency",this.defaultUnits="hz"}static get A4(){return L2()}static set A4(e){B2(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:At.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=j2[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:At.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new At(this.context,this.valueOf()*Op(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return ws(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/At.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),q2[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Dp(e)}static ftom(e){return ws(e)}}const j2={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},q2=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Fp(n,e){return new At(Ot(),n,e)}class Zr extends Xt{constructor(){super(...arguments);this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ct extends Ln{constructor(){super();const e=J(Ct.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Ot()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return b2(e),new Xt(this.context,e).toSeconds()}toFrequency(e){return new At(this.context,e).toFrequency()}toTicks(e){return new Zr(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Rt(e[s])&&delete t[s]}),t}get(){const e=k2(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Se(s)&&Se(s.value)&&Se(s.setValueAtTime)?e[t]=s.value:s instanceof Ct?e[t]=s._getPartialProperties(e[t]):Dt(s)||On(s)||Rn(s)||v2(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Se(this[t])&&(this[t]&&Se(this[t].value)&&Se(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ct?this[t].set(e[t]):this[t]=e[t])}),this}}class Pl extends zt{constructor(e="stopped"){super();this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return sn(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Ce extends Ct{constructor(){super(J(Ce.getDefaults(),arguments,["param","units","convert"]));this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=J(Ce.getDefaults(),arguments,["param","units","convert"]);for(we(Se(e.param)&&(Is(e.param)||e.param instanceof Ce),"param must be an AudioParam");!Is(e.param);)e.param=e.param._param;this._swappable=Se(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new zt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Se(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Se(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Se(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Se(this.maxValue)&&Se(this.minValue)&&sn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?$2(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?V2(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return we(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return we(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Kt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return we(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);we(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),we(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return we(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));we(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&Kt(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){we(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class ve extends Ct{constructor(){super(...arguments);this._internalChannels=[]}get numberOfInputs(){return Se(this.input)?Is(this.input)||this.input instanceof Ce?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Se(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Se(e)&&(e instanceof ve||es(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();we(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Dn(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return _a("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return $p(this,e,t,s),this}chain(...e){return di(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Se(this.input)&&(this.input instanceof ve?this.input.dispose():es(this.input)&&this.input.disconnect()),Se(this.output)&&(this.output instanceof ve?this.output.dispose():es(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function di(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof ve?t.connect(s):es(t)&&Dn(t,s),s),e)}function Dn(n,e,t=0,s=0){for(we(Se(n),"Cannot connect from undefined node"),we(Se(e),"Cannot connect to undefined node"),(e instanceof ve||es(e))&&we(e.numberOfInputs>0,"Cannot connect to node with no inputs"),we(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ve||e instanceof Ce;)Se(e.input)&&(e=e.input);for(;n instanceof ve;)Se(n.output)&&(n=n.output);Is(e)?n.connect(e,t):n.connect(e,t,s)}function $p(n,e,t=0,s=0){if(Se(e))for(;e instanceof ve;)e=e.input;for(;!es(n);)Se(n.output)&&(n=n.output);Is(e)?n.disconnect(e,t):es(e)?n.disconnect(e,t,s):n.disconnect()}class qe extends ve{constructor(){super(J(qe.getDefaults(),arguments,["gain","units"]));this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=J(qe.getDefaults(),arguments,["gain","units"]);this.gain=new Ce({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),De(this,"gain")}static getDefaults(){return Object.assign(ve.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class pr extends ve{constructor(e){super(e);this.onended=$e,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new qe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ve.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:$e})}_startGain(e,t=1){we(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){we(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==$e&&(this.onended(this),this.onended=$e,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback!="undefined"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),we(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=$e,this}}class Ro extends pr{constructor(){super(J(Ro.getDefaults(),arguments,["offset"]));this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=J(Ro.getDefaults(),arguments,["offset"]);Dn(this._source,this._gainNode),this.offset=new Ce({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(pr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class je extends ve{constructor(){super(J(je.getDefaults(),arguments,["value","units"]));this.name="Signal",this.override=!0;const e=J(je.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ro({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ve.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return Ma(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Ma(n,e,t,s){(e instanceof Ce||Is(e)||e instanceof je&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof je&&(e.overridden=!0)),Dn(n,e,t,s)}class Do extends Ce{constructor(){super(J(Do.getDefaults(),arguments,["value"]));this.name="TickParam",this._events=new zt(1/0),this._multiplier=1;const e=J(Do.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ce.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Fo extends je{constructor(){super(J(Fo.getDefaults(),arguments,["value"]));this.name="TickSignal";const e=J(Fo.getDefaults(),arguments,["value"]);this.input=this._param=new Do({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class $o extends Ct{constructor(){super(J($o.getDefaults(),arguments,["frequency"]));this.name="TickSource",this._state=new Pl,this._tickOffset=new zt,this._ticksAtTime=new zt,this._secondsAtTime=new zt;const e=J($o.getDefaults(),arguments,["frequency"]);this.frequency=new Fo({context:this.context,units:e.units,value:e.frequency}),De(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ct.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Se(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!=s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Kt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class fi extends Ct{constructor(){super(J(fi.getDefaults(),arguments,["callback","frequency"]));this.name="Clock",this.callback=$e,this._lastUpdate=0,this._state=new Pl("stopped"),this._boundLoop=this._loop.bind(this);const e=J(fi.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new $o({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,De(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ct.getDefaults(),{callback:$e,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Ap(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ui.mixin(fi);class Vo extends ve{constructor(){super(J(Vo.getDefaults(),arguments,["delayTime","maxDelay"]));this.name="Delay";const e=J(Vo.getDefaults(),arguments,["delayTime","maxDelay"]),t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Ce({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),De(this,"delayTime")}static getDefaults(){return Object.assign(ve.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ol extends Ln{constructor(){super();this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=J(Ol.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:$e,onload:$e,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return we(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=$e,r=$e){return Rn(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ve(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new Ve(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pi extends At{constructor(){super(...arguments);this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ws(super._frequencyToUnits(e))}_ticksToUnits(e){return ws(super._ticksToUnits(e))}_beatsToUnits(e){return ws(super._beatsToUnits(e))}_secondsToUnits(e){return ws(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Dp(this.toMidi())}transpose(e){return new pi(this.context,this.toMidi()+e)}}function gh(n,e){return new pi(Ot(),n,e)}class Ys extends Zr{constructor(){super(...arguments);this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class U2 extends Ct{constructor(){super(...arguments);this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new zt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ya(n=>{n.draw=new U2({context:n})});va(n=>{n.draw.dispose()});class W2 extends Ln{constructor(){super(...arguments);this.name="IntervalTimeline",this._root=null,this._length=0}add(e){we(Se(e.time),"Events must have a time property"),we(Se(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new z2(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class z2{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ps extends ve{constructor(){super(J(Ps.getDefaults(),arguments,["volume"]));this.name="Volume";const e=J(Ps.getDefaults(),arguments,["volume"]);this.input=this.output=new qe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,De(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Lo extends ve{constructor(){super(J(Lo.getDefaults(),arguments));this.name="Destination",this.input=new Ps({context:this.context}),this.output=new qe({context:this.context}),this.volume=this.input.volume;const e=J(Lo.getDefaults(),arguments);di(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),di(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ya(n=>{n.destination=new Lo({context:n})});va(n=>{n.destination.dispose()});class H2 extends Ln{constructor(e){super();this.name="TimelineValue",this._timeline=new zt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class rs{constructor(e,t){this.id=rs._eventId++,this._remainderTime=0;const s=Object.assign(rs.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:$e,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}rs._eventId=0;class Rl extends rs{constructor(e,t){super(e,t);this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Rl.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},rs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Oo(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ys(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Oo(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ys(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);fr(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class mi extends Ct{constructor(){super(J(mi.getDefaults(),arguments));this.name="Transport",this._loop=new H2(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new zt,this._repeatedEvents=new W2,this._syncedSignals=[],this._swingAmount=0;const e=J(mi.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new fi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),De(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ct.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Ys(this.context,this._swingTicks*2/3).toSeconds()*r}mh(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),mh(!1)}schedule(e,t){const s=new rs(this,{callback:e,time:new Zr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new Rl(this,{callback:e,duration:new Xt(this.context,r).toTicks(),interval:new Xt(this.context,t).toTicks(),time:new Zr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new rs(this,{callback:e,once:!0,time:new Zr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Ys(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Se(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Dt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Xt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Xt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ys(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Ys(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const i=this.bpm.getValueAtTime(r),o=1/(60/i/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const s=new qe(t);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),kl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ui.mixin(mi);ya(n=>{n.transport=new mi({context:n})});va(n=>{n.transport.dispose()});class yt extends ve{constructor(e){super(e);this.input=void 0,this._state=new Pl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=$e,this._syncedStop=$e,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ps({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,De(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,onstop:$e,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")we(fr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(tr(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Ap(this.context),this._start(r,t,s);return this}stop(e){let t=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Se(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(fr(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=$e,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class mr extends pr{constructor(){super(J(mr.getDefaults(),arguments,["url","onload"]));this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=J(mr.getDefaults(),arguments,["url","onload"]);Dn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ce({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ve(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(pr.getDefaults(),{url:new Ve,loop:!1,loopEnd:0,loopStart:0,onload:$e,onerror:$e,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){we(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=tr(t,this.loopStart):t=tr(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Ac(o,a)&&(o=(o-c)%l+c),Kt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Oo(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Se(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class gi extends yt{constructor(){super(J(gi.getDefaults(),arguments,["type"]));this.name="Noise",this._source=null;const e=J(gi.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(yt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(we(e in _h,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=_h[this._type];this._source=new mr({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Bs=44100*5,Fa=2,Mn={brown:null,pink:null,white:null},_h={get brown(){if(!Mn.brown){const n=[];for(let e=0;e<Fa;e++){const t=new Float32Array(Bs);n[e]=t;let s=0;for(let r=0;r<Bs;r++){const i=Math.random()*2-1;t[r]=(s+.02*i)/1.02,s=t[r],t[r]*=3.5}}Mn.brown=new Ve().fromArray(n)}return Mn.brown},get pink(){if(!Mn.pink){const n=[];for(let e=0;e<Fa;e++){const t=new Float32Array(Bs);n[e]=t;let s,r,i,o,a,c,l;s=r=i=o=a=c=l=0;for(let u=0;u<Bs;u++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,c=-.7616*c-h*.016898,t[u]=s+r+i+o+a+c+l+h*.5362,t[u]*=.11,l=h*.115926}}Mn.pink=new Ve().fromArray(n)}return Mn.pink},get white(){if(!Mn.white){const n=[];for(let e=0;e<Fa;e++){const t=new Float32Array(Bs);n[e]=t;for(let s=0;s<Bs;s++)t[s]=Math.random()*2-1}Mn.white=new Ve().fromArray(n)}return Mn.white}};function Vs(n,e){return tt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new ba(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Bo extends pr{constructor(){super(J(Bo.getDefaults(),arguments,["frequency","type"]));this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=J(Bo.getDefaults(),arguments,["frequency","type"]);Dn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ce({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ce({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),De(this,["frequency","detune"])}static getDefaults(){return Object.assign(pr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ke extends yt{constructor(){super(J(Ke.getDefaults(),arguments,["frequency","type"]));this.name="Oscillator",this._oscillator=null;const e=J(Ke.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),De(this,"frequency"),this.detune=new je({context:this.context,units:"cents",value:e.detune}),De(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new Bo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ke._periodicWaveCache.find(t=>t.phase===this._phase&&N2(t.partials,this._partials));{const e=Ke._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Se(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ke._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ke._periodicWaveCache.length>100&&Ke._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){sn(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return I2(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ke._periodicWaveCache=[];class _n extends ve{constructor(){super(Object.assign(J(_n.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return Ma(this,e,t,s),this}}class Os extends _n{constructor(){super(Object.assign(J(Os.getDefaults(),arguments,["mapping","length"])));this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=J(Os.getDefaults(),arguments,["mapping","length"]);Dt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):y2(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(je.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));we(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Vp extends _n{constructor(){super(...arguments);this.name="AudioToGain",this._norm=new Os({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class is extends je{constructor(){super(Object.assign(J(is.getDefaults(),arguments,["value"])));this.name="Multiply",this.override=!1;const e=J(is.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new qe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class _i extends yt{constructor(){super(J(_i.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="AMOscillator",this._modulationScale=new Vp({context:this.context}),this._modulationNode=new qe({context:this.context});const e=J(_i.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ke({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new is({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),De(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class yi extends yt{constructor(){super(J(yi.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="FMOscillator",this._modulationNode=new qe({context:this.context,gain:0});const e=J(yi.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ke({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ke({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new is({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new is({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),De(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class gr extends yt{constructor(){super(J(gr.getDefaults(),arguments,["frequency","width"]));this.name="PulseOscillator",this._widthGate=new qe({context:this.context,gain:0}),this._thresh=new Os({context:this.context,mapping:t=>t<=0?-1:1});const e=J(gr.getDefaults(),arguments,["frequency","width"]);this.width=new je({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),De(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class vi extends yt{constructor(){super(J(vi.getDefaults(),arguments,["frequency","type","spread"]));this.name="FatOscillator",this._oscillators=[];const e=J(vi.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,De(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ke.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(sn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Ke({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):$e});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class bi extends yt{constructor(){super(J(bi.getDefaults(),arguments,["frequency","modulationFrequency"]));this.name="PWMOscillator",this.sourceType="pwm",this._scale=new is({context:this.context,value:2});const e=J(bi.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new gr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ke({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),De(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const yh={am:_i,fat:vi,fm:yi,oscillator:Ke,pulse:gr,pwm:bi};class Rs extends yt{constructor(){super(J(Rs.getDefaults(),arguments,["frequency","type"]));this.name="OmniOscillator";const e=J(Rs.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),De(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ke.getDefaults(),yi.getDefaults(),_i.getDefaults(),vi.getDefaults(),gr.getDefaults(),bi.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=yh[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof yh[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&On(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&On(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Rn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Vs(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Dl extends je{constructor(){super(Object.assign(J(Dl.getDefaults(),arguments,["value"])));this.override=!1,this.name="Add",this._sum=new qe({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,di(this._constantSource,this._sum)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class wi extends _n{constructor(){super(Object.assign(J(wi.getDefaults(),arguments,["min","max"])));this.name="Scale";const e=J(wi.getDefaults(),arguments,["min","max"]);this._mult=this.input=new is({context:this.context,value:e.max-e.min}),this._add=this.output=new Dl({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(_n.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Fl extends _n{constructor(){super(Object.assign(J(Fl.getDefaults(),arguments)));this.name="Zero",this._gain=new qe({context:this.context}),this.output=this._gain,this.input=void 0,Dn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),$p(this.context.getConstant(0),this._gain),this}}class jo extends ve{constructor(){super(J(jo.getDefaults(),arguments,["frequency","min","max"]));this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ce.prototype._fromType,this._toType=Ce.prototype._toType,this._is=Ce.prototype._is,this._clampValue=Ce.prototype._clampValue;const e=J(jo.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Ke(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new qe({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new je({context:this.context,units:"audioRange",value:0}),this._zeros=new Fl({context:this.context}),this._a2g=new Vp({context:this.context}),this._scaler=this.output=new wi({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),De(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Ke.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,s=this.max;this._units=e,this.min=t,this.max=s}get state(){return this._oscillator.state}connect(e,t,s){return(e instanceof Ce||e instanceof je)&&(this.convert=e.convert,this.units=e.units),Ma(this,e,t,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Lp(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){sn(i,n,e),t.set(this,i)}})}}function Bn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){sn(this.toSeconds(i),n,e),t.set(this,i)}})}}class Mi extends yt{constructor(){super(J(Mi.getDefaults(),arguments,["url","onload"]));this.name="Player",this._activeSources=new Set;const e=J(Mi.getDefaults(),arguments,["url","onload"]);this._buffer=new Ve({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(yt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:$e,onerror:$e,playbackRate:1,reverse:!1})}load(e){return tt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=$e){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=tr(t,this._loopStart):t=tr(t,0);const r=this.toSeconds(t),i=s;s=tr(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new mr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Rt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&sn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&sn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}an([Bn(0)],Mi.prototype,"fadeIn",void 0);an([Bn(0)],Mi.prototype,"fadeOut",void 0);class G2 extends _n{constructor(){super(...arguments);this.name="GainToAudio",this._norm=new Os({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qo extends _n{constructor(){super(Object.assign(J(qo.getDefaults(),arguments,["value"])));this.name="Pow";const e=J(qo.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Os({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(_n.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ht extends ve{constructor(){super(J(Ht.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="Envelope",this._sig=new je({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=J(Ht.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ve.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Rn(e))return e;{let s;for(s in eo)if(eo[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Rn(s)&&Reflect.has(eo,s)){const r=eo[s];xs(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Dt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){we(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(we(Dt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return Ma(this,e,t,s),this}asArray(e=1024){return tt(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new ba(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}an([Bn(0)],Ht.prototype,"attack",void 0);an([Bn(0)],Ht.prototype,"decay",void 0);an([Lp(0,1)],Ht.prototype,"sustain",void 0);an([Bn(0)],Ht.prototype,"release",void 0);const eo=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class Fn extends ve{constructor(){super(J(Fn.getDefaults(),arguments));this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=J(Fn.getDefaults(),arguments);this._volume=this.output=new Ps({context:this.context,volume:e.volume}),this.volume=this._volume.volume,De(this,"volume")}static getDefaults(){return Object.assign(ve.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class yn extends Fn{constructor(){super(J(yn.getDefaults(),arguments));const e=J(yn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Fn.getDefaults(),{detune:0,onsilence:$e,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof At?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}an([Bn(0)],yn.prototype,"portamento",void 0);class Ta extends Ht{constructor(){super(J(Ta.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="AmplitudeEnvelope",this._gainNode=new qe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class _r extends yn{constructor(){super(J(_r.getDefaults(),arguments));this.name="Synth";const e=J(_r.getDefaults(),arguments);this.oscillator=new Rs(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ta(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),De(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(yn.getDefaults(),{envelope:Object.assign(vs(Ht.getDefaults(),Object.keys(ve.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(vs(Rs.getDefaults(),[...Object.keys(yt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ti extends ve{constructor(){super(J(Ti.getDefaults(),arguments,["frequency","type"]));this.name="BiquadFilter";const e=J(Ti.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ce({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Ce({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Ce({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Ce({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ve.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){we(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ei extends ve{constructor(){super(J(Ei.getDefaults(),arguments,["frequency","type","rolloff"]));this.name="Filter",this.input=new qe({context:this.context}),this.output=new qe({context:this.context}),this._filters=[];const e=J(Ei.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new je({context:this.context,units:"positive",value:e.Q}),this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this.gain=new je({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,De(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ve.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){we(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=On(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(t);we(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new Ti({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,di(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Ti({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),kl(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class xi extends Ht{constructor(){super(J(xi.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="FrequencyEnvelope";const e=J(xi.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new qo({context:this.context,value:e.exponent}),this._scale=this.output=new wi({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Ht.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);sn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Uo extends yn{constructor(){super(J(Uo.getDefaults(),arguments));this.name="MonoSynth";const e=J(Uo.getDefaults(),arguments);this.oscillator=new Rs(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ei(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new xi(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Ta(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),De(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(yn.getDefaults(),{envelope:Object.assign(vs(Ht.getDefaults(),Object.keys(ve.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(vs(Ei.getDefaults(),Object.keys(ve.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(vs(xi.getDefaults(),Object.keys(ve.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(vs(Rs.getDefaults(),Object.keys(yt.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Ai extends _r{constructor(){super(J(Ai.getDefaults(),arguments));this.name="MembraneSynth",this.portamento=0;const e=J(Ai.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,De(this,["oscillator","envelope"])}static getDefaults(){return Ss(yn.getDefaults(),_r.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof At?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}an([Lp(0)],Ai.prototype,"octaves",void 0);an([Bn(0)],Ai.prototype,"pitchDecay",void 0);const Bp=new Set;function $l(n){Bp.add(n)}function jp(n,e){const t=`registerProcessor("${n}", ${e})`;Bp.add(t)}const Y2=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;$l(Y2);const Z2=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;$l(Z2);const K2=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;$l(K2);const X2="feedback-comb-filter",Q2=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;jp(X2,Q2);class Wo extends Fn{constructor(){super(J(Wo.getDefaults(),arguments,["voice","options"]));this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r);const e=J(Wo.getDefaults(),arguments,["voice","options"]);we(!On(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Fn.getDefaults(),{maxPolyphony:32,options:{},voice:_r})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return we(e instanceof yn,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else _a("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(r=>{const i=new pi(this.context,r).toMidi(),o=this._getNextAvailableVoice();o&&(o.triggerAttack(r,t,s),this._activeVoices.push({midi:i,voice:o,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(s=>{const r=new pi(this.context,s).toMidi(),i=this._activeVoices.find(({midi:o,released:a})=>o===r&&!a);i&&(i.voice.triggerRelease(t),i.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,r){we(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,r):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,r)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s);if(this.triggerAttack(e,i,r),Dt(t)){we(Dt(e),"If the duration is an array, the notes must also be an array"),e=e;for(let o=0;o<e.length;o++){const a=t[Math.min(o,t.length-1)],c=this.toSeconds(a);we(c>0,"The duration must be greater than 0"),this.triggerRelease(e[o],i+c)}}else{const o=this.toSeconds(t);we(o>0,"The duration must be greater than 0"),this.triggerRelease(e,i+o)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=vs(e,["onsilence","context"]);return this.options=Ss(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Si extends Fn{constructor(){super(J(Si.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"));this.name="Sampler",this._activeSources=new Map;const e=J(Si.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(we(Ji(s)||On(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ji(s)){const i=new At(this.context,s).toMidi();t[i]=e.urls[s]}else On(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Ol({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Fn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:$e,onerror:$e,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=Rp(new At(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=Op(c+a),d=new mr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,s),Dt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new At(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Dt(t)?(we(Dt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(we(Ji(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ji(e)){const r=new At(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}an([Bn(0)],Si.prototype,"attack",void 0);an([Bn(0)],Si.prototype,"release",void 0);class zo extends ve{constructor(){super(Object.assign(J(zo.getDefaults(),arguments,["fade"])));this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new G2({context:this.context}),this.a=new qe({context:this.context,gain:0}),this.b=new qe({context:this.context,gain:0}),this.output=new qe({context:this.context}),this._internalChannels=[this.a,this.b];const e=J(zo.getDefaults(),arguments,["fade"]);this.fade=new je({context:this.context,units:"normalRange",value:e.fade}),De(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Dn(this._split,this.a.gain,0),Dn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ve.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class yr extends ve{constructor(e){super(e);this.name="Effect",this._dryWet=new zo({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new qe({context:this.context}),this.effectReturn=new qe({context:this.context}),this.input=new qe({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],De(this,"wet")}static getDefaults(){return Object.assign(ve.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class vh extends yr{constructor(e){super(e);this.name="LFOEffect",this._lfo=new jo({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,De(this,["frequency","depth"])}static getDefaults(){return Object.assign(yr.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ci extends ve{constructor(){super(Object.assign(J(Ci.getDefaults(),arguments,["pan"])));this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=J(Ci.getDefaults(),arguments,["pan"]);this.pan=new Ce({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",De(this,"pan")}static getDefaults(){return Object.assign(ve.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class Ho extends vh{constructor(){super(J(Ho.getDefaults(),arguments,["frequency"]));this.name="AutoPanner";const e=J(Ho.getDefaults(),arguments,["frequency"]);this._panner=new Ci({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(vh.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}const J2="bit-crusher",eM=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;jp(J2,eM);class Go extends ve{constructor(){super(J(Go.getDefaults(),arguments,["channels"]));this.name="Merge";const e=J(Go.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ve.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class bh extends yr{constructor(e){super(e);this.name="FeedbackEffect",this._feedbackGain=new qe({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,De(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(yr.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Yo extends bh{constructor(){super(J(Yo.getDefaults(),arguments,["delayTime","feedback"]));this.name="FeedbackDelay";const e=J(Yo.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Vo({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),De(this,"delayTime")}static getDefaults(){return Object.assign(bh.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Zo extends yr{constructor(){super(J(Zo.getDefaults(),arguments,["decay"]));this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=J(Zo.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(yr.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),sn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),sn(e,0),this._preDelay=e,this.generate()}generate(){return tt(this,void 0,void 0,function*(){const e=this.ready,t=new ba(2,this._decay+this._preDelay,this.context.sampleRate),s=new gi({context:t}),r=new gi({context:t}),i=new Go({context:t});s.connect(i,0,0),r.connect(i,0,1);const o=new qe({context:t}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then($e),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class et extends ve{constructor(){super(J(et.getDefaults(),arguments,["solo"]));this.name="Solo";const e=J(et.getDefaults(),arguments,["solo"]);this.input=this.output=new qe({context:this.context}),et._allSolos.has(this.context)||et._allSolos.set(this.context,new Set),et._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ve.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),et._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){et._soloed.has(this.context)||et._soloed.set(this.context,new Set),et._soloed.get(this.context).add(this)}_removeSolo(){et._soloed.has(this.context)&&et._soloed.get(this.context).delete(this)}_isSoloed(){return et._soloed.has(this.context)&&et._soloed.get(this.context).has(this)}_noSolos(){return!et._soloed.has(this.context)||et._soloed.has(this.context)&&et._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),et._allSolos.get(this.context).delete(this),this._removeSolo(),this}}et._allSolos=new Map;et._soloed=new Map;class Ko extends ve{constructor(){super(J(Ko.getDefaults(),arguments,["pan","volume"]));this.name="PanVol";const e=J(Ko.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ci({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ps({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,De(this,["pan","volume"])}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class _s extends ve{constructor(){super(J(_s.getDefaults(),arguments,["volume","pan"]));this.name="Channel";const e=J(_s.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new et({solo:e.solo,context:this.context}),this._panVol=this.output=new Ko({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),De(this,["pan","volume"])}static getDefaults(){return Object.assign(ve.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return _s.buses.has(e)||_s.buses.set(e,new qe({context:this.context})),_s.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new qe({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}_s.buses=new Map;class tM extends ve{constructor(){super(...arguments);this.name="Listener",this.positionX=new Ce({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ce({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ce({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ce({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ce({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ce({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ce({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ce({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ce({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ve.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ya(n=>{n.listener=new tM({context:n})});va(n=>{n.listener.dispose()});const wh=Ot().transport;Ot().destination;Ot().destination;Ot().listener;Ot().draw;Ot();class Qt{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==1}addListener(e,t,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Qt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new Mh(e,this,t,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,s={}){s.remaining=1,this.addListener(e,t,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?!!(this.eventMap[Qt.ANY_EVENT]&&this.eventMap[Qt.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof Mh?this.eventMap[e].filter(s=>s===t).length>0:typeof t=="function"?this.eventMap[e].filter(s=>s.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],r=this.eventMap[Qt.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(i=>{if(i.suspended)return;let o=[...t];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(s.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),s}removeListener(e,t,s={}){if(e===void 0)return void(this.eventMap={});if(!this.eventMap[e])return;let r=this.eventMap[e].filter(i=>t&&i.callback!==t||s.remaining&&s.remaining!==i.remaining||s.context&&s.context!==i.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((s,r)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),s()},{remaining:1});t.duration!==1/0&&(i=setTimeout(()=>{o.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Mh{constructor(e,t,s,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Qt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");r.arguments===void 0||Array.isArray(r.arguments)||(r.arguments=[r.arguments]),(r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r)).duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=s,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All properties are static and should be referenced using the class name. For example:
 * `Enumerations.MIDI_CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class H{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Zs{constructor(e,t={}){this.duration=se.defaults.note.duration,this.attack=se.defaults.note.attack,this.release=se.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=ae.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=ae.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=ae.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=ae.getNoteDetails(e);if(se.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(se.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(se.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(se.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(se.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(se.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(se.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return ae.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=ae.from7bitToFloat(e)}get rawRelease(){return ae.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=ae.from7bitToFloat(e)}get number(){return ae.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return se.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+12*e+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ae{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");let r=12*(s.octave+1+t);if(r+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[s.name],s.accidental&&(s.accidental.startsWith("b")?r-=s.accidental.length:r+=s.accidental.length),r<0||r>127)throw new RangeError("Invalid octaveOffset value");return r}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const s=t[1].toUpperCase(),r=parseInt(t[3]);let i=t[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:s+(i||"")+r,name:s,octave:r}}static sanitizeChannels(e){let t;if(this.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return t=Array.isArray(e)?e:[e],t.indexOf("all")>-1&&(t=H.MIDI_CHANNEL_NUMBERS),t.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let t=!1;const s=parseFloat(e);return!isNaN(s)&&(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(t=se.time+s):s>=0&&(t=s),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),t)}catch{return!1}return s}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const s=Math.floor(e/12-1)+t;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+s.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Zs)return e;let s=this.guessNoteNumber(e,t.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Zs(s,t)}static buildNoteArray(e,t={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{s.push(this.buildNote(r,t))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(127*e),0),127)}static fromMsbLsbToFloat(e,t=0){se.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const s=((e<<7)+t)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){se.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(16383*e);return{msb:t>>7,lsb:127&t}}static offsetNumber(e,t=0,s=0){if(se.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,s=parseInt(s)||0}return Math.min(Math.max(e+12*t+s,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(s=>e[s]===t)}static getCcNameByNumber(e){return ae.getPropertyByValue(H.MIDI_CONTROL_CHANGE_MESSAGES,e)}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in H.MIDI_CHANNEL_MODE_MESSAGES)if(H.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===H.MIDI_CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return new Function("try { return this === global; } catch(e) { return false; }")()}static get isBrowser(){return new Function("try { return this === window; } catch(e) { return false; }")()}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class nM extends Qt{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,s={}){if(se.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(t=ae.fromFloatTo7Bit(t));const r=se.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),ae.buildNoteArray(e).forEach(i=>{this.send([(H.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(r),t],{time:ae.toTimestamp(s.time)})}),this}sendControlChange(e,t,s={}){if(typeof e=="string"&&(e=H.MIDI_CONTROL_CHANGE_MESSAGES[e]),Array.isArray(t)||(t=[t]),se.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if((t=t.map(r=>{const i=Math.min(Math.max(parseInt(r),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i})).length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,i)=>{this.send([(H.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+32*i,t[i]],{time:ae.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2||this.sendControlChange(38,e[1],t),this}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=H.MIDI_REGISTERED_PARAMETERS[e]),se.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(H.MIDI_REGISTERED_PARAMETERS).forEach(r=>{H.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&H.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=H.MIDI_REGISTERED_PARAMETERS[e]),se.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(H.MIDI_REGISTERED_PARAMETERS).forEach(r=>{H.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&H.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){if(this.sendNoteOn(e,t),t.duration>0&&isFinite(String(t.duration).trim()||NaN)){let s={time:(ae.toTimestamp(t.time)||se.time)+t.duration,release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(e,s)}return this}sendNoteOff(e,t={}){if(se.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawRelease!=null?s=t.rawRelease:isNaN(t.release)||(s=Math.round(127*t.release));const r=se.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ae.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(i=>{this.send([(H.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(r),i.rawRelease],{time:ae.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(se.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawAttack!=null?s=t.rawAttack:isNaN(t.attack)||(s=Math.round(127*t.attack));const r=se.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ae.buildNoteArray(e,{rawAttack:s}).forEach(i=>{this.send([(H.MIDI_CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(r),i.rawAttack],{time:ae.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,s={}){if(typeof e=="string"&&(e=H.MIDI_CHANNEL_MODE_MESSAGES[e]),se.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(H.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:ae.toTimestamp(s.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(se.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(H.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*e)],{time:ae.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,se.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let i=r>>7&127,o=127&r;return this.sendRpnValue("channelcoarsetuning",s,t),this.sendRpnValue("channelfinetuning",[i,o],t),this}sendModulationRange(e,t,s={}){if(se.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(t==null||Number.isInteger(t)&&t>=0&&t<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],s),this}sendNrpnValue(e,t,s={}){if(t=[].concat(t),se.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,t={}){if(se.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let s=0,r=0;if(t.rawValue&&Array.isArray(e))s=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))s=e;else{const i=ae.fromFloatToMsbLsb((e+1)/2);s=i.msb,r=i.lsb}return this.send([(H.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,s],{time:ae.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,s={}){if(se.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],s),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,se.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(H.MIDI_CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:ae.toTimestamp(t.time)}),this}sendRpnValue(e,t,s={}){if(Array.isArray(e)||(e=H.MIDI_REGISTERED_PARAMETERS[e]),se.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,t={}){if(se.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(se.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Sc extends Qt{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new nM(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:se.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},s=0){if(e instanceof qp&&(e=ae.isNode?e.data:e.rawData),e instanceof Uint8Array&&ae.isNode&&(e=Array.from(e)),se.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(!((r=parseInt(r))>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,ae.toTimestamp(t.time)),this}sendSysex(e,t=[],s={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=H.MIDI_SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=H.MIDI_SYSTEM_MESSAGES.sysexend,this.send(r,{time:s.time})}else{const r=e.concat(t,H.MIDI_SYSTEM_MESSAGES.sysexend);this.send([H.MIDI_SYSTEM_MESSAGES.sysex].concat(r),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():se.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(se.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([H.MIDI_SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){var s=(e=Math.floor(e)||0)>>7&127,r=127&e;return this.send([H.MIDI_SYSTEM_MESSAGES.songposition,s,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if(se.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([H.MIDI_SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([H.MIDI_SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return se.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,s={}){return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,s)}),this}sendControlChange(e,t,s={},r={}){if(se.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,s)}),this}sendPitchBendRange(e=0,t=0,s={}){return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,s)}),this}setPitchBendRange(e=0,t=0,s="all",r={}){return se.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,s={}){return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,s)}),this}setRegisteredParameter(e,t=[],s="all",r={}){return se.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,s={}){return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,s)}),this}setModulationRange(e=0,t=0,s="all",r={}){return se.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},s={}){return se.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=t,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",s={}){return se.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=t,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",s={}){return se.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=t,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,t=0,s={},r={}){if(se.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(se.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;(e=t).channels=s,e.channels==="all"&&(e.channels=H.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,s={}){return s.channels==null&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,s)}),this}setNonRegisteredParameter(e,t=[],s="all",r={}){return se.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",s={}){return se.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",s={}){return se.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=H.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},s={}){if(se.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},s={}){if(se.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=H.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Th{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(H.MIDI_SYSTEM_MESSAGES),...Object.keys(H.MIDI_CHANNEL_MESSAGES)],this.channels=H.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),se.validation&&(e.forEach(s=>{if(!(s instanceof Sc))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(s=>{if(!H.MIDI_SYSTEM_MESSAGES.hasOwnProperty(s)&&!H.MIDI_CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(s=>{if(!H.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{(!se.validation||t instanceof Sc)&&t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 * @fires InputChannel#controlchange
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-databuttonincrement
 * @fires InputChannel#event:nrpn-databuttondecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-databuttonincrement
 * @fires InputChannel#event:rpn-databuttondecrement
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class sM extends Qt{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const s=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[s]=!1,t.type="noteoff",t.note=new Zs(ae.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+se.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=ae.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[s]=!0,t.note=new Zs(ae.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+se.octaveOffset),{rawAttack:r}),t.value=ae.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Zs(ae.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+se.octaveOffset)),t.value=ae.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=s;else if(t.type==="controlchange"){t.controller={number:s,name:ae.getCcNameByNumber(s)},t.subtype=t.controller.name||"controller"+s,t.value=ae.from7bitToFloat(r),t.rawValue=r;const i=Object.assign({},t);i.type=`${t.type}-controller${s}`,delete i.subtype,this.emit(i.type,i),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=s,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=ae.from7bitToFloat(s),t.rawValue=s):t.type==="pitchbend"?(t.value=((r<<7)+s-8192)/8192,t.rawValue=(r<<7)+s):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],s=e.message.dataBytes[1],r=H.MIDI_CONTROL_CHANGE_MESSAGES;t===r.nonregisteredparameterfine||t===r.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],t===r.nonregisteredparameterfine?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):t===r.nonregisteredparametercoarse||t===r.registeredparametercoarse?t===r.nonregisteredparametercoarse?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):t!==r.dataentrycoarse&&t!==r.dataentryfine&&t!==r.databuttonincrement&&t!==r.databuttondecrement||(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===H.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||e===H.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||e===H.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||e===H.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||e===H.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||e===H.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||e===H.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||e===H.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(e,t,s,r){e=e==="nrpn"?"nrpn":"rpn";const i={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:s,value:ae.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};i.parameter=e==="rpn"?Object.keys(H.MIDI_REGISTERED_PARAMETERS).find(a=>H.MIDI_REGISTERED_PARAMETERS[a][0]===t&&H.MIDI_REGISTERED_PARAMETERS[a][1]===s):(t<<7)+s;const o=ae.getPropertyByValue(H.MIDI_CONTROL_CHANGE_MESSAGES,r.message.dataBytes[0]);i.type=`${e}-${o}`,this.emit(i.type,i),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return se.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),ae.getChannelModeByNumber(e)}getCcNameByNumber(e){if(se.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw new RangeError("Invalid control change number.");return ae.getCcNameByNumber(e)}getNoteState(e){e instanceof Zs&&(e=e.identifier);const t=ae.guessNoteNumber(e,se.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class qp{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=ae.getPropertyByValue(H.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=ae.getPropertyByValue(H.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===H.MIDI_SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class rM extends Qt{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new sM(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:se.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new qp(e.data),s={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",s),t.isSystemMessage?this._parseEvent(s):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(s),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){se.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,s={}){if(se.validation&&typeof s=="function"){let r=t!=null?[].concat(t):void 0;t=s,s={channels:r}}if(H.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=H.MIDI_CHANNEL_NUMBERS);let r=[];return ae.sanitizeChannels(s.channels).forEach(i=>{r.push(this.channels[i].addListener(e,t,s))}),r}return super.addListener(e,t,s)}addOneTimeListener(e,t,s={}){return s.remaining=1,this.addListener(e,t,s)}on(e,t,s,r){return this.addListener(e,t,s,r)}hasListener(e,t,s={}){if(se.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}return H.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=H.MIDI_CHANNEL_NUMBERS),ae.sanitizeChannels(s.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,s={}){if(se.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}if(s.channels===void 0&&(s.channels=H.MIDI_CHANNEL_NUMBERS),e==null)return ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();H.CHANNEL_EVENTS.includes(e)?ae.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].removeListener(e,t,s)}):super.removeListener(e,t,s)}addForwarder(e,t={}){let s;return s=e instanceof Th?e:new Th(e,t),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return se.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */const se=new class extends Qt{constructor(){super(),this.defaults={note:{attack:ae.from7bitToFloat(64),release:ae.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(n={},e=!1){if(ae.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=n.validation!==!1,this.validation&&(typeof n=="function"&&(n={callback:n,sysex:e}),e&&(n.sysex=!0)),this.enabled)return typeof n.callback=="function"&&n.callback(),Promise.resolve();const t={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{this.interface=await navigator.requestMIDIAccess({sysex:n.sysex,software:n.software})}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}return this.emit("enabled",r),typeof n.callback=="function"&&n.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let n={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",n),this.removeListener()})}getInputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(this._disconnectedInputs[t].id===n.toString())return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(this.inputs[t].id===n.toString())return this.inputs[t]}getInputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(~this._disconnectedInputs[t].name.indexOf(n))return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(n))return this.inputs[t]}getOutputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(~this._disconnectedOutputs[t].name.indexOf(n))return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(n))return this.outputs[t]}getOutputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(this._disconnectedOutputs[t].id===n.toString())return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(this.outputs[t].id===n.toString())return this.outputs[t]}noteNameToNumber(n){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),ae.toNoteNumber(n,this.octaveOffset)}getOctave(n){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),n=parseInt(n)),!isNaN(n)&&n>=0&&n<=127&&ae.getNoteDetails(ae.offsetNumber(n,this.octaveOffset)).octave}sanitizeChannels(n){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),ae.sanitizeChannels(n)}toMIDIChannels(n){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),ae.sanitizeChannels(n)}guessNoteNumber(n){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),ae.guessNoteNumber(n,this.octaveOffset)}getValidNoteArray(n,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),ae.buildNoteArray(n,e)}convertToTimestamp(n){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),ae.toTimestamp(n)}async _destroyInputsAndOutputs(){let n=[];return this.inputs.forEach(e=>n.push(e.destroy())),this.outputs.forEach(e=>n.push(e.destroy())),Promise.all(n).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(n){this._updateInputsAndOutputs();let e={timestamp:n.timeStamp,type:n.port.state,target:this};if(n.port.state==="connected"&&n.port.connection==="open"){n.port.type==="output"?e.port=this.getOutputById(n.port.id):n.port.type==="input"&&(e.port=this.getInputById(n.port.id)),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}else if(n.port.state==="disconnected"&&n.port.connection==="pending"){n.port.type==="input"?e.port=this.getInputById(n.port.id,{disconnected:!0}):n.port.type==="output"&&(e.port=this.getOutputById(n.port.id,{disconnected:!0})),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){const t=this._inputs[e];Array.from(this.interface.inputs.values()).find(s=>s===t._midiInput)||(this._disconnectedInputs.push(t),this._inputs.splice(e,1))}let n=[];return this.interface.inputs.forEach(e=>{if(!this._inputs.find(t=>t._midiInput===e)){let t=this._disconnectedInputs.find(s=>s._midiInput===e);t||(t=new rM(e)),this._inputs.push(t),n.push(t.open())}}),Promise.all(n)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){const t=this._outputs[e];Array.from(this.interface.outputs.values()).find(s=>s===t._midiOutput)||(this._disconnectedOutputs.push(t),this._outputs.splice(e,1))}let n=[];return this.interface.outputs.forEach(e=>{if(!this._outputs.find(t=>t._midiOutput===e)){let t=this._disconnectedOutputs.find(s=>s._midiOutput===e);t||(t=new Sc(e)),this._outputs.push(t),n.push(t.open())}}),Promise.all(n)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),ae.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),ae.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get outputs(){return this._outputs}get supported(){return typeof navigator!="undefined"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.15"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),H.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),H.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),H.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),H.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};se.constructor=null;const F=Nt({enabled:!1,initiated:!1,offset:-1,out:!0,inputs:{},outputs:{},forwards:{},playing:!1,channels:{},channel:tn("global-midi-channel",1),note:null,time:0,duration:0,maxDuration:3e3,message:null,log:[],cc:{},clock:0,filter:tn("global-midi-filter",{}),available:Pe(()=>Object.entries(F.outputs).length>0),total:{hits:0,dur:0,duration:Pe(()=>F.total.dur+F.duration),notes:[0,0,0,0,0,0,0,0,0,0,0,0],durations:[0,0,0,0,0,0,0,0,0,0,0,0],durs:Pe(()=>F.total.durations.map((n,e)=>({pitch:e,dur:n})).filter(n=>n.dur>0)),reset(){F.total.hits=0,F.total.dur=0,F.total.notes=new Array(12).fill(0),F.total.durations=new Array(12).fill(0)}}});ul(()=>{var n,e,t;F.time=se.time,((n=F==null?void 0:F.note)==null?void 0:n.velocity)>0?F.duration=se.time-((e=F==null?void 0:F.note)==null?void 0:e.timestamp):(F.total.dur+=F.duration,F.total.durations[((t=F==null?void 0:F.note)==null?void 0:t.pitch)||0]+=F.duration,F.duration=0)});St(()=>F.duration,n=>{n>F.maxDuration&&F.total.reset()});function kr(){return Er(()=>{se.supported&&iM()}),t_(()=>{if(!F.out)return;let n=Object.values(se.outputs);F.playing?n.forEach(e=>{e.sendContinue()}):n.forEach(e=>{e.sendStop()})}),{midi:F,midiAttack:zp,midiRelease:Hp,midiOnce:lM,setCC:uM,WebMidi:se}}function iM(){F.initiated||(se.enable(),se.addListener("enabled",n=>{F.enabled=!0,Eh()}),se.addListener("connected",n=>{Eh()}),se.addListener("disconnected",n=>{delete F[n.port.type+"s"][n.port.id]}),F.initiated=!0)}function Eh(){F.inputs=Nt({}),se.inputs.forEach(n=>{F.enabled=!0,F.inputs[n.id]={name:n.name,manufacturer:n.manufacturer,forwarder:n.addForwarder(),event:null,note:null,cc:null},n.removeListener(),n.addListener("start",()=>{F.playing=!0}),n.addListener("stop",()=>{F.playing=!1,F.channels={}}),n.addListener("midimessage",e=>{var t;((t=e==null?void 0:e.message)==null?void 0:t.type)!="clock"&&(F.inputs[n.id].event=e,F.message=e.message,F.log.unshift(e),F.log.length>100&&F.log.pop())}),n.addListener("noteon",e=>{F.inputs[n.id].note=xh(e),F.total.hits++;let t=(e.note.number+3)%12;F.total.notes[t]=F.total.notes[t]+1},{channels:"all"}),n.addListener("noteoff",e=>{F.inputs[n.id].note=xh(e)},{channels:"all"}),n.addListener("controlchange",e=>{const t=oM(e);!t||(F.inputs[n.id].cc=t,F.cc=t)},{channels:"all"}),n.addListener("clock",e=>{F.clock=e.timestamp})}),F.outputs=Nt({}),se.outputs.forEach(n=>{F.outputs[n.id]={name:n.name,manufacturer:n.manufacturer}})}function xh(n){let e=n.note;if(e.port=n.port.id,e.type=n.type,e.timestamp=n.timestamp,e.channel=n.target.number,n.type=="noteoff"?e.velocity=0:e.velocity=100,e.pitch=(e.number+3)%12,e.octA=Math.floor((e.number+3)/12)-1,!F.filter[e.channel])return Up(e.channel),F.channels[e.channel].notes[e.number]=e,F.note=e,e}function oM(n){if(F.filter[n.target.number])return;let e={channel:n.target.number,timestamp:n.timestamp,number:n.controller.number,value:n.value,raw:n.rawValue,port:n.port.id};return Up(e.channel),F.channels[e.channel].cc[e.number]=e,e}function Up(n){F.channels[n]||(F.channels[n]={num:n,activeNotes:{},notes:{},cc:{}})}function Wp(n,e,t){var s,r,i;(i=(r=(s=F.channels)==null?void 0:s[n])==null?void 0:r.notes)!=null&&i[e]&&(F.channels[n].notes[e].velocity=t)}function zp(n,e){if(!F.out)return;let t=(n==null?void 0:n.channel)||F.channel;Wp(t,n==null?void 0:n.number,100),se.outputs.forEach(s=>{s.playNote(n.number,ne({channels:t},e))})}function aM(n,e){!F.out||se.outputs.forEach(t=>{t.playNote(n,ne({channels:F.channel},e))})}function cM(n,e){!F.out||(n?se.outputs.forEach(t=>{t.stopNote(n,ne({channels:F.channel},e))}):se.outputs.forEach(t=>{t.sendAllNotesOff(),t.sendAllSoundOff({time:"+1"})}))}function Hp(n){if(!!F.out)if(n){let e=(n==null?void 0:n.channel)||F.channel;Wp(e,n==null?void 0:n.number,0),se.outputs.forEach(t=>{t.stopNote(n.number,{channels:e})})}else se.outputs.forEach(e=>{e.sendAllNotesOff(),e.sendAllSoundOff({time:"+1"})})}function lM(n,e){!F.out||F.filter[F.channel]||(aM(n,e),setTimeout(()=>{cM(n,e)},300))}function uM(n,e){!F.out||se.outputs.forEach(t=>{t.sendControlChange(Number(n.number),e,n.channel)})}function hM(){!F.out||(F.channels={},F.playing=!1,se.outputs.forEach(n=>{n.sendAllNotesOff(),n.sendAllSoundOff({time:"+1"}),n.sendReset()}))}function dM(n,e){var i,o;const t=se.outputs.find(a=>a.id==e),s=F.inputs[n].forwarder.destinations,r=s.indexOf(t);r==-1?(s.push(t),F.forwards[n]=F.forwards[n]||{},F.forwards[n][e]=!0):(s.splice(r,1),(o=(i=F.forwards)==null?void 0:i[n])==null||delete o[e])}const Le={},Ge=Nt({midi:!0,bpm:mc(tn("tempo-bpm",100),10,500),quantize:"@16n",octave:mc(tn("synth-transpose",0),-2,2),transpose:Pe(()=>Ge.octave*12),initiated:!1,params:{oscillator:{type:tn("synth-osc","sawtooth8")},volume:-12,envelope:{attack:.005,decay:.3,sustain:.4,release:.8},filterEnvelope:{attack:.001,decay:.7,sustain:.5,release:1,baseFrequency:60,octaves:5}}});function Gp(){return Ge.initiated||(wh.bpm.set(Ge.bpm),wh.start(),St(()=>Ge.params,n=>{Le.poly&&Le.poly.set(n)},{deep:!0}),St(()=>F.note,n=>{!Ge.midi||(n.velocity>0?Ah(gh(n.number).toFrequency(),n.velocity/127):Sh(gh(n.number).toFrequency()))}),St(()=>F.playing,n=>{n||Ch()})),{init:Ir,synth:Le,synthOptions:Ge,synthOnce:fM,synthAttack:Ah,synthRelease:Sh,synthReleaseAll:Ch}}function Ir(){F2(),!(Le!=null&&Le.poly)&&(Le.pan=new Ho({depth:.4,frequency:"8n",wet:.7}).toDestination(),Le.reverb=new Zo(2.5).connect(Le.pan),Le.poly=new Wo(Uo,Ge.params).connect(Le.pan),Le.delay=new Yo({delayTime:"8n",wet:.3,feedback:.3,maxDelay:"8n"}).toDestination(),Le.poly.connect(Le.reverb),Le.poly.connect(Le.delay),Le.poly.connect(Le.pan),Le.pan.start(),Ge.initiated=!0)}function fM(n="A4",e="8n",t){if(!Le.poly||Ge.mute)return Ir();Le.poly.triggerAttackRelease(n,e),Le.poly.releaseAll(Ge.quantize)}function Ah(n,e){if(!Le.poly||Ge.mute)return Ir();Le.poly.triggerAttack(Fp(n).transpose(Ge.transpose),Ge.quantize,e)}function Sh(n){if(!Le.poly||Ge.mute)return Ir();Le.poly.triggerRelease(Fp(n).transpose(Ge.transpose),Ge.quantize)}function Ch(){if(!Le.poly||Ge.mute)return Ir();Le.poly.releaseAll(Ge.quantize)}const pM={key:0,class:"absolute z-500 p-4 rounded-xl shadow-xl bg-light-200 mx-auto dark_bg-dark-200 min-w-80",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},mM=q("h2",{class:"font-bold"},"Let's play music with touch ",-1),gM={class:"p-4"},_M=["id","onUpdate:modelValue"],yM=["for"],vM={setup(n){const e=Be(!1),t=Nt({browser:{text:"MIDI enabled browser",checked:Pe(()=>F==null?void 0:F.enabled)},controller:{text:"TouchMe (or any other MIDI controller)",checked:!1},usb:{text:"USB (you have it in your package)",checked:!1},device:{text:"Computer / tablet or phone",checked:!1},adapter:{text:"Special adapter, if your device doesn\u2019t have a usb port (there is Android&Macbook and iPhone adapter in our shop)",checked:!1},friend:{text:"Your best friend ",checked:!1}});return(s,r)=>e.value?qt("",!0):(ie(),ue("div",pM,[mM,q("p",null,Ie(b(F).enabled),1),q("div",gM,[(ie(!0),ue(Re,null,it(b(t),(i,o)=>(ie(),ue("div",{class:"flex items-center my-2",key:o},[Pn(q("input",{class:"transform scale-200",type:"checkbox",id:o,"onUpdate:modelValue":a=>i.checked=a},null,8,_M),[[_0,i.checked]]),q("label",{class:"ml-4",for:o},Ie(i.text),9,yM)]))),128))]),q("button",{class:"button mx-auto w-full font-bold",onClick:r[0]||(r[0]=i=>{b(Ir)(),e.value=!0})},"Start")]))}},bM={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},wM=q("path",{fill:"currentColor",d:"M4 4v9h2V6h7V4H4zm15 0v2h7v7h2V4h-9zM4 19v9h9v-2H6v-7H4zm22 0v7h-7v2h9v-9h-2z"},null,-1),MM=[wM];function TM(n,e){return ie(),ue("svg",bM,MM)}var EM={name:"la-expand",render:TM};const xM={props:["el"],setup(n){const e=n,t=Be();Er(()=>{Ii(()=>{e.el?t.value=e.el:t.value=document.getElementById("screen"),s.value=Yu(t.value)})});const s=Be();function r(){s.value||(s.value=Yu(t.value)),s.value.toggle()}const i=Pe(()=>{var o;return(o=s.value)==null?void 0:o.isSupported});return(o,a)=>{const c=EM;return Pn((ie(),ue("button",{onClick:a[0]||(a[0]=l=>r())},[Ae(c)],512)),[[lr,b(i)]])}}},AM={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},SM=q("path",{fill:"currentColor",d:"M8 6v9H2v2h8V8h5v18h9v-9h6v-2h-8v9h-5V6H8z"},null,-1),CM=[SM];function NM(n,e){return ie(),ue("svg",AM,CM)}var Yp={name:"la-wave-square",render:NM};const kM={setup(n){const{synthOptions:e,synthOnce:t,init:s}=Gp();return(r,i)=>{const o=Yp;return ie(),ue("button",{class:"icon",onClick:i[0]||(i[0]=Af(a=>{b(t)(),!b(e).initiated&&b(s)()},["stop","prevent"])),"aria-label":"Synth panel"},[Ae(o)])}}},IM={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},PM=q("path",{fill:"currentColor",d:"M6 6v20h20V6zm2 2h16v16H8z"},null,-1),OM=[PM];function RM(n,e){return ie(),ue("svg",IM,OM)}var DM={name:"la-stop",render:RM};const FM={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},$M=q("path",{fill:"currentColor",d:"M10 6v20h2V6zm10 0v20h2V6z"},null,-1),VM=[$M];function LM(n,e){return ie(),ue("svg",FM,VM)}var BM={name:"la-pause",render:LM};const jM={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},qM=q("path",{fill:"currentColor",d:"M9 5.156v21.688l1.531-1L25.844 16L10.53 6.156zm2 3.657L22.156 16L11 23.188z"},null,-1),UM=[qM];function WM(n,e){return ie(),ue("svg",jM,UM)}var zM={name:"la-play",render:WM};const HM=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];function Qe(n=0,e,t=1,s=1){return e=e||Math.floor(n/12)+4,`hsla(${n%12*30},${t*100}%,${Math.abs(e+2)*8}%,${s})`}function GM(n=0,e=12,t=35,s=100,r=100){let i=(n-e/4)/(e/2)*Math.PI,o=t*Math.cos(i)+s/2,a=t*Math.sin(i)+r/2;return{x:o,y:a}}function YM(n,e=1){return[...n.slice(e,n.length),...n.slice(0,e)]}var cs=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t};const Ea=n=>(Kc("data-v-8b90ad92"),n=n(),Xc(),n),ZM={class:"m-auto layer w-full z-40"},KM={key:0,class:"p-2 border border-red-500 text-red-500"},XM=il("MIDI is not available. Use a "),QM=Ea(()=>q("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"compatible browser ",-1)),JM=Ea(()=>q("span",null,"or ",-1)),eT=Ea(()=>q("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),tT=[XM,QM,JM,eT],nT={key:1,class:"flex items-center justify-center flex-wrap py-2 m-auto"},sT={class:"flex m-2"},rT={class:"font-normal p-2 border border-green-500 text-green-500 select-none rounded-lg"},iT={key:0},oT={key:1},aT={class:"w-2em"},cT={class:"flex-1"},lT={class:"button border"},uT={key:1,class:"button"},hT=Ea(()=>q("span",null,"CH",-1)),dT={props:{toChannel:{type:Boolean,default:!0}},setup(n){return U0(" ",e=>{e.preventDefault(),F.playing=!F.playing}),(e,t)=>{var c;const s=yo("bi-volume-up"),r=yo("bi-volume-off"),i=zM,o=BM,a=DM;return ie(),ue("div",ZM,[b(F).enabled?(ie(),ue("div",nT,[q("div",sT,[q("div",rT,[b(F).available?(ie(),ue("span",iT,"MIDI ")):(ie(),ue("span",oT,"Plug in your MIDI device"))])]),q("div",{class:ts(["button opacity-30",{active:b(F).out}]),onClick:t[0]||(t[0]=l=>b(F).out=!b(F).out)},"OUT",2),(c=b(F).note)!=null&&c.name?(ie(),ue("div",{key:0,class:"button w-3em transition-all duration-50 cursor-pointer flex",onMousedown:t[1]||(t[1]=l=>b(zp)(b(F).note)),onMouseup:t[2]||(t[2]=l=>b(Hp)(b(F).note)),style:rt({borderColor:b(Qe)(b(F).note.pitch,b(F).note.octA),color:b(Qe)(b(F).note.pitch,b(F).note.octA)})},[q("div",aT,Ie(b(F).note.name),1),q("div",cT,Ie(b(F).note.accidental),1)],36)):qt("",!0),q("button",{class:ts(["button border",{active:b(Ge).midi}]),onClick:t[3]||(t[3]=l=>b(Ge).midi=!b(Ge).midi)},[b(Ge).midi?(ie(),ht(s,{key:0})):(ie(),ht(r,{key:1}))],2),q("button",{class:"play button",onClick:t[4]||(t[4]=l=>b(F).playing=!b(F).playing)},[b(F).playing?(ie(),ht(o,{key:1})):(ie(),ht(i,{key:0}))]),q("button",{class:"text-button border",onClick:t[5]||(t[5]=l=>b(hM)())},[Ae(a)]),(ie(!0),ue(Re,null,it(b(F).outputs,l=>(ie(),ue("div",lT,[q("span",null,Ie(l.name),1)]))),256)),n.toChannel?(ie(),ue("div",uT,[hT,Pn(q("input",{class:"ch ml-2",type:"number",inputmode:"numeric",pattern:"[0-9]*",max:"16",min:"1",length:"12","onUpdate:modelValue":t[6]||(t[6]=l=>b(F).channel=l)},null,512),[[g0,b(F).channel]])])):qt("",!0)])):(ie(),ue("div",KM,tT))])}}};var fT=cs(dT,[["__scopeId","data-v-8b90ad92"]]);const pT={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mT=q("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2zm8.182 10c0-3.82-2.635-7.039-6.182-7.934V6h-4V4.066C6.453 4.96 3.818 8.18 3.818 12c0 4.51 3.673 8.182 8.182 8.182c4.51 0 8.182-3.673 8.182-8.182zM7 10.636a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728zm10 0a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728zm-8.636 3.637a1.364 1.364 0 1 1 0 2.727a1.364 1.364 0 0 1 0-2.727zm7.272 0a1.364 1.364 0 1 1 0 2.727a1.364 1.364 0 0 1 0-2.727zM12 15.636a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728z",fill:"currentColor"},null,-1),gT=[mT];function _T(n,e){return ie(),ue("svg",pT,gT)}var yT={name:"mdi-midi-input",render:_T};const vT={setup(n){const e=tn("global-midi-panel",!1),t=Be(null);kf(t,()=>{e.value=!1});const{midi:s}=kr();return(r,i)=>{var c,l;const o=yT,a=fT;return ie(),ue("button",{onClick:i[0]||(i[0]=Af(u=>e.value=!b(e),["stop"])),"aria-label":"Toggle MIDI panel"},[Ae(o,{class:"transition-all duration-200",style:rt({opacity:b(s).enabled?1:.2,color:b(Qe)(b(s).enabled?(c=b(s).note)==null?void 0:c.pitch:0,(l=b(s).note)==null?void 0:l.octA)})},null,8,["style"]),Ae(Oi,{name:"panel"},{default:ss(()=>[b(e)?(ie(),ht(a,{key:0,class:"panel",ref_key:"target",ref:t},null,512)):qt("",!0)]),_:1})])}}};var bT=cs(vT,[["__scopeId","data-v-5a72ea27"]]);const wT={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},MT=P_('<path d="M256 387c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4v-46.2c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M256 48c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4V63.4c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M125 256c0-8.5-6.9-15.4-15.4-15.4H63.4c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4z" fill="currentColor"></path><path d="M448.6 240.6h-46.2c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4s-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M152.5 344.1c-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5l32.7-32.7c6-6 6-15.8 0-21.8-2.9-2.9-6.8-4.5-10.9-4.5z" fill="currentColor"></path><path d="M359.5 167.9c4.1 0 8-1.6 10.9-4.5l32.7-32.7c2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5z" fill="currentColor"></path><path d="M130.7 108.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-2.9 2.9-4.5 6.8-4.5 10.9 0 4.1 1.6 8 4.5 10.9l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"></path><path d="M370.4 348.6c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-6 6-6 15.8 0 21.8l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"></path><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96z" fill="currentColor"></path>',9),TT=[MT];function ET(n,e){return ie(),ue("svg",wT,TT)}var xT={name:"ion-ios-sunny",render:ET};const AT={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ST=q("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),CT=[ST];function NT(n,e){return ie(),ue("svg",AT,CT)}var kT={name:"carbon-moon",render:NT};const to=o1();Nt({initiated:!1,mute:tn("mute",!1),volume:mc(tn("main-vol",1),0,1)});const IT={setup(n){return(e,t)=>{const s=kT,r=xT;return ie(),ue("button",{onClick:t[0]||(t[0]=i=>to.value=!b(to)),"aria-label":"Toggle dark mode"},[Pn(Ae(s,null,null,512),[[lr,b(to)]]),Pn(Ae(r,null,null,512),[[lr,!b(to)]])])}}};/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Zp=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Pr=n=>Zp?Symbol(n):"_vr_"+n,PT=Pr("rvlm"),Nh=Pr("rvd"),Vl=Pr("r"),Ll=Pr("rl"),Cc=Pr("rvl"),Hs=typeof window!="undefined";function OT(n){return n.__esModule||Zp&&n[Symbol.toStringTag]==="Module"}const We=Object.assign;function $a(n,e){const t={};for(const s in e){const r=e[s];t[s]=Array.isArray(r)?r.map(n):n(r)}return t}const Kr=()=>{},RT=/\/$/,DT=n=>n.replace(RT,"");function Va(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("?"),c=e.indexOf("#",a>-1?a:0);return a>-1&&(s=e.slice(0,a),i=e.slice(a+1,c>-1?c:e.length),r=n(i)),c>-1&&(s=s||e.slice(0,c),o=e.slice(c,e.length)),s=LT(s!=null?s:e,t),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function FT(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function kh(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function $T(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&vr(e.matched[s],t.matched[r])&&Kp(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function vr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Kp(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!VT(n[t],e[t]))return!1;return!0}function VT(n,e){return Array.isArray(n)?Ih(n,e):Array.isArray(e)?Ih(e,n):n===e}function Ih(n,e){return Array.isArray(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function LT(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/");let r=t.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],!(r===1||o==="."))if(o==="..")r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var Ni;(function(n){n.pop="pop",n.push="push"})(Ni||(Ni={}));var Xr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Xr||(Xr={}));function BT(n){if(!n)if(Hs){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),DT(n)}const jT=/^[^#]+#/;function qT(n,e){return n.replace(jT,"#")+e}function UT(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const xa=()=>({left:window.pageXOffset,top:window.pageYOffset});function WT(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=UT(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Ph(n,e){return(history.state?history.state.position-e:-1)+n}const Nc=new Map;function zT(n,e){Nc.set(n,e)}function HT(n){const e=Nc.get(n);return Nc.delete(n),e}let GT=()=>location.protocol+"//"+location.host;function Xp(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let a=r.includes(n.slice(i))?n.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),kh(c,"")}return kh(t,n)+s+r}function YT(n,e,t,s){let r=[],i=[],o=null;const a=({state:d})=>{const f=Xp(n,location),p=t.value,g=e.value;let m=0;if(d){if(t.value=f,e.value=d,o&&o===p){o=null;return}m=g?d.position-g.position:0}else s(f);r.forEach(_=>{_(t.value,p,{delta:m,type:Ni.pop,direction:m?m>0?Xr.forward:Xr.back:Xr.unknown})})};function c(){o=t.value}function l(d){r.push(d);const f=()=>{const p=r.indexOf(d);p>-1&&r.splice(p,1)};return i.push(f),f}function u(){const{history:d}=window;!d.state||d.replaceState(We({},d.state,{scroll:xa()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function Oh(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?xa():null}}function ZT(n){const{history:e,location:t}=window,s={value:Xp(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+c:GT()+n+c;try{e[u?"replaceState":"pushState"](l,"",d),r.value=l}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(c,l){const u=We({},e.state,Oh(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=We({},r.value,e.state,{forward:c,scroll:xa()});i(u.current,u,!0);const h=We({},Oh(s.value,c,null),{position:u.position+1},l);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function KT(n){n=BT(n);const e=ZT(n),t=YT(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=We({location:"",base:n,go:s,createHref:qT.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function XT(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),KT(n)}function QT(n){return typeof n=="string"||n&&typeof n=="object"}function Qp(n){return typeof n=="string"||typeof n=="symbol"}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Jp=Pr("nf");var Rh;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Rh||(Rh={}));function br(n,e){return We(new Error,{type:n,[Jp]:!0},e)}function zn(n,e){return n instanceof Error&&Jp in n&&(e==null||!!(n.type&e))}const Dh="[^/]+?",JT={sensitive:!1,strict:!1,start:!0,end:!0},eE=/[.+*?^${}()[\]/\\]/g;function tE(n,e){const t=We({},JT,e),s=[];let r=t.start?"^":"";const i=[];for(const l of n){const u=l.length?[]:[90];t.strict&&!l.length&&(r+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(eE,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:g,optional:m,regexp:_}=d;i.push({name:p,repeatable:g,optional:m});const w=_||Dh;if(w!==Dh){f+=10;try{new RegExp(`(${w})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${p}" (${w}): `+I.message)}}let k=g?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(k=m&&l.length<2?`(?:/${k})`:"/"+k),m&&(k+="?"),r+=k,f+=20,m&&(f+=-8),g&&(f+=-20),w===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(t.strict&&t.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=i[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,_=p in l?l[p]:"";if(Array.isArray(_)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const w=Array.isArray(_)?_.join("/"):_;if(!w)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=w}}return u}return{re:o,score:s,keys:i,parse:a,stringify:c}}function nE(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function sE(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=nE(s[t],r[t]);if(i)return i;t++}return r.length-s.length}const rE={type:0,value:""},iE=/[a-zA-Z0-9_]/;function oE(n){if(!n)return[[]];if(n==="/")return[[rE]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${l}": ${f}`)}let t=0,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function h(){!l||(t===0?i.push({type:0,value:l}):t===1||t===2||t===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&t!==2){s=t,t=4;continue}switch(t){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),t=1):d();break;case 4:d(),t=s;break;case 1:c==="("?t=2:iE.test(c)?d():(h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:t=3:u+=c;break;case 3:h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),r}function aE(n,e,t){const s=tE(oE(n.path),t),r=We(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function cE(n,e){const t=[],s=new Map;e=$h({strict:!1,end:!0,sensitive:!1},e);function r(u){return s.get(u)}function i(u,h,d){const f=!d,p=uE(u);p.aliasOf=d&&d.record;const g=$h(e,u),m=[p];if("alias"in u){const k=typeof u.alias=="string"?[u.alias]:u.alias;for(const I of k)m.push(We({},p,{components:d?d.record.components:p.components,path:I,aliasOf:d?d.record:p}))}let _,w;for(const k of m){const{path:I}=k;if(h&&I[0]!=="/"){const T=h.record.path,E=T[T.length-1]==="/"?"":"/";k.path=h.record.path+(I&&E+I)}if(_=aE(k,h,g),d?d.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),f&&u.name&&!Fh(_)&&o(u.name)),"children"in p){const T=p.children;for(let E=0;E<T.length;E++)i(T[E],_,d&&d.children[E])}d=d||_,c(_)}return w?()=>{o(w)}:Kr}function o(u){if(Qp(u)){const h=s.get(u);h&&(s.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function c(u){let h=0;for(;h<t.length&&sE(u,t[h])>=0&&(u.record.path!==t[h].record.path||!em(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!Fh(u)&&s.set(u.record.name,u)}function l(u,h){let d,f={},p,g;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw br(1,{location:u});g=d.record.name,f=We(lE(h.params,d.keys.filter(w=>!w.optional).map(w=>w.name)),u.params),p=d.stringify(f)}else if("path"in u)p=u.path,d=t.find(w=>w.re.test(p)),d&&(f=d.parse(p),g=d.record.name);else{if(d=h.name?s.get(h.name):t.find(w=>w.re.test(h.path)),!d)throw br(1,{location:u,currentLocation:h});g=d.record.name,f=We({},h.params,u.params),p=d.stringify(f)}const m=[];let _=d;for(;_;)m.unshift(_.record),_=_.parent;return{name:g,path:p,params:f,matched:m,meta:dE(m)}}return n.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function lE(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function uE(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:hE(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||{}:{default:n.component}}}function hE(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="boolean"?t:t[s];return e}function Fh(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function dE(n){return n.reduce((e,t)=>We(e,t.meta),{})}function $h(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}function em(n,e){return e.children.some(t=>t===n||em(n,t))}const tm=/#/g,fE=/&/g,pE=/\//g,mE=/=/g,gE=/\?/g,nm=/\+/g,_E=/%5B/g,yE=/%5D/g,sm=/%5E/g,vE=/%60/g,rm=/%7B/g,bE=/%7C/g,im=/%7D/g,wE=/%20/g;function Bl(n){return encodeURI(""+n).replace(bE,"|").replace(_E,"[").replace(yE,"]")}function ME(n){return Bl(n).replace(rm,"{").replace(im,"}").replace(sm,"^")}function kc(n){return Bl(n).replace(nm,"%2B").replace(wE,"+").replace(tm,"%23").replace(fE,"%26").replace(vE,"`").replace(rm,"{").replace(im,"}").replace(sm,"^")}function TE(n){return kc(n).replace(mE,"%3D")}function EE(n){return Bl(n).replace(tm,"%23").replace(gE,"%3F")}function xE(n){return n==null?"":EE(n).replace(pE,"%2F")}function Xo(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function AE(n){const e={};if(n===""||n==="?")return e;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(nm," "),o=i.indexOf("="),a=Xo(o<0?i:i.slice(0,o)),c=o<0?null:Xo(i.slice(o+1));if(a in e){let l=e[a];Array.isArray(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Vh(n){let e="";for(let t in n){const s=n[t];if(t=TE(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(Array.isArray(s)?s.map(i=>i&&kc(i)):[s&&kc(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function SE(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=Array.isArray(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}function Vr(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n,reset:t}}function Zn(n,e,t,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(br(4,{from:t,to:e})):h instanceof Error?a(h):QT(h)?a(br(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},l=n.call(s&&s.instances[r],e,t,c);let u=Promise.resolve(l);n.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function La(n,e,t,s){const r=[];for(const i of n)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(CE(a)){const l=(a.__vccOpts||a)[e];l&&r.push(Zn(l,t,s,i,o))}else{let c=a();r.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=OT(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Zn(d,t,s,i,o)()}))}}return r}function CE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Lh(n){const e=Nn(Vl),t=Nn(Ll),s=Pe(()=>e.resolve(b(n.to))),r=Pe(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(vr.bind(null,u));if(d>-1)return d;const f=Bh(c[l-2]);return l>1&&Bh(u)===f&&h[h.length-1].path!==f?h.findIndex(vr.bind(null,c[l-2])):d}),i=Pe(()=>r.value>-1&&PE(t.params,s.value.params)),o=Pe(()=>r.value>-1&&r.value===t.matched.length-1&&Kp(t.params,s.value.params));function a(c={}){return IE(c)?e[b(n.replace)?"replace":"push"](b(n.to)).catch(Kr):Promise.resolve()}return{route:s,href:Pe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const NE=Gd({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Lh,setup(n,{slots:e}){const t=Nt(Lh(n)),{options:s}=Nn(Vl),r=Pe(()=>({[jh(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[jh(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&e.default(t);return n.custom?i:cl("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),kE=NE;function IE(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function PE(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!Array.isArray(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Bh(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const jh=(n,e,t)=>n!=null?n:e!=null?e:t,OE=Gd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(n,{attrs:e,slots:t}){const s=Nn(Cc),r=Pe(()=>n.route||s.value),i=Nn(Nh,0),o=Pe(()=>r.value.matched[i]);oo(Nh,i+1),oo(PT,o),oo(Cc,r);const a=Be();return St(()=>[a.value,o.value,n.name],([c,l,u],[h,d,f])=>{l&&(l.instances[u]=c,d&&d!==l&&c&&c===h&&(l.leaveGuards.size||(l.leaveGuards=d.leaveGuards),l.updateGuards.size||(l.updateGuards=d.updateGuards))),c&&l&&(!d||!vr(l,d)||!h)&&(l.enterCallbacks[u]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,l=o.value,u=l&&l.components[n.name],h=n.name;if(!u)return qh(t.default,{Component:u,route:c});const d=l.props[n.name],f=d?d===!0?c.params:typeof d=="function"?d(c):d:null,g=cl(u,We({},f,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(l.instances[h]=null)},ref:a}));return qh(t.default,{Component:g,route:c})||g}}});function qh(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const RE=OE;function DE(n){const e=cE(n.routes,n),t=n.parseQuery||AE,s=n.stringifyQuery||Vh,r=n.history,i=Vr(),o=Vr(),a=Vr(),c=Od(Wn);let l=Wn;Hs&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$a.bind(null,P=>""+P),h=$a.bind(null,xE),d=$a.bind(null,Xo);function f(P,A){let S,j;return Qp(P)?(S=e.getRecordMatcher(P),j=A):j=P,e.addRoute(j,S)}function p(P){const A=e.getRecordMatcher(P);A&&e.removeRoute(A)}function g(){return e.getRoutes().map(P=>P.record)}function m(P){return!!e.getRecordMatcher(P)}function _(P,A){if(A=We({},A||c.value),typeof P=="string"){const ce=Va(t,P,A.path),v=e.resolve({path:ce.path},A),M=r.createHref(ce.fullPath);return We(ce,v,{params:d(v.params),hash:Xo(ce.hash),redirectedFrom:void 0,href:M})}let S;if("path"in P)S=We({},P,{path:Va(t,P.path,A.path).path});else{const ce=We({},P.params);for(const v in ce)ce[v]==null&&delete ce[v];S=We({},P,{params:h(P.params)}),A.params=h(A.params)}const j=e.resolve(S,A),pe=P.hash||"";j.params=u(d(j.params));const Z=FT(s,We({},P,{hash:ME(pe),path:j.path})),de=r.createHref(Z);return We({fullPath:Z,hash:pe,query:s===Vh?SE(P.query):P.query||{}},j,{redirectedFrom:void 0,href:de})}function w(P){return typeof P=="string"?Va(t,P,c.value.path):We({},P)}function k(P,A){if(l!==P)return br(8,{from:A,to:P})}function I(P){return y(P)}function T(P){return I(We(w(P),{replace:!0}))}function E(P){const A=P.matched[P.matched.length-1];if(A&&A.redirect){const{redirect:S}=A;let j=typeof S=="function"?S(P):S;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=w(j):{path:j},j.params={}),We({query:P.query,hash:P.hash,params:P.params},j)}}function y(P,A){const S=l=_(P),j=c.value,pe=P.state,Z=P.force,de=P.replace===!0,ce=E(S);if(ce)return y(We(w(ce),{state:pe,force:Z,replace:de}),A||S);const v=S;v.redirectedFrom=A;let M;return!Z&&$T(s,j,S)&&(M=br(16,{to:v,from:j}),_e(j,j,!0,!1)),(M?Promise.resolve(M):$(v,j)).catch(x=>zn(x)?zn(x,2)?x:he(x):re(x,v,j)).then(x=>{if(x){if(zn(x,2))return y(We(w(x.to),{state:pe,force:Z,replace:de}),A||v)}else x=N(v,j,!0,de,pe);return U(v,j,x),x})}function C(P,A){const S=k(P,A);return S?Promise.reject(S):Promise.resolve()}function $(P,A){let S;const[j,pe,Z]=FE(P,A);S=La(j.reverse(),"beforeRouteLeave",P,A);for(const ce of j)ce.leaveGuards.forEach(v=>{S.push(Zn(v,P,A))});const de=C.bind(null,P,A);return S.push(de),js(S).then(()=>{S=[];for(const ce of i.list())S.push(Zn(ce,P,A));return S.push(de),js(S)}).then(()=>{S=La(pe,"beforeRouteUpdate",P,A);for(const ce of pe)ce.updateGuards.forEach(v=>{S.push(Zn(v,P,A))});return S.push(de),js(S)}).then(()=>{S=[];for(const ce of P.matched)if(ce.beforeEnter&&!A.matched.includes(ce))if(Array.isArray(ce.beforeEnter))for(const v of ce.beforeEnter)S.push(Zn(v,P,A));else S.push(Zn(ce.beforeEnter,P,A));return S.push(de),js(S)}).then(()=>(P.matched.forEach(ce=>ce.enterCallbacks={}),S=La(Z,"beforeRouteEnter",P,A),S.push(de),js(S))).then(()=>{S=[];for(const ce of o.list())S.push(Zn(ce,P,A));return S.push(de),js(S)}).catch(ce=>zn(ce,8)?ce:Promise.reject(ce))}function U(P,A,S){for(const j of a.list())j(P,A,S)}function N(P,A,S,j,pe){const Z=k(P,A);if(Z)return Z;const de=A===Wn,ce=Hs?history.state:{};S&&(j||de?r.replace(P.fullPath,We({scroll:de&&ce&&ce.scroll},pe)):r.push(P.fullPath,pe)),c.value=P,_e(P,A,S,de),he()}let O;function G(){O=r.listen((P,A,S)=>{const j=_(P),pe=E(j);if(pe){y(We(pe,{replace:!0}),j).catch(Kr);return}l=j;const Z=c.value;Hs&&zT(Ph(Z.fullPath,S.delta),xa()),$(j,Z).catch(de=>zn(de,12)?de:zn(de,2)?(y(de.to,j).then(ce=>{zn(ce,20)&&!S.delta&&S.type===Ni.pop&&r.go(-1,!1)}).catch(Kr),Promise.reject()):(S.delta&&r.go(-S.delta,!1),re(de,j,Z))).then(de=>{de=de||N(j,Z,!1),de&&(S.delta?r.go(-S.delta,!1):S.type===Ni.pop&&zn(de,20)&&r.go(-1,!1)),U(j,Z,de)}).catch(Kr)})}let B=Vr(),ee=Vr(),Q;function re(P,A,S){he(P);const j=ee.list();return j.length?j.forEach(pe=>pe(P,A,S)):console.error(P),Promise.reject(P)}function le(){return Q&&c.value!==Wn?Promise.resolve():new Promise((P,A)=>{B.add([P,A])})}function he(P){return Q||(Q=!P,G(),B.list().forEach(([A,S])=>P?S(P):A()),B.reset()),P}function _e(P,A,S,j){const{scrollBehavior:pe}=n;if(!Hs||!pe)return Promise.resolve();const Z=!S&&HT(Ph(P.fullPath,0))||(j||!S)&&history.state&&history.state.scroll||null;return Ii().then(()=>pe(P,A,Z)).then(de=>de&&WT(de)).catch(de=>re(de,P,A))}const te=P=>r.go(P);let R;const V=new Set;return{currentRoute:c,addRoute:f,removeRoute:p,hasRoute:m,getRoutes:g,resolve:_,options:n,push:I,replace:T,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ee.add,isReady:le,install(P){const A=this;P.component("RouterLink",kE),P.component("RouterView",RE),P.config.globalProperties.$router=A,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>b(c)}),Hs&&!R&&c.value===Wn&&(R=!0,I(r.location).catch(pe=>{}));const S={};for(const pe in Wn)S[pe]=Pe(()=>c.value[pe]);P.provide(Vl,A),P.provide(Ll,Nt(S)),P.provide(Cc,c);const j=P.unmount;V.add(P),P.unmount=function(){V.delete(P),V.size<1&&(l=Wn,O&&O(),c.value=Wn,R=!1,Q=!1),j()}}}}function js(n){return n.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function FE(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(l=>vr(l,a))?s.push(a):t.push(a));const c=n.matched[o];c&&(e.matched.find(l=>vr(l,c))||r.push(c))}return[t,s,r]}function om(){return Nn(Ll)}const $E="modulepreload",Uh={},VE="/",Lr=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${VE}${s}`,s in Uh)return;Uh[s]=!0;const r=s.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":$E,r||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),r)return new Promise((a,c)=>{o.addEventListener("load",a),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},Aa=[{name:"index",path:"/",component:()=>Lr(()=>Promise.resolve().then(function(){return YA}),void 0),props:!0,title:"Scene",subtitle:"by Chromatone"},{name:"keys",path:"/keys",component:()=>Lr(()=>Promise.resolve().then(function(){return sC}),void 0),props:!0,title:"Keys",subtitle:"by Chromatone"},{name:"log",path:"/log",component:()=>Lr(()=>Promise.resolve().then(function(){return hC}),void 0),props:!0,title:"Log",subtitle:"by Chromatone"},{name:"router",path:"/router",component:()=>Lr(()=>Promise.resolve().then(function(){return SC}),void 0),props:!0,title:"Router",subtitle:"by Chromatone"},{name:"synth",path:"/synth",component:()=>Lr(()=>Promise.resolve().then(function(){return oN}),void 0),props:!0,title:"Synth",subtitle:"by Chromatone"}];function LE(n){return n+=n.endsWith("/")?"":"/"}var Tn;function BE(n){if(Tn)return Tn;Tn={};for(let e of n){if(e.path=="/")continue;const t=e.path.split("/").slice(0,-2).join("/"),s=LE(t);Tn[s]=Tn[s]||[],Tn[s].push(e)}for(let e in Tn)Tn[e].sort((t,s)=>(t==null?void 0:t.date)&&(s==null?void 0:s.date)?t.date>s.date?-1:1:0);return Tn}function jE(n,e){const t=[],s=n.split("/").filter(Boolean);for(let r in s){const i="/"+s.slice(0,-r).join("/")+"/";t.push(e.find(o=>o.path==i))}return t.filter(Boolean).reverse()}BE(Aa);const qE=n=>jE(n,Aa);var UE={grad:.9,turn:360,rad:360/(2*Math.PI)},En=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},lt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ut=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},am=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Wh=function(n){return{r:Ut(n.r,0,255),g:Ut(n.g,0,255),b:Ut(n.b,0,255),a:Ut(n.a)}},Ba=function(n){return{r:lt(n.r),g:lt(n.g),b:lt(n.b),a:lt(n.a,3)}},WE=/^#([0-9a-f]{3,8})$/i,no=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},cm=function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=Math.max(e,t,s),o=i-Math.min(e,t,s),a=o?i===e?(t-s)/o:i===t?2+(s-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:r}},lm=function(n){var e=n.h,t=n.s,s=n.v,r=n.a;e=e/360*6,t/=100,s/=100;var i=Math.floor(e),o=s*(1-t),a=s*(1-(e-i)*t),c=s*(1-(1-e+i)*t),l=i%6;return{r:255*[s,a,o,o,c,s][l],g:255*[c,s,s,a,o,o][l],b:255*[o,o,c,s,s,a][l],a:r}},zh=function(n){return{h:am(n.h),s:Ut(n.s,0,100),l:Ut(n.l,0,100),a:Ut(n.a)}},Hh=function(n){return{h:lt(n.h),s:lt(n.s),l:lt(n.l),a:lt(n.a,3)}},Gh=function(n){return lm((t=(e=n).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},Qr=function(n){return{h:(e=cm(n)).h,s:(r=(200-(t=e.s))*(s=e.v)/100)>0&&r<200?t*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,s,r},zE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ic={string:[[function(n){var e=WE.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?lt(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?lt(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=GE.exec(n)||YE.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Wh({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=zE.exec(n)||HE.exec(n);if(!e)return null;var t,s,r=zh({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(UE[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Gh(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=r===void 0?1:r;return En(e)&&En(t)&&En(s)?Wh({r:Number(e),g:Number(t),b:Number(s),a:Number(i)}):null},"rgb"],[function(n){var e=n.h,t=n.s,s=n.l,r=n.a,i=r===void 0?1:r;if(!En(e)||!En(t)||!En(s))return null;var o=zh({h:Number(e),s:Number(t),l:Number(s),a:Number(i)});return Gh(o)},"hsl"],[function(n){var e=n.h,t=n.s,s=n.v,r=n.a,i=r===void 0?1:r;if(!En(e)||!En(t)||!En(s))return null;var o=function(a){return{h:am(a.h),s:Ut(a.s,0,100),v:Ut(a.v,0,100),a:Ut(a.a)}}({h:Number(e),s:Number(t),v:Number(s),a:Number(i)});return lm(o)},"hsv"]]},Yh=function(n,e){for(var t=0;t<e.length;t++){var s=e[t][0](n);if(s)return[s,e[t][1]]}return[null,void 0]},ZE=function(n){return typeof n=="string"?Yh(n.trim(),Ic.string):typeof n=="object"&&n!==null?Yh(n,Ic.object):[null,void 0]},ja=function(n,e){var t=Qr(n);return{h:t.h,s:Ut(t.s+100*e,0,100),l:t.l,a:t.a}},qa=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Zh=function(n,e){var t=Qr(n);return{h:t.h,s:t.s,l:Ut(t.l+100*e,0,100),a:t.a}},Pc=function(){function n(e){this.parsed=ZE(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return lt(qa(this.rgba),2)},n.prototype.isDark=function(){return qa(this.rgba)<.5},n.prototype.isLight=function(){return qa(this.rgba)>=.5},n.prototype.toHex=function(){return e=Ba(this.rgba),t=e.r,s=e.g,r=e.b,o=(i=e.a)<1?no(lt(255*i)):"","#"+no(t)+no(s)+no(r)+o;var e,t,s,r,i,o},n.prototype.toRgb=function(){return Ba(this.rgba)},n.prototype.toRgbString=function(){return e=Ba(this.rgba),t=e.r,s=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+s+", "+r+", "+i+")":"rgb("+t+", "+s+", "+r+")";var e,t,s,r,i},n.prototype.toHsl=function(){return Hh(Qr(this.rgba))},n.prototype.toHslString=function(){return e=Hh(Qr(this.rgba)),t=e.h,s=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+s+"%, "+r+"%, "+i+")":"hsl("+t+", "+s+"%, "+r+"%)";var e,t,s,r,i},n.prototype.toHsv=function(){return e=cm(this.rgba),{h:lt(e.h),s:lt(e.s),v:lt(e.v),a:lt(e.a,3)};var e},n.prototype.invert=function(){return Zt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Zt(ja(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Zt(ja(this.rgba,-e))},n.prototype.grayscale=function(){return Zt(ja(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Zt(Zh(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Zt(Zh(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Zt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):lt(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Qr(this.rgba);return typeof e=="number"?Zt({h:e,s:t.s,l:t.l,a:t.a}):lt(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Zt(e).toHex()},n}(),Zt=function(n){return n instanceof Pc?n:new Pc(n)},Kh=[],KE=function(n){n.forEach(function(e){Kh.indexOf(e)<0&&(e(Pc,Ic),Kh.push(e))})},XE={grad:.9,turn:360,rad:360/(2*Math.PI)},Ua=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ks=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Cn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},Wa=function(n){var e=n/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},za=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},jl=96.422,ql=100,Ul=82.521,QE=function(n){var e,t,s={x:.9555766*(e=n).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return t={r:za(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:za(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:za(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:Cn(t.r,0,255),g:Cn(t.g,0,255),b:Cn(t.b,0,255),a:Cn(t.a)}},JE=function(n){var e=Wa(n.r),t=Wa(n.g),s=Wa(n.b);return function(r){return{x:Cn(r.x,0,jl),y:Cn(r.y,0,ql),z:Cn(r.z,0,Ul),a:Cn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*t+.1804375*s),y:100*(.2126729*e+.7151522*t+.072175*s),z:100*(.0193339*e+.119192*t+.9503041*s),a:n.a}))},Jr=216/24389,nr=24389/27,um=function(n){return{l:Cn(n.l,0,100),c:n.c,h:(e=n.h,(e=isFinite(e)?e%360:0)>0?e:e+360),a:n.a};var e},Xh=function(n){return{l:Ks(n.l,2),c:Ks(n.c,2),h:Ks(n.h,2),a:Ks(n.a,3)}},ex=function(n){var e=n.l,t=n.c,s=n.h,r=n.a,i=r===void 0?1:r;if(!Ua(e)||!Ua(t)||!Ua(s))return null;var o=um({l:Number(e),c:Number(t),h:Number(s),a:Number(i)});return hm(o)},Qh=function(n){var e=function(i){var o=JE(i),a=o.x/jl,c=o.y/ql,l=o.z/Ul;return a=a>Jr?Math.cbrt(a):(nr*a+16)/116,{l:116*(c=c>Jr?Math.cbrt(c):(nr*c+16)/116)-16,a:500*(a-c),b:200*(c-(l=l>Jr?Math.cbrt(l):(nr*l+16)/116)),alpha:o.a}}(n),t=Ks(e.a,3),s=Ks(e.b,3),r=Math.atan2(s,t)/Math.PI*180;return{l:e.l,c:Math.sqrt(t*t+s*s),h:r<0?r+360:r,a:e.alpha}},hm=function(n){return e={l:n.l,a:n.c*Math.cos(n.h*Math.PI/180),b:n.c*Math.sin(n.h*Math.PI/180),alpha:n.a},s=e.a/500+(t=(e.l+16)/116),r=t-e.b/200,QE({x:(Math.pow(s,3)>Jr?Math.pow(s,3):(116*s-16)/nr)*jl,y:(e.l>8?Math.pow((e.l+16)/116,3):e.l/nr)*ql,z:(Math.pow(r,3)>Jr?Math.pow(r,3):(116*r-16)/nr)*Ul,a:e.alpha});var e,t,s,r},tx=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nx=function(n){var e=tx.exec(n);if(!e)return null;var t,s,r=um({l:Number(e[1]),c:Number(e[2]),h:(t=e[3],s=e[4],s===void 0&&(s="deg"),Number(t)*(XE[s]||1)),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return hm(r)};function sx(n,e){n.prototype.toLch=function(){return Xh(Qh(this.rgba))},n.prototype.toLchString=function(){return t=Xh(Qh(this.rgba)),s=t.l,r=t.c,i=t.h,(o=t.a)<1?"lch("+s+"% "+r+" "+i+" / "+o+")":"lch("+s+"% "+r+" "+i+")";var t,s,r,i,o},e.string.push([nx,"lch"]),e.object.push([ex,"lch"])}var dn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},Ha=function(n){var e=n/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Ga=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},Wl=96.422,zl=100,Hl=82.521,rx=function(n){var e,t,s={x:.9555766*(e=n).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return t={r:Ga(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Ga(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Ga(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:dn(t.r,0,255),g:dn(t.g,0,255),b:dn(t.b,0,255),a:dn(t.a)}},ix=function(n){var e=Ha(n.r),t=Ha(n.g),s=Ha(n.b);return function(r){return{x:dn(r.x,0,Wl),y:dn(r.y,0,zl),z:dn(r.z,0,Hl),a:dn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*t+.1804375*s),y:100*(.2126729*e+.7151522*t+.072175*s),z:100*(.0193339*e+.119192*t+.9503041*s),a:n.a}))},ei=216/24389,sr=24389/27,Jh=function(n){var e=ix(n),t=e.x/Wl,s=e.y/zl,r=e.z/Hl;return t=t>ei?Math.cbrt(t):(sr*t+16)/116,{l:116*(s=s>ei?Math.cbrt(s):(sr*s+16)/116)-16,a:500*(t-s),b:200*(s-(r=r>ei?Math.cbrt(r):(sr*r+16)/116)),alpha:e.a}},ox=function(n,e,t){var s,r=Jh(n),i=Jh(e);return function(o){var a=(o.l+16)/116,c=o.a/500+a,l=a-o.b/200;return rx({x:(Math.pow(c,3)>ei?Math.pow(c,3):(116*c-16)/sr)*Wl,y:(o.l>8?Math.pow((o.l+16)/116,3):o.l/sr)*zl,z:(Math.pow(l,3)>ei?Math.pow(l,3):(116*l-16)/sr)*Hl,a:o.alpha})}({l:dn((s={l:r.l*(1-t)+i.l*t,a:r.a*(1-t)+i.a*t,b:r.b*(1-t)+i.b*t,alpha:r.alpha*(1-t)+i.alpha*t}).l,0,400),a:s.a,b:s.b,alpha:dn(s.alpha)})};function ax(n){function e(t,s,r){r===void 0&&(r=5);for(var i=[],o=1/(r-1),a=0;a<=r-1;a++)i.push(t.mix(s,o*a));return i}n.prototype.mix=function(t,s){s===void 0&&(s=.5);var r=t instanceof n?t:new n(t),i=ox(this.toRgb(),r.toRgb(),s);return new n(i)},n.prototype.tints=function(t){return e(this,"#fff",t)},n.prototype.shades=function(t){return e(this,"#000",t)},n.prototype.tones=function(t){return e(this,"#808080",t)}}function cx(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in t)s[t[r]]=r;var i={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=s[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!i.length)for(var f in t)i[f]=new n(t[f]).toRgb();for(var p in t){var g=(a=u,c=i[p],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));g<h&&(h=g,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":t[a];return c?new n(c).toRgb():null},"name"])}var Ya=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Br=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Jt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},Za=function(n){var e=n/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Ka=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},Gl=96.422,Yl=100,Zl=82.521,lx=function(n){var e,t,s={x:.9555766*(e=n).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return t={r:Ka(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Ka(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Ka(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:Jt(t.r,0,255),g:Jt(t.g,0,255),b:Jt(t.b,0,255),a:Jt(t.a)}},ux=function(n){var e=Za(n.r),t=Za(n.g),s=Za(n.b);return function(r){return{x:Jt(r.x,0,Gl),y:Jt(r.y,0,Yl),z:Jt(r.z,0,Zl),a:Jt(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*e+.3575761*t+.1804375*s),y:100*(.2126729*e+.7151522*t+.072175*s),z:100*(.0193339*e+.119192*t+.9503041*s),a:n.a}))},ti=216/24389,rr=24389/27,hx=function(n){var e=n.l,t=n.a,s=n.b,r=n.alpha,i=r===void 0?1:r;if(!Ya(e)||!Ya(t)||!Ya(s))return null;var o=function(a){return{l:Jt(a.l,0,400),a:a.a,b:a.b,alpha:Jt(a.alpha)}}({l:Number(e),a:Number(t),b:Number(s),alpha:Number(i)});return dx(o)},dx=function(n){var e=(n.l+16)/116,t=n.a/500+e,s=e-n.b/200;return lx({x:(Math.pow(t,3)>ti?Math.pow(t,3):(116*t-16)/rr)*Gl,y:(n.l>8?Math.pow((n.l+16)/116,3):n.l/rr)*Yl,z:(Math.pow(s,3)>ti?Math.pow(s,3):(116*s-16)/rr)*Zl,a:n.alpha})};function fx(n,e){n.prototype.toLab=function(){return s=ux(this.rgba),i=s.y/Yl,o=s.z/Zl,r=(r=s.x/Gl)>ti?Math.cbrt(r):(rr*r+16)/116,t={l:116*(i=i>ti?Math.cbrt(i):(rr*i+16)/116)-16,a:500*(r-i),b:200*(i-(o=o>ti?Math.cbrt(o):(rr*o+16)/116)),alpha:s.a},{l:Br(t.l,2),a:Br(t.a,2),b:Br(t.b,2),alpha:Br(t.alpha,3)};var t,s,r,i,o},n.prototype.delta=function(t){t===void 0&&(t="#FFF");var s=t instanceof n?t:new n(t),r=function(i,o){var a=i.l,c=i.a,l=i.b,u=o.l,h=o.a,d=o.b,f=180/Math.PI,p=Math.PI/180,g=Math.pow(Math.pow(c,2)+Math.pow(l,2),.5),m=Math.pow(Math.pow(h,2)+Math.pow(d,2),.5),_=(a+u)/2,w=Math.pow((g+m)/2,7),k=.5*(1-Math.pow(w/(w+Math.pow(25,7)),.5)),I=c*(1+k),T=h*(1+k),E=Math.pow(Math.pow(I,2)+Math.pow(l,2),.5),y=Math.pow(Math.pow(T,2)+Math.pow(d,2),.5),C=(E+y)/2,$=I===0&&l===0?0:Math.atan2(l,I)*f,U=T===0&&d===0?0:Math.atan2(d,T)*f;$<0&&($+=360),U<0&&(U+=360);var N=U-$,O=Math.abs(U-$);O>180&&U<=$?N+=360:O>180&&U>$&&(N-=360);var G=$+U;O<=180?G/=2:G=($+U<360?G+360:G-360)/2;var B=1-.17*Math.cos(p*(G-30))+.24*Math.cos(2*p*G)+.32*Math.cos(p*(3*G+6))-.2*Math.cos(p*(4*G-63)),ee=u-a,Q=y-E,re=2*Math.sin(p*N/2)*Math.pow(E*y,.5),le=1+.015*Math.pow(_-50,2)/Math.pow(20+Math.pow(_-50,2),.5),he=1+.045*C,_e=1+.015*C*B,te=30*Math.exp(-1*Math.pow((G-275)/25,2)),R=-2*Math.pow(w/(w+Math.pow(25,7)),.5)*Math.sin(2*p*te);return Math.pow(Math.pow(ee/1/le,2)+Math.pow(Q/1/he,2)+Math.pow(re/1/_e,2)+R*Q*re/(1*he*1*_e),.5)}(this.toLab(),s.toLab())/100;return Jt(Br(r,3))},e.object.push([hx,"lab"])}var so=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Bt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},jr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},dm=function(n){return{c:jr(n.c,0,100),m:jr(n.m,0,100),y:jr(n.y,0,100),k:jr(n.k,0,100),a:jr(n.a)}},ed=function(n){return{c:Bt(n.c,2),m:Bt(n.m,2),y:Bt(n.y,2),k:Bt(n.k,2),a:Bt(n.a,3)}};function fm(n){return{r:Bt(255*(1-n.c/100)*(1-n.k/100)),g:Bt(255*(1-n.m/100)*(1-n.k/100)),b:Bt(255*(1-n.y/100)*(1-n.k/100)),a:n.a}}function td(n){var e=1-Math.max(n.r/255,n.g/255,n.b/255),t=(1-n.r/255-e)/(1-e),s=(1-n.g/255-e)/(1-e),r=(1-n.b/255-e)/(1-e);return{c:isNaN(t)?0:Bt(100*t),m:isNaN(s)?0:Bt(100*s),y:isNaN(r)?0:Bt(100*r),k:Bt(100*e),a:n.a}}function px(n){var e=n.c,t=n.m,s=n.y,r=n.k,i=n.a,o=i===void 0?1:i;return so(e)&&so(t)&&so(s)&&so(r)?fm(dm({c:Number(e),m:Number(t),y:Number(s),k:Number(r),a:Number(o)})):null}var mx=/^device-cmyk\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gx=function(n){var e=mx.exec(n);return e?fm(dm({c:Number(e[1])*(e[2]?1:100),m:Number(e[3])*(e[4]?1:100),y:Number(e[5])*(e[6]?1:100),k:Number(e[7])*(e[8]?1:100),a:e[9]===void 0?1:Number(e[9])/(e[10]?100:1)})):null};function _x(n,e){n.prototype.toCmyk=function(){return ed(td(this.rgba))},n.prototype.toCmykString=function(){return t=ed(td(this.rgba)),s=t.c,r=t.m,i=t.y,o=t.k,(a=t.a)<1?"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"% / "+a+")":"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"%)";var t,s,r,i,o,a},e.object.push([px,"cmyk"]),e.string.push([gx,"cmyk"])}var yx={grad:.9,turn:360,rad:360/(2*Math.PI)},Xa=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ro=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Qa=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},pm=function(n){return{h:(e=n.h,(e=isFinite(e)?e%360:0)>0?e:e+360),w:Qa(n.w,0,100),b:Qa(n.b,0,100),a:Qa(n.a)};var e},nd=function(n){return{h:ro(n.h),w:ro(n.w),b:ro(n.b),a:ro(n.a,3)}},sd=function(n){return{h:function(e){var t=e.r,s=e.g,r=e.b,i=e.a,o=Math.max(t,s,r),a=o-Math.min(t,s,r),c=a?o===t?(s-r)/a:o===s?2+(r-t)/a:4+(t-s)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:i}}(n).h,w:Math.min(n.r,n.g,n.b)/255*100,b:100-Math.max(n.r,n.g,n.b)/255*100,a:n.a}},mm=function(n){return function(e){var t=e.h,s=e.s,r=e.v,i=e.a;t=t/360*6,s/=100,r/=100;var o=Math.floor(t),a=r*(1-s),c=r*(1-(t-o)*s),l=r*(1-(1-t+o)*s),u=o%6;return{r:255*[r,c,a,a,l,r][u],g:255*[l,r,r,c,a,a][u],b:255*[a,a,l,r,r,c][u],a:i}}({h:n.h,s:n.b===100?0:100-n.w/(100-n.b)*100,v:100-n.b,a:n.a})},vx=function(n){var e=n.h,t=n.w,s=n.b,r=n.a,i=r===void 0?1:r;if(!Xa(e)||!Xa(t)||!Xa(s))return null;var o=pm({h:Number(e),w:Number(t),b:Number(s),a:Number(i)});return mm(o)},bx=/^hwb\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wx=function(n){var e=bx.exec(n);if(!e)return null;var t,s,r=pm({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(yx[s]||1)),w:Number(e[3]),b:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return mm(r)};function Mx(n,e){n.prototype.toHwb=function(){return nd(sd(this.rgba))},n.prototype.toHwbString=function(){return t=nd(sd(this.rgba)),s=t.h,r=t.w,i=t.b,(o=t.a)<1?"hwb("+s+" "+r+"% "+i+"% / "+o+")":"hwb("+s+" "+r+"% "+i+"%)";var t,s,r,i,o},e.string.push([wx,"hwb"]),e.object.push([vx,"hwb"])}var qs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Tx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gm={};(function(n){var e=qs&&qs.__extends||function(){var te=function(R,V){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,P){oe.__proto__=P}||function(oe,P){for(var A in P)Object.prototype.hasOwnProperty.call(P,A)&&(oe[A]=P[A])},te(R,V)};return function(R,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");te(R,V);function oe(){this.constructor=R}R.prototype=V===null?Object.create(V):(oe.prototype=V.prototype,new oe)}}(),t=qs&&qs.__classPrivateFieldSet||function(te,R,V){if(!R.has(te))throw new TypeError("attempted to set private field on non-instance");return R.set(te,V),V},s=qs&&qs.__classPrivateFieldGet||function(te,R){if(!R.has(te))throw new TypeError("attempted to get private field on non-instance");return R.get(te)},r,i,o,a,c,l,u,h,d,f,p,g,m,_,w,k,I,T,E,y,C,$;n.__esModule=!0,n.default=void 0;var U=function(te){var R=131,V=137,oe=0;te+="x";for(var P=Math.floor(9007199254740991/V),A=0;A<te.length;A++)oe>P&&(oe=Math.floor(oe/V)),oe=oe*R+te.charCodeAt(A);return oe},N="0123456789abcdef".split(""),O=[-2147483648,8388608,32768,128],G=[24,16,8,0],B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ee=[],Q=function(){function te(R,V){R===void 0&&(R=!1),V===void 0&&(V=!1),r.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),g.set(this,void 0),m.set(this,void 0),_.set(this,void 0),w.set(this,void 0),k.set(this,void 0),I.set(this,0),T.set(this,void 0),this.init(R,V)}return te.prototype.init=function(R,V){V?(ee[0]=ee[16]=ee[1]=ee[2]=ee[3]=ee[4]=ee[5]=ee[6]=ee[7]=ee[8]=ee[9]=ee[10]=ee[11]=ee[12]=ee[13]=ee[14]=ee[15]=0,t(this,i,ee)):t(this,i,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),R?(t(this,l,3238371032),t(this,u,914150663),t(this,h,812702999),t(this,d,4144912697),t(this,f,4290775857),t(this,p,1750603025),t(this,g,1694076839),t(this,m,3204075428)):(t(this,l,1779033703),t(this,u,3144134277),t(this,h,1013904242),t(this,d,2773480762),t(this,f,1359893119),t(this,p,2600822924),t(this,g,528734635),t(this,m,1541459225)),t(this,r,t(this,T,t(this,o,t(this,w,0)))),t(this,a,t(this,_,!1)),t(this,c,!0),t(this,k,R)},te.prototype.update=function(R){if(s(this,a))return this;var V;R instanceof ArrayBuffer?V=new Uint8Array(R):V=R;for(var oe=0,P=V.length,A=s(this,i);oe<P;){var S=void 0;if(s(this,_)&&(t(this,_,!1),A[0]=s(this,r),A[16]=A[1]=A[2]=A[3]=A[4]=A[5]=A[6]=A[7]=A[8]=A[9]=A[10]=A[11]=A[12]=A[13]=A[14]=A[15]=0),typeof V!="string")for(S=s(this,T);oe<P&&S<64;++oe)A[S>>2]|=V[oe]<<G[S++&3];else for(S=s(this,T);oe<P&&S<64;++oe){var j=V.charCodeAt(oe);j<128?A[S>>2]|=j<<G[S++&3]:j<2048?(A[S>>2]|=(192|j>>6)<<G[S++&3],A[S>>2]|=(128|j&63)<<G[S++&3]):j<55296||j>=57344?(A[S>>2]|=(224|j>>12)<<G[S++&3],A[S>>2]|=(128|j>>6&63)<<G[S++&3],A[S>>2]|=(128|j&63)<<G[S++&3]):(j=65536+((j&1023)<<10|V.charCodeAt(++oe)&1023),A[S>>2]|=(240|j>>18)<<G[S++&3],A[S>>2]|=(128|j>>12&63)<<G[S++&3],A[S>>2]|=(128|j>>6&63)<<G[S++&3],A[S>>2]|=(128|j&63)<<G[S++&3])}t(this,I,S),t(this,o,s(this,o)+(S-s(this,T))),S>=64?(t(this,r,A[16]),t(this,T,S-64),this.hash(),t(this,_,!0)):t(this,T,S)}return s(this,o)>4294967295&&(t(this,w,s(this,w)+(s(this,o)/4294967296<<0)),t(this,o,s(this,o)%4294967296)),this},te.prototype.finalize=function(){if(!s(this,a)){t(this,a,!0);var R=s(this,i),V=s(this,I);R[16]=s(this,r),R[V>>2]|=O[V&3],t(this,r,R[16]),V>=56&&(s(this,_)||this.hash(),R[0]=s(this,r),R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0),R[14]=s(this,w)<<3|s(this,o)>>>29,R[15]=s(this,o)<<3,this.hash()}},te.prototype.hash=function(){for(var R=s(this,l),V=s(this,u),oe=s(this,h),P=s(this,d),A=s(this,f),S=s(this,p),j=s(this,g),pe=s(this,m),Z=s(this,i),de,ce,v,M,x,D,L,Y,K,z,X=16;X<64;++X)M=Z[X-15],de=(M>>>7|M<<25)^(M>>>18|M<<14)^M>>>3,M=Z[X-2],ce=(M>>>17|M<<15)^(M>>>19|M<<13)^M>>>10,Z[X]=Z[X-16]+de+Z[X-7]+ce<<0;z=V&oe;for(var W=0;W<64;W+=4)s(this,c)?(s(this,k)?(L=300032,M=Z[0]-1413257819,pe=M-150054599<<0,P=M+24177077<<0):(L=704751109,M=Z[0]-210244248,pe=M-1521486534<<0,P=M+143694565<<0),t(this,c,!1)):(de=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),ce=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),L=R&V,v=L^R&oe^z,D=A&S^~A&j,M=pe+ce+D+B[W]+Z[W],x=de+v,pe=P+M<<0,P=M+x<<0),de=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),ce=(pe>>>6|pe<<26)^(pe>>>11|pe<<21)^(pe>>>25|pe<<7),Y=P&R,v=Y^P&V^L,D=pe&A^~pe&S,M=j+ce+D+B[W+1]+Z[W+1],x=de+v,j=oe+M<<0,oe=M+x<<0,de=(oe>>>2|oe<<30)^(oe>>>13|oe<<19)^(oe>>>22|oe<<10),ce=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7),K=oe&P,v=K^oe&R^Y,D=j&pe^~j&A,M=S+ce+D+B[W+2]+Z[W+2],x=de+v,S=V+M<<0,V=M+x<<0,de=(V>>>2|V<<30)^(V>>>13|V<<19)^(V>>>22|V<<10),ce=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),z=V&oe,v=z^V&P^K,D=S&j^~S&pe,M=A+ce+D+B[W+3]+Z[W+3],x=de+v,A=R+M<<0,R=M+x<<0;t(this,l,s(this,l)+R<<0),t(this,u,s(this,u)+V<<0),t(this,h,s(this,h)+oe<<0),t(this,d,s(this,d)+P<<0),t(this,f,s(this,f)+A<<0),t(this,p,s(this,p)+S<<0),t(this,g,s(this,g)+j<<0),t(this,m,s(this,m)+pe<<0)},te.prototype.hex=function(){this.finalize();var R=s(this,l),V=s(this,u),oe=s(this,h),P=s(this,d),A=s(this,f),S=s(this,p),j=s(this,g),pe=s(this,m),Z=N[R>>28&15]+N[R>>24&15]+N[R>>20&15]+N[R>>16&15]+N[R>>12&15]+N[R>>8&15]+N[R>>4&15]+N[R&15]+N[V>>28&15]+N[V>>24&15]+N[V>>20&15]+N[V>>16&15]+N[V>>12&15]+N[V>>8&15]+N[V>>4&15]+N[V&15]+N[oe>>28&15]+N[oe>>24&15]+N[oe>>20&15]+N[oe>>16&15]+N[oe>>12&15]+N[oe>>8&15]+N[oe>>4&15]+N[oe&15]+N[P>>28&15]+N[P>>24&15]+N[P>>20&15]+N[P>>16&15]+N[P>>12&15]+N[P>>8&15]+N[P>>4&15]+N[P&15]+N[A>>28&15]+N[A>>24&15]+N[A>>20&15]+N[A>>16&15]+N[A>>12&15]+N[A>>8&15]+N[A>>4&15]+N[A&15]+N[S>>28&15]+N[S>>24&15]+N[S>>20&15]+N[S>>16&15]+N[S>>12&15]+N[S>>8&15]+N[S>>4&15]+N[S&15]+N[j>>28&15]+N[j>>24&15]+N[j>>20&15]+N[j>>16&15]+N[j>>12&15]+N[j>>8&15]+N[j>>4&15]+N[j&15];return s(this,k)||(Z+=N[pe>>28&15]+N[pe>>24&15]+N[pe>>20&15]+N[pe>>16&15]+N[pe>>12&15]+N[pe>>8&15]+N[pe>>4&15]+N[pe&15]),Z},te.prototype.toString=function(){return this.hex()},te.prototype.digest=function(){this.finalize();var R=s(this,l),V=s(this,u),oe=s(this,h),P=s(this,d),A=s(this,f),S=s(this,p),j=s(this,g),pe=s(this,m),Z=[R>>24&255,R>>16&255,R>>8&255,R&255,V>>24&255,V>>16&255,V>>8&255,V&255,oe>>24&255,oe>>16&255,oe>>8&255,oe&255,P>>24&255,P>>16&255,P>>8&255,P&255,A>>24&255,A>>16&255,A>>8&255,A&255,S>>24&255,S>>16&255,S>>8&255,S&255,j>>24&255,j>>16&255,j>>8&255,j&255];return s(this,k)||Z.push(pe>>24&255,pe>>16&255,pe>>8&255,pe&255),Z},te.prototype.array=function(){return this.digest()},te.prototype.arrayBuffer=function(){this.finalize();var R=new ArrayBuffer(s(this,k)?28:32),V=new DataView(R);return V.setUint32(0,s(this,l)),V.setUint32(4,s(this,u)),V.setUint32(8,s(this,h)),V.setUint32(12,s(this,d)),V.setUint32(16,s(this,f)),V.setUint32(20,s(this,p)),V.setUint32(24,s(this,g)),s(this,k)||V.setUint32(28,s(this,m)),R},te}();r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,w=new WeakMap,k=new WeakMap,I=new WeakMap,T=new WeakMap,function(te){e(R,te);function R(V,oe,P){oe===void 0&&(oe=!1),P===void 0&&(P=!1);var A=te.call(this,oe,P)||this;E.set(A,void 0),y.set(A,void 0),C.set(A,void 0),$.set(A,void 0);var S;if(typeof V=="string"){for(var j=[],pe=V.length,Z=0,de=0;de<pe;++de){var ce=V.charCodeAt(de);ce<128?j[Z++]=ce:ce<2048?(j[Z++]=192|ce>>6,j[Z++]=128|ce&63):ce<55296||ce>=57344?(j[Z++]=224|ce>>12,j[Z++]=128|ce>>6&63,j[Z++]=128|ce&63):(ce=65536+((ce&1023)<<10|V.charCodeAt(++de)&1023),j[Z++]=240|ce>>18,j[Z++]=128|ce>>12&63,j[Z++]=128|ce>>6&63,j[Z++]=128|ce&63)}S=j}else V instanceof ArrayBuffer?S=new Uint8Array(V):S=V;S.length>64&&(S=new Q(oe,!0).update(S).array());for(var v=[],M=[],de=0;de<64;++de){var x=S[de]||0;v[de]=92^x,M[de]=54^x}return A.update(M),t(A,C,v),t(A,E,!0),t(A,y,oe),t(A,$,P),A}return R.prototype.finalize=function(){if(te.prototype.finalize.call(this),s(this,E)){t(this,E,!1);var V=this.array();te.prototype.init.call(this,s(this,y),s(this,$)),this.update(s(this,C)),this.update(V),te.prototype.finalize.call(this)}},R}(Q),E=new WeakMap,y=new WeakMap,C=new WeakMap,$=new WeakMap;function re(te){var R=new Q;return R.update(te),parseInt(R.hex().substring(0,8),16)}var le=function(te){var R="#";return te.forEach(function(V){V<16&&(R+=0),R+=V.toString(16)}),R},he=function(te,R,V){te/=360;var oe=V<.5?V*(1+R):V+R-V*R,P=2*V-oe;return[te+1/3,te,te-1/3].map(function(A){return A<0&&A++,A>1&&A--,A<1/6?A=P+(oe-P)*6*A:A<.5?A=oe:A<2/3?A=P+(oe-P)*6*(2/3-A):A=P,Math.round(A*255)})},_e=function(){function te(R){R===void 0&&(R={});var V=[R.lightness,R.saturation].map(function(A){return A=A!==void 0?A:[.35,.5,.65],Array.isArray(A)?A.concat():[A]}),oe=V[0],P=V[1];this.L=oe,this.S=P,typeof R.hue=="number"&&(R.hue={min:R.hue,max:R.hue}),typeof R.hue=="object"&&!Array.isArray(R.hue)&&(R.hue=[R.hue]),typeof R.hue=="undefined"&&(R.hue=[]),this.hueRanges=R.hue.map(function(A){return{min:typeof A.min=="undefined"?0:A.min,max:typeof A.max=="undefined"?360:A.max}}),this.hash=re,typeof R.hash=="function"&&(this.hash=R.hash),R.hash==="bkdr"&&(this.hash=U)}return te.prototype.hsl=function(R){var V,oe,P,A=this.hash(R),S=727;if(this.hueRanges.length){var j=this.hueRanges[A%this.hueRanges.length];V=A/this.hueRanges.length%S*(j.max-j.min)/S+j.min}else V=A%359;return A=Math.ceil(A/360),oe=this.S[A%this.S.length],A=Math.ceil(A/this.S.length),P=this.L[A%this.L.length],[V,oe,P]},te.prototype.rgb=function(R){var V=this.hsl(R);return he.apply(this,V)},te.prototype.hex=function(R){var V=this.rgb(R);return le(V)},te}();n.default=_e})(gm);var _m=Tx(gm);KE([ax,sx,cx,fx,_x,Mx]);tn("main-color","#333333");new _m({hue:[0,10,360],saturation:[.05,.18,.82],lightness:[.65,.87,.9]});const Ex={class:"flex flex-wrap w-full left-0 p-2 items-center"},xx={class:"flex-auto gap-4 flex flex-wrap"},Ax={class:"flex gap-4 absolute flex-col right-2 bottom-2"},Sx={setup(n){const e=om();return Pe(()=>qE(e.path)),(t,s)=>{const r=yo("router-link"),i=IT,o=bT,a=kM,c=xM;return ie(),ue("nav",Ex,[q("div",xx,[Ae(Tf,{name:"list",mode:"out-in"},{default:ss(()=>[(ie(!0),ue(Re,null,it(b(Aa),l=>(ie(),ht(r,{key:l,to:l.path},{default:ss(()=>[il(Ie(l==null?void 0:l.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),q("div",Ax,[Ae(i),Ae(o),Ae(a),Ae(c)])])}}};var Cx=cs(Sx,[["__scopeId","data-v-c471c2fc"]]);const Nx=.5*(Math.sqrt(3)-1),qr=(3-Math.sqrt(3))/6,kx=1/3,ln=1/6,Ix=(Math.sqrt(5)-1)/4,pt=(5-Math.sqrt(5))/20,ct=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),st=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);class Px{constructor(e=Math.random){const t=typeof e=="function"?e:Rx(e);this.p=Ox(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let s=0;s<512;s++)this.perm[s]=this.p[s&255],this.permMod12[s]=this.perm[s]%12}noise2D(e,t){const s=this.permMod12,r=this.perm;let i=0,o=0,a=0;const c=(e+t)*Nx,l=Math.floor(e+c),u=Math.floor(t+c),h=(l+u)*qr,d=l-h,f=u-h,p=e-d,g=t-f;let m,_;p>g?(m=1,_=0):(m=0,_=1);const w=p-m+qr,k=g-_+qr,I=p-1+2*qr,T=g-1+2*qr,E=l&255,y=u&255;let C=.5-p*p-g*g;if(C>=0){const N=s[E+r[y]]*3;C*=C,i=C*C*(ct[N]*p+ct[N+1]*g)}let $=.5-w*w-k*k;if($>=0){const N=s[E+m+r[y+_]]*3;$*=$,o=$*$*(ct[N]*w+ct[N+1]*k)}let U=.5-I*I-T*T;if(U>=0){const N=s[E+1+r[y+1]]*3;U*=U,a=U*U*(ct[N]*I+ct[N+1]*T)}return 70*(i+o+a)}noise3D(e,t,s){const r=this.permMod12,i=this.perm;let o,a,c,l;const u=(e+t+s)*kx,h=Math.floor(e+u),d=Math.floor(t+u),f=Math.floor(s+u),p=(h+d+f)*ln,g=h-p,m=d-p,_=f-p,w=e-g,k=t-m,I=s-_;let T,E,y,C,$,U;w>=k?k>=I?(T=1,E=0,y=0,C=1,$=1,U=0):w>=I?(T=1,E=0,y=0,C=1,$=0,U=1):(T=0,E=0,y=1,C=1,$=0,U=1):k<I?(T=0,E=0,y=1,C=0,$=1,U=1):w<I?(T=0,E=1,y=0,C=0,$=1,U=1):(T=0,E=1,y=0,C=1,$=1,U=0);const N=w-T+ln,O=k-E+ln,G=I-y+ln,B=w-C+2*ln,ee=k-$+2*ln,Q=I-U+2*ln,re=w-1+3*ln,le=k-1+3*ln,he=I-1+3*ln,_e=h&255,te=d&255,R=f&255;let V=.6-w*w-k*k-I*I;if(V<0)o=0;else{const S=r[_e+i[te+i[R]]]*3;V*=V,o=V*V*(ct[S]*w+ct[S+1]*k+ct[S+2]*I)}let oe=.6-N*N-O*O-G*G;if(oe<0)a=0;else{const S=r[_e+T+i[te+E+i[R+y]]]*3;oe*=oe,a=oe*oe*(ct[S]*N+ct[S+1]*O+ct[S+2]*G)}let P=.6-B*B-ee*ee-Q*Q;if(P<0)c=0;else{const S=r[_e+C+i[te+$+i[R+U]]]*3;P*=P,c=P*P*(ct[S]*B+ct[S+1]*ee+ct[S+2]*Q)}let A=.6-re*re-le*le-he*he;if(A<0)l=0;else{const S=r[_e+1+i[te+1+i[R+1]]]*3;A*=A,l=A*A*(ct[S]*re+ct[S+1]*le+ct[S+2]*he)}return 32*(o+a+c+l)}noise4D(e,t,s,r){const i=this.perm;let o,a,c,l,u;const h=(e+t+s+r)*Ix,d=Math.floor(e+h),f=Math.floor(t+h),p=Math.floor(s+h),g=Math.floor(r+h),m=(d+f+p+g)*pt,_=d-m,w=f-m,k=p-m,I=g-m,T=e-_,E=t-w,y=s-k,C=r-I;let $=0,U=0,N=0,O=0;T>E?$++:U++,T>y?$++:N++,T>C?$++:O++,E>y?U++:N++,E>C?U++:O++,y>C?N++:O++;const G=$>=3?1:0,B=U>=3?1:0,ee=N>=3?1:0,Q=O>=3?1:0,re=$>=2?1:0,le=U>=2?1:0,he=N>=2?1:0,_e=O>=2?1:0,te=$>=1?1:0,R=U>=1?1:0,V=N>=1?1:0,oe=O>=1?1:0,P=T-G+pt,A=E-B+pt,S=y-ee+pt,j=C-Q+pt,pe=T-re+2*pt,Z=E-le+2*pt,de=y-he+2*pt,ce=C-_e+2*pt,v=T-te+3*pt,M=E-R+3*pt,x=y-V+3*pt,D=C-oe+3*pt,L=T-1+4*pt,Y=E-1+4*pt,K=y-1+4*pt,z=C-1+4*pt,X=d&255,W=f&255,me=p&255,fe=g&255;let ge=.6-T*T-E*E-y*y-C*C;if(ge<0)o=0;else{const Me=i[X+i[W+i[me+i[fe]]]]%32*4;ge*=ge,o=ge*ge*(st[Me]*T+st[Me+1]*E+st[Me+2]*y+st[Me+3]*C)}let be=.6-P*P-A*A-S*S-j*j;if(be<0)a=0;else{const Me=i[X+G+i[W+B+i[me+ee+i[fe+Q]]]]%32*4;be*=be,a=be*be*(st[Me]*P+st[Me+1]*A+st[Me+2]*S+st[Me+3]*j)}let xe=.6-pe*pe-Z*Z-de*de-ce*ce;if(xe<0)c=0;else{const Me=i[X+re+i[W+le+i[me+he+i[fe+_e]]]]%32*4;xe*=xe,c=xe*xe*(st[Me]*pe+st[Me+1]*Z+st[Me+2]*de+st[Me+3]*ce)}let Fe=.6-v*v-M*M-x*x-D*D;if(Fe<0)l=0;else{const Me=i[X+te+i[W+R+i[me+V+i[fe+oe]]]]%32*4;Fe*=Fe,l=Fe*Fe*(st[Me]*v+st[Me+1]*M+st[Me+2]*x+st[Me+3]*D)}let Ne=.6-L*L-Y*Y-K*K-z*z;if(Ne<0)u=0;else{const Me=i[X+1+i[W+1+i[me+1+i[fe+1]]]]%32*4;Ne*=Ne,u=Ne*Ne*(st[Me]*L+st[Me+1]*Y+st[Me+2]*K+st[Me+3]*z)}return 27*(o+a+c+l+u)}}var ym=Px;function Ox(n){const e=new Uint8Array(256);for(let t=0;t<256;t++)e[t]=t;for(let t=0;t<255;t++){const s=t+~~(n()*(256-t)),r=e[t];e[t]=e[s],e[s]=r}return e}function Rx(n){let e=0,t=0,s=0,r=1;const i=Dx();return e=i(" "),t=i(" "),s=i(" "),e-=i(n),e<0&&(e+=1),t-=i(n),t<0&&(t+=1),s-=i(n),s<0&&(s+=1),function(){const o=2091639*e+r*23283064365386963e-26;return e=t,t=s,s=o-(r=o|0)}}function Dx(){let n=4022871197;return function(e){e=e.toString();for(let t=0;t<e.length;t++){n+=e.charCodeAt(t);let s=.02519603282416938*n;n=s>>>0,s-=n,s*=n,n=s>>>0,s-=n,n+=s*4294967296}return(n>>>0)*23283064365386963e-26}}const Fx={class:"flex flex-col h-100vh w-full"},$x={setup(n){om();const e=Be(0),t=new ym,s=Be();ul(()=>{e.value++,s.value=t.noise2D(1,e.value/2e3)});const r=new _m({saturation:[.05,.28,.62],lightness:[.75,.87,.9]}),i=Pe(()=>r.hex(Math.random()*1e5+"a")),o=Pe(()=>r.hex(Math.random()*1e5+"b"));return Pe(()=>`linear-gradient(${s.value*360}deg, ${i.value}, ${o.value})`),(a,c)=>{const l=Cx,u=vM,h=yo("router-view");return ie(),ue("div",Fx,[Ae(l),Ae(u),Ae(h,null,{default:ss(({Component:d})=>[Ae(Oi,{name:"fade",mode:"out-in"},{default:ss(()=>[(ie(),ht(Yd,null,[(ie(),ht(lf(d),{id:"content"}))],1024))]),_:2},1024)]),_:1})])}}};const Vx=DE({history:XT(),routes:[...Aa],scrollBehavior(n,e,t){return t||{top:0,behavior:"smooth"}}}),Lx=T0($x);Lx.use(Vx).mount("#app");const Bx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},jx=q("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1),qx=[jx];function Ux(n,e){return ie(),ue("svg",Bx,qx)}var Wx={name:"ic-baseline-refresh",render:Ux};const vm=Be(),{width:zx,height:Hx}=h1(vm);function ls(){return{visual:vm,width:zx,height:Hx}}const Gx={class:"text-overlay"},Yx={fill:"currentColor",x:30,y:30},Zx=q("circle",{cx:"18",cy:"22",r:"14",fill:"transparent"},null,-1),Kx=["x"],Xx=["x"],Qx={setup(n){const{width:e,height:t}=ls();return(s,r)=>{var o,a,c,l,u,h;const i=Wx;return ie(),ue("g",Gx,[q("text",Yx,Ie((a=(o=b(F))==null?void 0:o.total)==null?void 0:a.hits),1),q("g",{onClick:r[0]||(r[0]=d=>b(F).total.reset())},[Zx,Ae(i,{x:"8",y:"12"})]),q("text",{"text-anchor":"middle",fill:"currentColor",x:b(e)/2,y:30},Ie((l=(c=b(F))==null?void 0:c.note)==null?void 0:l.identifier),9,Kx),q("text",{fill:"currentColor",x:b(e)-10,y:30,"text-anchor":"end"},Ie((((h=(u=b(F))==null?void 0:u.total)==null?void 0:h.duration)/1e3).toFixed())+" / "+Ie((b(F).time/1e3).toFixed())+"s",9,Xx)])}}},Jx={class:"stats"},eA={class:"grid"},tA=["x","y","width","height","transform-origin","fill"],nA=["transform"],sA=["height","width","fill","transform-origin"],rA=["x","y"],iA={setup(n){const{width:e,height:t}=ls();return(s,r)=>(ie(),ue("g",Jx,[q("g",eA,[(ie(),ue(Re,null,it(10,(i,o)=>q("g",{class:"note",key:i},[(ie(),ue(Re,null,it(12,(a,c)=>{var l,u,h,d,f,p,g,m,_;return q("rect",{style:rt([{transition:"all 300ms ease-out"},`transform: scale(1,${a-4+i*12==((u=(l=b(F))==null?void 0:l.note)==null?void 0:u.number)&&((d=(h=b(F))==null?void 0:h.note)==null?void 0:d.attack)?((f=b(F))==null?void 0:f.duration)/300+1:1})`]),key:c,x:c*b(e)/12,y:b(t)-b(t)/9*o,width:b(e)/12,height:b(t)/9,"transform-origin":`${b(e)/12} ${b(t)-b(t)/9*(o-.5)}`,fill:b(Qe)(c+12*a,3,1,a-4+i*12==((g=(p=b(F))==null?void 0:p.note)==null?void 0:g.number)&&((_=(m=b(F))==null?void 0:m.note)==null?void 0:_.attack)?1:.05)},null,12,tA)}),64))])),64))]),(ie(!0),ue(Re,null,it(b(F).total.durations,(i,o)=>(ie(),ue("g",{class:"stat",key:o,transform:`translate(${o*b(e)/12})`},[q("rect",{x:0,y:0,height:b(t),width:b(e)/12,fill:b(Qe)(o,2),"transform-origin":`${0} ${b(t)}`,style:rt([{transition:"all 200ms ease-out"},`transform: scale(1,${i/b(F).total.duration||0})`])},null,12,sA),q("text",{x:b(e)/24,y:b(t)-20,"text-anchor":"middle",fill:"currentColor"},Ie(b(HM)[o]),9,rA)],8,nA))),128))]))}},oA={class:"cross"},aA=["x","height","transform-origin","fill"],cA=["x2","stroke","stroke-width","transform-origin"],lA=["cx","cy","transform-origin","fill","opacity"],uA=["transform-origin","width","height"],hA={setup(n){const{width:e,height:t}=ls();return(s,r)=>{var i,o,a,c,l,u;return ie(),ue("g",oA,[q("rect",{style:rt([{transition:"all 300ms ease-in-out"},`transform: scale(${b(F).duration/500}, 1)`]),x:b(e)/2-50,y:0,height:b(t),width:100,"transform-origin":`${b(e)/2} ${0}`,fill:b(Qe)(((o=(i=b(F))==null?void 0:i.note)==null?void 0:o.pitch)-24+7)},null,12,aA),q("line",{class:"mix-blend-multiply dark_mix-blend-difference",style:rt([{transition:"all 300ms ease-in-out"},`transform: translateY(${(127-((c=(a=b(F))==null?void 0:a.note)==null?void 0:c.number))/127*b(t)||0}px)`]),x1:0,x2:b(e),y1:0,y2:0,stroke:b(Qe)((u=(l=b(F))==null?void 0:l.note)==null?void 0:u.pitch),"stroke-width":b(F).duration/5,"transform-origin":`${b(e)/2} ${0}`},null,12,cA),(ie(),ue(Re,null,it(127,h=>{var d,f,p,g;return q("circle",{style:rt([{transition:"all 300ms ease-in-out"},`transform: scale(${((f=(d=b(F))==null?void 0:d.note)==null?void 0:f.number)==h?b(F).duration/50:1})`]),key:h,cx:b(e)/2,cy:(127-h)/127*b(t)||0,"transform-origin":`${b(e)/2} ${(127-h)/127*b(t)||0}`,r:60,fill:b(Qe)((h+3)%12),opacity:((g=(p=b(F))==null?void 0:p.note)==null?void 0:g.number)==h?.9:0},null,12,lA)}),64)),q("rect",{class:"mix-blend-exclusion",style:rt([{transition:"all 100ms ease-in-out"},`transform: scale(1,${b(F).total.duration/b(F).time})`]),fill:"white",opacity:"0.1",x:0,y:0,"transform-origin":`${0} ${b(t)}`,width:b(e),height:b(t)},null,12,uA)])}}},dA=["x1","x2","y1","y2","stroke-width","stroke","transform-origin","transform"],fA=["cx","cy","fill","transform-origin"],pA=["cx","cy","fill"],mA={setup(n){const{width:e,height:t}=ls(),s=Pe(()=>new Array(12).fill(1).map((i,o)=>GM(o,12,F.total.notes[o]/F.total.hits*e.value*1.2+50,e.value,t.value))),r=Pe(()=>{const i=s.value.filter(a=>a.x&&a.y);return i.map((a,c)=>({x1:a.x,y1:a.y,x2:i[c==i.length-1?0:c+1].x,y2:i[c==i.length-1?0:c+1].y}))});return(i,o)=>{var a,c,l,u;return ie(),ue("g",null,[(ie(),ue(Re,null,it(12,(h,d)=>{var f,p,g,m;return q("line",{style:{transition:"all 500ms ease-out"},key:h,x1:b(e)/2,x2:b(e)/2,y1:b(t)/2,y2:-b(t)/2,"stroke-linecap":"round","stroke-width":((p=(f=b(F))==null?void 0:f.note)==null?void 0:p.pitch)==d&&((m=(g=b(F))==null?void 0:g.note)==null?void 0:m.attack)?60:2,stroke:b(Qe)(d,4),"transform-origin":`${b(e)/2} ${b(t)/2}`,transform:`rotate(${30*d})`},null,8,dA)}),64)),(ie(!0),ue(Re,null,it(b(s),(h,d)=>(ie(),ue("circle",{class:"mix-blend-multiply dark_mix-blend-difference",style:rt([{transition:"all 400ms ease-out"},`transform: scale(${50*b(F).total.durations[d]/b(F).total.duration})`]),key:d,cx:h.x||b(e)/2,r:10,cy:h.y||b(t)/2,fill:b(Qe)(d),"transform-origin":`${h.x} ${h.y}`},null,12,fA))),128)),(ie(!0),ue(Re,null,it(b(r),h=>(ie(),ue("line",ff({class:"mix-blend-difference",key:h},h,{"stroke-width":"2",stroke:"currentColor"}),null,16))),128)),q("circle",{style:{transition:"all 200ms ease-out"},cx:b(e)/2,cy:b(t)/2,r:30,fill:b(Qe)((c=(a=b(F))==null?void 0:a.note)==null?void 0:c.pitch,3,(u=(l=b(F))==null?void 0:l.note)==null?void 0:u.attack)},null,8,pA)])}}};var vt={};const gA={class:"arrows pointer-events-none transition",transform:"translate(0 40)"},_A={class:"ticks"},yA=["x1","x2","transform-origin"],vA=["x1","y1","x2","transform-origin"],bA=["cx","cy","fill","transform-origin"],wA=["fill"],MA=["x","y","transform-origin","transform"],TA=["width","x","y","transform-origin","transform"],bm={setup(n){const{width:e,height:t}=ls(),{midi:s}=kr();return(r,i)=>{var o,a,c,l,u,h,d,f,p,g;return ie(),ue("g",gA,[q("g",_A,[(ie(),ue(Re,null,it(120,m=>q("line",{key:m,x1:b(e)/2,x2:b(e)/2,y1:"20",y2:"70","stroke-width":"1",stroke:"currentColor","stroke-linecap":"round","transform-origin":`${b(e)/2} ${b(t)/2}`,style:rt({transform:`rotate(${m-60}deg)`})},null,12,yA)),64))]),q("line",{class:"arrow transition",x1:b(e)/2,y1:b(t)/2,"stroke-width":"4",stroke:"currentColor","stroke-linecap":"cound",x2:b(e)/2,y2:20,"transform-origin":`${b(e)/2} ${b(t)/2}`,style:rt({transform:`rotate(${((o=b(s).note)==null?void 0:o.number)*((a=b(s).note)==null?void 0:a.attack)-60}deg)`})},null,12,vA),q("circle",{class:"center transition",cx:b(e)/2,cy:b(t)/2,fill:((c=b(s).note)==null?void 0:c.attack)>0?b(Qe)((((l=b(s).note)==null?void 0:l.number)-9)%12):"currentColor",r:5,"transform-origin":`${b(e)/2} ${b(t)/2}`,style:rt({transform:`scale(${((u=b(s).note)==null?void 0:u.attack)*10+1})`})},null,12,bA),q("g",{fill:((h=b(s).note)==null?void 0:h.attack)>0?b(Qe)((((d=b(s).note)==null?void 0:d.number)-9)%12):"currentColor"},[q("text",{class:"transition font-bold","text-anchor":"middle","alignment-baseline":"central",x:b(e)/2,y:b(t)/2*1.5,"font-size":"4em","transform-origin":`${b(e)/2} ${b(t)/2*1.5}`,transform:`scale(${((p=(f=b(s))==null?void 0:f.note)==null?void 0:p.attack)||0})`},Ie(((g=b(s).note)==null?void 0:g.identifier)||""),9,MA),q("rect",{width:b(e)/2,x:b(e)/2-b(e)/4,y:b(t)/2*1.6,height:20,"transform-origin":`${b(e)/2} ${b(t)/2*1.5}`,transform:`scale(${b(s).duration/2e3} 1)`},null,8,TA)],8,wA)])}}};typeof vt=="function"&&vt(bm);const EA=["viewBox"],xA=q("defs",null,[q("filter",{id:"blur",x:"-300%",y:"-300%",width:"600%",height:"600%"},[q("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"50"})])],-1),AA=["width","height"],SA=["stroke-width","stroke","x1","x2","y1","y2"],CA=["transform"],NA=q("circle",{opacity:"0.5",r:"40",filter:"url(#blur)"},null,-1),kA=q("circle",{"stroke-width":"2",stroke:"white",fill:"hsl(30,90%,80%)",r:"30"},null,-1),IA=q("circle",{r:"3",cx:"20"},null,-1),PA=q("circle",{r:"3",cx:"10"},null,-1),OA=[NA,kA,IA,PA],RA=["cx","cy","r","fill","opacity"],wm={setup(n){const{width:e,height:t}=ls(),{midi:s}=kr(),r=new ym;function i(){const a=Nt({x:100,y:100,angle:0}),c=Be(0),l=Math.random();return ul(()=>{c.value++,a.x=(r.noise2D(l*100,c.value/2e3)+1)/2,a.y=(r.noise2D(l*200,c.value/2e3)+1)/2,a.angle=(r.noise2D(l*300,c.value/2e3)+1)/2}),a}const o=Nt([]);return o.push(i()),o.push(i()),(a,c)=>{var l,u,h,d,f,p,g,m,_,w;return ie(),ue("svg",{class:"h-full",id:"visual",version:"1.1",baseProfile:"full",viewBox:`0 0  ${b(e)} ${b(t)}`,xmlns:"http://www.w3.org/2000/svg"},[xA,q("rect",{opacity:"0.1",width:b(e),height:b(t)},null,8,AA),q("line",{style:{transition:"stroke-width 0.2s ease-out"},"stroke-width":((u=(l=b(s))==null?void 0:l.note)==null?void 0:u.number)*((d=(h=b(s))==null?void 0:h.note)==null?void 0:d.velocity)/200,stroke:b(Qe)(((p=(f=b(s))==null?void 0:f.note)==null?void 0:p.number)-21),x1:b(o)[0].x*b(e),x2:b(o)[1].x*b(e),y1:b(o)[0].y*b(t),y2:b(o)[1].y*b(t)},null,8,SA),(ie(!0),ue(Re,null,it(b(o),k=>(ie(),ue("g",{key:k,transform:`translate(${k.x*b(e)},${k.y*b(t)}) rotate(${k.angle*360})`},OA,8,CA))),128)),q("circle",{cx:(b(o)[0].x+b(o)[1].x)*b(e)/2,cy:(b(o)[0].y+b(o)[1].y)*b(t)/2,r:b(s).duration/20+25,fill:b(Qe)(((m=(g=b(s))==null?void 0:g.note)==null?void 0:m.number)-9),opacity:.75*((w=(_=b(s))==null?void 0:_.note)==null?void 0:w.attack)||0},null,8,RA)],8,EA)}}};typeof vt=="function"&&vt(wm);const DA={class:"donut"},FA=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","transform-origin","transform"],$A=["cx","cy","transform","transform-origin","fill"],VA=["x","y"],LA={setup(n){const{width:e,height:t}=ls(),s=Pe(()=>e.value/3),r=Pe(()=>2*Math.PI*s.value),i=Pe(()=>F.total.durations.reduce((c,l)=>c+l));function o(c){return r.value-r.value*c/i.value}const a=Pe(()=>{let c=-90;const l=[];return F.total.durations.forEach((u,h)=>{l.push(c),c=360*u/i.value+c}),l});return(c,l)=>{var u,h,d,f,p,g,m,_;return ie(),ue("g",DA,[(ie(!0),ue(Re,null,it(b(F).total.durations,(w,k)=>(ie(),ue("g",null,[q("circle",{style:{transition:"all 500ms ease-out"},cx:b(e)/2,cy:b(t)/2,r:b(t)<b(e)?b(t)/4:b(e)/4,fill:"transparent",stroke:b(Qe)(k),"stroke-width":b(e)/4,"stroke-dasharray":b(r),"stroke-dashoffset":o(w),"transform-origin":`${b(e)/2} ${b(t)/2}`,transform:`rotate(${b(a)[k]||0})`},null,8,FA)]))),256)),q("circle",{style:{transition:"all 200ms ease-out"},cx:b(e)/2,cy:b(t)/2,r:30,opacity:"0.9",transform:`scale(${((h=(u=b(F))==null?void 0:u.note)==null?void 0:h.attack)*b(F).duration/500+1||1})`,"transform-origin":`${b(e)/2} ${b(t)/2}`,fill:b(Qe)((f=(d=b(F))==null?void 0:d.note)==null?void 0:f.pitch,3,(g=(p=b(F))==null?void 0:p.note)==null?void 0:g.attack)},null,8,$A),q("text",{x:b(e)/2,y:b(t)/2+8,"text-anchor":"middle","font-size":"24"},Ie((_=(m=b(F))==null?void 0:m.note)==null?void 0:_.identifier),9,VA)])}}};var rd=Object.freeze(Object.defineProperty({__proto__:null,Stats:iA,Cross:hA,Rose:mA,Level:bm,Float:wm,Donut:LA},Symbol.toStringTag,{value:"Module"}));const BA=["viewBox"],jA=q("defs",null,[q("filter",{id:"noiseFilter"},[q("feTurbulence",{type:"fractalNoise",basefrequency:"6.29",numoctaves:"6",stitchtiles:"stitch"})])],-1),qA=["width","height"],UA=["onClick","transform"],WA=q("rect",{width:"100",height:"40",rx:"10",ry:"10",fill:"hsla(0,0%,0%,0.1)"},null,-1),zA=["font-weight"],Mm={setup(n){const{visual:e,width:t,height:s}=ls(),r=tn("active-scene","Rose");return(i,o)=>{const a=Qx;return ie(),ue("svg",{class:"h-full",id:"visual",ref_key:"visual",ref:e,version:"1.1",baseProfile:"full",viewBox:`0 0  ${b(t)} ${b(s)}`,xmlns:"http://www.w3.org/2000/svg"},[jA,q("rect",{filter:"url(#noiseFilter)",fill:"hsl(20,70%,60%)",opacity:"0.1",width:b(t),height:b(s)},null,8,qA),Ae(Oi,{name:"fade",mode:"out-in"},{default:ss(()=>[(ie(),ht(Yd,null,[(ie(),ht(lf(b(rd)[b(r)])))],1024))]),_:1}),Ae(a),q("g",null,[(ie(!0),ue(Re,null,it(b(rd),(c,l,u)=>(ie(),ue("g",{class:"cursor-pointer",onClick:h=>r.value=l,key:l,transform:`translate(0 ${u*50+50})`},[WA,q("text",{fill:"currentColor",y:"25",x:"10","font-weight":l==b(r)?"bold":"normal"},Ie(l),9,zA)],8,UA))),128))])],8,BA)}}};typeof vt=="function"&&vt(Mm);function HA(n,e){const t=Mm;return ie(),ht(t)}const Tm={};typeof vt=="function"&&vt(Tm);var GA=cs(Tm,[["render",HA]]),YA=Object.freeze(Object.defineProperty({__proto__:null,default:GA},Symbol.toStringTag,{value:"Module"}));const Qo=(n,e)=>Array(Math.abs(e)+1).join(n);function Em(n,e,t){return function(...s){return console.warn(`${n} is deprecated. Use ${e}.`),t.apply(this,s)}}function xm(n){return n!==null&&typeof n=="object"&&typeof n.name=="string"}function Am(n){return n!==null&&typeof n=="object"&&typeof n.step=="number"&&typeof n.alt=="number"}const Sm=[0,2,4,-1,1,3,5],Cm=Sm.map(n=>Math.floor(n*7/12));function Nm(n){const{step:e,alt:t,oct:s,dir:r=1}=n,i=Sm[e]+7*t;if(s===void 0)return[r*i];const o=s-Cm[e]-4*t;return[r*i,r*o]}const ZA=[3,0,4,1,5,2,6];function KA(n){const[e,t,s]=n,r=ZA[XA(e)],i=Math.floor((e+1)/7);if(t===void 0)return{step:r,alt:i,dir:s};const o=t+4*i+Cm[r];return{step:r,alt:i,oct:o,dir:s}}function XA(n){const e=(n+1)%7;return e<0?7+e:e}const km={empty:!0,name:"",pc:"",acc:""},id=new Map,QA=n=>"CDEFGAB".charAt(n),JA=n=>n<0?Qo("b",-n):Qo("#",n),eS=n=>n[0]==="b"?-n.length:n.length;function ki(n){const e=id.get(n);if(e)return e;const t=typeof n=="string"?iS(n):Am(n)?ki(oS(n)):xm(n)?ki(n.name):km;return id.set(n,t),t}const tS=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function nS(n){const e=tS.exec(n);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function sS(n){return ki(KA(n))}const rS=(n,e)=>(n%e+e)%e,Ja=[0,2,4,5,7,9,11];function iS(n){const e=nS(n);if(e[0]===""||e[3]!=="")return km;const t=e[0],s=e[1],r=e[2],i=(t.charCodeAt(0)+3)%7,o=eS(s),a=r.length?+r:void 0,c=Nm({step:i,alt:o,oct:a}),l=t+s+r,u=t+s,h=(Ja[i]+o+120)%12,d=a===void 0?rS(Ja[i]+o,12)-12*99:Ja[i]+o+12*(a+1),f=d>=0&&d<=127?d:null,p=a===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:s,alt:o,chroma:h,coord:c,freq:p,height:d,letter:t,midi:f,name:l,oct:a,pc:u,step:i}}function oS(n){const{step:e,alt:t,oct:s}=n,r=QA(e);if(!r)return"";const i=r+JA(t);return s||s===0?i+s:i}const Oc={empty:!0,name:"",acc:""},aS="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",cS="(AA|A|P|M|m|d|dd)([-+]?\\d+)",lS=new RegExp("^"+aS+"|"+cS+"$");function uS(n){const e=lS.exec(`${n}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}const od={};function Jo(n){return typeof n=="string"?od[n]||(od[n]=hS(n)):Am(n)?Jo(fS(n)):xm(n)?Jo(n.name):Oc}const ad=[0,2,4,5,7,9,11],Im="PMMPPMM";function hS(n){const e=uS(n);if(e[0]==="")return Oc;const t=+e[0],s=e[1],r=(Math.abs(t)-1)%7,i=Im[r];if(i==="M"&&s==="P")return Oc;const o=i==="M"?"majorable":"perfectable",a=""+t+s,c=t<0?-1:1,l=t===8||t===-8?t:c*(r+1),u=dS(o,s),h=Math.floor((Math.abs(t)-1)/7),d=c*(ad[r]+u+12*h),f=(c*(ad[r]+u)%12+12)%12,p=Nm({step:r,alt:u,oct:h,dir:c});return{empty:!1,name:a,num:t,q:s,step:r,alt:u,dir:c,type:o,simple:l,semitones:d,chroma:f,coord:p,oct:h}}function dS(n,e){return e==="M"&&n==="majorable"||e==="P"&&n==="perfectable"?0:e==="m"&&n==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(n==="perfectable"?e.length:e.length+1):0}function fS(n){const{step:e,alt:t,oct:s=0,dir:r}=n;if(!r)return"";const i=e+1+7*s,o=i===0?e+1:i,a=r<0?"-":"",c=Im[e]==="M"?"majorable":"perfectable";return a+o+pS(c,t)}function pS(n,e){return e===0?n==="majorable"?"M":"P":e===-1&&n==="majorable"?"m":e>0?Qo("A",e):Qo("d",n==="perfectable"?e:e+1)}function mS(n,e){const t=ki(n),s=Jo(e);if(t.empty||s.empty)return"";const r=t.coord,i=s.coord,o=r.length===1?[r[0]+i[0]]:[r[0]+i[0],r[1]+i[1]];return sS(o).name}function Pm(n,e){const t=e.length,s=(n%t+t)%t;return e.slice(s,t).concat(e.slice(0,s))}const Ds={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Om=n=>Number(n).toString(2),cd=n=>parseInt(n,2),gS=/^[01]{12}$/;function Rm(n){return gS.test(n)}const _S=n=>typeof n=="number"&&n>=0&&n<=4095,yS=n=>n&&Rm(n.chroma),ld={[Ds.chroma]:Ds};function Dm(n){const e=Rm(n)?n:_S(n)?Om(n):Array.isArray(n)?TS(n):yS(n)?n.chroma:Ds.chroma;return ld[e]=ld[e]||MS(e)}const vS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function bS(n){const e=[];for(let t=0;t<12;t++)n.charAt(t)==="1"&&e.push(vS[t]);return e}function wS(n){const e=n.split("");return e.map((t,s)=>Pm(s,e).join(""))}function MS(n){const e=cd(n),t=wS(n).map(cd).filter(i=>i>=2048).sort()[0],s=Om(t),r=bS(n);return{empty:!1,name:"",setNum:e,chroma:n,normalized:s,intervals:r}}function TS(n){if(n.length===0)return Ds.chroma;let e;const t=[0,0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<n.length;s++)e=ki(n[s]),e.empty&&(e=Jo(n[s])),e.empty||(t[e.chroma]=1);return t.join("")}const ES=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],xS=ye(ne({},Ds),{name:"",quality:"Unknown",intervals:[],aliases:[]});let Or=[],Cs={};function Fm(n){return Cs[n]||xS}const AS=Em("ChordType.chordType","ChordType.get",Fm);function SS(){return Or.map(n=>n.name).filter(n=>n)}function CS(){return Or.map(n=>n.aliases[0]).filter(n=>n)}function NS(){return Object.keys(Cs)}function $m(){return Or.slice()}const kS=Em("ChordType.entries","ChordType.all",$m);function IS(){Or=[],Cs={}}function Vm(n,e,t){const s=OS(n),r=ye(ne({},Dm(n)),{name:t||"",quality:s,intervals:n,aliases:e});Or.push(r),r.name&&(Cs[r.name]=r),Cs[r.setNum]=r,Cs[r.chroma]=r,r.aliases.forEach(i=>PS(r,i))}function PS(n,e){Cs[e]=n}function OS(n){const e=t=>n.indexOf(t)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}ES.forEach(([n,e,t])=>Vm(n.split(" "),t.split(" "),e));Or.sort((n,e)=>n.setNum-e.setNum);var Gt={names:SS,symbols:CS,get:Fm,all:$m,add:Vm,removeAll:IS,keys:NS,entries:kS,chordType:AS};const RS=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],DS=ye(ne({},Ds),{intervals:[],aliases:[]});let ni={};function FS(n){return ni[n]||DS}function $S(n,e,t=[]){const s=ye(ne({},Dm(n)),{name:e,intervals:n,aliases:t});return ni[s.name]=s,ni[s.setNum]=s,ni[s.chroma]=s,s.aliases.forEach(r=>VS(s,r)),s}function VS(n,e){ni[e]=n}RS.forEach(([n,e,...t])=>$S(n.split(" "),e,t));Object.freeze([]);const Kl=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],ud=ye(ne({},Ds),{name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]}),LS=Kl.map(BS),Rc={};LS.forEach(n=>{Rc[n.name]=n,n.aliases.forEach(e=>{Rc[e]=n})});function Lm(n){return typeof n=="string"?Rc[n.toLowerCase()]||ud:n&&n.name?Lm(n.name):ud}function BS(n){const[e,t,s,r,i,o,a]=n,c=a?[a]:[],l=Number(t).toString(2),u=FS(r).intervals;return{empty:!1,intervals:u,modeNum:e,chroma:l,normalized:l,name:r,setNum:t,alt:s,triad:i,seventh:o,aliases:c}}function Bm(n){return(e,t)=>{const s=Lm(e);if(s.empty)return[];const r=Pm(s.modeNum,n),i=s.intervals.map(o=>mS(t,o));return r.map((o,a)=>i[a]+o)}}Bm(Kl.map(n=>n[4]));Bm(Kl.map(n=>n[5]));Gt.add(["1P","2m"],["2m"],"minor second");Gt.add(["1P","2M"],["2M"],"major second");Gt.add(["1P","3m"],["3m"],"minor third");Gt.add(["1P","3M"],["3M"],"major third");Gt.add(["1P","4P"],["4P"],"perfect fourth");Gt.add(["1P","5d"],["TT"],"tritone");Gt.add(["1P","5P"],["5P"],"perfect fifth");Gt.add(["1P","6m"],["6m"],"minor sixth");Gt.add(["1P","6M"],["6M"],"major sixth");Gt.add(["1P","7m"],["7m"],"minor seventh");Gt.add(["1P","7M"],["7M"],"major seventh");Gt.all();const Xl=[],jm=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],jS=["G##","A#","A##","B#","C#","C##","D#","D##","E#","F#","F##","G#"],qS=["Bbb","Bb","Cb","Dbb","Db","Ebb","Eb","Fb","Gbb","Gb","Abb","Ab"];jm.forEach((n,e)=>{Xl[n]=e});jS.forEach((n,e)=>{Xl[n]=e});qS.forEach((n,e)=>{Xl[n]=e});const ec=jm;const US=n=>(Kc("data-v-c2b702ea"),n=n(),Xc(),n),WS={class:"w-full mt-2 h-full",id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 360",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"600","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},zS=US(()=>q("defs",null,[q("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[q("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),HS={class:"white"},GS=["transform"],YS=["onClick","fill"],ZS=["onClick","fill"],KS=["fill"],XS={class:"black"},QS=["transform"],JS=["onClick","fill","data-check"],eC=["onClick","fill","stroke"],tC={props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,defualt:!1},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0}},emits:["update:pitch"],setup(n,{emit:e}){const t=n,s=Nt({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:Pe(()=>YM(t.chroma.split(""),-t.pitch))});function r(a){return a!=null&&s.chroma[a]=="1"}function i(a){return t.scale&&a!=null&&s.chroma[a]=="1"}function o(a,c){return a==null?"transparent":a==t.pitch?Zt(Qe(a,4)).toHex():r(a)&&!c?Zt(Qe(a,3.5)).toHex():ec[a].length!=2?"#eee":"#999"}return(a,c)=>(ie(),ue("svg",WS,[zS,q("g",HS,[(ie(!0),ue(Re,null,it(b(s).white,(l,u)=>(ie(),ue("g",{class:"key",key:l,transform:`translate(${u*100+5} 30)`},[q("rect",{class:"transition-all duration-300 ease-out",onClick:h=>a.$emit("update:pitch",l),width:"90",height:"290",rx:"45",fill:o(l,!0),style:{filter:"url(#shadowButton)",transition:"fill 1200ms ease-out"}},null,8,YS),q("circle",{class:"transition-all duration-300 ease-out",onClick:h=>a.$emit("update:pitch",l),cy:"245",cx:"45",r:"45",fill:o(l)},null,8,ZS),Pn(q("text",{class:"pointer-events-none",y:"250",x:"45",fill:r(l)?"white":"black"},Ie(b(ec)[l]),9,KS),[[lr,r(l)]])],8,GS))),128))]),q("g",XS,[(ie(!0),ue(Re,null,it(b(s).black,(l,u)=>(ie(),ue("g",{class:"key",key:l,transform:`translate(${u*100+55} -10)`},[l?(ie(),ue("rect",{key:0,class:"transition-all duration-300 ease-out",onClick:h=>a.$emit("update:pitch",l),width:"90",height:"220",rx:"45",style:{filter:"url(#shadowButton)",transition:"fill 1200ms ease-out"},fill:o(l,!0),"data-check":l},null,8,JS)):qt("",!0),l?(ie(),ue("circle",{key:1,class:"transition-all duration-300 ease-out",onClick:h=>a.$emit("update:pitch",l),cy:"175",cx:"45",r:"45",fill:o(l),"stroke-width":"8",stroke:i(l)?b(Qe)(l,3):"transparent"},null,8,eC)):qt("",!0),Pn(q("text",{class:"pointer-events-none",y:"180",x:"45",fill:"white"},Ie(b(ec)[l]),513),[[lr,r(l)]])],8,QS))),128))])]))}};var nC=cs(tC,[["__scopeId","data-v-c2b702ea"]]);const qm={setup(n){return(e,t)=>{var r,i;const s=nC;return ie(),ht(s,{pitch:(((i=(r=b(F))==null?void 0:r.note)==null?void 0:i.number)+3)%12},null,8,["pitch"])}}};typeof vt=="function"&&vt(qm);var sC=Object.freeze(Object.defineProperty({__proto__:null,default:qm},Symbol.toStringTag,{value:"Module"}));const rC={class:"flex flex-col gap-1 mb-8 overflow-x-scroll p-4 font-mono"},iC={class:"txt"},oC={class:"txt"},aC={class:"txt"},cC={class:"txt whitespace-nowrap"},lC={class:"txt"},Um={setup(n){Be(!1);const{midi:e,midiAttack:t,midiRelease:s,setCC:r}=kr();return(i,o)=>(ie(),ue("div",rC,[Ae(Tf,{name:"fall",mode:"out-in"},{default:ss(()=>[(ie(!0),ue(Re,null,it(b(e).log,a=>{var c,l;return ie(),ue("div",{class:"flex text-sm fall whitespace-nowrap",key:a},[q("div",iC,"CH "+Ie((c=a.message)==null?void 0:c.channel),1),q("div",oC,Ie((l=a.message)==null?void 0:l.type),1),q("div",aC,Ie(a.data),1),q("div",{class:"p-2",style:rt({backgroundColor:b(Qe)(a.message.dataBytes[0]+3||0)})},null,4),q("div",cC,Ie(b(ae).toNoteIdentifier(a.message.dataBytes[0]||1)),1),q("div",lC,Ie((a.message.dataBytes[1]/127).toFixed(2)),1)])}),128))]),_:1})]))}};typeof vt=="function"&&vt(Um);var uC=cs(Um,[["__scopeId","data-v-102fc496"]]),hC=Object.freeze(Object.defineProperty({__proto__:null,default:uC},Symbol.toStringTag,{value:"Module"}));const dC=n=>(Kc("data-v-11aafa25"),n=n(),Xc(),n),fC={class:"p-4 shadow-lg rounded-2xl bg-light-900 dark_bg-dark-300 relative border-2 shadow-lg",style:{flex:"1 1 200px"}},pC={class:"flex justify-between"},mC={class:"flex-col"},gC={class:"text-md"},_C={class:"text-2xl font-bold"},yC={class:"flex-col text-xs font-mono flex gap-2 text-center"},vC={key:1,class:"display"},bC={class:"flex flex-wrap gap-3 mt-4 items-center"},wC=dC(()=>q("div",{class:"text-xs"},"TO",-1)),MC=["onClick"],TC={class:"text-sm"},EC={props:{input:Object,iid:[Number,String]},setup(n){const e=n,{midi:t}=kr(),s=Pe(()=>{var r,i,o;return((i=(r=e.input)==null?void 0:r.note)==null?void 0:i.velocity)>0?Qe((o=e.input.note)==null?void 0:o.pitch,null,1,.4):"#7773"});return(r,i)=>{var o,a,c,l,u,h,d,f,p,g,m,_,w,k,I,T;return ie(),ue("div",fC,[q("div",pC,[q("div",mC,[q("div",gC,Ie(n.input.manufacturer),1),q("div",_C,Ie(n.input.name),1)]),q("div",yC,[n.input.note?(ie(),ue("div",{key:0,class:"display",style:rt({backgroundColor:b(s)})},[q("div",{class:"indicator",style:rt({transform:`scale(${(a=(o=n.input)==null?void 0:o.note)==null?void 0:a.attack},1)`})},null,4),q("i",null,"CH"+Ie((l=(c=n.input)==null?void 0:c.note)==null?void 0:l.channel),1),q("div",{class:"px-1 rounded-sm",style:rt({backgroundColor:b(s)})},Ie((h=(u=n.input)==null?void 0:u.note)==null?void 0:h.identifier),5),q("i",null,Ie((f=(d=n.input)==null?void 0:d.note)==null?void 0:f.number),1)],4)):qt("",!0),n.input.cc?(ie(),ue("div",vC,[q("div",{class:"indicator",style:rt({transform:`scale(${(g=(p=n.input)==null?void 0:p.cc)==null?void 0:g.value},1)`})},null,4),q("i",null,"CH"+Ie((_=(m=n.input)==null?void 0:m.cc)==null?void 0:_.channel),1),q("i",null,"CC"+Ie((k=(w=n.input)==null?void 0:w.cc)==null?void 0:k.number),1),q("i",null,Ie((T=(I=n.input)==null?void 0:I.cc)==null?void 0:T.raw),1)])):qt("",!0)])]),q("div",bC,[wC,(ie(!0),ue(Re,null,it(b(t).outputs,(E,y)=>{var C,$;return Pn((ie(),ue("button",{class:ts(["px-2 shadow-sm rounded-xl bg-light-200 dark_bg-dark-500 cursor-pointer border-2 border-transparent select-none",{active:($=(C=b(t).forwards)==null?void 0:C[n.iid])==null?void 0:$[y]}]),onClick:U=>b(dM)(n.iid,y),key:y},[q("div",TC,Ie(E.name),1)],10,MC)),[[lr,n.input.name!=E.name]])}),128))])])}}};var xC=cs(EC,[["__scopeId","data-v-11aafa25"]]);const AC={class:"flex flex-wrap gap-4 justify-center p-8"},Wm={setup(n){const{midi:e}=kr();return(t,s)=>{const r=xC;return ie(),ue("div",AC,[(ie(!0),ue(Re,null,it(b(e).inputs,(i,o)=>(ie(),ht(r,{input:i,iid:o,key:o},null,8,["input","iid"]))),128))])}}};typeof vt=="function"&&vt(Wm);var SC=Object.freeze(Object.defineProperty({__proto__:null,default:Wm},Symbol.toStringTag,{value:"Module"}));const CC={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},NC=q("path",{fill:"currentColor",d:"M128 192v-64h104ZM24 128h104V64Z",opacity:".2"},null,-1),kC=q("path",{fill:"currentColor",d:"m236.2 134.8l-104 64a8 8 0 0 1-8.1.2a8.1 8.1 0 0 1-4.1-7V78.3l-91.8 56.5a8 8 0 0 1-8.4-13.6l104-64A8 8 0 0 1 136 64v113.7l91.8-56.5a8 8 0 0 1 8.4 13.6Z"},null,-1),IC=[NC,kC];function PC(n,e){return ie(),ue("svg",CC,IC)}var OC={name:"ph-wave-sawtooth-duotone",render:PC};const RC={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},DC=q("path",{fill:"currentColor",d:"M128 72v56H24V72Zm0 56v56h104v-56Z",opacity:".2"},null,-1),FC=q("path",{fill:"currentColor",d:"M240 128v56a8 8 0 0 1-8 8H128a8 8 0 0 1-8-8V80H32v48a8 8 0 0 1-16 0V72a8 8 0 0 1 8-8h104a8 8 0 0 1 8 8v104h88v-48a8 8 0 0 1 16 0Z"},null,-1),$C=[DC,FC];function VC(n,e){return ie(),ue("svg",RC,$C)}var LC={name:"ph-wave-square-duotone",render:VC};const BC={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},jC=q("path",{fill:"currentColor",d:"m76 56l52 72H24Zm156 72H128l52 72Z",opacity:".2"},null,-1),qC=q("path",{fill:"currentColor",d:"m238.5 132.7l-52 72a8.1 8.1 0 0 1-13 0L76 69.7l-45.5 63a8 8 0 1 1-13-9.4l52-72a8.1 8.1 0 0 1 13 0l97.5 135l45.5-63a8 8 0 0 1 13 9.4Z"},null,-1),UC=[jC,qC];function WC(n,e){return ie(),ue("svg",BC,UC)}var zC={name:"ph-wave-triangle-duotone",render:WC};const HC={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},GC=q("path",{fill:"currentColor",d:"M128 128H24c52-112 78-56 104 0Zm0 0c26 56 52 112 104 0Z",opacity:".2"},null,-1),YC=q("path",{fill:"currentColor",d:"M239.3 131.4c-22 47.2-41.4 69.3-61.3 69.3c-25.1 0-40.7-33.7-57.3-69.3c-13-28.2-27.8-60.1-42.7-60.1s-36.3 37.6-46.7 60.1a8.1 8.1 0 1 1-14.6-6.8c22-47.2 41.4-69.3 61.3-69.3c25.1 0 40.7 33.7 57.3 69.3c13 28.2 27.8 60.1 42.7 60.1c16.4 0 36.3-37.6 46.7-60.1a8.1 8.1 0 0 1 14.6 6.8Z"},null,-1),ZC=[GC,YC];function KC(n,e){return ie(),ue("svg",HC,ZC)}var XC={name:"ph-wave-sine-duotone",render:KC};const QC={class:"flex flex-wrap justify-center max-w-max"},JC=q("div",{class:"flex-auto w-full text-sm text-center border-b-1 border-dark-300 dark_border-light-300"},"OSCILLATOR TYPE",-1),eN=["onUpdate:modelValue","onInput","id","value","aria-label"],tN=["for","value"],nN={setup(n){const e={sine:"SIN",triangle:"TRI",square8:"SQR",sawtooth8:"SAW"};return(t,s)=>{const r=XC,i=zC,o=LC,a=OC;return ie(),ue("div",QC,[JC,(ie(),ue(Re,null,it(e,(c,l)=>q("div",{class:"flex relative flex-auto gap-2",key:l},[Pn(q("input",{class:"absolute right-1 top-1",type:"radio","onUpdate:modelValue":u=>b(Ge).params.oscillator.type=u,onInput:u=>t.$emit("update:modelValue",l),id:l,value:l,name:"OSC","aria-label":`Select ${l} oscillator`},null,40,eN),[[y0,b(Ge).params.oscillator.type]]),q("label",{class:ts(["button flex-auto flex justify-center",{active:b(Ge).params.oscillator.type==l}]),for:l,value:l},[l=="sine"?(ie(),ht(r,{key:0})):qt("",!0),l=="triangle"?(ie(),ht(i,{key:1})):qt("",!0),l=="square8"?(ie(),ht(o,{key:2})):qt("",!0),l=="sawtooth8"?(ie(),ht(a,{key:3})):qt("",!0)],10,tN)])),64))])}}};const sN={class:"panel"},rN={class:"flex-auto flex gap-2"},zm={setup(n){const e=Be(!1),t=Be();kf(t,d=>{e.value=!1});const{synthOptions:s,synthOnce:r,init:i}=Gp(),o=["+0","@16n","@32n","@8n"];let a=0;function c(){a++,s.quantize=o[a%o.length]}const l=[-2,-1,0,1,2];let u=0;function h(){u++,s.octave=l[u%o.length]}return(d,f)=>{const p=Yp,g=nN;return ie(),ue("div",sN,[q("button",{class:ts(["text-button mute p-2 flex flex-col items-center",{active:b(s).initiated}]),onClick:f[0]||(f[0]=m=>b(r)()),"aria-label":"Test synth sound"},[Ae(p,{class:"text-4xl"})],2),Ae(g,{class:"flex-1",modelValue:b(s).params.oscillator.type,"onUpdate:modelValue":f[1]||(f[1]=m=>b(s).params.oscillator.type=m)},null,8,["modelValue"]),q("div",rN,[q("button",{class:"button",onClick:c,"aria-label":"Synth panel"},"Quantize "+Ie(b(s).quantize),1),q("button",{class:"button",onClick:f[2]||(f[2]=m=>h()),"aria-label":"Synth panel"},"Octave offset "+Ie(b(s).octave),1)])])}}};typeof vt=="function"&&vt(zm);var iN=cs(zm,[["__scopeId","data-v-f2ea106e"]]),oN=Object.freeze(Object.defineProperty({__proto__:null,default:iN},Symbol.toStringTag,{value:"Module"}));
//# sourceMappingURL=index.2ffbad10.js.map
