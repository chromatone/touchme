(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Ac(n,e){const t=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)t[s[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const um="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hm=Ac(um);function Qh(n){return!!n||n===""}function Le(n){if(ye(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=rt(s)?pm(s):Le(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(rt(n))return n;if(He(n))return n}}const dm=/;(?![^(]*\))/g,fm=/:(.+)/;function pm(n){const e={};return n.split(dm).forEach(t=>{if(t){const s=t.split(fm);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ns(n){let e="";if(rt(n))e=n;else if(ye(n))for(let t=0;t<n.length;t++){const s=ns(n[t]);s&&(e+=s+" ")}else if(He(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function mm(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=qo(n[s],e[s]);return t}function qo(n,e){if(n===e)return!0;let t=Vl(n),s=Vl(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=jr(n),s=jr(e),t||s)return n===e;if(t=ye(n),s=ye(e),t||s)return t&&s?mm(n,e):!1;if(t=He(n),s=He(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!qo(n[o],e[o]))return!1}}return String(n)===String(e)}function Jh(n,e){return n.findIndex(t=>qo(t,e))}const Ve=n=>rt(n)?n:n==null?"":ye(n)||He(n)&&(n.toString===nd||!xe(n.toString))?JSON.stringify(n,ed,2):String(n),ed=(n,e)=>e&&e.__v_isRef?ed(n,e.value):Js(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r])=>(t[`${s} =>`]=r,t),{})}:Wo(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!ye(e)&&!sd(e)?String(e):e,Ue={},Qs=[],Yt=()=>{},_m=()=>!1,gm=/^on[^a-z]/,jo=n=>gm.test(n),Nc=n=>n.startsWith("onUpdate:"),lt=Object.assign,Mc=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},ym=Object.prototype.hasOwnProperty,Ce=(n,e)=>ym.call(n,e),ye=Array.isArray,Js=n=>yi(n)==="[object Map]",Wo=n=>yi(n)==="[object Set]",Vl=n=>yi(n)==="[object Date]",xe=n=>typeof n=="function",rt=n=>typeof n=="string",jr=n=>typeof n=="symbol",He=n=>n!==null&&typeof n=="object",td=n=>He(n)&&xe(n.then)&&xe(n.catch),nd=Object.prototype.toString,yi=n=>nd.call(n),vm=n=>yi(n).slice(8,-1),sd=n=>yi(n)==="[object Object]",kc=n=>rt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,zi=Ac(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zo=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},wm=/-(\w)/g,cn=zo(n=>n.replace(wm,(e,t)=>t?t.toUpperCase():"")),bm=/\B([A-Z])/g,Rs=zo(n=>n.replace(bm,"-$1").toLowerCase()),Uo=zo(n=>n.charAt(0).toUpperCase()+n.slice(1)),Aa=zo(n=>n?`on${Uo(n)}`:""),Wr=(n,e)=>!Object.is(n,e),er=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Qi=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},rd=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Ll;const Tm=()=>Ll||(Ll=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ot;class xm{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Ot&&(this.parent=Ot,this.index=(Ot.scopes||(Ot.scopes=[])).push(this)-1)}run(e){if(this.active){const t=Ot;try{return Ot=this,e()}finally{Ot=t}}}on(){Ot=this}off(){Ot=this.parent}stop(e){if(this.active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Sm(n,e=Ot){e&&e.active&&e.effects.push(n)}function Em(){return Ot}function Cm(n){Ot&&Ot.cleanups.push(n)}const Oc=n=>{const e=new Set(n);return e.w=0,e.n=0,e},id=n=>(n.w&Qn)>0,od=n=>(n.n&Qn)>0,Am=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Qn},Nm=n=>{const{deps:e}=n;if(e.length){let t=0;for(let s=0;s<e.length;s++){const r=e[s];id(r)&&!od(r)?r.delete(n):e[t++]=r,r.w&=~Qn,r.n&=~Qn}e.length=t}},za=new WeakMap;let Pr=0,Qn=1;const Ua=30;let zt;const bs=Symbol(""),Ha=Symbol("");class Ic{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Sm(this,s)}run(){if(!this.active)return this.fn();let e=zt,t=Yn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=zt,zt=this,Yn=!0,Qn=1<<++Pr,Pr<=Ua?Am(this):Bl(this),this.fn()}finally{Pr<=Ua&&Nm(this),Qn=1<<--Pr,zt=this.parent,Yn=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zt===this?this.deferStop=!0:this.active&&(Bl(this),this.onStop&&this.onStop(),this.active=!1)}}function Bl(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let Yn=!0;const ad=[];function Tr(){ad.push(Yn),Yn=!1}function xr(){const n=ad.pop();Yn=n===void 0?!0:n}function Pt(n,e,t){if(Yn&&zt){let s=za.get(n);s||za.set(n,s=new Map);let r=s.get(t);r||s.set(t,r=Oc()),cd(r)}}function cd(n,e){let t=!1;Pr<=Ua?od(n)||(n.n|=Qn,t=!id(n)):t=!n.has(zt),t&&(n.add(zt),zt.deps.push(n))}function En(n,e,t,s,r,i){const o=za.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&ye(n))o.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":ye(n)?kc(t)&&a.push(o.get("length")):(a.push(o.get(bs)),Js(n)&&a.push(o.get(Ha)));break;case"delete":ye(n)||(a.push(o.get(bs)),Js(n)&&a.push(o.get(Ha)));break;case"set":Js(n)&&a.push(o.get(bs));break}if(a.length===1)a[0]&&Ga(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Ga(Oc(c))}}function Ga(n,e){const t=ye(n)?n:[...n];for(const s of t)s.computed&&ql(s);for(const s of t)s.computed||ql(s)}function ql(n,e){(n!==zt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Mm=Ac("__proto__,__v_isRef,__isVue"),ld=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(jr)),km=Rc(),Om=Rc(!1,!0),Im=Rc(!0),jl=Rm();function Rm(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const s=Me(this);for(let i=0,o=this.length;i<o;i++)Pt(s,"get",i+"");const r=s[e](...t);return r===-1||r===!1?s[e](...t.map(Me)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Tr();const s=Me(this)[e].apply(this,t);return xr(),s}}),n}function Rc(n=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(n?e?Km:pd:e?fd:dd).get(s))return s;const o=ye(s);if(!n&&o&&Ce(jl,r))return Reflect.get(jl,r,i);const a=Reflect.get(s,r,i);return(jr(r)?ld.has(r):Mm(r))||(n||Pt(s,"get",r),e)?a:mt(a)?o&&kc(r)?a:a.value:He(a)?n?md(a):Nt(a):a}}const Dm=ud(),Pm=ud(!0);function ud(n=!1){return function(t,s,r,i){let o=t[s];if(or(o)&&mt(o)&&!mt(r))return!1;if(!n&&(!Ji(r)&&!or(r)&&(o=Me(o),r=Me(r)),!ye(t)&&mt(o)&&!mt(r)))return o.value=r,!0;const a=ye(t)&&kc(s)?Number(s)<t.length:Ce(t,s),c=Reflect.set(t,s,r,i);return t===Me(i)&&(a?Wr(r,o)&&En(t,"set",s,r):En(t,"add",s,r)),c}}function $m(n,e){const t=Ce(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&t&&En(n,"delete",e,void 0),s}function Fm(n,e){const t=Reflect.has(n,e);return(!jr(e)||!ld.has(e))&&Pt(n,"has",e),t}function Vm(n){return Pt(n,"iterate",ye(n)?"length":bs),Reflect.ownKeys(n)}const hd={get:km,set:Dm,deleteProperty:$m,has:Fm,ownKeys:Vm},Lm={get:Im,set(n,e){return!0},deleteProperty(n,e){return!0}},Bm=lt({},hd,{get:Om,set:Pm}),Dc=n=>n,Ho=n=>Reflect.getPrototypeOf(n);function Di(n,e,t=!1,s=!1){n=n.__v_raw;const r=Me(n),i=Me(e);t||(e!==i&&Pt(r,"get",e),Pt(r,"get",i));const{has:o}=Ho(r),a=s?Dc:t?Fc:zr;if(o.call(r,e))return a(n.get(e));if(o.call(r,i))return a(n.get(i));n!==r&&n.get(e)}function Pi(n,e=!1){const t=this.__v_raw,s=Me(t),r=Me(n);return e||(n!==r&&Pt(s,"has",n),Pt(s,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function $i(n,e=!1){return n=n.__v_raw,!e&&Pt(Me(n),"iterate",bs),Reflect.get(n,"size",n)}function Wl(n){n=Me(n);const e=Me(this);return Ho(e).has.call(e,n)||(e.add(n),En(e,"add",n,n)),this}function zl(n,e){e=Me(e);const t=Me(this),{has:s,get:r}=Ho(t);let i=s.call(t,n);i||(n=Me(n),i=s.call(t,n));const o=r.call(t,n);return t.set(n,e),i?Wr(e,o)&&En(t,"set",n,e):En(t,"add",n,e),this}function Ul(n){const e=Me(this),{has:t,get:s}=Ho(e);let r=t.call(e,n);r||(n=Me(n),r=t.call(e,n)),s&&s.call(e,n);const i=e.delete(n);return r&&En(e,"delete",n,void 0),i}function Hl(){const n=Me(this),e=n.size!==0,t=n.clear();return e&&En(n,"clear",void 0,void 0),t}function Fi(n,e){return function(s,r){const i=this,o=i.__v_raw,a=Me(o),c=e?Dc:n?Fc:zr;return!n&&Pt(a,"iterate",bs),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function Vi(n,e,t){return function(...s){const r=this.__v_raw,i=Me(r),o=Js(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=t?Dc:e?Fc:zr;return!e&&Pt(i,"iterate",c?Ha:bs),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Bn(n){return function(...e){return n==="delete"?!1:this}}function qm(){const n={get(i){return Di(this,i)},get size(){return $i(this)},has:Pi,add:Wl,set:zl,delete:Ul,clear:Hl,forEach:Fi(!1,!1)},e={get(i){return Di(this,i,!1,!0)},get size(){return $i(this)},has:Pi,add:Wl,set:zl,delete:Ul,clear:Hl,forEach:Fi(!1,!0)},t={get(i){return Di(this,i,!0)},get size(){return $i(this,!0)},has(i){return Pi.call(this,i,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:Fi(!0,!1)},s={get(i){return Di(this,i,!0,!0)},get size(){return $i(this,!0)},has(i){return Pi.call(this,i,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:Fi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Vi(i,!1,!1),t[i]=Vi(i,!0,!1),e[i]=Vi(i,!1,!0),s[i]=Vi(i,!0,!0)}),[n,t,e,s]}const[jm,Wm,zm,Um]=qm();function Pc(n,e){const t=e?n?Um:zm:n?Wm:jm;return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(Ce(t,r)&&r in s?t:s,r,i)}const Hm={get:Pc(!1,!1)},Gm={get:Pc(!1,!0)},Ym={get:Pc(!0,!1)},dd=new WeakMap,fd=new WeakMap,pd=new WeakMap,Km=new WeakMap;function Zm(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xm(n){return n.__v_skip||!Object.isExtensible(n)?0:Zm(vm(n))}function Nt(n){return or(n)?n:$c(n,!1,hd,Hm,dd)}function Qm(n){return $c(n,!1,Bm,Gm,fd)}function md(n){return $c(n,!0,Lm,Ym,pd)}function $c(n,e,t,s,r){if(!He(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=Xm(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function tr(n){return or(n)?tr(n.__v_raw):!!(n&&n.__v_isReactive)}function or(n){return!!(n&&n.__v_isReadonly)}function Ji(n){return!!(n&&n.__v_isShallow)}function _d(n){return tr(n)||or(n)}function Me(n){const e=n&&n.__v_raw;return e?Me(e):n}function gd(n){return Qi(n,"__v_skip",!0),n}const zr=n=>He(n)?Nt(n):n,Fc=n=>He(n)?md(n):n;function yd(n){Yn&&zt&&(n=Me(n),cd(n.dep||(n.dep=Oc())))}function vd(n,e){n=Me(n),n.dep&&Ga(n.dep)}function mt(n){return!!(n&&n.__v_isRef===!0)}function Oe(n){return bd(n,!1)}function wd(n){return bd(n,!0)}function bd(n,e){return mt(n)?n:new Jm(n,e)}class Jm{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Me(e),this._value=t?e:zr(e)}get value(){return yd(this),this._value}set value(e){const t=this.__v_isShallow||Ji(e)||or(e);e=t?e:Me(e),Wr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:zr(e),vd(this))}}function v(n){return mt(n)?n.value:n}const e_={get:(n,e,t)=>v(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return mt(r)&&!mt(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function Td(n){return tr(n)?n:new Proxy(n,e_)}var xd;class t_{constructor(e,t,s,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[xd]=!1,this._dirty=!0,this.effect=new Ic(e,()=>{this._dirty||(this._dirty=!0,vd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=Me(this);return yd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}xd="__v_isReadonly";function n_(n,e,t=!1){let s,r;const i=xe(n);return i?(s=n,r=Yt):(s=n.get,r=n.set),new t_(s,r,i||!r,t)}function Kn(n,e,t,s){let r;try{r=s?n(...s):n()}catch(i){Go(i,e,t)}return r}function Vt(n,e,t,s){if(xe(n)){const i=Kn(n,e,t,s);return i&&td(i)&&i.catch(o=>{Go(o,e,t)}),i}const r=[];for(let i=0;i<n.length;i++)r.push(Vt(n[i],e,t,s));return r}function Go(n,e,t,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=t;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](n,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Kn(c,null,10,[n,o,a]);return}}s_(n,t,r,s)}function s_(n,e,t,s=!0){console.error(n)}let eo=!1,Ya=!1;const pt=[];let rn=0;const nr=[];let vn=null,ds=0;const Sd=Promise.resolve();let Vc=null;function Sr(n){const e=Vc||Sd;return n?e.then(this?n.bind(this):n):e}function r_(n){let e=rn+1,t=pt.length;for(;e<t;){const s=e+t>>>1;Ur(pt[s])<n?e=s+1:t=s}return e}function Lc(n){(!pt.length||!pt.includes(n,eo&&n.allowRecurse?rn+1:rn))&&(n.id==null?pt.push(n):pt.splice(r_(n.id),0,n),Ed())}function Ed(){!eo&&!Ya&&(Ya=!0,Vc=Sd.then(Ad))}function i_(n){const e=pt.indexOf(n);e>rn&&pt.splice(e,1)}function o_(n){ye(n)?nr.push(...n):(!vn||!vn.includes(n,n.allowRecurse?ds+1:ds))&&nr.push(n),Ed()}function Gl(n,e=rn){for(;e<pt.length;e++){const t=pt[e];t&&t.pre&&(pt.splice(e,1),e--,t())}}function Cd(n){if(nr.length){const e=[...new Set(nr)];if(nr.length=0,vn){vn.push(...e);return}for(vn=e,vn.sort((t,s)=>Ur(t)-Ur(s)),ds=0;ds<vn.length;ds++)vn[ds]();vn=null,ds=0}}const Ur=n=>n.id==null?1/0:n.id,a_=(n,e)=>{const t=Ur(n)-Ur(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Ad(n){Ya=!1,eo=!0,pt.sort(a_);const e=Yt;try{for(rn=0;rn<pt.length;rn++){const t=pt[rn];t&&t.active!==!1&&Kn(t,null,14)}}finally{rn=0,pt.length=0,Cd(),eo=!1,Vc=null,(pt.length||nr.length)&&Ad()}}function c_(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||Ue;let r=t;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||Ue;d&&(r=t.map(f=>f.trim())),h&&(r=t.map(rd))}let a,c=s[a=Aa(e)]||s[a=Aa(cn(e))];!c&&i&&(c=s[a=Aa(Rs(e))]),c&&Vt(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Vt(l,n,6,r)}}function Nd(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!xe(n)){const c=l=>{const u=Nd(l,e,!0);u&&(a=!0,lt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(He(n)&&s.set(n,null),null):(ye(i)?i.forEach(c=>o[c]=null):lt(o,i),He(n)&&s.set(n,o),o)}function Yo(n,e){return!n||!jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ce(n,e[0].toLowerCase()+e.slice(1))||Ce(n,Rs(e))||Ce(n,e))}let _t=null,Ko=null;function to(n){const e=_t;return _t=n,Ko=n&&n.type.__scopeId||null,e}function Zo(n){Ko=n}function Xo(){Ko=null}const l_=n=>Kt;function Kt(n,e=_t,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&ru(-1);const i=to(e),o=n(...r);return to(i),s._d&&ru(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function Na(n){const{type:e,vnode:t,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=n;let _,g;const y=to(n);try{if(t.shapeFlag&4){const C=r||s;_=sn(u.call(C,C,h,i,f,d,p)),g=c}else{const C=e;_=sn(C.length>1?C(i,{attrs:c,slots:a,emit:l}):C(i,null)),g=e.props?c:u_(c)}}catch(C){Fr.length=0,Go(C,n,1),_=Te(Lt)}let x=_;if(g&&m!==!1){const C=Object.keys(g),{shapeFlag:w}=x;C.length&&w&7&&(o&&C.some(Nc)&&(g=h_(g,o)),x=Cn(x,g))}return t.dirs&&(x=Cn(x),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&(x.transition=t.transition),_=x,to(y),_}const u_=n=>{let e;for(const t in n)(t==="class"||t==="style"||jo(t))&&((e||(e={}))[t]=n[t]);return e},h_=(n,e)=>{const t={};for(const s in n)(!Nc(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function d_(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?Yl(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!Yo(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Yl(s,o,l):!0:!!o;return!1}function Yl(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Yo(t,i))return!0}return!1}function f_({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const Md=n=>n.__isSuspense;function p_(n,e){e&&e.pendingBranch?ye(n)?e.effects.push(...n):e.effects.push(n):o_(n)}function Ui(n,e){if(at){let t=at.provides;const s=at.parent&&at.parent.provides;s===t&&(t=at.provides=Object.create(s)),t[n]=e}}function an(n,e,t=!1){const s=at||_t;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&xe(e)?e.call(s.proxy):e}}function m_(n,e){return Bc(n,null,e)}const Kl={};function dt(n,e,t){return Bc(n,e,t)}function Bc(n,e,{immediate:t,deep:s,flush:r,onTrack:i,onTrigger:o}=Ue){const a=at;let c,l=!1,u=!1;if(mt(n)?(c=()=>n.value,l=Ji(n)):tr(n)?(c=()=>n,s=!0):ye(n)?(u=!0,l=n.some(g=>tr(g)||Ji(g)),c=()=>n.map(g=>{if(mt(g))return g.value;if(tr(g))return _s(g);if(xe(g))return Kn(g,a,2)})):xe(n)?e?c=()=>Kn(n,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),Vt(n,a,3,[d])}:c=Yt,e&&s){const g=c;c=()=>_s(g())}let h,d=g=>{h=_.onStop=()=>{Kn(g,a,4)}};if(Kr)return d=Yt,e?t&&Vt(e,a,3,[c(),u?[]:void 0,d]):c(),Yt;let f=u?[]:Kl;const p=()=>{if(!!_.active)if(e){const g=_.run();(s||l||(u?g.some((y,x)=>Wr(y,f[x])):Wr(g,f)))&&(h&&h(),Vt(e,a,3,[g,f===Kl?void 0:f,d]),f=g)}else _.run()};p.allowRecurse=!!e;let m;r==="sync"?m=p:r==="post"?m=()=>ut(p,a&&a.suspense):(p.pre=!0,a&&(p.id=a.uid),m=()=>Lc(p));const _=new Ic(c,m);return e?t?p():f=_.run():r==="post"?ut(_.run.bind(_),a&&a.suspense):_.run(),()=>{_.stop(),a&&a.scope&&Mc(a.scope.effects,_)}}function __(n,e,t){const s=this.proxy,r=rt(n)?n.includes(".")?kd(s,n):()=>s[n]:n.bind(s,s);let i;xe(e)?i=e:(i=e.handler,t=e);const o=at;cr(this);const a=Bc(r,i.bind(s),t);return o?cr(o):Ts(),a}function kd(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}function _s(n,e){if(!He(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),mt(n))_s(n.value,e);else if(ye(n))for(let t=0;t<n.length;t++)_s(n[t],e);else if(Wo(n)||Js(n))n.forEach(t=>{_s(t,e)});else if(sd(n))for(const t in n)_s(n[t],e);return n}function Od(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ds(()=>{n.isMounted=!0}),Wc(()=>{n.isUnmounting=!0}),n}const $t=[Function,Array],g_={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$t,onEnter:$t,onAfterEnter:$t,onEnterCancelled:$t,onBeforeLeave:$t,onLeave:$t,onAfterLeave:$t,onLeaveCancelled:$t,onBeforeAppear:$t,onAppear:$t,onAfterAppear:$t,onAppearCancelled:$t},setup(n,{slots:e}){const t=vi(),s=Od();let r;return()=>{const i=e.default&&qc(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const m of i)if(m.type!==Lt){o=m;break}}const a=Me(n),{mode:c}=a;if(s.isLeaving)return Ma(o);const l=Zl(o);if(!l)return Ma(o);const u=Hr(l,a,s,t);ar(l,u);const h=t.subTree,d=h&&Zl(h);let f=!1;const{getTransitionKey:p}=l.type;if(p){const m=p();r===void 0?r=m:m!==r&&(r=m,f=!0)}if(d&&d.type!==Lt&&(!fs(l,d)||f)){const m=Hr(d,a,s,t);if(ar(d,m),c==="out-in")return s.isLeaving=!0,m.afterLeave=()=>{s.isLeaving=!1,t.update()},Ma(o);c==="in-out"&&l.type!==Lt&&(m.delayLeave=(_,g,y)=>{const x=Rd(s,d);x[String(d.key)]=d,_._leaveCb=()=>{g(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},Id=g_;function Rd(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Hr(n,e,t,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:_,onAfterAppear:g,onAppearCancelled:y}=e,x=String(n.key),C=Rd(t,n),w=(E,F)=>{E&&Vt(E,s,9,F)},O=(E,F)=>{const V=F[1];w(E,F),ye(E)?E.every(k=>k.length<=1)&&V():E.length<=1&&V()},A={mode:i,persisted:o,beforeEnter(E){let F=a;if(!t.isMounted)if(r)F=m||a;else return;E._leaveCb&&E._leaveCb(!0);const V=C[x];V&&fs(n,V)&&V.el._leaveCb&&V.el._leaveCb(),w(F,[E])},enter(E){let F=c,V=l,k=u;if(!t.isMounted)if(r)F=_||c,V=g||l,k=y||u;else return;let I=!1;const z=E._enterCb=W=>{I||(I=!0,W?w(k,[E]):w(V,[E]),A.delayedLeave&&A.delayedLeave(),E._enterCb=void 0)};F?O(F,[E,z]):z()},leave(E,F){const V=String(n.key);if(E._enterCb&&E._enterCb(!0),t.isUnmounting)return F();w(h,[E]);let k=!1;const I=E._leaveCb=z=>{k||(k=!0,F(),z?w(p,[E]):w(f,[E]),E._leaveCb=void 0,C[V]===n&&delete C[V])};C[V]=n,d?O(d,[E,I]):I()},clone(E){return Hr(E,e,t,s)}};return A}function Ma(n){if(Qo(n))return n=Cn(n),n.children=null,n}function Zl(n){return Qo(n)?n.children?n.children[0]:void 0:n}function ar(n,e){n.shapeFlag&6&&n.component?ar(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function qc(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Re?(o.patchFlag&128&&r++,s=s.concat(qc(o.children,e,a))):(e||o.type!==Lt)&&s.push(a!=null?Cn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Rn(n){return xe(n)?{setup:n,name:n.name}:n}const sr=n=>!!n.type.__asyncLoader,Qo=n=>n.type.__isKeepAlive,y_={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=vi(),s=t.ctx;if(!s.renderer)return()=>{const y=e.default&&e.default();return y&&y.length===1?y[0]:y};const r=new Map,i=new Set;let o=null;const a=t.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:h}}}=s,d=h("div");s.activate=(y,x,C,w,O)=>{const A=y.component;l(y,x,C,0,a),c(A.vnode,y,x,C,A,a,w,y.slotScopeIds,O),ut(()=>{A.isDeactivated=!1,A.a&&er(A.a);const E=y.props&&y.props.onVnodeMounted;E&&Ft(E,A.parent,y)},a)},s.deactivate=y=>{const x=y.component;l(y,d,null,1,a),ut(()=>{x.da&&er(x.da);const C=y.props&&y.props.onVnodeUnmounted;C&&Ft(C,x.parent,y),x.isDeactivated=!0},a)};function f(y){ka(y),u(y,t,a,!0)}function p(y){r.forEach((x,C)=>{const w=ec(x.type);w&&(!y||!y(w))&&m(C)})}function m(y){const x=r.get(y);!o||x.type!==o.type?f(x):o&&ka(o),r.delete(y),i.delete(y)}dt(()=>[n.include,n.exclude],([y,x])=>{y&&p(C=>$r(y,C)),x&&p(C=>!$r(x,C))},{flush:"post",deep:!0});let _=null;const g=()=>{_!=null&&r.set(_,Oa(t.subTree))};return Ds(g),jc(g),Wc(()=>{r.forEach(y=>{const{subTree:x,suspense:C}=t,w=Oa(x);if(y.type===w.type){ka(w);const O=w.component.da;O&&ut(O,C);return}f(y)})}),()=>{if(_=null,!e.default)return null;const y=e.default(),x=y[0];if(y.length>1)return o=null,y;if(!Yr(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let C=Oa(x);const w=C.type,O=ec(sr(C)?C.type.__asyncResolved||{}:w),{include:A,exclude:E,max:F}=n;if(A&&(!O||!$r(A,O))||E&&O&&$r(E,O))return o=C,x;const V=C.key==null?w:C.key,k=r.get(V);return C.el&&(C=Cn(C),x.shapeFlag&128&&(x.ssContent=C)),_=V,k?(C.el=k.el,C.component=k.component,C.transition&&ar(C,C.transition),C.shapeFlag|=512,i.delete(V),i.add(V)):(i.add(V),F&&i.size>parseInt(F,10)&&m(i.values().next().value)),C.shapeFlag|=256,o=C,Md(x.type)?x:C}}},v_=y_;function $r(n,e){return ye(n)?n.some(t=>$r(t,e)):rt(n)?n.split(",").includes(e):n.test?n.test(e):!1}function w_(n,e){Dd(n,"a",e)}function b_(n,e){Dd(n,"da",e)}function Dd(n,e,t=at){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Jo(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Qo(r.parent.vnode)&&T_(s,e,t,r),r=r.parent}}function T_(n,e,t,s){const r=Jo(e,n,s,!0);$d(()=>{Mc(s[e],r)},t)}function ka(n){let e=n.shapeFlag;e&256&&(e-=256),e&512&&(e-=512),n.shapeFlag=e}function Oa(n){return n.shapeFlag&128?n.ssContent:n}function Jo(n,e,t=at,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Tr(),cr(t);const a=Vt(e,t,n,o);return Ts(),xr(),a});return s?r.unshift(i):r.push(i),i}}const Dn=n=>(e,t=at)=>(!Kr||n==="sp")&&Jo(n,e,t),Pd=Dn("bm"),Ds=Dn("m"),x_=Dn("bu"),jc=Dn("u"),Wc=Dn("bum"),$d=Dn("um"),S_=Dn("sp"),E_=Dn("rtg"),C_=Dn("rtc");function A_(n,e=at){Jo("ec",n,e)}function ht(n,e){const t=_t;if(t===null)return n;const s=na(t)||t.proxy,r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=Ue]=e[i];xe(o)&&(o={mounted:o,updated:o}),o.deep&&_s(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l})}return n}function as(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Tr(),Vt(c,t,8,[n.el,a,n,e]),xr())}}const zc="components",N_="directives";function As(n,e){return Hc(zc,n,!0,e)||n}const Fd=Symbol();function M_(n){return rt(n)?Hc(zc,n,!1)||n:n||Fd}function Uc(n){return Hc(N_,n)}function Hc(n,e,t=!0,s=!1){const r=_t||at;if(r){const i=r.type;if(n===zc){const a=ec(i,!1);if(a&&(a===e||a===cn(e)||a===Uo(cn(e))))return i}const o=Xl(r[n]||i[n],e)||Xl(r.appContext[n],e);return!o&&s?i:o}}function Xl(n,e){return n&&(n[e]||n[cn(e)]||n[Uo(cn(e))])}function gt(n,e,t,s){let r;const i=t&&t[s];if(ye(n)||rt(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,i&&i[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(He(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(n[l],l,a,i&&i[a])}}else r=[];return t&&(t[s]=r),r}function no(n,e,t={},s,r){if(_t.isCE||_t.parent&&sr(_t.parent)&&_t.parent.isCE)return Te("slot",e==="default"?null:{name:e},s&&s());let i=n[e];i&&i._c&&(i._d=!1),X();const o=i&&Vd(i(t)),a=et(Re,{key:t.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&n._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Vd(n){return n.some(e=>Yr(e)?!(e.type===Lt||e.type===Re&&!Vd(e.children)):!0)?n:null}const Ka=n=>n?Zd(n)?na(n)||n.proxy:Ka(n.parent):null,so=lt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ka(n.parent),$root:n=>Ka(n.root),$emit:n=>n.emit,$options:n=>Bd(n),$forceUpdate:n=>n.f||(n.f=()=>Lc(n.update)),$nextTick:n=>n.n||(n.n=Sr.bind(n.proxy)),$watch:n=>__.bind(n)}),k_={get({_:n},e){const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(s!==Ue&&Ce(s,e))return o[e]=1,s[e];if(r!==Ue&&Ce(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&Ce(l,e))return o[e]=3,i[e];if(t!==Ue&&Ce(t,e))return o[e]=4,t[e];Za&&(o[e]=0)}}const u=so[e];let h,d;if(u)return e==="$attrs"&&Pt(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Ue&&Ce(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,Ce(d,e))return d[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return r!==Ue&&Ce(r,e)?(r[e]=t,!0):s!==Ue&&Ce(s,e)?(s[e]=t,!0):Ce(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==Ue&&Ce(n,o)||e!==Ue&&Ce(e,o)||(a=i[0])&&Ce(a,o)||Ce(s,o)||Ce(so,o)||Ce(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ce(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};let Za=!0;function O_(n){const e=Bd(n),t=n.proxy,s=n.ctx;Za=!1,e.beforeCreate&&Ql(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:_,beforeDestroy:g,beforeUnmount:y,destroyed:x,unmounted:C,render:w,renderTracked:O,renderTriggered:A,errorCaptured:E,serverPrefetch:F,expose:V,inheritAttrs:k,components:I,directives:z,filters:W}=e;if(l&&I_(l,s,null,n.appContext.config.unwrapInjectedRef),o)for(const re in o){const le=o[re];xe(le)&&(s[re]=le.bind(t))}if(r){const re=r.call(t,t);He(re)&&(n.data=Nt(re))}if(Za=!0,i)for(const re in i){const le=i[re],he=xe(le)?le.bind(t,t):xe(le.get)?le.get.bind(t,t):Yt,ve=!xe(le)&&xe(le.set)?le.set.bind(t):Yt,Q=be({get:he,set:ve});Object.defineProperty(s,re,{enumerable:!0,configurable:!0,get:()=>Q.value,set:P=>Q.value=P})}if(a)for(const re in a)Ld(a[re],s,t,re);if(c){const re=xe(c)?c.call(t):c;Reflect.ownKeys(re).forEach(le=>{Ui(le,re[le])})}u&&Ql(u,n,"c");function te(re,le){ye(le)?le.forEach(he=>re(he.bind(t))):le&&re(le.bind(t))}if(te(Pd,h),te(Ds,d),te(x_,f),te(jc,p),te(w_,m),te(b_,_),te(A_,E),te(C_,O),te(E_,A),te(Wc,y),te($d,C),te(S_,F),ye(V))if(V.length){const re=n.exposed||(n.exposed={});V.forEach(le=>{Object.defineProperty(re,le,{get:()=>t[le],set:he=>t[le]=he})})}else n.exposed||(n.exposed={});w&&n.render===Yt&&(n.render=w),k!=null&&(n.inheritAttrs=k),I&&(n.components=I),z&&(n.directives=z)}function I_(n,e,t=Yt,s=!1){ye(n)&&(n=Xa(n));for(const r in n){const i=n[r];let o;He(i)?"default"in i?o=an(i.from||r,i.default,!0):o=an(i.from||r):o=an(i),mt(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Ql(n,e,t){Vt(ye(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Ld(n,e,t,s){const r=s.includes(".")?kd(t,s):()=>t[s];if(rt(n)){const i=e[n];xe(i)&&dt(r,i)}else if(xe(n))dt(r,n.bind(t));else if(He(n))if(ye(n))n.forEach(i=>Ld(i,e,t,s));else{const i=xe(n.handler)?n.handler.bind(t):e[n.handler];xe(i)&&dt(r,i,n)}}function Bd(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(l=>ro(c,l,o,!0)),ro(c,e,o)),He(e)&&i.set(e,c),c}function ro(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&ro(n,i,t,!0),r&&r.forEach(o=>ro(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=R_[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const R_={data:Jl,props:us,emits:us,methods:us,computed:us,beforeCreate:wt,created:wt,beforeMount:wt,mounted:wt,beforeUpdate:wt,updated:wt,beforeDestroy:wt,beforeUnmount:wt,destroyed:wt,unmounted:wt,activated:wt,deactivated:wt,errorCaptured:wt,serverPrefetch:wt,components:us,directives:us,watch:P_,provide:Jl,inject:D_};function Jl(n,e){return e?n?function(){return lt(xe(n)?n.call(this,this):n,xe(e)?e.call(this,this):e)}:e:n}function D_(n,e){return us(Xa(n),Xa(e))}function Xa(n){if(ye(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function wt(n,e){return n?[...new Set([].concat(n,e))]:e}function us(n,e){return n?lt(lt(Object.create(null),n),e):e}function P_(n,e){if(!n)return e;if(!e)return n;const t=lt(Object.create(null),n);for(const s in e)t[s]=wt(n[s],e[s]);return t}function $_(n,e,t,s=!1){const r={},i={};Qi(i,ea,1),n.propsDefaults=Object.create(null),qd(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Qm(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function F_(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=Me(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Yo(n.emitsOptions,d))continue;const f=e[d];if(c)if(Ce(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=cn(d);r[p]=Qa(c,a,p,f,n,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{qd(n,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!Ce(e,h)&&((u=Rs(h))===h||!Ce(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Qa(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Ce(e,h)&&!0)&&(delete i[h],l=!0)}l&&En(n,"set","$attrs")}function qd(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(zi(c))continue;const l=e[c];let u;r&&Ce(r,u=cn(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:Yo(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Me(t),l=a||Ue;for(let u=0;u<i.length;u++){const h=i[u];t[h]=Qa(r,c,h,l[h],n,!Ce(l,h))}}return o}function Qa(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=Ce(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&xe(c)){const{propsDefaults:l}=r;t in l?s=l[t]:(cr(r),s=l[t]=c.call(null,e),Ts())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Rs(t))&&(s=!0))}return s}function jd(n,e,t=!1){const s=e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!xe(n)){const u=h=>{c=!0;const[d,f]=jd(h,e,!0);lt(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return He(n)&&s.set(n,Qs),Qs;if(ye(i))for(let u=0;u<i.length;u++){const h=cn(i[u]);eu(h)&&(o[h]=Ue)}else if(i)for(const u in i){const h=cn(u);if(eu(h)){const d=i[u],f=o[h]=ye(d)||xe(d)?{type:d}:d;if(f){const p=su(Boolean,f.type),m=su(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Ce(f,"default"))&&a.push(h)}}}const l=[o,a];return He(n)&&s.set(n,l),l}function eu(n){return n[0]!=="$"}function tu(n){const e=n&&n.toString().match(/^\s*function (\w+)/);return e?e[1]:n===null?"null":""}function nu(n,e){return tu(n)===tu(e)}function su(n,e){return ye(e)?e.findIndex(t=>nu(t,n)):xe(e)&&nu(e,n)?0:-1}const Wd=n=>n[0]==="_"||n==="$stable",Gc=n=>ye(n)?n.map(sn):[sn(n)],V_=(n,e,t)=>{if(e._n)return e;const s=Kt((...r)=>Gc(e(...r)),t);return s._c=!1,s},zd=(n,e,t)=>{const s=n._ctx;for(const r in n){if(Wd(r))continue;const i=n[r];if(xe(i))e[r]=V_(r,i,s);else if(i!=null){const o=Gc(i);e[r]=()=>o}}},Ud=(n,e)=>{const t=Gc(e);n.slots.default=()=>t},L_=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=Me(e),Qi(e,"_",t)):zd(e,n.slots={})}else n.slots={},e&&Ud(n,e);Qi(n.slots,ea,1)},B_=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=Ue;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:(lt(r,e),!t&&a===1&&delete r._):(i=!e.$stable,zd(e,r)),o=e}else e&&(Ud(n,e),o={default:1});if(i)for(const a in r)!Wd(a)&&!(a in o)&&delete r[a]};function Hd(){return{app:null,config:{isNativeTag:_m,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let q_=0;function j_(n,e){return function(s,r=null){xe(s)||(s=Object.assign({},s)),r!=null&&!He(r)&&(r=null);const i=Hd(),o=new Set;let a=!1;const c=i.app={_uid:q_++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:ig,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&xe(l.install)?(o.add(l),l.install(c,...u)):xe(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=Te(s,r);return d.appContext=i,u&&e?e(d,l):n(d,l,h),a=!0,c._container=l,l.__vue_app__=c,na(d.component)||d.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Ja(n,e,t,s,r=!1){if(ye(n)){n.forEach((d,f)=>Ja(d,e&&(ye(e)?e[f]:e),t,s,r));return}if(sr(s)&&!r)return;const i=s.shapeFlag&4?na(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=n,l=e&&e.r,u=a.refs===Ue?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(rt(l)?(u[l]=null,Ce(h,l)&&(h[l]=null)):mt(l)&&(l.value=null)),xe(c))Kn(c,a,12,[o,u]);else{const d=rt(c),f=mt(c);if(d||f){const p=()=>{if(n.f){const m=d?u[c]:c.value;r?ye(m)&&Mc(m,i):ye(m)?m.includes(i)||m.push(i):d?(u[c]=[i],Ce(h,c)&&(h[c]=u[c])):(c.value=[i],n.k&&(u[n.k]=c.value))}else d?(u[c]=o,Ce(h,c)&&(h[c]=o)):f&&(c.value=o,n.k&&(u[n.k]=o))};o?(p.id=-1,ut(p,t)):p()}}}const ut=p_;function W_(n){return z_(n)}function z_(n,e){const t=Tm();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Yt,cloneNode:p,insertStaticContent:m}=n,_=(b,T,S,$=null,j=null,Y=null,Z=!1,G=null,J=!!T.dynamicChildren)=>{if(b===T)return;b&&!fs(b,T)&&($=R(b),q(b,j,Y,!0),b=null),T.patchFlag===-2&&(J=!1,T.dynamicChildren=null);const{type:H,ref:pe,shapeFlag:de}=T;switch(H){case Yc:g(b,T,S,$);break;case Lt:y(b,T,S,$);break;case Hi:b==null&&x(T,S,$,Z);break;case Re:z(b,T,S,$,j,Y,Z,G,J);break;default:de&1?O(b,T,S,$,j,Y,Z,G,J):de&6?W(b,T,S,$,j,Y,Z,G,J):(de&64||de&128)&&H.process(b,T,S,$,j,Y,Z,G,J,fe)}pe!=null&&j&&Ja(pe,b&&b.ref,Y,T||b,!T)},g=(b,T,S,$)=>{if(b==null)s(T.el=a(T.children),S,$);else{const j=T.el=b.el;T.children!==b.children&&l(j,T.children)}},y=(b,T,S,$)=>{b==null?s(T.el=c(T.children||""),S,$):T.el=b.el},x=(b,T,S,$)=>{[b.el,b.anchor]=m(b.children,T,S,$,b.el,b.anchor)},C=({el:b,anchor:T},S,$)=>{let j;for(;b&&b!==T;)j=d(b),s(b,S,$),b=j;s(T,S,$)},w=({el:b,anchor:T})=>{let S;for(;b&&b!==T;)S=d(b),r(b),b=S;r(T)},O=(b,T,S,$,j,Y,Z,G,J)=>{Z=Z||T.type==="svg",b==null?A(T,S,$,j,Y,Z,G,J):V(b,T,j,Y,Z,G,J)},A=(b,T,S,$,j,Y,Z,G)=>{let J,H;const{type:pe,props:de,shapeFlag:me,transition:we,patchFlag:Ae,dirs:We}=b;if(b.el&&p!==void 0&&Ae===-1)J=b.el=p(b.el);else{if(J=b.el=o(b.type,Y,de&&de.is,de),me&8?u(J,b.children):me&16&&F(b.children,J,null,$,j,Y&&pe!=="foreignObject",Z,G),We&&as(b,null,$,"created"),de){for(const Ye in de)Ye!=="value"&&!zi(Ye)&&i(J,Ye,null,de[Ye],Y,b.children,$,j,D);"value"in de&&i(J,"value",null,de.value),(H=de.onVnodeBeforeMount)&&Ft(H,$,b)}E(J,b,b.scopeId,Z,$)}We&&as(b,null,$,"beforeMount");const ze=(!j||j&&!j.pendingBranch)&&we&&!we.persisted;ze&&we.beforeEnter(J),s(J,T,S),((H=de&&de.onVnodeMounted)||ze||We)&&ut(()=>{H&&Ft(H,$,b),ze&&we.enter(J),We&&as(b,null,$,"mounted")},j)},E=(b,T,S,$,j)=>{if(S&&f(b,S),$)for(let Y=0;Y<$.length;Y++)f(b,$[Y]);if(j){let Y=j.subTree;if(T===Y){const Z=j.vnode;E(b,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},F=(b,T,S,$,j,Y,Z,G,J=0)=>{for(let H=J;H<b.length;H++){const pe=b[H]=G?Un(b[H]):sn(b[H]);_(null,pe,T,S,$,j,Y,Z,G)}},V=(b,T,S,$,j,Y,Z)=>{const G=T.el=b.el;let{patchFlag:J,dynamicChildren:H,dirs:pe}=T;J|=b.patchFlag&16;const de=b.props||Ue,me=T.props||Ue;let we;S&&cs(S,!1),(we=me.onVnodeBeforeUpdate)&&Ft(we,S,T,b),pe&&as(T,b,S,"beforeUpdate"),S&&cs(S,!0);const Ae=j&&T.type!=="foreignObject";if(H?k(b.dynamicChildren,H,G,S,$,Ae,Y):Z||he(b,T,G,null,S,$,Ae,Y,!1),J>0){if(J&16)I(G,T,de,me,S,$,j);else if(J&2&&de.class!==me.class&&i(G,"class",null,me.class,j),J&4&&i(G,"style",de.style,me.style,j),J&8){const We=T.dynamicProps;for(let ze=0;ze<We.length;ze++){const Ye=We[ze],jt=de[Ye],qs=me[Ye];(qs!==jt||Ye==="value")&&i(G,Ye,jt,qs,j,b.children,S,$,D)}}J&1&&b.children!==T.children&&u(G,T.children)}else!Z&&H==null&&I(G,T,de,me,S,$,j);((we=me.onVnodeUpdated)||pe)&&ut(()=>{we&&Ft(we,S,T,b),pe&&as(T,b,S,"updated")},$)},k=(b,T,S,$,j,Y,Z)=>{for(let G=0;G<T.length;G++){const J=b[G],H=T[G],pe=J.el&&(J.type===Re||!fs(J,H)||J.shapeFlag&70)?h(J.el):S;_(J,H,pe,null,$,j,Y,Z,!0)}},I=(b,T,S,$,j,Y,Z)=>{if(S!==$){for(const G in $){if(zi(G))continue;const J=$[G],H=S[G];J!==H&&G!=="value"&&i(b,G,H,J,Z,T.children,j,Y,D)}if(S!==Ue)for(const G in S)!zi(G)&&!(G in $)&&i(b,G,S[G],null,Z,T.children,j,Y,D);"value"in $&&i(b,"value",S.value,$.value)}},z=(b,T,S,$,j,Y,Z,G,J)=>{const H=T.el=b?b.el:a(""),pe=T.anchor=b?b.anchor:a("");let{patchFlag:de,dynamicChildren:me,slotScopeIds:we}=T;we&&(G=G?G.concat(we):we),b==null?(s(H,S,$),s(pe,S,$),F(T.children,S,pe,j,Y,Z,G,J)):de>0&&de&64&&me&&b.dynamicChildren?(k(b.dynamicChildren,me,S,j,Y,Z,G),(T.key!=null||j&&T===j.subTree)&&Gd(b,T,!0)):he(b,T,S,pe,j,Y,Z,G,J)},W=(b,T,S,$,j,Y,Z,G,J)=>{T.slotScopeIds=G,b==null?T.shapeFlag&512?j.ctx.activate(T,S,$,Z,J):ne(T,S,$,j,Y,Z,J):te(b,T,J)},ne=(b,T,S,$,j,Y,Z)=>{const G=b.component=J_(b,$,j);if(Qo(b)&&(G.ctx.renderer=fe),eg(G),G.asyncDep){if(j&&j.registerDep(G,re),!b.el){const J=G.subTree=Te(Lt);y(null,J,T,S)}return}re(G,b,T,S,j,Y,Z)},te=(b,T,S)=>{const $=T.component=b.component;if(d_(b,T,S))if($.asyncDep&&!$.asyncResolved){le($,T,S);return}else $.next=T,i_($.update),$.update();else T.el=b.el,$.vnode=T},re=(b,T,S,$,j,Y,Z)=>{const G=()=>{if(b.isMounted){let{next:pe,bu:de,u:me,parent:we,vnode:Ae}=b,We=pe,ze;cs(b,!1),pe?(pe.el=Ae.el,le(b,pe,Z)):pe=Ae,de&&er(de),(ze=pe.props&&pe.props.onVnodeBeforeUpdate)&&Ft(ze,we,pe,Ae),cs(b,!0);const Ye=Na(b),jt=b.subTree;b.subTree=Ye,_(jt,Ye,h(jt.el),R(jt),b,j,Y),pe.el=Ye.el,We===null&&f_(b,Ye.el),me&&ut(me,j),(ze=pe.props&&pe.props.onVnodeUpdated)&&ut(()=>Ft(ze,we,pe,Ae),j)}else{let pe;const{el:de,props:me}=T,{bm:we,m:Ae,parent:We}=b,ze=sr(T);if(cs(b,!1),we&&er(we),!ze&&(pe=me&&me.onVnodeBeforeMount)&&Ft(pe,We,T),cs(b,!0),de&&ae){const Ye=()=>{b.subTree=Na(b),ae(de,b.subTree,b,j,null)};ze?T.type.__asyncLoader().then(()=>!b.isUnmounted&&Ye()):Ye()}else{const Ye=b.subTree=Na(b);_(null,Ye,S,$,b,j,Y),T.el=Ye.el}if(Ae&&ut(Ae,j),!ze&&(pe=me&&me.onVnodeMounted)){const Ye=T;ut(()=>Ft(pe,We,Ye),j)}(T.shapeFlag&256||We&&sr(We.vnode)&&We.vnode.shapeFlag&256)&&b.a&&ut(b.a,j),b.isMounted=!0,T=S=$=null}},J=b.effect=new Ic(G,()=>Lc(H),b.scope),H=b.update=()=>J.run();H.id=b.uid,cs(b,!0),H()},le=(b,T,S)=>{T.component=b;const $=b.vnode.props;b.vnode=T,b.next=null,F_(b,T.props,$,S),B_(b,T.children,S),Tr(),Gl(),xr()},he=(b,T,S,$,j,Y,Z,G,J=!1)=>{const H=b&&b.children,pe=b?b.shapeFlag:0,de=T.children,{patchFlag:me,shapeFlag:we}=T;if(me>0){if(me&128){Q(H,de,S,$,j,Y,Z,G,J);return}else if(me&256){ve(H,de,S,$,j,Y,Z,G,J);return}}we&8?(pe&16&&D(H,j,Y),de!==H&&u(S,de)):pe&16?we&16?Q(H,de,S,$,j,Y,Z,G,J):D(H,j,Y,!0):(pe&8&&u(S,""),we&16&&F(de,S,$,j,Y,Z,G,J))},ve=(b,T,S,$,j,Y,Z,G,J)=>{b=b||Qs,T=T||Qs;const H=b.length,pe=T.length,de=Math.min(H,pe);let me;for(me=0;me<de;me++){const we=T[me]=J?Un(T[me]):sn(T[me]);_(b[me],we,S,null,j,Y,Z,G,J)}H>pe?D(b,j,Y,!0,!1,de):F(T,S,$,j,Y,Z,G,J,de)},Q=(b,T,S,$,j,Y,Z,G,J)=>{let H=0;const pe=T.length;let de=b.length-1,me=pe-1;for(;H<=de&&H<=me;){const we=b[H],Ae=T[H]=J?Un(T[H]):sn(T[H]);if(fs(we,Ae))_(we,Ae,S,null,j,Y,Z,G,J);else break;H++}for(;H<=de&&H<=me;){const we=b[de],Ae=T[me]=J?Un(T[me]):sn(T[me]);if(fs(we,Ae))_(we,Ae,S,null,j,Y,Z,G,J);else break;de--,me--}if(H>de){if(H<=me){const we=me+1,Ae=we<pe?T[we].el:$;for(;H<=me;)_(null,T[H]=J?Un(T[H]):sn(T[H]),S,Ae,j,Y,Z,G,J),H++}}else if(H>me)for(;H<=de;)q(b[H],j,Y,!0),H++;else{const we=H,Ae=H,We=new Map;for(H=Ae;H<=me;H++){const kt=T[H]=J?Un(T[H]):sn(T[H]);kt.key!=null&&We.set(kt.key,H)}let ze,Ye=0;const jt=me-Ae+1;let qs=!1,Pl=0;const kr=new Array(jt);for(H=0;H<jt;H++)kr[H]=0;for(H=we;H<=de;H++){const kt=b[H];if(Ye>=jt){q(kt,j,Y,!0);continue}let nn;if(kt.key!=null)nn=We.get(kt.key);else for(ze=Ae;ze<=me;ze++)if(kr[ze-Ae]===0&&fs(kt,T[ze])){nn=ze;break}nn===void 0?q(kt,j,Y,!0):(kr[nn-Ae]=H+1,nn>=Pl?Pl=nn:qs=!0,_(kt,T[nn],S,null,j,Y,Z,G,J),Ye++)}const $l=qs?U_(kr):Qs;for(ze=$l.length-1,H=jt-1;H>=0;H--){const kt=Ae+H,nn=T[kt],Fl=kt+1<pe?T[kt+1].el:$;kr[H]===0?_(null,nn,S,Fl,j,Y,Z,G,J):qs&&(ze<0||H!==$l[ze]?P(nn,S,Fl,2):ze--)}}},P=(b,T,S,$,j=null)=>{const{el:Y,type:Z,transition:G,children:J,shapeFlag:H}=b;if(H&6){P(b.component.subTree,T,S,$);return}if(H&128){b.suspense.move(T,S,$);return}if(H&64){Z.move(b,T,S,fe);return}if(Z===Re){s(Y,T,S);for(let de=0;de<J.length;de++)P(J[de],T,S,$);s(b.anchor,T,S);return}if(Z===Hi){C(b,T,S);return}if($!==2&&H&1&&G)if($===0)G.beforeEnter(Y),s(Y,T,S),ut(()=>G.enter(Y),j);else{const{leave:de,delayLeave:me,afterLeave:we}=G,Ae=()=>s(Y,T,S),We=()=>{de(Y,()=>{Ae(),we&&we()})};me?me(Y,Ae,We):We()}else s(Y,T,S)},q=(b,T,S,$=!1,j=!1)=>{const{type:Y,props:Z,ref:G,children:J,dynamicChildren:H,shapeFlag:pe,patchFlag:de,dirs:me}=b;if(G!=null&&Ja(G,null,S,b,!0),pe&256){T.ctx.deactivate(b);return}const we=pe&1&&me,Ae=!sr(b);let We;if(Ae&&(We=Z&&Z.onVnodeBeforeUnmount)&&Ft(We,T,b),pe&6)M(b.component,S,$);else{if(pe&128){b.suspense.unmount(S,$);return}we&&as(b,null,T,"beforeUnmount"),pe&64?b.type.remove(b,T,S,j,fe,$):H&&(Y!==Re||de>0&&de&64)?D(H,T,S,!1,!0):(Y===Re&&de&384||!j&&pe&16)&&D(J,T,S),$&&se(b)}(Ae&&(We=Z&&Z.onVnodeUnmounted)||we)&&ut(()=>{We&&Ft(We,T,b),we&&as(b,null,T,"unmounted")},S)},se=b=>{const{type:T,el:S,anchor:$,transition:j}=b;if(T===Re){N(S,$);return}if(T===Hi){w(b);return}const Y=()=>{r(S),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(b.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:G}=j,J=()=>Z(S,Y);G?G(b.el,Y,J):J()}else Y()},N=(b,T)=>{let S;for(;b!==T;)S=d(b),r(b),b=S;r(T)},M=(b,T,S)=>{const{bum:$,scope:j,update:Y,subTree:Z,um:G}=b;$&&er($),j.stop(),Y&&(Y.active=!1,q(Z,b,T,S)),G&&ut(G,T),ut(()=>{b.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},D=(b,T,S,$=!1,j=!1,Y=0)=>{for(let Z=Y;Z<b.length;Z++)q(b[Z],T,S,$,j)},R=b=>b.shapeFlag&6?R(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el),ce=(b,T,S)=>{b==null?T._vnode&&q(T._vnode,null,null,!0):_(T._vnode||null,b,T,null,null,null,S),Gl(),Cd(),T._vnode=b},fe={p:_,um:q,m:P,r:se,mt:ne,mc:F,pc:he,pbc:k,n:R,o:n};let ue,ae;return e&&([ue,ae]=e(fe)),{render:ce,hydrate:ue,createApp:j_(ce,ue)}}function cs({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Gd(n,e,t=!1){const s=n.children,r=e.children;if(ye(s)&&ye(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Un(r[i]),a.el=o.el),t||Gd(o,a))}}function U_(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=t[t.length-1],n[r]<l){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<l?i=a+1:o=a;l<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}const H_=n=>n.__isTeleport,Re=Symbol(void 0),Yc=Symbol(void 0),Lt=Symbol(void 0),Hi=Symbol(void 0),Fr=[];let Ut=null;function X(n=!1){Fr.push(Ut=n?null:[])}function G_(){Fr.pop(),Ut=Fr[Fr.length-1]||null}let Gr=1;function ru(n){Gr+=n}function Yd(n){return n.dynamicChildren=Gr>0?Ut||Qs:null,G_(),Gr>0&&Ut&&Ut.push(n),n}function oe(n,e,t,s,r,i){return Yd(B(n,e,t,s,r,i,!0))}function et(n,e,t,s,r){return Yd(Te(n,e,t,s,r,!0))}function Yr(n){return n?n.__v_isVNode===!0:!1}function fs(n,e){return n.type===e.type&&n.key===e.key}const ea="__vInternal",Kd=({key:n})=>n!=null?n:null,Gi=({ref:n,ref_key:e,ref_for:t})=>n!=null?rt(n)||mt(n)||xe(n)?{i:_t,r:n,k:e,f:!!t}:n:null;function B(n,e=null,t=null,s=0,r=null,i=n===Re?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Kd(e),ref:e&&Gi(e),scopeId:Ko,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Kc(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=rt(t)?8:16),Gr>0&&!o&&Ut&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ut.push(c),c}const Te=Y_;function Y_(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Fd)&&(n=Lt),Yr(n)){const a=Cn(n,e,!0);return t&&Kc(a,t),Gr>0&&!i&&Ut&&(a.shapeFlag&6?Ut[Ut.indexOf(n)]=a:Ut.push(a)),a.patchFlag|=-2,a}if(rg(n)&&(n=n.__vccOpts),e){e=K_(e);let{class:a,style:c}=e;a&&!rt(a)&&(e.class=ns(a)),He(c)&&(_d(c)&&!ye(c)&&(c=lt({},c)),e.style=Le(c))}const o=rt(n)?1:Md(n)?128:H_(n)?64:He(n)?4:xe(n)?2:0;return B(n,e,t,s,r,o,i,!0)}function K_(n){return n?_d(n)||ea in n?lt({},n):n:null}function Cn(n,e,t=!1){const{props:s,ref:r,patchFlag:i,children:o}=n,a=e?ta(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Kd(a),ref:e&&e.ref?t&&r?ye(r)?r.concat(Gi(e)):[r,Gi(e)]:Gi(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Re?i===-1?16:i|16:i,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Cn(n.ssContent),ssFallback:n.ssFallback&&Cn(n.ssFallback),el:n.el,anchor:n.anchor}}function Zn(n=" ",e=0){return Te(Yc,null,n,e)}function Z_(n,e){const t=Te(Hi,null,n);return t.staticCount=e,t}function ot(n="",e=!1){return e?(X(),et(Lt,null,n)):Te(Lt,null,n)}function sn(n){return n==null||typeof n=="boolean"?Te(Lt):ye(n)?Te(Re,null,n.slice()):typeof n=="object"?Un(n):Te(Yc,null,String(n))}function Un(n){return n.el===null||n.memo?n:Cn(n)}function Kc(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(ye(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Kc(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(ea in e)?e._ctx=_t:r===3&&_t&&(_t.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else xe(e)?(e={default:e,_ctx:_t},t=32):(e=String(e),s&64?(t=16,e=[Zn(e)]):t=8);n.children=e,n.shapeFlag|=t}function ta(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ns([e.class,s.class]));else if(r==="style")e.style=Le([e.style,s.style]);else if(jo(r)){const i=e[r],o=s[r];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ft(n,e,t,s=null){Vt(n,e,7,[t,s])}const X_=Hd();let Q_=0;function J_(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||X_,i={uid:Q_++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new xm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jd(s,r),emitsOptions:Nd(s,r),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=c_.bind(null,i),n.ce&&n.ce(i),i}let at=null;const vi=()=>at||_t,cr=n=>{at=n,n.scope.on()},Ts=()=>{at&&at.scope.off(),at=null};function Zd(n){return n.vnode.shapeFlag&4}let Kr=!1;function eg(n,e=!1){Kr=e;const{props:t,children:s}=n.vnode,r=Zd(n);$_(n,t,r,e),L_(n,s);const i=r?tg(n,e):void 0;return Kr=!1,i}function tg(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=gd(new Proxy(n.ctx,k_));const{setup:s}=t;if(s){const r=n.setupContext=s.length>1?sg(n):null;cr(n),Tr();const i=Kn(s,n,0,[n.props,r]);if(xr(),Ts(),td(i)){if(i.then(Ts,Ts),e)return i.then(o=>{iu(n,o,e)}).catch(o=>{Go(o,n,0)});n.asyncDep=i}else iu(n,i,e)}else Xd(n,e)}function iu(n,e,t){xe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:He(e)&&(n.setupState=Td(e)),Xd(n,t)}let ou;function Xd(n,e,t){const s=n.type;if(!n.render){if(!e&&ou&&!s.render){const r=s.template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,l=lt(lt({isCustomElement:i,delimiters:a},o),c);s.render=ou(r,l)}}n.render=s.render||Yt}cr(n),Tr(),O_(n),xr(),Ts()}function ng(n){return new Proxy(n.attrs,{get(e,t){return Pt(n,"get","$attrs"),e[t]}})}function sg(n){const e=s=>{n.exposed=s||{}};let t;return{get attrs(){return t||(t=ng(n))},slots:n.slots,emit:n.emit,expose:e}}function na(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Td(gd(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in so)return so[t](n)}}))}function ec(n,e=!0){return xe(n)?n.displayName||n.name:n.name||e&&n.__name}function rg(n){return xe(n)&&"__vccOpts"in n}const be=(n,e)=>n_(n,e,Kr);function sa(n,e,t){const s=arguments.length;return s===2?He(e)&&!ye(e)?Yr(e)?Te(n,null,[e]):Te(n,e):Te(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Yr(t)&&(t=[t]),Te(n,e,t))}const ig="3.2.38",og="http://www.w3.org/2000/svg",ps=typeof document<"u"?document:null,au=ps&&ps.createElement("template"),ag={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e?ps.createElementNS(og,n):ps.createElement(n,t?{is:t}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>ps.createTextNode(n),createComment:n=>ps.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ps.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},cloneNode(n){const e=n.cloneNode(!0);return"_value"in n&&(e._value=n._value),e},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{au.innerHTML=s?`<svg>${n}</svg>`:n;const a=au.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function cg(n,e,t){const s=n._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function lg(n,e,t){const s=n.style,r=rt(t);if(t&&!r){for(const i in t)tc(s,i,t[i]);if(e&&!rt(e))for(const i in e)t[i]==null&&tc(s,i,"")}else{const i=s.display;r?e!==t&&(s.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(s.display=i)}}const cu=/\s*!important$/;function tc(n,e,t){if(ye(t))t.forEach(s=>tc(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=ug(n,e);cu.test(t)?n.setProperty(Rs(s),t.replace(cu,""),"important"):n[s]=t}}const lu=["Webkit","Moz","ms"],Ia={};function ug(n,e){const t=Ia[e];if(t)return t;let s=cn(e);if(s!=="filter"&&s in n)return Ia[e]=s;s=Uo(s);for(let r=0;r<lu.length;r++){const i=lu[r]+s;if(i in n)return Ia[e]=i}return e}const uu="http://www.w3.org/1999/xlink";function hg(n,e,t,s,r){if(s&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(uu,e.slice(6,e.length)):n.setAttributeNS(uu,e,t);else{const i=hm(e);t==null||i&&!Qh(t)?n.removeAttribute(e):n.setAttribute(e,i?"":t)}}function dg(n,e,t,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const c=t==null?"":t;(n.value!==c||n.tagName==="OPTION")&&(n.value=c),t==null&&n.removeAttribute(e);return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=Qh(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(e)}const[Qd,fg]=(()=>{let n=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(n=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[n,e]})();let nc=0;const pg=Promise.resolve(),mg=()=>{nc=0},_g=()=>nc||(pg.then(mg),nc=Qd());function Jd(n,e,t,s){n.addEventListener(e,t,s)}function gg(n,e,t,s){n.removeEventListener(e,t,s)}function yg(n,e,t,s,r=null){const i=n._vei||(n._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=vg(e);if(s){const l=i[e]=wg(s,r);Jd(n,a,l,c)}else o&&(gg(n,a,o,c),i[e]=void 0)}}const hu=/(?:Once|Passive|Capture)$/;function vg(n){let e;if(hu.test(n)){e={};let s;for(;s=n.match(hu);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Rs(n.slice(2)),e]}function wg(n,e){const t=s=>{const r=s.timeStamp||Qd();(fg||r>=t.attached-1)&&Vt(bg(s,t.value),e,5,[s])};return t.value=n,t.attached=_g(),t}function bg(n,e){if(ye(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const du=/^on[a-z]/,Tg=(n,e,t,s,r=!1,i,o,a,c)=>{e==="class"?cg(n,s,r):e==="style"?lg(n,t,s):jo(e)?Nc(e)||yg(n,e,t,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xg(n,e,s,r))?dg(n,e,s,i,o,a,c):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),hg(n,e,s,r))};function xg(n,e,t,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&du.test(e)&&xe(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||du.test(e)&&rt(t)?!1:e in n}const qn="transition",Or="animation",ra=(n,{slots:e})=>sa(Id,tf(n),e);ra.displayName="Transition";const ef={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Sg=ra.props=lt({},Id.props,ef),ls=(n,e=[])=>{ye(n)?n.forEach(t=>t(...e)):n&&n(...e)},fu=n=>n?ye(n)?n.some(e=>e.length>1):n.length>1:!1;function tf(n){const e={};for(const I in n)I in ef||(e[I]=n[I]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=Eg(r),m=p&&p[0],_=p&&p[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:x,onLeave:C,onLeaveCancelled:w,onBeforeAppear:O=g,onAppear:A=y,onAppearCancelled:E=x}=e,F=(I,z,W)=>{zn(I,z?u:a),zn(I,z?l:o),W&&W()},V=(I,z)=>{I._isLeaving=!1,zn(I,h),zn(I,f),zn(I,d),z&&z()},k=I=>(z,W)=>{const ne=I?A:y,te=()=>F(z,I,W);ls(ne,[z,te]),pu(()=>{zn(z,I?c:i),yn(z,I?u:a),fu(ne)||mu(z,s,m,te)})};return lt(e,{onBeforeEnter(I){ls(g,[I]),yn(I,i),yn(I,o)},onBeforeAppear(I){ls(O,[I]),yn(I,c),yn(I,l)},onEnter:k(!1),onAppear:k(!0),onLeave(I,z){I._isLeaving=!0;const W=()=>V(I,z);yn(I,h),sf(),yn(I,d),pu(()=>{!I._isLeaving||(zn(I,h),yn(I,f),fu(C)||mu(I,s,_,W))}),ls(C,[I,W])},onEnterCancelled(I){F(I,!1),ls(x,[I])},onAppearCancelled(I){F(I,!0),ls(E,[I])},onLeaveCancelled(I){V(I),ls(w,[I])}})}function Eg(n){if(n==null)return null;if(He(n))return[Ra(n.enter),Ra(n.leave)];{const e=Ra(n);return[e,e]}}function Ra(n){return rd(n)}function yn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function zn(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function pu(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Cg=0;function mu(n,e,t,s){const r=n._endId=++Cg,i=()=>{r===n._endId&&s()};if(t)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=nf(n,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,d),i()},d=f=>{f.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,d)}function nf(n,e){const t=window.getComputedStyle(n),s=p=>(t[p]||"").split(", "),r=s(qn+"Delay"),i=s(qn+"Duration"),o=_u(r,i),a=s(Or+"Delay"),c=s(Or+"Duration"),l=_u(a,c);let u=null,h=0,d=0;e===qn?o>0&&(u=qn,h=o,d=i.length):e===Or?l>0&&(u=Or,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?qn:Or:null,d=u?u===qn?i.length:c.length:0);const f=u===qn&&/\b(transform|all)(,|$)/.test(t[qn+"Property"]);return{type:u,timeout:h,propCount:d,hasTransform:f}}function _u(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>gu(t)+gu(n[s])))}function gu(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function sf(){return document.body.offsetHeight}const rf=new WeakMap,of=new WeakMap,Ag={name:"TransitionGroup",props:lt({},Sg,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=vi(),s=Od();let r,i;return jc(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!Ig(r[0].el,t.vnode.el,o))return;r.forEach(Mg),r.forEach(kg);const a=r.filter(Og);sf(),a.forEach(c=>{const l=c.el,u=l.style;yn(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=l._moveCb=d=>{d&&d.target!==l||(!d||/transform$/.test(d.propertyName))&&(l.removeEventListener("transitionend",h),l._moveCb=null,zn(l,o))};l.addEventListener("transitionend",h)})}),()=>{const o=Me(n),a=tf(o);let c=o.tag||Re;r=i,i=e.default?qc(e.default()):[];for(let l=0;l<i.length;l++){const u=i[l];u.key!=null&&ar(u,Hr(u,a,s,t))}if(r)for(let l=0;l<r.length;l++){const u=r[l];ar(u,Hr(u,a,s,t)),rf.set(u,u.el.getBoundingClientRect())}return Te(c,null,i)}}},Ng=Ag;function Mg(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function kg(n){of.set(n,n.el.getBoundingClientRect())}function Og(n){const e=rf.get(n),t=of.get(n),s=e.left-t.left,r=e.top-t.top;if(s||r){const i=n.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",n}}function Ig(n,e,t){const s=n.cloneNode();n._vtc&&n._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),t.split(/\s+/).forEach(o=>o&&s.classList.add(o)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:i}=nf(s);return r.removeChild(s),i}const yu=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ye(e)?t=>er(e,t):e},Rg={deep:!0,created(n,e,t){n._assign=yu(t),Jd(n,"change",()=>{const s=n._modelValue,r=Dg(n),i=n.checked,o=n._assign;if(ye(s)){const a=Jh(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const l=[...s];l.splice(a,1),o(l)}}else if(Wo(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(af(n,i))})},mounted:vu,beforeUpdate(n,e,t){n._assign=yu(t),vu(n,e,t)}};function vu(n,{value:e,oldValue:t},s){n._modelValue=e,ye(e)?n.checked=Jh(e,s.props.value)>-1:Wo(e)?n.checked=e.has(s.props.value):e!==t&&(n.checked=qo(e,af(n,!0)))}function Dg(n){return"_value"in n?n._value:n.value}function af(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const Pg=["ctrl","shift","alt","meta"],$g={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Pg.some(t=>n[`${t}Key`]&&!e.includes(t))},Fg=(n,e)=>(t,...s)=>{for(let r=0;r<e.length;r++){const i=$g[e[r]];if(i&&i(t,e))return}return n(t,...s)},Vg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Lg=(n,e)=>t=>{if(!("key"in t))return;const s=Rs(t.key);if(e.some(r=>r===s||Vg[r]===s))return n(t)},io={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Ir(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),Ir(n,!0),s.enter(n)):s.leave(n,()=>{Ir(n,!1)}):Ir(n,e))},beforeUnmount(n,{value:e}){Ir(n,e)}};function Ir(n,e){n.style.display=e?n._vod:"none"}const Bg=lt({patchProp:Tg},ag);let wu;function qg(){return wu||(wu=W_(Bg))}const cf=(...n)=>{const e=qg().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=jg(s);if(!r)return;const i=e._component;!xe(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function jg(n){return rt(n)?document.querySelector(n):n}const Wg={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},zg=B("path",{fill:"currentColor",d:"M248 144a8 8 0 0 1-16 0a96.2 96.2 0 0 0-96-96a88.1 88.1 0 0 0-88 88a80.1 80.1 0 0 0 80 80a72.1 72.1 0 0 0 72-72a64.1 64.1 0 0 0-64-64a56 56 0 0 0-56 56a48 48 0 0 0 48 48a40 40 0 0 0 40-40a32.1 32.1 0 0 0-32-32a24.1 24.1 0 0 0-24 24a16 16 0 0 0 16 16a8 8 0 0 0 8-8a8 8 0 0 1 0-16a16 16 0 0 1 16 16a24.1 24.1 0 0 1-24 24a32.1 32.1 0 0 1-32-32a40 40 0 0 1 40-40a48 48 0 0 1 48 48a56 56 0 0 1-56 56a64.1 64.1 0 0 1-64-64a72.1 72.1 0 0 1 72-72a80.1 80.1 0 0 1 80 80a88.1 88.1 0 0 1-88 88a96.2 96.2 0 0 1-96-96A104.2 104.2 0 0 1 136 32a112.1 112.1 0 0 1 112 112Z"},null,-1),Ug=[zg];function Hg(n,e){return X(),oe("svg",Wg,Ug)}const Gg={name:"ph-spiral",render:Hg},Yg={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Kg=B("path",{fill:"currentColor",d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"},null,-1),Zg=[Kg];function Xg(n,e){return X(),oe("svg",Yg,Zg)}const Qg={name:"ic-outline-bar-chart",render:Xg},Jg={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},e0=B("path",{fill:"currentColor",d:"M11 2.05v3.02a7 7 0 1 0 5.192 12.536l2.137 2.137A9.966 9.966 0 0 1 12 22C6.477 22 2 17.523 2 12c0-5.185 3.947-9.449 9-9.95zM21.95 13a9.948 9.948 0 0 1-2.207 5.328l-2.137-2.136A6.958 6.958 0 0 0 18.929 13h3.022zM13.002 2.05a10.004 10.004 0 0 1 8.95 8.95H18.93a7.005 7.005 0 0 0-5.928-5.929V2.049z"},null,-1),t0=[e0];function n0(n,e){return X(),oe("svg",Jg,t0)}const s0={name:"ri-donut-chart-fill",render:n0},r0={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},i0=B("path",{fill:"currentColor",d:"M15 5v10H5v2h10v10h2V17h10v-2H17V5z"},null,-1),o0=[i0];function a0(n,e){return X(),oe("svg",r0,o0)}const c0={name:"la-plus",render:a0},l0={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},u0=B("path",{fill:"currentColor",d:"M6.174 1.184a2 2 0 0 1 3.652 0A2 2 0 0 1 12.99 3.01a2 2 0 0 1 1.826 3.164a2 2 0 0 1 0 3.652a2 2 0 0 1-1.826 3.164a2 2 0 0 1-3.164 1.826a2 2 0 0 1-3.652 0A2 2 0 0 1 3.01 12.99a2 2 0 0 1-1.826-3.164a2 2 0 0 1 0-3.652A2 2 0 0 1 3.01 3.01a2 2 0 0 1 3.164-1.826zM8 1a1 1 0 0 0-.998 1.03l.01.091c.012.077.029.176.054.296c.049.241.122.542.213.887c.182.688.428 1.513.676 2.314L8 5.762l.045-.144c.248-.8.494-1.626.676-2.314c.091-.345.164-.646.213-.887a4.997 4.997 0 0 0 .064-.386L9 2a1 1 0 0 0-1-1zM2 9l.03-.002l.091-.01a4.99 4.99 0 0 0 .296-.054c.241-.049.542-.122.887-.213a60.59 60.59 0 0 0 2.314-.676L5.762 8l-.144-.045a60.59 60.59 0 0 0-2.314-.676a16.705 16.705 0 0 0-.887-.213a4.99 4.99 0 0 0-.386-.064L2 7a1 1 0 1 0 0 2zm7 5l-.002-.03a5.005 5.005 0 0 0-.064-.386a16.398 16.398 0 0 0-.213-.888a60.582 60.582 0 0 0-.676-2.314L8 10.238l-.045.144c-.248.8-.494 1.626-.676 2.314c-.091.345-.164.646-.213.887a4.996 4.996 0 0 0-.064.386L7 14a1 1 0 1 0 2 0zm-5.696-2.134l.025-.017a5.001 5.001 0 0 0 .303-.248c.184-.164.408-.377.661-.629A60.614 60.614 0 0 0 5.96 9.23l.103-.111l-.147.033a60.88 60.88 0 0 0-2.343.572c-.344.093-.64.18-.874.258a5.063 5.063 0 0 0-.367.138l-.027.014a1 1 0 1 0 1 1.732zM4.5 14.062a1 1 0 0 0 1.366-.366l.014-.027c.01-.02.021-.048.036-.084a5.09 5.09 0 0 0 .102-.283c.078-.233.165-.53.258-.874a60.6 60.6 0 0 0 .572-2.343l.033-.147l-.11.102a60.848 60.848 0 0 0-1.743 1.667a17.07 17.07 0 0 0-.629.66a5.06 5.06 0 0 0-.248.304l-.017.025a1 1 0 0 0 .366 1.366zm9.196-8.196a1 1 0 0 0-1-1.732l-.025.017a4.951 4.951 0 0 0-.303.248a16.69 16.69 0 0 0-.661.629A60.72 60.72 0 0 0 10.04 6.77l-.102.111l.147-.033a60.6 60.6 0 0 0 2.342-.572c.345-.093.642-.18.875-.258a4.993 4.993 0 0 0 .367-.138a.53.53 0 0 0 .027-.014zM11.5 1.938a1 1 0 0 0-1.366.366l-.014.027c-.01.02-.021.048-.036.084a5.09 5.09 0 0 0-.102.283c-.078.233-.165.53-.258.875a60.62 60.62 0 0 0-.572 2.342l-.033.147l.11-.102a60.848 60.848 0 0 0 1.743-1.667c.252-.253.465-.477.629-.66a5.001 5.001 0 0 0 .248-.304l.017-.025a1 1 0 0 0-.366-1.366zM14 9a1 1 0 0 0 0-2l-.03.002a4.996 4.996 0 0 0-.386.064c-.242.049-.543.122-.888.213c-.688.182-1.513.428-2.314.676L10.238 8l.144.045c.8.248 1.626.494 2.314.676c.345.091.646.164.887.213a4.996 4.996 0 0 0 .386.064L14 9zM1.938 4.5a1 1 0 0 0 .393 1.38l.084.035c.072.03.166.064.283.103c.233.078.53.165.874.258a60.88 60.88 0 0 0 2.343.572l.147.033l-.103-.111a60.584 60.584 0 0 0-1.666-1.742a16.705 16.705 0 0 0-.66-.629a4.996 4.996 0 0 0-.304-.248l-.025-.017a1 1 0 0 0-1.366.366zm2.196-1.196l.017.025a4.996 4.996 0 0 0 .248.303c.164.184.377.408.629.661A60.597 60.597 0 0 0 6.77 5.96l.111.102l-.033-.147a60.602 60.602 0 0 0-.572-2.342c-.093-.345-.18-.642-.258-.875a5.006 5.006 0 0 0-.138-.367l-.014-.027a1 1 0 1 0-1.732 1zm9.928 8.196a1 1 0 0 0-.366-1.366l-.027-.014a5 5 0 0 0-.367-.138c-.233-.078-.53-.165-.875-.258a60.619 60.619 0 0 0-2.342-.572l-.147-.033l.102.111a60.73 60.73 0 0 0 1.667 1.742c.253.252.477.465.66.629a4.946 4.946 0 0 0 .304.248l.025.017a1 1 0 0 0 1.366-.366zm-3.928 2.196a1 1 0 0 0 1.732-1l-.017-.025a5.065 5.065 0 0 0-.248-.303a16.705 16.705 0 0 0-.629-.661A60.462 60.462 0 0 0 9.23 10.04l-.111-.102l.033.147a60.6 60.6 0 0 0 .572 2.342c.093.345.18.642.258.875a4.985 4.985 0 0 0 .138.367a.575.575 0 0 0 .014.027zM8 9.5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3z"},null,-1),h0=[u0];function d0(n,e){return X(),oe("svg",l0,h0)}const f0={name:"bi-flower1",render:d0},p0={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},m0=B("path",{fill:"currentColor",d:"M12 4C6.486 4 2 8.486 2 14a9.89 9.89 0 0 0 1.051 4.445c.17.34.516.555.895.555h16.107c.379 0 .726-.215.896-.555A9.89 9.89 0 0 0 22 14c0-5.514-4.486-10-10-10zm7.41 13H4.59A7.875 7.875 0 0 1 4 14c0-4.411 3.589-8 8-8s8 3.589 8 8a7.875 7.875 0 0 1-.59 3z"},null,-1),_0=B("path",{fill:"currentColor",d:"M10.939 12.939a1.53 1.53 0 0 0 0 2.561a1.53 1.53 0 0 0 2.121-.44l3.962-6.038a.034.034 0 0 0 0-.035a.033.033 0 0 0-.045-.01l-6.038 3.962z"},null,-1),g0=[m0,_0];function y0(n,e){return X(),oe("svg",p0,g0)}const v0={name:"bx-tachometer",render:y0},w0={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},b0=B("path",{fill:"currentColor",d:"M237.7 18.3a8.1 8.1 0 0 0-11.4 0L176 68.7l-5.4-5.4a31.9 31.9 0 0 0-45.2 0L100 88.7l-2.3-2.4a8.1 8.1 0 0 0-11.4 11.4l2.4 2.3l-25.4 25.4a31.9 31.9 0 0 0 0 45.2l5.4 5.4l-50.4 50.3a8.1 8.1 0 0 0 0 11.4a8.2 8.2 0 0 0 11.4 0L80 187.3l5.4 5.4a32.1 32.1 0 0 0 45.2 0l25.4-25.4l2.3 2.4a8.2 8.2 0 0 0 11.4 0a8.1 8.1 0 0 0 0-11.4l-2.4-2.3l25.4-25.4a31.9 31.9 0 0 0 0-45.2l-5.4-5.4l50.4-50.3a8.1 8.1 0 0 0 0-11.4ZM119.3 181.4a16.1 16.1 0 0 1-22.6 0l-22.1-22.1a15.9 15.9 0 0 1 0-22.6l25.4-25.4l44.7 44.7Zm36.7-36.7L111.3 100l25.4-25.4a15.9 15.9 0 0 1 22.6 0l22.1 22.1a16.1 16.1 0 0 1 0 22.6Zm75.6 17.8a7.9 7.9 0 0 1-7.6 5.5a7.3 7.3 0 0 1-2.5-.4l-24-8a8 8 0 1 1 5-15.2l24 8a8 8 0 0 1 5.1 10.1Zm-207.2-69a8 8 0 0 1 10.1-5.1l24 8A8 8 0 0 1 56 112a7.3 7.3 0 0 1-2.5-.4l-24-8a8 8 0 0 1-5.1-10.1Zm64-59a8 8 0 0 1 15.2-5l8 24a8 8 0 0 1-5.1 10.1a7.3 7.3 0 0 1-2.5.4a7.9 7.9 0 0 1-7.6-5.5Zm79.2 187a8 8 0 0 1-5.1 10.1a7.3 7.3 0 0 1-2.5.4a7.9 7.9 0 0 1-7.6-5.5l-8-24a8 8 0 1 1 15.2-5Z"},null,-1),T0=[b0];function x0(n,e){return X(),oe("svg",w0,T0)}const S0={name:"ph-plugs-connected",render:x0},E0={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},C0=B("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1),A0=[C0];function N0(n,e){return X(),oe("svg",E0,A0)}const M0={name:"ic-baseline-refresh",render:N0};class Ht{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==1}addListener(e,t,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Ht.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new bu(e,this,t,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,s={}){s.remaining=1,this.addListener(e,t,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?!!(this.eventMap[Ht.ANY_EVENT]&&this.eventMap[Ht.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof bu?this.eventMap[e].filter(s=>s===t).length>0:typeof t=="function"?this.eventMap[e].filter(s=>s.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],r=this.eventMap[Ht.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(i=>{if(i.suspended)return;let o=[...t];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(s.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),s}removeListener(e,t,s={}){if(e===void 0)return void(this.eventMap={});if(!this.eventMap[e])return;let r=this.eventMap[e].filter(i=>t&&i.callback!==t||s.remaining&&s.remaining!==i.remaining||s.context&&s.context!==i.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((s,r)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),s()},{remaining:1});t.duration!==1/0&&(i=setTimeout(()=>{o.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class bu{constructor(e,t,s,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Ht.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");r.arguments===void 0||Array.isArray(r.arguments)||(r.arguments=[r.arguments]),(r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r)).duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=s,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All properties are static and should be referenced using the class name. For example:
 * `Enumerations.MIDI_CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class U{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class gs{constructor(e,t={}){this.duration=ee.defaults.note.duration,this.attack=ee.defaults.note.attack,this.release=ee.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=ie.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=ie.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=ie.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=ie.getNoteDetails(e);if(ee.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(ee.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(ee.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(ee.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(ee.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(ee.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(ee.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return ie.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=ie.from7bitToFloat(e)}get rawRelease(){return ie.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=ie.from7bitToFloat(e)}get number(){return ie.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return ee.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+12*e+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ie{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");let r=12*(s.octave+1+t);if(r+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[s.name],s.accidental&&(s.accidental.startsWith("b")?r-=s.accidental.length:r+=s.accidental.length),r<0||r>127)throw new RangeError("Invalid octaveOffset value");return r}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const s=t[1].toUpperCase(),r=parseInt(t[3]);let i=t[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:s+(i||"")+r,name:s,octave:r}}static sanitizeChannels(e){let t;if(this.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return t=Array.isArray(e)?e:[e],t.indexOf("all")>-1&&(t=U.MIDI_CHANNEL_NUMBERS),t.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let t=!1;const s=parseFloat(e);return!isNaN(s)&&(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(t=ee.time+s):s>=0&&(t=s),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),t)}catch{return!1}return s}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const s=Math.floor(e/12-1)+t;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+s.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof gs)return e;let s=this.guessNoteNumber(e,t.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new gs(s,t)}static buildNoteArray(e,t={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{s.push(this.buildNote(r,t))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(127*e),0),127)}static fromMsbLsbToFloat(e,t=0){ee.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const s=((e<<7)+t)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){ee.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(16383*e);return{msb:t>>7,lsb:127&t}}static offsetNumber(e,t=0,s=0){if(ee.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,s=parseInt(s)||0}return Math.min(Math.max(e+12*t+s,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(s=>e[s]===t)}static getCcNameByNumber(e){return ie.getPropertyByValue(U.MIDI_CONTROL_CHANGE_MESSAGES,e)}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in U.MIDI_CHANNEL_MODE_MESSAGES)if(U.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===U.MIDI_CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&window.document!==void 0}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class k0 extends Ht{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,s={}){if(ee.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(t=ie.fromFloatTo7Bit(t));const r=ee.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),ie.buildNoteArray(e).forEach(i=>{this.send([(U.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(r),t],{time:ie.toTimestamp(s.time)})}),this}sendControlChange(e,t,s={}){if(typeof e=="string"&&(e=U.MIDI_CONTROL_CHANGE_MESSAGES[e]),Array.isArray(t)||(t=[t]),ee.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if((t=t.map(r=>{const i=Math.min(Math.max(parseInt(r),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i})).length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,i)=>{this.send([(U.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+32*i,t[i]],{time:ie.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2||this.sendControlChange(38,e[1],t),this}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=U.MIDI_REGISTERED_PARAMETERS[e]),ee.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(U.MIDI_REGISTERED_PARAMETERS).forEach(r=>{U.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&U.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=U.MIDI_REGISTERED_PARAMETERS[e]),ee.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(U.MIDI_REGISTERED_PARAMETERS).forEach(r=>{U.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&U.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){if(this.sendNoteOn(e,t),t.duration>0&&isFinite(String(t.duration).trim()||NaN)){let s={time:(ie.toTimestamp(t.time)||ee.time)+t.duration,release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(e,s)}return this}sendNoteOff(e,t={}){if(ee.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawRelease!=null?s=t.rawRelease:isNaN(t.release)||(s=Math.round(127*t.release));const r=ee.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ie.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(i=>{this.send([(U.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(r),i.rawRelease],{time:ie.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(ee.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawAttack!=null?s=t.rawAttack:isNaN(t.attack)||(s=Math.round(127*t.attack));const r=ee.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ie.buildNoteArray(e,{rawAttack:s}).forEach(i=>{this.send([(U.MIDI_CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(r),i.rawAttack],{time:ie.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,s={}){if(typeof e=="string"&&(e=U.MIDI_CHANNEL_MODE_MESSAGES[e]),ee.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(U.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:ie.toTimestamp(s.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(ee.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(U.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*e)],{time:ie.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,ee.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let i=r>>7&127,o=127&r;return this.sendRpnValue("channelcoarsetuning",s,t),this.sendRpnValue("channelfinetuning",[i,o],t),this}sendModulationRange(e,t,s={}){if(ee.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(t==null||Number.isInteger(t)&&t>=0&&t<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],s),this}sendNrpnValue(e,t,s={}){if(t=[].concat(t),ee.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,t={}){if(ee.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let s=0,r=0;if(t.rawValue&&Array.isArray(e))s=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))s=e;else{const i=ie.fromFloatToMsbLsb((e+1)/2);s=i.msb,r=i.lsb}return this.send([(U.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,s],{time:ie.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,s={}){if(ee.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],s),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,ee.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(U.MIDI_CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:ie.toTimestamp(t.time)}),this}sendRpnValue(e,t,s={}){if(Array.isArray(e)||(e=U.MIDI_REGISTERED_PARAMETERS[e]),ee.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,t={}){if(ee.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(ee.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class sc extends Ht{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new k0(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:ee.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},s=0){if(e instanceof lf&&(e=ie.isNode?e.data:e.rawData),e instanceof Uint8Array&&ie.isNode&&(e=Array.from(e)),ee.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(!((r=parseInt(r))>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,ie.toTimestamp(t.time)),this}sendSysex(e,t=[],s={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=U.MIDI_SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=U.MIDI_SYSTEM_MESSAGES.sysexend,this.send(r,{time:s.time})}else{const r=e.concat(t,U.MIDI_SYSTEM_MESSAGES.sysexend);this.send([U.MIDI_SYSTEM_MESSAGES.sysex].concat(r),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():ee.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(ee.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([U.MIDI_SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){var s=(e=Math.floor(e)||0)>>7&127,r=127&e;return this.send([U.MIDI_SYSTEM_MESSAGES.songposition,s,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if(ee.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([U.MIDI_SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([U.MIDI_SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return ee.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,s)}),this}sendControlChange(e,t,s={},r={}){if(ee.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,s)}),this}sendPitchBendRange(e=0,t=0,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,s)}),this}setPitchBendRange(e=0,t=0,s="all",r={}){return ee.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,s)}),this}setRegisteredParameter(e,t=[],s="all",r={}){return ee.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,s)}),this}setModulationRange(e=0,t=0,s="all",r={}){return ee.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},s={}){return ee.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=t,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",s={}){return ee.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=t,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",s={}){return ee.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=t,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,t=0,s={},r={}){if(ee.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(ee.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;(e=t).channels=s,e.channels==="all"&&(e.channels=U.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,s)}),this}setNonRegisteredParameter(e,t=[],s="all",r={}){return ee.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",s={}){return ee.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",s={}){return ee.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},s={}){if(ee.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},s={}){if(ee.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=U.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Tu{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(U.MIDI_SYSTEM_MESSAGES),...Object.keys(U.MIDI_CHANNEL_MESSAGES)],this.channels=U.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),ee.validation&&(e.forEach(s=>{if(!(s instanceof sc))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(s=>{if(!U.MIDI_SYSTEM_MESSAGES.hasOwnProperty(s)&&!U.MIDI_CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(s=>{if(!U.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{(!ee.validation||t instanceof sc)&&t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 * @fires InputChannel#controlchange
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-databuttonincrement
 * @fires InputChannel#event:nrpn-databuttondecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-databuttonincrement
 * @fires InputChannel#event:rpn-databuttondecrement
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class O0 extends Ht{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const s=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[s]=!1,t.type="noteoff",t.note=new gs(ie.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+ee.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=ie.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[s]=!0,t.note=new gs(ie.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+ee.octaveOffset),{rawAttack:r}),t.value=ie.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new gs(ie.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+ee.octaveOffset)),t.value=ie.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=s;else if(t.type==="controlchange"){t.controller={number:s,name:ie.getCcNameByNumber(s)},t.subtype=t.controller.name||"controller"+s,t.value=ie.from7bitToFloat(r),t.rawValue=r;const i=Object.assign({},t);i.type=`${t.type}-controller${s}`,delete i.subtype,this.emit(i.type,i),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=s,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=ie.from7bitToFloat(s),t.rawValue=s):t.type==="pitchbend"?(t.value=((r<<7)+s-8192)/8192,t.rawValue=(r<<7)+s):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],s=e.message.dataBytes[1],r=U.MIDI_CONTROL_CHANGE_MESSAGES;t===r.nonregisteredparameterfine||t===r.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],t===r.nonregisteredparameterfine?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):t===r.nonregisteredparametercoarse||t===r.registeredparametercoarse?t===r.nonregisteredparametercoarse?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):t!==r.dataentrycoarse&&t!==r.dataentryfine&&t!==r.databuttonincrement&&t!==r.databuttondecrement||(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===U.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||e===U.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||e===U.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||e===U.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||e===U.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||e===U.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||e===U.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||e===U.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(e,t,s,r){e=e==="nrpn"?"nrpn":"rpn";const i={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:s,value:ie.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};i.parameter=e==="rpn"?Object.keys(U.MIDI_REGISTERED_PARAMETERS).find(a=>U.MIDI_REGISTERED_PARAMETERS[a][0]===t&&U.MIDI_REGISTERED_PARAMETERS[a][1]===s):(t<<7)+s;const o=ie.getPropertyByValue(U.MIDI_CONTROL_CHANGE_MESSAGES,r.message.dataBytes[0]);i.type=`${e}-${o}`,this.emit(i.type,i),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return ee.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),ie.getChannelModeByNumber(e)}getCcNameByNumber(e){if(ee.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw new RangeError("Invalid control change number.");return ie.getCcNameByNumber(e)}getNoteState(e){e instanceof gs&&(e=e.identifier);const t=ie.guessNoteNumber(e,ee.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class lf{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=ie.getPropertyByValue(U.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=ie.getPropertyByValue(U.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===U.MIDI_SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class I0 extends Ht{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new O0(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:ee.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new lf(e.data),s={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",s),t.isSystemMessage?this._parseEvent(s):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(s),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){ee.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,s={}){if(ee.validation&&typeof s=="function"){let r=t!=null?[].concat(t):void 0;t=s,s={channels:r}}if(U.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS);let r=[];return ie.sanitizeChannels(s.channels).forEach(i=>{r.push(this.channels[i].addListener(e,t,s))}),r}return super.addListener(e,t,s)}addOneTimeListener(e,t,s={}){return s.remaining=1,this.addListener(e,t,s)}on(e,t,s,r){return this.addListener(e,t,s,r)}hasListener(e,t,s={}){if(ee.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}return U.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS),ie.sanitizeChannels(s.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,s={}){if(ee.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}if(s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS),e==null)return ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();U.CHANNEL_EVENTS.includes(e)?ie.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].removeListener(e,t,s)}):super.removeListener(e,t,s)}addForwarder(e,t={}){let s;return s=e instanceof Tu?e:new Tu(e,t),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return ee.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */const ee=new class extends Ht{constructor(){super(),this.defaults={note:{attack:ie.from7bitToFloat(64),release:ie.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(n={},e=!1){if(ie.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=n.validation!==!1,this.validation&&(typeof n=="function"&&(n={callback:n,sysex:e}),e&&(n.sysex=!0)),this.enabled)return typeof n.callback=="function"&&n.callback(),Promise.resolve();const t={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{typeof n.requestMIDIAccessFunction=="function"?this.interface=await n.requestMIDIAccessFunction({sysex:n.sysex,software:n.software}):this.interface=await navigator.requestMIDIAccess({sysex:n.sysex,software:n.software})}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}return this.emit("enabled",r),typeof n.callback=="function"&&n.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let n={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",n),this.removeListener()})}getInputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(this._disconnectedInputs[t].id===n.toString())return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(this.inputs[t].id===n.toString())return this.inputs[t]}getInputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(~this._disconnectedInputs[t].name.indexOf(n))return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(n))return this.inputs[t]}getOutputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(~this._disconnectedOutputs[t].name.indexOf(n))return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(n))return this.outputs[t]}getOutputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(this._disconnectedOutputs[t].id===n.toString())return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(this.outputs[t].id===n.toString())return this.outputs[t]}noteNameToNumber(n){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),ie.toNoteNumber(n,this.octaveOffset)}getOctave(n){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),n=parseInt(n)),!isNaN(n)&&n>=0&&n<=127&&ie.getNoteDetails(ie.offsetNumber(n,this.octaveOffset)).octave}sanitizeChannels(n){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),ie.sanitizeChannels(n)}toMIDIChannels(n){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),ie.sanitizeChannels(n)}guessNoteNumber(n){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),ie.guessNoteNumber(n,this.octaveOffset)}getValidNoteArray(n,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),ie.buildNoteArray(n,e)}convertToTimestamp(n){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),ie.toTimestamp(n)}async _destroyInputsAndOutputs(){let n=[];return this.inputs.forEach(e=>n.push(e.destroy())),this.outputs.forEach(e=>n.push(e.destroy())),Promise.all(n).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(n){this._updateInputsAndOutputs();let e={timestamp:n.timeStamp,type:n.port.state,target:this};if(n.port.state==="connected"&&n.port.connection==="open"){n.port.type==="output"?e.port=this.getOutputById(n.port.id):n.port.type==="input"&&(e.port=this.getInputById(n.port.id)),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}else if(n.port.state==="disconnected"&&n.port.connection==="pending"){n.port.type==="input"?e.port=this.getInputById(n.port.id,{disconnected:!0}):n.port.type==="output"&&(e.port=this.getOutputById(n.port.id,{disconnected:!0})),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){const t=this._inputs[e];Array.from(this.interface.inputs.values()).find(s=>s===t._midiInput)||(this._disconnectedInputs.push(t),this._inputs.splice(e,1))}let n=[];return this.interface.inputs.forEach(e=>{if(!this._inputs.find(t=>t._midiInput===e)){let t=this._disconnectedInputs.find(s=>s._midiInput===e);t||(t=new I0(e)),this._inputs.push(t),n.push(t.open())}}),Promise.all(n)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){const t=this._outputs[e];Array.from(this.interface.outputs.values()).find(s=>s===t._midiOutput)||(this._disconnectedOutputs.push(t),this._outputs.splice(e,1))}let n=[];return this.interface.outputs.forEach(e=>{if(!this._outputs.find(t=>t._midiOutput===e)){let t=this._disconnectedOutputs.find(s=>s._midiOutput===e);t||(t=new sc(e)),this._outputs.push(t),n.push(t.open())}}),Promise.all(n)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),ie.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),ie.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.21"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),U.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),U.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),U.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),U.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};ee.constructor=null;var xu;const wi=typeof window<"u",R0=n=>typeof n=="function",D0=n=>typeof n=="string",Su=(n,e,t)=>Math.min(t,Math.max(e,n)),Da=()=>{};wi&&((xu=window==null?void 0:window.navigator)==null?void 0:xu.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ks(n){return typeof n=="function"?n():v(n)}function P0(n,e){function t(...s){n(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})}return t}const uf=n=>n();function $0(n=uf){const e=Oe(!0);function t(){e.value=!1}function s(){e.value=!0}return{isActive:e,pause:t,resume:s,eventFilter:(...i)=>{e.value&&n(...i)}}}function F0(n){return n}function bi(n){return Em()?(Cm(n),!0):!1}function V0(n,e=!0){vi()?Pd(n):e?n():Sr(n)}function Zc(n,e=!0){vi()?Ds(n):e?n():Sr(n)}var Eu=Object.getOwnPropertySymbols,L0=Object.prototype.hasOwnProperty,B0=Object.prototype.propertyIsEnumerable,q0=(n,e)=>{var t={};for(var s in n)L0.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Eu)for(var s of Eu(n))e.indexOf(s)<0&&B0.call(n,s)&&(t[s]=n[s]);return t};function j0(n,e,t={}){const s=t,{eventFilter:r=uf}=s,i=q0(s,["eventFilter"]);return dt(n,P0(r,e),i)}var W0=Object.defineProperty,z0=Object.defineProperties,U0=Object.getOwnPropertyDescriptors,oo=Object.getOwnPropertySymbols,hf=Object.prototype.hasOwnProperty,df=Object.prototype.propertyIsEnumerable,Cu=(n,e,t)=>e in n?W0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H0=(n,e)=>{for(var t in e||(e={}))hf.call(e,t)&&Cu(n,t,e[t]);if(oo)for(var t of oo(e))df.call(e,t)&&Cu(n,t,e[t]);return n},G0=(n,e)=>z0(n,U0(e)),Y0=(n,e)=>{var t={};for(var s in n)hf.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&oo)for(var s of oo(n))e.indexOf(s)<0&&df.call(n,s)&&(t[s]=n[s]);return t};function K0(n,e,t={}){const s=t,{eventFilter:r}=s,i=Y0(s,["eventFilter"]),{eventFilter:o,pause:a,resume:c,isActive:l}=$0(r);return{stop:j0(n,e,G0(H0({},i),{eventFilter:o})),pause:a,resume:c,isActive:l}}function bn(n){var e;const t=Ks(n);return(e=t==null?void 0:t.$el)!=null?e:t}const ln=wi?window:void 0,Z0=wi?window.document:void 0;wi&&window.navigator;wi&&window.location;function Tn(...n){let e,t,s,r;if(D0(n[0])?([t,s,r]=n,e=ln):[e,t,s,r]=n,!e)return Da;let i=Da;const o=dt(()=>bn(e),c=>{i(),c&&(c.addEventListener(t,s,r),i=()=>{c.removeEventListener(t,s,r),i=Da})},{immediate:!0,flush:"post"}),a=()=>{o(),i()};return bi(a),a}function X0(n,e,t={}){const{window:s=ln,ignore:r,capture:i=!0,detectIframe:o=!1}=t;if(!s)return;const a=Oe(!0);let c;const l=d=>{s.clearTimeout(c);const f=bn(n),p=d.composedPath();!f||f===d.target||p.includes(f)||!a.value||r&&r.length>0&&r.some(m=>{const _=bn(m);return _&&(d.target===_||p.includes(_))})||e(d)},u=[Tn(s,"click",l,{passive:!0,capture:i}),Tn(s,"pointerdown",d=>{const f=bn(n);a.value=!!f&&!d.composedPath().includes(f)},{passive:!0}),Tn(s,"pointerup",d=>{if(d.button===0){const f=d.composedPath();d.composedPath=()=>f,c=s.setTimeout(()=>l(d),50)}},{passive:!0}),o&&Tn(s,"blur",d=>{var f;const p=bn(n);((f=document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(p!=null&&p.contains(document.activeElement))&&e(d)})].filter(Boolean);return()=>u.forEach(d=>d())}var Q0=Object.defineProperty,J0=Object.defineProperties,e1=Object.getOwnPropertyDescriptors,Au=Object.getOwnPropertySymbols,t1=Object.prototype.hasOwnProperty,n1=Object.prototype.propertyIsEnumerable,Nu=(n,e,t)=>e in n?Q0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,s1=(n,e)=>{for(var t in e||(e={}))t1.call(e,t)&&Nu(n,t,e[t]);if(Au)for(var t of Au(e))n1.call(e,t)&&Nu(n,t,e[t]);return n},r1=(n,e)=>J0(n,e1(e));const i1=n=>typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):n?()=>!0:()=>!1;function Xc(n,e,t={}){const{target:s=ln,eventName:r="keydown",passive:i=!1}=t,o=i1(n);return Tn(s,r,c=>{o(c)&&e(c)},i)}function Yi(n,e,t={}){return Xc(n,e,r1(s1({},t),{eventName:"keydown"}))}function Qc(n,e=!1){const t=Oe(),s=()=>t.value=Boolean(n());return s(),Zc(s,e),t}function o1(n,e={}){const{window:t=ln}=e,s=Qc(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let r;const i=Oe(!1),o=()=>{!s.value||(r||(r=t.matchMedia(n)),i.value=r.matches)};return V0(()=>{o(),r&&("addEventListener"in r?r.addEventListener("change",o):r.addListener(o),bi(()=>{"removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o)}))}),i}const rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ic="__vueuse_ssr_handlers__";rc[ic]=rc[ic]||{};const a1=rc[ic];function ff(n,e){return a1[n]||e}function c1(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"||Array.isArray(n)?"object":Number.isNaN(n)?"any":"number"}var l1=Object.defineProperty,Mu=Object.getOwnPropertySymbols,u1=Object.prototype.hasOwnProperty,h1=Object.prototype.propertyIsEnumerable,ku=(n,e,t)=>e in n?l1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ou=(n,e)=>{for(var t in e||(e={}))u1.call(e,t)&&ku(n,t,e[t]);if(Mu)for(var t of Mu(e))h1.call(e,t)&&ku(n,t,e[t]);return n};const d1={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}};function Tt(n,e,t,s={}){var r;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:h=ln,eventFilter:d,onError:f=A=>{console.error(A)}}=s,p=(u?wd:Oe)(e);if(!t)try{t=ff("getDefaultStorage",()=>{var A;return(A=ln)==null?void 0:A.localStorage})()}catch(A){f(A)}if(!t)return p;const m=Ks(e),_=c1(m),g=(r=s.serializer)!=null?r:d1[_],{pause:y,resume:x}=K0(p,()=>C(p.value),{flush:i,deep:o,eventFilter:d});return h&&a&&Tn(h,"storage",O),O(),p;function C(A){try{A==null?t.removeItem(n):t.setItem(n,g.write(A))}catch(E){f(E)}}function w(A){if(!(A&&A.key!==n)){y();try{const E=A?A.newValue:t.getItem(n);if(E==null)return c&&m!==null&&t.setItem(n,g.write(m)),m;if(!A&&l){const F=g.read(E);return R0(l)?l(F,m):_==="object"&&!Array.isArray(F)?Ou(Ou({},m),F):F}else return typeof E!="string"?E:g.read(E)}catch(E){f(E)}finally{x()}}}function O(A){A&&A.key!==n||(p.value=w(A))}}function pf(n){return o1("(prefers-color-scheme: dark)",n)}var f1=Object.defineProperty,Iu=Object.getOwnPropertySymbols,p1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,Ru=(n,e,t)=>e in n?f1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_1=(n,e)=>{for(var t in e||(e={}))p1.call(e,t)&&Ru(n,t,e[t]);if(Iu)for(var t of Iu(e))m1.call(e,t)&&Ru(n,t,e[t]);return n};function g1(n={}){const{selector:e="html",attribute:t="class",initialValue:s="auto",window:r=ln,storage:i,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:c,emitAuto:l}=n,u=_1({auto:"",light:"light",dark:"dark"},n.modes||{}),h=pf({window:r}),d=be(()=>h.value?"dark":"light"),f=c||(o==null?Oe(s):Tt(o,s,i,{window:r,listenToStorageChanges:a})),p=be({get(){return f.value==="auto"&&!l?d.value:f.value},set(y){f.value=y}}),m=ff("updateHTMLAttrs",(y,x,C)=>{const w=r==null?void 0:r.document.querySelector(y);if(!!w)if(x==="class"){const O=C.split(/\s/g);Object.values(u).flatMap(A=>(A||"").split(/\s/g)).filter(Boolean).forEach(A=>{O.includes(A)?w.classList.add(A):w.classList.remove(A)})}else w.setAttribute(x,C)});function _(y){var x;const C=y==="auto"?d.value:y;m(e,t,(x=u[C])!=null?x:C)}function g(y){n.onChanged?n.onChanged(y,_):_(y)}return dt(p,g,{flush:"post",immediate:!0}),l&&dt(d,()=>g(p.value),{flush:"post"}),Zc(()=>g(p.value)),p}var y1=Object.defineProperty,v1=Object.defineProperties,w1=Object.getOwnPropertyDescriptors,Du=Object.getOwnPropertySymbols,b1=Object.prototype.hasOwnProperty,T1=Object.prototype.propertyIsEnumerable,Pu=(n,e,t)=>e in n?y1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x1=(n,e)=>{for(var t in e||(e={}))b1.call(e,t)&&Pu(n,t,e[t]);if(Du)for(var t of Du(e))T1.call(e,t)&&Pu(n,t,e[t]);return n},S1=(n,e)=>v1(n,w1(e));function E1(n={}){const{valueDark:e="dark",valueLight:t="",window:s=ln}=n,r=g1(S1(x1({},n),{onChanged:(a,c)=>{var l;n.onChanged?(l=n.onChanged)==null||l.call(n,a==="dark"):c(a)},modes:{dark:e,light:t}})),i=pf({window:s});return be({get(){return r.value==="dark"},set(a){a===i.value?r.value="auto":r.value=a?"dark":"light"}})}var $u=Object.getOwnPropertySymbols,C1=Object.prototype.hasOwnProperty,A1=Object.prototype.propertyIsEnumerable,N1=(n,e)=>{var t={};for(var s in n)C1.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&$u)for(var s of $u(n))e.indexOf(s)<0&&A1.call(n,s)&&(t[s]=n[s]);return t};function M1(n,e,t={}){const s=t,{window:r=ln}=s,i=N1(s,["window"]);let o;const a=Qc(()=>r&&"ResizeObserver"in r),c=()=>{o&&(o.disconnect(),o=void 0)},l=dt(()=>bn(n),h=>{c(),a.value&&r&&h&&(o=new ResizeObserver(e),o.observe(h,i))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return bi(u),{isSupported:a,stop:u}}function k1(n,e={}){const{reset:t=!0,windowResize:s=!0,windowScroll:r=!0,immediate:i=!0}=e,o=Oe(0),a=Oe(0),c=Oe(0),l=Oe(0),u=Oe(0),h=Oe(0),d=Oe(0),f=Oe(0);function p(){const m=bn(n);if(!m){t&&(o.value=0,a.value=0,c.value=0,l.value=0,u.value=0,h.value=0,d.value=0,f.value=0);return}const _=m.getBoundingClientRect();o.value=_.height,a.value=_.bottom,c.value=_.left,l.value=_.right,u.value=_.top,h.value=_.width,d.value=_.x,f.value=_.y}return M1(n,p),dt(()=>bn(n),m=>!m&&p()),r&&Tn("scroll",p,{passive:!0}),s&&Tn("resize",p,{passive:!0}),Zc(()=>{i&&p()}),{height:o,bottom:a,left:c,right:l,top:u,width:h,x:d,y:f,update:p}}function Jc(n,e={}){const{immediate:t=!0,window:s=ln}=e,r=Oe(!1);let i=null;function o(){!r.value||!s||(n(),i=s.requestAnimationFrame(o))}function a(){!r.value&&s&&(r.value=!0,o())}function c(){r.value=!1,i!=null&&s&&(s.cancelAnimationFrame(i),i=null)}return t&&a(),bi(c),{isActive:r,pause:c,resume:a}}const Fu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];function Vu(n,e={}){const{document:t=Z0,autoExit:s=!1}=e,r=n||(t==null?void 0:t.querySelector("html")),i=Oe(!1);let o=Fu[0];const a=Qc(()=>{if(t){for(const m of Fu)if(m[1]in t)return o=m,!0}else return!1;return!1}),[c,l,u,,h]=o;async function d(){!a.value||(t!=null&&t[u]&&await t[l](),i.value=!1)}async function f(){if(!a.value)return;await d();const m=bn(r);m&&(await m[c](),i.value=!0)}async function p(){i.value?await d():await f()}return t&&Tn(t,h,()=>{i.value=!!(t!=null&&t[u])},!1),s&&bi(d),{isSupported:a,isFullscreen:i,enter:f,exit:d,toggle:p}}var Lu;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Lu||(Lu={}));var O1=Object.defineProperty,Bu=Object.getOwnPropertySymbols,I1=Object.prototype.hasOwnProperty,R1=Object.prototype.propertyIsEnumerable,qu=(n,e,t)=>e in n?O1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D1=(n,e)=>{for(var t in e||(e={}))I1.call(e,t)&&qu(n,t,e[t]);if(Bu)for(var t of Bu(e))R1.call(e,t)&&qu(n,t,e[t]);return n};const P1={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};D1({linear:F0},P1);function oc(n,e,t){const s=Oe(n);return be({get(){return s.value=Su(s.value,Ks(e),Ks(t))},set(r){s.value=Su(r,Ks(e),Ks(t))}})}const mf="14.8.42",ju=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Wu=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),ac=(n,e)=>({startTime:e,type:"setValue",value:n}),_f=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),gf=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),Zs=n=>n.type==="exponentialRampToValue",ao=n=>n.type==="linearRampToValue",Hn=n=>Zs(n)||ao(n),el=n=>n.type==="setValue",wn=n=>n.type==="setValueCurve",co=(n,e,t,s)=>{const r=n[e];return r===void 0?s:Hn(r)||el(r)?r.value:wn(r)?r.values[r.values.length-1]:gf(t,co(n,e-1,r.startTime,s),r)},zu=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:Hn(t)?[t.endTime,t.value]:el(t)?[t.startTime,t.value]:wn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,co(n,e-1,t.startTime,r)],cc=n=>n.type==="cancelAndHold",lc=n=>n.type==="cancelScheduledValues",jn=n=>cc(n)||lc(n)?n.cancelTime:Zs(n)||ao(n)?n.endTime:n.startTime,Uu=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,Hu=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),$1=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},F1=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return $1(s,r)},Li=n=>n.type==="setTarget";class V1{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=jn(e);if(cc(e)||lc(e)){const s=this._automationEvents.findIndex(i=>lc(e)&&wn(i)?i.startTime+i.duration>=t:jn(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),cc(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Hn(r)){if(Li(i))throw new Error("The internal list is malformed.");const o=wn(i)?i.startTime+i.duration:jn(i),a=wn(i)?i.values[i.values.length-1]:i.value,c=Zs(r)?Uu(t,o,a,r):Hu(t,o,a,r),l=Zs(r)?ju(c,t,this._currenTime):Wu(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&Li(i)&&this._automationEvents.push(ac(this.getValue(t),t)),i!==void 0&&wn(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=_f(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>jn(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&wn(r)&&jn(r)+r.duration>t)return!1;const i=Zs(e)?ju(e.value,e.endTime,this._currenTime):ao(e)?Wu(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(wn(e)&&t+e.duration>jn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>jn(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];Li(r)&&s.unshift(ac(co(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>jn(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Li(i)&&(s===void 0||!Hn(s)||s.insertTime>e))return gf(e,co(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&el(i)&&(s===void 0||!Hn(s)))return i.value;if(i!==void 0&&wn(i)&&(s===void 0||!Hn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?F1(e,i):i.values[i.values.length-1];if(i!==void 0&&Hn(i)&&(s===void 0||!Hn(s)))return i.value;if(s!==void 0&&Zs(s)){const[o,a]=zu(this._automationEvents,r,i,s,this._defaultValue);return Uu(e,o,a,s)}if(s!==void 0&&ao(s)){const[o,a]=zu(this._automationEvents,r,i,s,this._defaultValue);return Hu(e,o,a,s)}return this._defaultValue}}const L1=n=>({cancelTime:n,type:"cancelAndHold"}),B1=n=>({cancelTime:n,type:"cancelScheduledValues"}),q1=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),j1=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),W1=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),z1=()=>new DOMException("","AbortError"),U1=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},H1=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},G1=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},lr=new WeakSet,yf=new WeakMap,tl=new WeakMap,vf=new WeakMap,nl=new WeakMap,ia=new WeakMap,wf=new WeakMap,uc=new WeakMap,hc=new WeakMap,dc=new WeakMap,bf={construct(){return bf}},Y1=n=>{try{const e=new Proxy(n,bf);new e}catch{return!1}return!0},Gu=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Yu=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(Gu);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Gu)}return[t.join(";"),s]},Ku=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Zu=n=>{if(!Y1(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},K1=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,m,_={credentials:"omit"})=>{const g=u.get(p);if(g!==void 0&&g.has(m))return Promise.resolve();const y=l.get(p);if(y!==void 0){const w=y.get(m);if(w!==void 0)return w}const x=i(p),C=x.audioWorklet===void 0?r(m).then(([w,O])=>{const[A,E]=Yu(w,O),F=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}
})})(window,'_AWGS')`;return t(F)}).then(()=>{const w=d._AWGS.pop();if(w===void 0)throw new SyntaxError;s(x.currentTime,x.sampleRate,()=>w(class{},void 0,(O,A)=>{if(O.trim()==="")throw e();const E=hc.get(x);if(E!==void 0){if(E.has(O))throw e();Zu(A),Ku(A.parameterDescriptors),E.set(O,A)}else Zu(A),Ku(A.parameterDescriptors),hc.set(x,new Map([[O,A]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(n(h,h))]).then(([[w,O],A])=>{const E=f+1;f=E;const[F,V]=Yu(w,O),W=`${F};((AudioWorkletProcessor,registerProcessor)=>{${V}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`,ne=new Blob([W],{type:"application/javascript; charset=utf-8"}),te=URL.createObjectURL(ne);return x.audioWorklet.addModule(te,_).then(()=>{if(a(x))return x;const re=o(x);return re.audioWorklet.addModule(te,_).then(()=>re)}).then(re=>{if(c===null)throw new SyntaxError;try{new c(re,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(te))});return y===void 0?l.set(p,new Map([[m,C]])):y.set(m,C),C.then(()=>{const w=u.get(p);w===void 0?u.set(p,new Set([m])):w.add(m)}).finally(()=>{const w=l.get(p);w!==void 0&&w.delete(m)}),C}},Zt=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},oa=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Tf=(n,e,t,s)=>{const r=Zt(n,e),i=oa(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Ti=n=>Zt(wf,n),ur=n=>{if(lr.has(n))throw new Error("The AudioNode is already stored.");lr.add(n),Ti(n).forEach(e=>e(!0))},xf=n=>"port"in n,xi=n=>{if(!lr.has(n))throw new Error("The AudioNode is not stored.");lr.delete(n),Ti(n).forEach(e=>e(!1))},fc=(n,e)=>{!xf(n)&&e.every(t=>t.size===0)&&xi(n)},Z1=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,m,_,g,y)=>{const{activeInputs:x,passiveInputs:C}=i(m),{outputs:w}=i(p),O=a(p),A=E=>{const F=c(m),V=c(p);if(E){const k=Tf(C,p,_,g);n(x,p,k,!1),!y&&!h(p)&&t(V,F,_,g),d(m)&&ur(m)}else{const k=s(x,p,_,g);e(C,g,k,!1),!y&&!h(p)&&r(V,F,_,g);const I=o(m);if(I===0)u(m)&&fc(m,x);else{const z=f.get(m);z!==void 0&&clearTimeout(z),f.set(m,setTimeout(()=>{u(m)&&fc(m,x)},I*1e3))}}};return l(w,[m,_,g],E=>E[0]===m&&E[1]===_&&E[2]===g,!0)?(O.add(A),u(p)?n(x,p,[_,g,A],!0):e(C,g,[p,_,A],!0),!0):!1}},X1=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},Q1=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},J1=n=>(e,t)=>{n(e).add(t)},ey={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ty=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...ey,...c},h=s(l,u),d=i(l)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},vt=(n,e)=>n.context===e,ny=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},lo=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},fn=()=>new DOMException("","IndexSizeError"),sl=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?fn():s}})(n.getChannelData)},sy={numberOfChannels:1},ry=(n,e,t,s,r,i,o,a)=>{let c=null;return class Sf{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...sy,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(o(p),sl(p)):e(lo,()=>lo(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===Sf.prototype||n.has(u)}}},Et=-34028234663852886e22,bt=-Et,Sn=n=>lr.has(n),iy={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},oy=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...iy,...u},f=r(h,d),p=o(h),m=p?e():null;super(l,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,bt,Et)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){ur(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Sn(this)&&xi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},ay=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=vt(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},cy=n=>"playbackRate"in n,ly=n=>"frequency"in n&&"gain"in n,uy=n=>"offset"in n,hy=n=>!("frequency"in n)&&"gain"in n,dy=n=>"detune"in n&&"frequency"in n,fy=n=>"pan"in n,xt=n=>Zt(yf,n),Si=n=>Zt(vf,n),pc=(n,e)=>{const{activeInputs:t}=xt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||pc(i,[...e,n])}));const s=cy(n)?[n.playbackRate]:xf(n)?Array.from(n.parameters.values()):ly(n)?[n.Q,n.detune,n.frequency,n.gain]:uy(n)?[n.offset]:hy(n)?[n.gain]:dy(n)?[n.detune,n.frequency]:fy(n)?[n.pan]:[];for(const r of s){const i=Si(r);i!==void 0&&i.activeInputs.forEach(([o])=>pc(o,e))}Sn(n)&&xi(n)},Ef=n=>{pc(n.destination,[])},py=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),my=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(h===null)throw s();if(!py(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ef(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},_y=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),p=d?e(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},gy=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},yy=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const w=new Float32Array(1),O=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(l);let E=!1,F=[0,0,-1,0,1,0],V=[0,0,0];const k=()=>{if(E)return;E=!0;const ne=s(l,256,9,0);ne.onaudioprocess=({inputBuffer:te})=>{const re=[i(te,w,0),i(te,w,1),i(te,w,2),i(te,w,3),i(te,w,4),i(te,w,5)];re.some((he,ve)=>he!==F[ve])&&(u.setOrientation(...re),F=re);const le=[i(te,w,6),i(te,w,7),i(te,w,8)];le.some((he,ve)=>he!==V[ve])&&(u.setPosition(...le),V=le)},O.connect(ne)},I=ne=>te=>{te!==F[ne]&&(F[ne]=te,u.setOrientation(...F))},z=ne=>te=>{te!==V[ne]&&(V[ne]=te,u.setPosition(...V))},W=(ne,te,re)=>{const le=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te});le.connect(O,0,ne),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return te}});const he=n({context:c},A,le.offset,bt,Et);return a(he,"value",ve=>()=>ve.call(he),ve=>Q=>{try{ve.call(he,Q)}catch(P){if(P.code!==9)throw P}k(),A&&re(Q)}),he.cancelAndHoldAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.cancelAndHoldAtTime),he.cancelScheduledValues=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.cancelScheduledValues),he.exponentialRampToValueAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.exponentialRampToValueAtTime),he.linearRampToValueAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.linearRampToValueAtTime),he.setTargetAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.setTargetAtTime),he.setValueAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.setValueAtTime),he.setValueCurveAtTime=(ve=>A?()=>{throw r()}:(...Q)=>{const P=ve.apply(he,Q);return k(),P})(he.setValueCurveAtTime),he};return{forwardX:W(0,0,I(0)),forwardY:W(1,0,I(1)),forwardZ:W(2,-1,I(2)),positionX:W(6,0,z(0)),positionY:W(7,0,z(1)),positionZ:W(8,0,z(2)),upX:W(3,0,I(3)),upY:W(4,1,I(4)),upZ:W(5,0,I(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:_,positionZ:g,upX:y,upY:x,upZ:C}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return _},get positionZ(){return g},get upX(){return y},get upY(){return x},get upZ(){return C}}},uo=n=>"context"in n,Ei=n=>uo(n[0]),Ps=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Xu=(n,e,[t,s],r)=>{Ps(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},Qu=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):Ps(i,[t,s],o=>o[0]===t,r)},Er=n=>"inputs"in n,ho=(n,e,t,s)=>{if(Er(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},Cf=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},vy=(n,e,t)=>oa(n,s=>s[0]===e&&s[1]===t),Af=(n,e)=>{if(!Ti(n).delete(e))throw new Error("Missing the expected event listener.")},Nf=(n,e,t)=>{const s=Zt(n,e),r=oa(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},fo=(n,e,t,s)=>{Er(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Ke=n=>Zt(tl,n),Zr=n=>Zt(nl,n),Ns=n=>uc.has(n),Ki=n=>!lr.has(n),Ju=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),Pa=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},po=n=>"context"in n,wy=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=po(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{po(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},by=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Si(e),{outputs:o}=xt(n),a=Ti(n),c=l=>{const u=Ke(n),h=Zr(e);if(l){const d=Nf(i,n,t);Xu(r,n,d,!1),!s&&!Ns(n)&&u.connect(h,t)}else{const d=vy(r,n,t);Qu(i,d,!1),!s&&!Ns(n)&&u.disconnect(h,t)}};return Ps(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),Sn(n)?Xu(r,n,[t,c],!0):Qu(i,[n,t,c],!0),!0):!1},Ty=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=xt(e),o=Cf(r[s],n,t);return o===null?[Tf(i,n,t,s)[2],!1]:[o[2],!0]},xy=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Si(e),i=Cf(s,n,t);return i===null?[Nf(r,n,t)[1],!1]:[i[2],!0]},rl=(n,e,t,s,r)=>{const[i,o]=Ty(n,t,s,r);if(i!==null&&(Af(n,i),o&&!e&&!Ns(n)&&fo(Ke(n),Ke(t),s,r)),Sn(t)){const{activeInputs:a}=xt(t);fc(t,a)}},il=(n,e,t,s)=>{const[r,i]=xy(n,t,s);r!==null&&(Af(n,r),i&&!e&&!Ns(n)&&Ke(n).disconnect(Zr(t),s))},Sy=(n,e)=>{const t=xt(n),s=[];for(const r of t.outputs)Ei(r)?rl(n,e,...r):il(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},Ey=(n,e,t)=>{const s=xt(n),r=[];for(const i of s.outputs)i[1]===t&&(Ei(i)?rl(n,e,...i):il(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},Cy=(n,e,t,s,r)=>{const i=xt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Ei(o)?rl(n,e,...o):il(n,e,...o),i.outputs.delete(o),o[0]))},Ay=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>class extends l{constructor(g,y,x,C){super(x),this._context=g,this._nativeAudioNode=x;const w=u(g);h(w)&&t(Ju,()=>Ju(w,m))!==!0&&wy(x),tl.set(this,x),wf.set(this,new Set),g.state!=="closed"&&y&&ur(this),n(this,C,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(g){this._nativeAudioNode.channelCount=g}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(g){this._nativeAudioNode.channelCountMode=g}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(g){this._nativeAudioNode.channelInterpretation=g}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(g,y=0,x=0){if(y<0||y>=this._nativeAudioNode.numberOfOutputs)throw r();const C=u(this._context),w=p(C);if(d(g)||f(g))throw i();if(uo(g)){const E=Ke(g);try{const V=ho(this._nativeAudioNode,E,y,x),k=Ki(this);(w||k)&&this._nativeAudioNode.disconnect(...V),this.context.state!=="closed"&&!k&&Ki(g)&&ur(g)}catch(V){throw V.code===12?i():V}if(e(this,g,y,x,w)){const V=c([this],g);Pa(V,s(w))}return g}const O=Zr(g);if(O.name==="playbackRate"&&O.maxValue===1024)throw o();try{this._nativeAudioNode.connect(O,y),(w||Ki(this))&&this._nativeAudioNode.disconnect(O,y)}catch(E){throw E.code===12?i():E}if(by(this,g,y,w)){const E=c([this],g);Pa(E,s(w))}}disconnect(g,y,x){let C;const w=u(this._context),O=p(w);if(g===void 0)C=Sy(this,O);else if(typeof g=="number"){if(g<0||g>=this.numberOfOutputs)throw r();C=Ey(this,O,g)}else{if(y!==void 0&&(y<0||y>=this.numberOfOutputs)||uo(g)&&x!==void 0&&(x<0||x>=g.numberOfInputs))throw r();if(C=Cy(this,O,g,y,x),C.length===0)throw i()}for(const A of C){const E=c([this],A);Pa(E,a)}}},Ny=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,_=null,g=null)=>{const y=new V1(m.defaultValue),x=p?s(y):null,C={get defaultValue(){return m.defaultValue},get maxValue(){return _===null?m.maxValue:_},get minValue(){return g===null?m.minValue:g},get value(){return m.value},set value(w){m.value=w,C.setValueAtTime(w,f.context.currentTime)},cancelAndHoldAtTime(w){if(typeof m.cancelAndHoldAtTime=="function")x===null&&y.flush(f.context.currentTime),y.add(r(w)),m.cancelAndHoldAtTime(w);else{const O=Array.from(y).pop();x===null&&y.flush(f.context.currentTime),y.add(r(w));const A=Array.from(y).pop();m.cancelScheduledValues(w),O!==A&&A!==void 0&&(A.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(A.value,A.endTime):A.type==="linearRampToValue"?m.linearRampToValueAtTime(A.value,A.endTime):A.type==="setValue"?m.setValueAtTime(A.value,A.startTime):A.type==="setValueCurve"&&m.setValueCurveAtTime(A.values,A.startTime,A.duration))}return C},cancelScheduledValues(w){return x===null&&y.flush(f.context.currentTime),y.add(i(w)),m.cancelScheduledValues(w),C},exponentialRampToValueAtTime(w,O){if(w===0)throw new RangeError;if(!Number.isFinite(O)||O<0)throw new RangeError;return x===null&&y.flush(f.context.currentTime),y.add(o(w,O)),m.exponentialRampToValueAtTime(w,O),C},linearRampToValueAtTime(w,O){return x===null&&y.flush(f.context.currentTime),y.add(a(w,O)),m.linearRampToValueAtTime(w,O),C},setTargetAtTime(w,O,A){return x===null&&y.flush(f.context.currentTime),y.add(c(w,O,A)),m.setTargetAtTime(w,O,A),C},setValueAtTime(w,O){return x===null&&y.flush(f.context.currentTime),y.add(l(w,O)),m.setValueAtTime(w,O),C},setValueCurveAtTime(w,O,A){const E=w instanceof Float32Array?w:new Float32Array(w);if(h!==null&&h.name==="webkitAudioContext"){const F=O+A,V=f.context.sampleRate,k=Math.ceil(O*V),I=Math.floor(F*V),z=I-k,W=new Float32Array(z);for(let te=0;te<z;te+=1){const re=(E.length-1)/A*((k+te)/V-O),le=Math.floor(re),he=Math.ceil(re);W[te]=le===he?E[le]:(1-(re-le))*E[le]+(1-(he-re))*E[he]}x===null&&y.flush(f.context.currentTime),y.add(u(W,O,A)),m.setValueCurveAtTime(W,O,A);const ne=I/V;ne<F&&d(C,W[W.length-1],ne),d(C,E[E.length-1],F)}else x===null&&y.flush(f.context.currentTime),y.add(u(E,O,A)),m.setValueCurveAtTime(E,O,A);return C}};return t.set(C,m),e.set(C,f),n(C,x),C},My=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Mf{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ky={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Oy=(n,e,t,s,r,i,o,a,c,l,u,h,d,f)=>class extends e{constructor(m,_,g){var y;const x=a(m),C=c(x),w=u({...ky,...g});d(w);const O=hc.get(x),A=O==null?void 0:O.get(_),E=C||x.state!=="closed"?x:(y=o(x))!==null&&y!==void 0?y:x,F=r(E,C?null:m.baseLatency,l,_,A,w),V=C?s(_,w,A):null;super(m,!0,F,V);const k=[];F.parameters.forEach((z,W)=>{const ne=t(this,C,z);k.push([W,ne])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new Mf(k),C&&n(x,this);const{activeInputs:I}=i(this);h(F,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const _=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=_;const g=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=g!==null&&g===_?m:g}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function mo(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const kf=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},_o=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Iy=(n,e)=>{const t=Zt(dc,n),s=Ke(e);return Zt(t,s)},Ry=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((_,g)=>_+g,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=xt(n),d=await Iy(t,n),f=_o(s.numberOfInputs,s.channelCount),p=_o(s.numberOfOutputs,r),m=Array.from(n.parameters.keys()).reduce((_,g)=>({..._,[g]:new Float32Array(128)}),{});for(let _=0;_<a;_+=128){if(s.numberOfInputs>0&&e!==null)for(let g=0;g<s.numberOfInputs;g+=1)for(let y=0;y<s.channelCount;y+=1)mo(e,f[g],y,y,_);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:g},y)=>{mo(e,m,g,c+y,_)});for(let g=0;g<s.numberOfInputs;g+=1)for(let y=0;y<r[g];y+=1)p[g][y].byteLength===0&&(p[g][y]=new Float32Array(128));try{const g=f.map((x,C)=>h.activeInputs[C].size===0?[]:x),y=o(_/t.sampleRate,t.sampleRate,()=>d.process(g,p,m));if(u!==null)for(let x=0,C=0;x<s.numberOfOutputs;x+=1){for(let w=0;w<r[x];w+=1)kf(u,p[x],w,C+w,_);C+=r[x]}if(!y)break}catch(g){n.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return u},Dy=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m)=>(_,g,y)=>{const x=new WeakMap;let C=null;const w=async(O,A)=>{let E=u(O),F=null;const V=vt(E,A),k=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(h===null){const I=k.reduce((te,re)=>te+re,0),z=r(A,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),W=[];for(let te=0;te<O.numberOfOutputs;te+=1)W.push(s(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[te]}));const ne=o(A,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});ne.connect=e.bind(null,W),ne.disconnect=c.bind(null,W),F=[z,W,ne]}else V||(E=new h(A,_));if(x.set(A,F===null?E:F[2]),F!==null){if(C===null){if(y===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=O.channelCount*O.numberOfInputs,le=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length,he=re+le;C=Ry(O,he===0?null:await(async()=>{const Q=new d(he,Math.ceil(O.context.length/128)*128,A.sampleRate),P=[],q=[];for(let M=0;M<g.numberOfInputs;M+=1)P.push(o(Q,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),q.push(r(Q,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const se=await Promise.all(Array.from(O.parameters.values()).map(async M=>{const D=i(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M.value});return await f(Q,M,D.offset),D})),N=s(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+le)});for(let M=0;M<g.numberOfInputs;M+=1){P[M].connect(q[M]);for(let D=0;D<g.channelCount;D+=1)q[M].connect(N,D,M*g.channelCount+D)}for(const[M,D]of se.entries())D.connect(N,0,re+M),D.start(0);return N.connect(Q.destination),await Promise.all(P.map(M=>p(O,Q,M))),m(Q)})(),A,g,k,y,l)}const I=await C,z=t(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[W,ne,te]=F;I!==null&&(z.buffer=I,z.start(0)),z.connect(W);for(let re=0,le=0;re<O.numberOfOutputs;re+=1){const he=ne[re];for(let ve=0;ve<k[re];ve+=1)W.connect(he,le+ve,ve);le+=k[re]}return te}if(V)for(const[I,z]of O.parameters.entries())await n(A,z,E.parameters.get(I));else for(const[I,z]of O.parameters.entries())await f(A,z,E.parameters.get(I));return await p(O,A,E),E};return{render(O,A){a(A,O);const E=x.get(A);return E!==void 0?Promise.resolve(E):w(O,A)}}},Py=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,p,m,_,g,y,x)=>class extends p{constructor(w,O){super(w,O),this._nativeContext=w,this._audioWorklet=n===void 0?void 0:{addModule:(A,E)=>n(this,A,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,O,A){return new t({length:O,numberOfChannels:w,sampleRate:A})}createBufferSource(){return new s(this)}createChannelMerger(w=6){return new i(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new o(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(w,O){return new f(this,{feedback:O,feedforward:w})}createOscillator(){return new m(this)}createPanner(){return new _(this)}createPeriodicWave(w,O,A={disableNormalization:!1}){return new g(this,{...A,imag:O,real:w})}createStereoPanner(){return new y(this)}createWaveShaper(){return new x(this)}decodeAudioData(w,O,A){return l(this._nativeContext,w).then(E=>(typeof O=="function"&&O(E),E),E=>{throw typeof A=="function"&&A(E),E})}},$y={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Fy=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...$y,...u},f=r(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._Q=e(this,p,f.Q,bt,Et),this._detune=e(this,p,f.detune,1200*Math.log2(bt),-1200*Math.log2(bt)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(bt),Et),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},Vy=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Ly=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},By={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},qy=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...By,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},jy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Wy={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},zy=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...Wy,...c}),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},Uy=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Hy=n=>(e,t,s)=>n(t,e,s),Gy=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return po(t)?i.connect(t,0,r):i.connect(t,0)},Yy=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},Ky={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Zy=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...Ky,...l},d=s(u,h),f=i(u),p=f?t():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,bt,Et),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){ur(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Sn(this)&&xi(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},Xy=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=vt(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Qy=n=>e=>(n[0]=e,n[0]),Jy={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ev=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...Jy,...c},h=t(l,u),f=r(l)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},tv=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),Er(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},nv=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},sv=()=>new DOMException("","DataCloneError"),eh=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}finally{r()}})},rv=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=t();return Promise.reject(p)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(eh(d).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{const _=async()=>{try{await eh(d)}catch{}},g=y=>{m(y),_()};try{f.decodeAudioData(d,y=>{typeof y.copyFromChannel!="function"&&(l(y),sl(y)),n.add(y),_().then(()=>p(y))},y=>{g(y===null?s():y)})}catch(y){g(y)}})},iv=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=t(c);for(const m of p)if(Ei(m)){const _=s(m[0]);n(f,_,m[1],m[2])}else{const _=r(m[0]);f.connect(_,m[1])}}}else e.set(c,u-l)},ov={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},av=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...ov,...l},d=s(u,h),f=i(u),p=f?t(h.maxDelayTime):null;super(c,!1,d,p),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},cv=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=vt(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},lv=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),uv=n=>(e,t)=>{n(e).delete(t)},hv=n=>"delayTime"in n,dv=(n,e,t)=>function s(r,i){const o=uo(i)?i:t(n,i);if(hv(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Bi=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},fv=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Bi(n,e,t).disconnect():po(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Bi(n,e,s).disconnect(t,0):Bi(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Bi(n,e,s).disconnect(t,0),pv={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},mv=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...pv,...u},f=s(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},_v=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},gv=()=>new DOMException("","EncodingError"),yv=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),vv=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},wv=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},bv=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},Tv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},xv=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...Tv,...c},h=s(l,u),d=i(l),f=d?t():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,bt,Et)}get gain(){return this._gain}},Sv=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Ev=(n,e)=>t=>e(n,t),Cv=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Av=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},Nv=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Mv=n=>e=>n.get(e),ct=()=>new DOMException("","InvalidStateError"),kv=n=>e=>{const t=n.get(e);if(t===void 0)throw ct();return t},Ov=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},Iv=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},aa=()=>new DOMException("","InvalidAccessError"),Rv=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw aa();return e.call(n,t,s,r)})(n.getFrequencyResponse)},Dv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Pv=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...Dv,...c},d=e(l,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f),Rv(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Of=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=t[0]*l[f];for(let m=1;m<r;m+=1){const _=d-m&c-1;p+=t[m]*i[_],p-=n[m]*o[_]}for(let m=r;m<s;m+=1)p+=t[m]*i[d-m&c-1];for(let m=r;m<e;m+=1)p-=n[m]*o[d-m&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},$v=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),_=d.getChannelData(p);u.fill(0),h.fill(0),Of(r,o,i,a,c,u,h,0,l,m,_)}return d},Fv=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=e(u);const p=vt(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const _=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,_,_.destination);const g=await r(_);return $v(g,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},Vv=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const d of h)if(Ei(d)){const f=s(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},Lv=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},Bv=(n,e)=>t=>n.has(t)||e(t),qv=(n,e)=>t=>n.has(t)||e(t),jv=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},Wv=n=>e=>n!==null&&e instanceof n,zv=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Uv=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,Hv=(n,e)=>t=>n(t)||e(t),Gv=n=>e=>n!==null&&e instanceof n,Yv=n=>n!==null&&n.isSecureContext,Kv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Zv={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Xv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...Zv,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Qv=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Jv=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},ew=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,ia.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Xr=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},tw=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Ze=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},it=(n,e)=>{Ze(n,e,"channelCount"),Ze(n,e,"channelCountMode"),Ze(n,e,"channelInterpretation")},th=n=>typeof n.getFloatTimeDomainData=="function",nw=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},sw=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(it(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Ze(r,s,"fftSize"),Ze(r,s,"maxDecibels"),Ze(r,s,"minDecibels"),Ze(r,s,"smoothingTimeConstant"),n(th,()=>th(r))||nw(r),r},rw=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Qe=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},iw=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw ct();e.call(n,s,r,i),t=!0}})(n.start)},ol=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},al=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},ow=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return it(f,d),Qe(f,d,"playbackRate"),Ze(f,d,"buffer"),Ze(f,d,"loop"),Ze(f,d,"loopEnd"),Ze(f,d,"loopStart"),e(t,()=>t(h))||iw(f),e(s,()=>s(h))||c(f),e(r,()=>r(h))||l(f,h),e(i,()=>i(h))||ol(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||al(f),n(h,f),f},aw=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,cw=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},lw=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,uw=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},hw=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const _=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(_!==null){const g=d.get(m[1]);g!==void 0?m[1]=g:(m[1]=y=>{y.type==="error"?(Object.defineProperties(y,{type:{value:"processorerror"}}),_(y)):_(new ErrorEvent(m[0],{...y}))},d.set(_,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const _=d.get(m[1]);_!==void 0&&(d.delete(m[1]),m[1]=_)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return uw(u),e(i,o,l,u)},If=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),dw=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),fw=async(n,e)=>{const t=await dw(e);return new n(t)},pw=(n,e,t,s)=>{let r=dc.get(n);r===void 0&&(r=new WeakMap,dc.set(n,r));const i=fw(t,s);return r.set(e,i),i},mw=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,_)=>{if(_.numberOfInputs===0&&_.numberOfOutputs===0)throw c();const g=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(g.some(S=>S<1))throw c();if(g.length!==_.numberOfOutputs)throw e();if(_.channelCountMode!=="explicit")throw c();const y=_.channelCount*_.numberOfInputs,x=g.reduce((S,$)=>S+$,0),C=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(y+C>6||x>6)throw c();const w=new MessageChannel,O=[],A=[];for(let S=0;S<_.numberOfInputs;S+=1)O.push(o(f,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),A.push(r(f,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const E=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:S,maxValue:$,minValue:j,name:Y}of m.parameterDescriptors){const Z=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_.parameterData[Y]!==void 0?_.parameterData[Y]:S===void 0?0:S});Object.defineProperties(Z.offset,{defaultValue:{get:()=>S===void 0?0:S},maxValue:{get:()=>$===void 0?bt:$},minValue:{get:()=>j===void 0?Et:j}}),E.push(Z)}const F=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+C)}),V=If(p,f.sampleRate),k=a(f,V,y+C,Math.max(1,x)),I=r(f,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),z=[];for(let S=0;S<_.numberOfOutputs;S+=1)z.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[S]}));for(let S=0;S<_.numberOfInputs;S+=1){O[S].connect(A[S]);for(let $=0;$<_.channelCount;$+=1)A[S].connect(F,$,S*_.channelCount+$)}const W=new Mf(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:S},$)=>{const j=E[$];return j.connect(F,0,y+$),j.start(0),[S,j.offset]}));F.connect(k);let ne=_.channelInterpretation,te=null;const re=_.numberOfOutputs===0?[k]:z,le={get bufferSize(){return V},get channelCount(){return _.channelCount},set channelCount(S){throw t()},get channelCountMode(){return _.channelCountMode},set channelCountMode(S){throw t()},get channelInterpretation(){return ne},set channelInterpretation(S){for(const $ of O)$.channelInterpretation=S;ne=S},get context(){return k.context},get inputs(){return O},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return te},set onprocessorerror(S){typeof te=="function"&&le.removeEventListener("processorerror",te),te=typeof S=="function"?S:null,typeof te=="function"&&le.addEventListener("processorerror",te)},get parameters(){return W},get port(){return w.port2},addEventListener(...S){return k.addEventListener(S[0],S[1],S[2])},connect:n.bind(null,re),disconnect:l.bind(null,re),dispatchEvent(...S){return k.dispatchEvent(S[0])},removeEventListener(...S){return k.removeEventListener(S[0],S[1],S[2])}},he=new Map;w.port1.addEventListener=(S=>(...$)=>{if($[0]==="message"){const j=typeof $[1]=="function"?$[1]:typeof $[1]=="object"&&$[1]!==null&&typeof $[1].handleEvent=="function"?$[1].handleEvent:null;if(j!==null){const Y=he.get($[1]);Y!==void 0?$[1]=Y:($[1]=Z=>{u(f.currentTime,f.sampleRate,()=>j(Z))},he.set(j,$[1]))}}return S.call(w.port1,$[0],$[1],$[2])})(w.port1.addEventListener),w.port1.removeEventListener=(S=>(...$)=>{if($[0]==="message"){const j=he.get($[1]);j!==void 0&&(he.delete($[1]),$[1]=j)}return S.call(w.port1,$[0],$[1],$[2])})(w.port1.removeEventListener);let ve=null;Object.defineProperty(w.port1,"onmessage",{get:()=>ve,set:S=>{typeof ve=="function"&&w.port1.removeEventListener("message",ve),ve=typeof S=="function"?S:null,typeof ve=="function"&&(w.port1.addEventListener("message",ve),w.port1.start())}}),m.prototype.port=w.port1;let Q=null;pw(f,le,m,_).then(S=>Q=S);const q=_o(_.numberOfInputs,_.channelCount),se=_o(_.numberOfOutputs,g),N=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((S,{name:$})=>({...S,[$]:new Float32Array(128)}),{});let M=!0;const D=()=>{_.numberOfOutputs>0&&k.disconnect(I);for(let S=0,$=0;S<_.numberOfOutputs;S+=1){const j=z[S];for(let Y=0;Y<g[S];Y+=1)I.disconnect(j,$+Y,Y);$+=g[S]}},R=new Map;k.onaudioprocess=({inputBuffer:S,outputBuffer:$})=>{if(Q!==null){const j=h(le);for(let Y=0;Y<V;Y+=128){for(let Z=0;Z<_.numberOfInputs;Z+=1)for(let G=0;G<_.channelCount;G+=1)mo(S,q[Z],G,G,Y);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:Z},G)=>{mo(S,N,Z,y+G,Y)});for(let Z=0;Z<_.numberOfInputs;Z+=1)for(let G=0;G<g[Z];G+=1)se[Z][G].byteLength===0&&(se[Z][G]=new Float32Array(128));try{const Z=q.map((J,H)=>{if(j[H].size>0)return R.set(H,V/128),J;const de=R.get(H);return de===void 0?[]:(J.every(me=>me.every(we=>we===0))&&(de===1?R.delete(H):R.set(H,de-1)),J)});M=u(f.currentTime+Y/f.sampleRate,f.sampleRate,()=>Q.process(Z,se,N));for(let J=0,H=0;J<_.numberOfOutputs;J+=1){for(let pe=0;pe<g[J];pe+=1)kf($,se[J],pe,H+pe,Y);H+=g[J]}}catch(Z){M=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:Z.colno,filename:Z.filename,lineno:Z.lineno,message:Z.message}))}if(!M){for(let Z=0;Z<_.numberOfInputs;Z+=1){O[Z].disconnect(A[Z]);for(let G=0;G<_.channelCount;G+=1)A[Y].disconnect(F,G,Z*_.channelCount+G)}if(m.parameterDescriptors!==void 0){const Z=m.parameterDescriptors.length;for(let G=0;G<Z;G+=1){const J=E[G];J.disconnect(F,0,y+G),J.stop()}}F.disconnect(k),k.onaudioprocess=null,ce?D():ae();break}}}};let ce=!1;const fe=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ue=()=>k.connect(fe).connect(f.destination),ae=()=>{k.disconnect(fe),fe.disconnect()},b=()=>{if(M){ae(),_.numberOfOutputs>0&&k.connect(I);for(let S=0,$=0;S<_.numberOfOutputs;S+=1){const j=z[S];for(let Y=0;Y<g[S];Y+=1)I.connect(j,$+Y,Y);$+=g[S]}}ce=!0},T=()=>{M&&(ue(),D()),ce=!1};return ue(),d(le,b,T)},Rf=(n,e)=>{const t=n.createBiquadFilter();return it(t,e),Qe(t,e,"Q"),Qe(t,e,"detune"),Qe(t,e,"frequency"),Qe(t,e,"gain"),Ze(t,e,"type"),t},_w=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),it(r,s),r},gw=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw ct()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw ct()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw ct()}})},Ci=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return it(t,e),gw(t),t},yw=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return it(a,o),Qe(a,o,"offset"),e(s,()=>s(i))||ol(a),e(r,()=>r(i))||al(a),n(i,a),a},Cr=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),vw=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(Cr(h,l),d,f)},ww=(n,e)=>(t,s)=>{const r=t.createConvolver();if(it(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Ze(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},Df=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return it(t,e),Qe(t,e,"delayTime"),t},bw=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(it(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Qe(s,t,"attack"),Qe(s,t,"knee"),Qe(s,t,"ratio"),Qe(s,t,"release"),Qe(s,t,"threshold"),s},Mt=(n,e)=>{const t=n.createGain();return it(t,e),Qe(t,e,"gain"),t},Tw=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return it(r,s),r};function xw(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function Sw(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function nh(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=Sw(t,e),t[0]+=n[s];return t}const Ew=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=If(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,_=Math.min(p,m);if(p===0||p>20)throw s();if(d[0]===0)throw e();if(m===0||m>20)throw s();if(f[0]===0)throw e();if(d[0]!==1){for(let E=0;E<m;E+=1)f[E]/=d[0];for(let E=1;E<p;E+=1)d[E]/=d[0]}const g=t(r,h,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=c;const y=32,x=[],C=[],w=[];for(let E=0;E<o;E+=1){x.push(0);const F=new Float32Array(y),V=new Float32Array(y);F.fill(0),V.fill(0),C.push(F),w.push(V)}g.onaudioprocess=E=>{const F=E.inputBuffer,V=E.outputBuffer,k=F.numberOfChannels;for(let I=0;I<k;I+=1){const z=F.getChannelData(I),W=V.getChannelData(I);x[I]=Of(d,p,f,m,_,C[I],w[I],x[I],y,z,W)}};const O=r.sampleRate/2;return Cr({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(E){g.channelCount=E},get channelCountMode(){return g.channelCountMode},set channelCountMode(E){g.channelCountMode=E},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(E){g.channelInterpretation=E},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(...E){return g.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return g.dispatchEvent(E[0])},getFrequencyResponse(E,F,V){if(E.length!==F.length||F.length!==V.length)throw n();const k=E.length;for(let I=0;I<k;I+=1){const z=-Math.PI*(E[I]/O),W=[Math.cos(z),Math.sin(z)],ne=nh(f,W),te=nh(d,W),re=xw(ne,te);F[I]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),V[I]=Math.atan2(re[1],re[0])}},removeEventListener(...E){return g.removeEventListener(E[0],E[1],E[2])}},g)},Cw=(n,e)=>n.createMediaElementSource(e.mediaElement),Aw=(n,e)=>{const t=n.createMediaStreamDestination();return it(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Nw=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},Mw=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},kw=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,Ow=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return it(c,a),Qe(c,a,"detune"),Qe(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ze(c,a,"type"),e(t,()=>t(o))||ol(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||al(c),n(o,c),c},Iw=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(it(s,t),Qe(s,t,"orientationX"),Qe(s,t,"orientationY"),Qe(s,t,"orientationZ"),Qe(s,t,"positionX"),Qe(s,t,"positionY"),Qe(s,t,"positionZ"),Ze(s,t,"coneInnerAngle"),Ze(s,t,"coneOuterAngle"),Ze(s,t,"coneOuterGain"),Ze(s,t,"distanceModel"),Ze(s,t,"maxDistance"),Ze(s,t,"panningModel"),Ze(s,t,"refDistance"),Ze(s,t,"rolloffFactor"),s)},Rw=(n,e,t,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:_,orientationY:g,orientationZ:y,panningModel:x,positionX:C,positionY:w,positionZ:O,refDistance:A,rolloffFactor:E,...F})=>{const V=u.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw o();it(V,F);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=t(u,{...k,channelInterpretation:"speakers",numberOfInputs:6}),z=s(u,{...F,gain:1}),W=s(u,{...k,gain:1}),ne=s(u,{...k,gain:0}),te=s(u,{...k,gain:0}),re=s(u,{...k,gain:0}),le=s(u,{...k,gain:0}),he=s(u,{...k,gain:0}),ve=r(u,256,6,1),Q=i(u,{...k,curve:new Float32Array([1,1]),oversample:"none"});let P=[_,g,y],q=[C,w,O];const se=new Float32Array(1);ve.onaudioprocess=({inputBuffer:R})=>{const ce=[c(R,se,0),c(R,se,1),c(R,se,2)];ce.some((ue,ae)=>ue!==P[ae])&&(V.setOrientation(...ce),P=ce);const fe=[c(R,se,3),c(R,se,4),c(R,se,5)];fe.some((ue,ae)=>ue!==q[ae])&&(V.setPosition(...fe),q=fe)},Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(he.gain,"defaultValue",{get:()=>0});const N={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(R){if(R>2)throw o();z.channelCount=R,V.channelCount=R},get channelCountMode(){return V.channelCountMode},set channelCountMode(R){if(R==="max")throw o();z.channelCountMode=R,V.channelCountMode=R},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(R){z.channelInterpretation=R,V.channelInterpretation=R},get coneInnerAngle(){return V.coneInnerAngle},set coneInnerAngle(R){V.coneInnerAngle=R},get coneOuterAngle(){return V.coneOuterAngle},set coneOuterAngle(R){V.coneOuterAngle=R},get coneOuterGain(){return V.coneOuterGain},set coneOuterGain(R){if(R<0||R>1)throw e();V.coneOuterGain=R},get context(){return V.context},get distanceModel(){return V.distanceModel},set distanceModel(R){V.distanceModel=R},get inputs(){return[z]},get maxDistance(){return V.maxDistance},set maxDistance(R){if(R<0)throw new RangeError;V.maxDistance=R},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get orientationX(){return W.gain},get orientationY(){return ne.gain},get orientationZ(){return te.gain},get panningModel(){return V.panningModel},set panningModel(R){V.panningModel=R},get positionX(){return re.gain},get positionY(){return le.gain},get positionZ(){return he.gain},get refDistance(){return V.refDistance},set refDistance(R){if(R<0)throw new RangeError;V.refDistance=R},get rolloffFactor(){return V.rolloffFactor},set rolloffFactor(R){if(R<0)throw new RangeError;V.rolloffFactor=R},addEventListener(...R){return z.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return z.dispatchEvent(R[0])},removeEventListener(...R){return z.removeEventListener(R[0],R[1],R[2])}};h!==N.coneInnerAngle&&(N.coneInnerAngle=h),d!==N.coneOuterAngle&&(N.coneOuterAngle=d),f!==N.coneOuterGain&&(N.coneOuterGain=f),p!==N.distanceModel&&(N.distanceModel=p),m!==N.maxDistance&&(N.maxDistance=m),_!==N.orientationX.value&&(N.orientationX.value=_),g!==N.orientationY.value&&(N.orientationY.value=g),y!==N.orientationZ.value&&(N.orientationZ.value=y),x!==N.panningModel&&(N.panningModel=x),C!==N.positionX.value&&(N.positionX.value=C),w!==N.positionY.value&&(N.positionY.value=w),O!==N.positionZ.value&&(N.positionZ.value=O),A!==N.refDistance&&(N.refDistance=A),E!==N.rolloffFactor&&(N.rolloffFactor=E),(P[0]!==1||P[1]!==0||P[2]!==0)&&V.setOrientation(...P),(q[0]!==0||q[1]!==0||q[2]!==0)&&V.setPosition(...q);const M=()=>{z.connect(V),n(z,Q,0,0),Q.connect(W).connect(I,0,0),Q.connect(ne).connect(I,0,1),Q.connect(te).connect(I,0,2),Q.connect(re).connect(I,0,3),Q.connect(le).connect(I,0,4),Q.connect(he).connect(I,0,5),I.connect(ve).connect(u.destination)},D=()=>{z.disconnect(V),a(z,Q,0,0),Q.disconnect(W),W.disconnect(I),Q.disconnect(ne),ne.disconnect(I),Q.disconnect(te),te.disconnect(I),Q.disconnect(re),re.disconnect(I),Q.disconnect(le),le.disconnect(I),Q.disconnect(he),he.disconnect(I),I.disconnect(ve),ve.disconnect(u.destination)};return l(Cr(N,V),M,D)},Dw=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},Ai=(n,e,t,s)=>n.createScriptProcessor(e,t,s),Pw=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return it(i,s),Qe(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},$w=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,_,g)=>{const y=new Float32Array(16385),x=new Float32Array(16385);for(let F=0;F<16385;F+=1){const V=F/16384*c;y[F]=Math.cos(V),x[F]=Math.sin(V)}const C=t(p,{...l,gain:0}),w=s(p,{...u,curve:y}),O=s(p,{...u,curve:a}),A=t(p,{...l,gain:0}),E=s(p,{...u,curve:x});return{connectGraph(){m.connect(C),m.connect(O.inputs===void 0?O:O.inputs[0]),m.connect(A),O.connect(_),_.connect(w.inputs===void 0?w:w.inputs[0]),_.connect(E.inputs===void 0?E:E.inputs[0]),w.connect(C.gain),E.connect(A.gain),C.connect(g,0,0),A.connect(g,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(O.inputs===void 0?O:O.inputs[0]),m.disconnect(A),O.disconnect(_),_.disconnect(w.inputs===void 0?w:w.inputs[0]),_.disconnect(E.inputs===void 0?E:E.inputs[0]),w.disconnect(C.gain),E.disconnect(A.gain),C.disconnect(g,0,0),A.disconnect(g,0,1)}}},d=(p,m,_,g)=>{const y=new Float32Array(16385),x=new Float32Array(16385),C=new Float32Array(16385),w=new Float32Array(16385),O=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>O){const le=(re-O)/(16384-O)*c;y[re]=Math.cos(le),x[re]=Math.sin(le),C[re]=0,w[re]=1}else{const le=re/(16384-O)*c;y[re]=1,x[re]=0,C[re]=Math.cos(le),w[re]=Math.sin(le)}const A=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=t(p,{...l,gain:0}),F=s(p,{...u,curve:y}),V=t(p,{...l,gain:0}),k=s(p,{...u,curve:x}),I=s(p,{...u,curve:a}),z=t(p,{...l,gain:0}),W=s(p,{...u,curve:C}),ne=t(p,{...l,gain:0}),te=s(p,{...u,curve:w});return{connectGraph(){m.connect(A),m.connect(I.inputs===void 0?I:I.inputs[0]),A.connect(E,0),A.connect(V,0),A.connect(z,1),A.connect(ne,1),I.connect(_),_.connect(F.inputs===void 0?F:F.inputs[0]),_.connect(k.inputs===void 0?k:k.inputs[0]),_.connect(W.inputs===void 0?W:W.inputs[0]),_.connect(te.inputs===void 0?te:te.inputs[0]),F.connect(E.gain),k.connect(V.gain),W.connect(z.gain),te.connect(ne.gain),E.connect(g,0,0),z.connect(g,0,0),V.connect(g,0,1),ne.connect(g,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(I.inputs===void 0?I:I.inputs[0]),A.disconnect(E,0),A.disconnect(V,0),A.disconnect(z,1),A.disconnect(ne,1),I.disconnect(_),_.disconnect(F.inputs===void 0?F:F.inputs[0]),_.disconnect(k.inputs===void 0?k:k.inputs[0]),_.disconnect(W.inputs===void 0?W:W.inputs[0]),_.disconnect(te.inputs===void 0?te:te.inputs[0]),F.disconnect(E.gain),k.disconnect(V.gain),W.disconnect(z.gain),te.disconnect(ne.gain),E.disconnect(g,0,0),z.disconnect(g,0,0),V.disconnect(g,0,1),ne.disconnect(g,0,1)}}},f=(p,m,_,g,y)=>{if(m===1)return h(p,_,g,y);if(m===2)return d(p,_,g,y);throw r()};return(p,{channelCount:m,channelCountMode:_,pan:g,...y})=>{if(_==="max")throw r();const x=n(p,{...y,channelCount:1,channelCountMode:_,numberOfInputs:2}),C=t(p,{...y,channelCount:m,channelCountMode:_,gain:1}),w=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:g});let{connectGraph:O,disconnectGraph:A}=f(p,m,C,w,x);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(I){C.channelCount!==I&&(F&&A(),{connectGraph:O,disconnectGraph:A}=f(p,I,C,w,x),F&&O()),C.channelCount=I},get channelCountMode(){return C.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw r();C.channelCountMode=I},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(I){C.channelInterpretation=I},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return w.gain},addEventListener(...I){return C.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return C.dispatchEvent(I[0])},removeEventListener(...I){return C.removeEventListener(I[0],I[1],I[2])}};let F=!1;const V=()=>{O(),F=!0},k=()=>{A(),F=!1};return i(Cr(E,x),V,k)}},Fw=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);it(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Ze(l,{curve:u},"curve"),Ze(l,c,"oversample");let h=null,d=!1;return o(l,"curve",m=>()=>m.call(l),m=>_=>(m.call(l,_),d&&(s(_)&&h===null?h=n(a,l):!s(_)&&h!==null&&(h(),h=null)),_)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},Vw=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();it(l,c),it(u,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1});let m=null,_=!1,g=null;const y={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(w){h.channelCount=w,d.channelCount=w,l.channelCount=w,f.channelCount=w,u.channelCount=w,p.channelCount=w},get channelCountMode(){return l.channelCountMode},set channelCountMode(w){h.channelCountMode=w,d.channelCountMode=w,l.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(w){h.channelInterpretation=w,d.channelInterpretation=w,l.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,p.channelInterpretation=w},get context(){return l.context},get curve(){return g},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)l.curve=w,u.curve=w;else{const O=w.length,A=new Float32Array(O+2-O%2),E=new Float32Array(O+2-O%2);A[0]=w[0],E[0]=-w[O-1];const F=Math.ceil((O+1)/2),V=(O+1)/2-1;for(let k=1;k<F;k+=1){const I=k/F*V,z=Math.floor(I),W=Math.ceil(I);A[k]=z===W?w[z]:(1-(I-z))*w[z]+(1-(W-I))*w[W],E[k]=z===W?-w[O-1-z]:-((1-(I-z))*w[O-1-z])-(1-(W-I))*w[O-1-W]}A[F]=O%2===1?w[F-1]:(w[F-2]+w[F-1])/2,l.curve=A,u.curve=E}g=w,_&&(s(g)&&m===null?m=n(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(w){l.oversample=w,u.oversample=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])}};o!==null&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a);const x=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(p).connect(f),_=!0,s(g)&&(m=n(i,h))},C=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(p),p.disconnect(f),_=!1,m!==null&&(m(),m=null)};return r(Cr(y,f),x,C)},St=()=>new DOMException("","NotSupportedError"),Lw={numberOfChannels:1},Bw=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...Lw,...l},f=s(h,u,d);e(Xr,()=>Xr(f))||f.addEventListener("statechange",(()=>{let p=0;const m=_=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):p+=1)};return m})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ef(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},qw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jw=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...qw,...l},d=t(u,h),f=i(u),p=f?s():null,m=c.sampleRate/2;super(c,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){ur(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Sn(this)&&xi(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Ww=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const f=vt(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},zw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Uw=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...zw,...l},d=t(u,h),f=i(u),p=f?s():null;super(c,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,bt,Et),this._orientationY=e(this,f,d.orientationY,bt,Et),this._orientationZ=e(this,f,d.orientationZ,bt,Et),this._positionX=e(this,f,d.positionX,bt,Et),this._positionY=e(this,f,d.positionY,bt,Et),this._positionZ=e(this,f,d.positionZ,bt,Et),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Hw=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let m=null,_=i(f);const g={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation},y={...g,coneInnerAngle:_.coneInnerAngle,coneOuterAngle:_.coneOuterAngle,coneOuterGain:_.coneOuterGain,distanceModel:_.distanceModel,maxDistance:_.maxDistance,panningModel:_.panningModel,refDistance:_.refDistance,rolloffFactor:_.rolloffFactor},x=vt(_,p);if("bufferSize"in _)m=s(p,{...g,gain:1});else if(!x){const C={...y,orientationX:_.orientationX.value,orientationY:_.orientationY.value,orientationZ:_.orientationZ.value,positionX:_.positionX.value,positionY:_.positionY.value,positionZ:_.positionZ.value};_=r(p,C)}if(u.set(p,m===null?_:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new o(6,f.context.length,p.sampleRate),I=e(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(k.destination),h=(async()=>{const z=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(W,ne)=>{const te=t(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ne===0?1:0});return await a(k,W,te.offset),te}));for(let W=0;W<6;W+=1)z[W].connect(I,0,W),z[W].start(0);return l(k)})()}const C=await h,w=s(p,{...g,gain:1});await c(f,p,w);const O=[];for(let k=0;k<C.numberOfChannels;k+=1)O.push(C.getChannelData(k));let A=[O[0][0],O[1][0],O[2][0]],E=[O[3][0],O[4][0],O[5][0]],F=s(p,{...g,gain:1}),V=r(p,{...y,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:E[0],positionY:E[1],positionZ:E[2]});w.connect(F).connect(V.inputs[0]),V.connect(m);for(let k=128;k<C.length;k+=128){const I=[O[0][k],O[1][k],O[2][k]],z=[O[3][k],O[4][k],O[5][k]];if(I.some((W,ne)=>W!==A[ne])||z.some((W,ne)=>W!==E[ne])){A=I,E=z;const W=k/p.sampleRate;F.gain.setValueAtTime(0,W),F=s(p,{...g,gain:0}),V=r(p,{...y,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:E[0],positionY:E[1],positionZ:E[2]}),F.gain.setValueAtTime(1,W),w.connect(F).connect(V.inputs[0]),V.connect(m)}}return m}return x?(await n(p,f.orientationX,_.orientationX),await n(p,f.orientationY,_.orientationY),await n(p,f.orientationZ,_.orientationZ),await n(p,f.positionX,_.positionX),await n(p,f.positionY,_.positionY),await n(p,f.positionZ,_.positionZ)):(await a(p,f.orientationX,_.orientationX),await a(p,f.orientationY,_.orientationY),await a(p,f.orientationZ,_.orientationZ),await a(p,f.positionX,_.positionX),await a(p,f.positionY,_.positionY),await a(p,f.positionZ,_.positionZ)),Er(_)?await c(f,p,_.inputs[0]):await c(f,p,_),_};return{render(f,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},Gw={disableNormalization:!1},Yw=(n,e,t,s)=>class Pf{constructor(i,o){const a=e(i),c=s({...Gw,...o}),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Pf.prototype||t.has(i)}},Kw=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),Zw=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),f=s.context.destination;!t(l)&&(s!==f||!t(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},Xw=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},Qw=(n,e,t,s)=>r=>n(Xr,()=>Xr(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),Jw=n=>(e,t)=>{n.set(e,t)},eb=n=>(e,t)=>n.set(e,t),tb=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),sl(u)):e(i,()=>i(u))||a(u),n.add(u),u)),nb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},sb=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...nb,...c},h=t(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},rb=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),Er(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ib=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},ob=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},ab=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},cb=()=>new DOMException("","UnknownError"),lb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ub=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...lb,...l},d=t(u,h),p=i(u)?s():null;super(c,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},hb=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),Er(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},db=()=>typeof window>"u"?null:window,fb=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},pb=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},mb=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},_b=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},$f=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Ff=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Ni=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},gb=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),yb=n=>({...n,channelCount:n.numberOfOutputs}),vb=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Vf=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Vf(n,e,t+1e-7)}},wb=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},bb=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Tb=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},cl=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Lf=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},ll=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},xb=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Sb=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},Bf=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Cr(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Ar=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},Eb=U1(Ps),Cb=X1(Ps),Ab=lv(oa),qf=new WeakMap,Nb=Av(qf),Jt=Ly(new Map,new WeakMap),un=db(),jf=sw(Jt,fn),ul=Cv(xt),ft=Zw(xt,ul,Ns),Mb=ny(jf,Ke,ft),Ge=kv(ia),Pn=kw(un),je=Gv(Pn),Wf=new WeakMap,zf=vv(Ar),Mi=aw(un),hl=Wv(Mi),dl=zv(un),Uf=Uv(un),Qr=lw(un),nt=Ay(H1(yf),Z1(Eb,Cb,ho,Ab,fo,xt,Nb,Ti,Ke,Ps,Sn,Ns,Ki),Jt,Vv(uc,fo,xt,Ke,Zr,Sn),fn,aa,St,iv(ho,uc,xt,Ke,Zr,Ge,Sn,je),dv(Wf,xt,Zt),zf,Ge,hl,dl,Uf,je,Qr),kb=ty(nt,Mb,fn,jf,Ge,je),fl=new WeakSet,sh=rw(un),Hf=Qy(new Uint32Array(1)),pl=fb(Hf,fn),ml=pb(Hf),Gf=ry(fl,Jt,St,sh,Pn,ib(sh),pl,ml),ca=Q1(Mt),Yf=Xw(ul,Si,Ns),pn=Hy(Yf),Nr=ow(ca,Jt,wb,bb,Tb,cl,Lf,ll,Sb,mb(Ni),Bf),mn=Kw(Nv(Si),Yf),Ob=ay(pn,Nr,Ke,mn,ft),en=Ny(G1(vf),Wf,nl,My,L1,B1,q1,j1,W1,ac,_f,Mi,Vf),Ib=oy(nt,Ob,en,ct,Nr,Ge,je,Ar),Rb=_y(nt,gy,fn,ct,cw(Mt,Ni),Ge,je,ft),Db=Vy(pn,Rf,Ke,mn,ft),$s=eb(qf),Pb=Fy(nt,en,Db,aa,Rf,Ge,je,$s),ss=tw(Ps,dl),$b=_b(ct,ss),rs=_w(Mi,$b),Fb=jy(rs,Ke,ft),Vb=qy(nt,Fb,rs,Ge,je),Lb=Uy(Ci,Ke,ft),Bb=zy(nt,Lb,Ci,Ge,je,yb),qb=vw(ca,Nr,Mt,ss),Mr=yw(ca,Jt,qb,cl,ll),jb=Xy(pn,Mr,Ke,mn,ft),Wb=Zy(nt,en,jb,Mr,Ge,je,Ar),Kf=ww(St,Ni),zb=tv(Kf,Ke,ft),Ub=ev(nt,zb,Kf,Ge,je,$s),Hb=cv(pn,Df,Ke,mn,ft),Gb=av(nt,en,Hb,Df,Ge,je,$s),Zf=bw(St),Yb=_v(pn,Zf,Ke,mn,ft),Kb=mv(nt,en,Yb,Zf,St,Ge,je,$s),Zb=Sv(pn,Mt,Ke,mn,ft),Xb=xv(nt,en,Zb,Mt,Ge,je),Qb=Ew(aa,ct,Ai,St),la=Qw(Jt,Mt,Ai,ab(Mt,Pn)),Jb=Fv(Nr,Ke,Pn,ft,la),e2=Tw(Qb),t2=Pv(nt,e2,Jb,Ge,je,$s),n2=yy(en,rs,Mr,Ai,St,$f,je,Ni),Xf=new WeakMap,s2=ew(Rb,n2,zf,je,Xf,Ar),Qf=Ow(ca,Jt,cl,Lf,ll,Bf),r2=Ww(pn,Qf,Ke,mn,ft),i2=jw(nt,en,Qf,r2,Ge,je,Ar),Jf=Yy(Nr),o2=Vw(Jf,ct,Mt,Ff,ss),ua=Fw(Jf,ct,o2,Ff,ss,Mi,Ni),a2=Rw(ho,ct,rs,Mt,Ai,ua,St,fo,$f,ss),ep=Iw(a2),c2=Hw(pn,rs,Mr,Mt,ep,Ke,Pn,mn,ft,la),l2=Uw(nt,en,ep,c2,Ge,je,$s),u2=Dw(fn),h2=Yw(u2,Ge,new WeakSet,vb),d2=$w(rs,Ci,Mt,ua,St,ss),tp=Pw(d2,St),f2=rb(pn,tp,Ke,mn,ft),p2=sb(nt,en,tp,f2,Ge,je),m2=hb(ua,Ke,ft),_2=ub(nt,ct,ua,m2,Ge,je,$s),np=Yv(un),_l=wv(un),sp=new WeakMap,g2=Ov(sp,Pn),y2=np?K1(Jt,St,yv(un),_l,bv(z1),Ge,g2,je,Qr,new WeakMap,new WeakMap,ob(Qr,Pn),un):void 0,v2=Hv(hl,je),w2=rv(fl,Jt,sv,gv,new WeakSet,Ge,v2,lo,Xr,pl,ml),rp=Py(y2,kb,Gf,Ib,Pb,Vb,Bb,Wb,Ub,w2,Gb,Kb,Xb,t2,s2,i2,l2,h2,p2,_2),b2=Kv(nt,Cw,Ge,je),T2=Xv(nt,Aw,Ge,je),x2=Qv(nt,Nw,Ge,je),S2=Mw(ct,je),E2=Jv(nt,S2,Ge),C2=my(rp,ct,St,cb,b2,T2,x2,E2,Mi),gl=Iv(Xf),A2=J1(gl),ip=Gy(fn),N2=uv(gl),op=fv(fn),ap=new WeakMap,M2=Ev(ap,Zt),k2=mw(ip,fn,ct,rs,Ci,Mr,Mt,Ai,St,op,_l,M2,ss),O2=hw(ct,k2,Mt,St,ss),I2=Dy(pn,ip,Nr,rs,Ci,Mr,Mt,N2,op,_l,Ke,Qr,Pn,mn,ft,la),R2=Mv(sp),D2=Jw(ap),rh=np?Oy(A2,nt,en,I2,O2,xt,R2,Ge,je,Qr,gb,D2,xb,Ar):void 0,P2=nv(St,Pn),$2=tb(fl,Jt,ul,gl,la,lo,pl,ml),F2=Bw(rp,Jt,ct,P2,$2),V2=Lv(ia,hl),L2=Bv(tl,dl),B2=qv(nl,Uf),q2=jv(ia,je);function Rt(n){return typeof n>"u"}function Ee(n){return!Rt(n)}function j2(n){return typeof n=="function"}function An(n){return typeof n=="number"}function xs(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function W2(n){return typeof n=="boolean"}function Dt(n){return Array.isArray(n)}function Nn(n){return typeof n=="string"}function qi(n){return Nn(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ge(n,e){if(!n)throw new Error(e)}function Xt(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function cp(n){!n.isOffline&&n.state!=="running"&&ha('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let lp=!1,ih=!1;function oh(n){lp=n}function z2(n){Rt(n)&&lp&&!ih&&(ih=!0,ha("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let up=console;function U2(...n){up.log(...n)}function ha(...n){up.warn(...n)}function H2(n){return new C2(n)}function G2(n,e,t){return new F2(n,e,t)}const Ss=typeof self=="object"?self:null,Y2=Ss&&(Ss.hasOwnProperty("AudioContext")||Ss.hasOwnProperty("webkitAudioContext"));function K2(n,e,t){return ge(Ee(rh),"This node only works in a secure context (https or localhost)"),new rh(n,e,t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tn(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function tt(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}class Z2{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ms(n){return B2(n)}function Xn(n){return L2(n)}function Zi(n){return q2(n)}function Gs(n){return V2(n)}function X2(n){return n instanceof Gf}function Q2(n,e){return n==="value"||Ms(e)||Xn(e)||X2(e)}function Es(n,...e){if(!e.length)return n;const t=e.shift();if(xs(n)&&xs(t))for(const s in t)Q2(s,t[s])?n[s]=t[s]:xs(t[s])?(n[s]||Object.assign(n,{[s]:{}}),Es(n[s],t[s])):Object.assign(n,{[s]:t[s]});return Es(n,...e)}function J2(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function K(n,e,t=[],s){const r={},i=Array.from(e);if(xs(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(Es(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&xs(i[0]))Es(r,i[0]);else for(let o=0;o<t.length;o++)Ee(i[o])&&(r[t[o]]=i[o]);return Es(n,r)}function eT(n){return n.constructor.getDefaults()}function rr(n,e){return Rt(n)?e:n}function ys(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class $n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Ss&&this.toString()===Ss.TONE_DEBUG_CLASS)&&U2(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}$n.version=mf;const yl=1e-6;function hr(n,e){return n>e+yl}function mc(n,e){return hr(n,e)||Wt(n,e)}function go(n,e){return n+yl<e}function Wt(n,e){return Math.abs(n-e)<yl}function tT(n,e,t){return Math.max(Math.min(n,t),e)}class Bt extends $n{constructor(){super(),this.name="Timeline",this._timeline=[];const e=K(Bt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ge(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ge(mc(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Wt(this._timeline[t].time,e)){for(let s=t;s>=0&&Wt(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&mc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Wt(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Wt(u[t],e))o=l;else break}return o}else{if(go(a[t],e)&&hr(c[t],e))return o;hr(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Wt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Wt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const hp=[];function da(n){hp.push(n)}function nT(n){hp.forEach(e=>e(n))}const dp=[];function fa(n){dp.push(n)}function sT(n){dp.forEach(e=>e(n))}class ki extends $n{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Rt(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(ki.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class fp extends ki{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Oi extends fp{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Bt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletPromise=null;const s=K(Oi.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=H2({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new Z2(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(nT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ge(Gs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ge(Gs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ge(Gs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ge(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ge(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ge(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ge(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return K2(this.rawContext,e,t)}addAudioWorkletModule(e){return tt(this,void 0,void 0,function*(){ge(Ee(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return tt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Gs(this._context)?this._context.resume():Promise.resolve()}close(){return tt(this,void 0,void 0,function*(){Gs(this._context)&&(yield this._context.close()),this._initialized&&sT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class rT extends fp{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return tt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ke(n,e){Dt(e)?e.forEach(t=>ke(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function vl(n,e){Dt(e)?e.forEach(t=>vl(n,t)):Object.defineProperty(n,e,{writable:!0})}const $e=()=>{};class Fe extends $n{constructor(){super(),this.name="ToneAudioBuffer",this.onload=$e;const e=K(Fe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Nn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:$e,onload:$e,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:It().sampleRate}set(e){return e instanceof Fe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return tt(this,void 0,void 0,function*(){const t=Fe.load(e).then(s=>{this.set(s),this.onload(this)});Fe.downloads.push(t);try{yield t}finally{const s=Fe.downloads.indexOf(t);Fe.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Dt(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=It(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(An(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(An(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){ge(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ge(s<r,"The start time must be less than the end time");const i=r-s,o=It().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Fe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Fe().fromArray(e)}static fromUrl(e){return tt(this,void 0,void 0,function*(){return yield new Fe().load(e)})}static load(e){return tt(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let l=c[0];for(const u of c)if(Fe.supportsType(u)){l=u;break}e=e.replace(t[0],l)}const s=Fe.baseUrl===""||Fe.baseUrl.endsWith("/")?Fe.baseUrl:Fe.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield It().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return tt(this,void 0,void 0,function*(){for(yield Promise.resolve();Fe.downloads.length;)yield Fe.downloads[0]})}}Fe.baseUrl="";Fe.downloads=[];class pa extends Oi{constructor(){super({clockSource:"offline",context:Zi(arguments[0])?arguments[0]:G2(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Zi(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Zi(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return tt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return tt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Fe(t)})}close(){return Promise.resolve()}}const pp=new rT;let vs=pp;function It(){return vs===pp&&Y2&&iT(new Oi),vs}function iT(n,e=!1){e&&vs.dispose(),Gs(n)?vs=new Oi(n):Zi(n)?vs=new pa(n):vs=n}function oT(){return vs.resume()}if(Ss&&!Ss.TONE_SILENCE_LOGGING){const e=` * Tone.js v${mf} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function aT(n){return Math.pow(10,n/20)}function cT(n){return 20*(Math.log(n)/Math.LN10)}function mp(n){return Math.pow(2,n/12)}let ma=440;function lT(){return ma}function uT(n){ma=n}function ws(n){return Math.round(_p(n))}function _p(n){return 69+12*Math.log2(n/ma)}function gp(n){return ma*Math.pow(2,(n-69)/12)}class wl extends $n{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof wl&&this.fromType(this._val),Rt(this._val))return this._noArg();if(Nn(this._val)&&Rt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(xs(this._val)){let e=0;for(const t in this._val)if(Ee(this._val[t])){const s=this._val[t];e+=new this.constructor(this.context,t).valueOf()*s}return e}if(Ee(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Nn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Gt extends wl{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Gt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new Gt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Gt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ws(this.toFrequency())}_now(){return this.context.now()}}class Ct extends Gt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return lT()}static set A4(e){uT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Ct.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=hT[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:Ct.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new Ct(this.context,this.valueOf()*mp(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return ws(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Ct.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),dT[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return gp(e)}static ftom(e){return ws(e)}}const hT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},dT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function yp(n,e){return new Ct(It(),n,e)}class Vr extends Gt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class At extends $n{constructor(){super();const e=K(At.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:It()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return z2(e),new Gt(this.context,e).toSeconds()}toFrequency(e){return new Ct(this.context,e).toFrequency()}toTicks(e){return new Vr(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Rt(e[s])&&delete t[s]}),t}get(){const e=eT(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Ee(s)&&Ee(s.value)&&Ee(s.setValueAtTime)?e[t]=s.value:s instanceof At?e[t]=s._getPartialProperties(e[t]):Dt(s)||An(s)||Nn(s)||W2(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ee(this[t])&&(this[t]&&Ee(this[t].value)&&Ee(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof At?this[t].set(e[t]):this[t]=e[t])}),this}}class bl extends Bt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Xt(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Se extends At{constructor(){super(K(Se.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=K(Se.getDefaults(),arguments,["param","units","convert"]);for(ge(Ee(e.param)&&(Ms(e.param)||e.param instanceof Se),"param must be an AudioParam");!Ms(e.param);)e.param=e.param._param;this._swappable=Ee(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Bt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ee(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(At.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ee(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ee(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ee(this.maxValue)&&Ee(this.minValue)&&Xt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?aT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?cT(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return ge(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return ge(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Wt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return ge(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);ge(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),ge(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ge(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));ge(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&Wt(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ge(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class _e extends At{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ee(this.input)?Ms(this.input)||this.input instanceof Se?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ee(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ee(e)&&(e instanceof _e||Xn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ge(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Mn(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ha("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return vp(this,e,t,s),this}chain(...e){return Jr(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ee(this.input)&&(this.input instanceof _e?this.input.dispose():Xn(this.input)&&this.input.disconnect()),Ee(this.output)&&(this.output instanceof _e?this.output.dispose():Xn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Jr(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof _e?t.connect(s):Xn(t)&&Mn(t,s),s),e)}function Mn(n,e,t=0,s=0){for(ge(Ee(n),"Cannot connect from undefined node"),ge(Ee(e),"Cannot connect to undefined node"),(e instanceof _e||Xn(e))&&ge(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ge(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof _e||e instanceof Se;)Ee(e.input)&&(e=e.input);for(;n instanceof _e;)Ee(n.output)&&(n=n.output);Ms(e)?n.connect(e,t):n.connect(e,t,s)}function vp(n,e,t=0,s=0){if(Ee(e))for(;e instanceof _e;)e=e.input;for(;!Xn(n);)Ee(n.output)&&(n=n.output);Ms(e)?n.disconnect(e,t):Xn(e)?n.disconnect(e,t,s):n.disconnect()}class qe extends _e{constructor(){super(K(qe.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=K(qe.getDefaults(),arguments,["gain","units"]);this.gain=new Se({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ke(this,"gain")}static getDefaults(){return Object.assign(_e.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class dr extends _e{constructor(e){super(e),this.onended=$e,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new qe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(_e.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:$e})}_startGain(e,t=1){ge(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ge(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==$e&&(this.onended(this),this.onended=$e,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ge(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=$e,this}}class yo extends dr{constructor(){super(K(yo.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=K(yo.getDefaults(),arguments,["offset"]);Mn(this._source,this._gainNode),this.offset=new Se({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(dr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Be extends _e{constructor(){super(K(Be.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=K(Be.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new yo({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(_e.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return _a(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function _a(n,e,t,s){(e instanceof Se||Ms(e)||e instanceof Be&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Be&&(e.overridden=!0)),Mn(n,e,t,s)}class vo extends Se{constructor(){super(K(vo.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Bt(1/0),this._multiplier=1;const e=K(vo.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Se.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class wo extends Be{constructor(){super(K(wo.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=K(wo.getDefaults(),arguments,["value"]);this.input=this._param=new vo({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Be.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class bo extends At{constructor(){super(K(bo.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new bl,this._tickOffset=new Bt,this._ticksAtTime=new Bt,this._secondsAtTime=new Bt;const e=K(bo.getDefaults(),arguments,["frequency"]);this.frequency=new wo({context:this.context,units:e.units,value:e.frequency}),ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},At.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Ee(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!=s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Wt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class ei extends At{constructor(){super(K(ei.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=$e,this._lastUpdate=0,this._state=new bl("stopped"),this._boundLoop=this._loop.bind(this);const e=K(ei.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new bo({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(At.getDefaults(),{callback:$e,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){cp(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ki.mixin(ei);class To extends _e{constructor(){super(K(To.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=K(To.getDefaults(),arguments,["delayTime","maxDelay"]),t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Se({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),ke(this,"delayTime")}static getDefaults(){return Object.assign(_e.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Tl extends $n{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=K(Tl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:$e,onload:$e,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ge(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=$e,r=$e){return Nn(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Fe(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new Fe(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ti extends Ct{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ws(super._frequencyToUnits(e))}_ticksToUnits(e){return ws(super._ticksToUnits(e))}_beatsToUnits(e){return ws(super._beatsToUnits(e))}_secondsToUnits(e){return ws(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return gp(this.toMidi())}transpose(e){return new ti(this.context,this.toMidi()+e)}}function ah(n,e){return new ti(It(),n,e)}class Xs extends Vr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class fT extends At{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Bt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}da(n=>{n.draw=new fT({context:n})});fa(n=>{n.draw.dispose()});class pT extends $n{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ge(Ee(e.time),"Events must have a time property"),ge(Ee(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new mT(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class mT{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ks extends _e{constructor(){super(K(ks.getDefaults(),arguments,["volume"])),this.name="Volume";const e=K(ks.getDefaults(),arguments,["volume"]);this.input=this.output=new qe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ke(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(_e.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class xo extends _e{constructor(){super(K(xo.getDefaults(),arguments)),this.name="Destination",this.input=new ks({context:this.context}),this.output=new qe({context:this.context}),this.volume=this.input.volume;const e=K(xo.getDefaults(),arguments);Jr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(_e.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Jr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}da(n=>{n.destination=new xo({context:n})});fa(n=>{n.destination.dispose()});class _T extends $n{constructor(e){super(),this.name="TimelineValue",this._timeline=new Bt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Jn{constructor(e,t){this.id=Jn._eventId++,this._remainderTime=0;const s=Object.assign(Jn.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:$e,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Jn._eventId=0;class xl extends Jn{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(xl.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Jn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return go(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Xs(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){go(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Xs(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);hr(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ni extends At{constructor(){super(K(ni.getDefaults(),arguments)),this.name="Transport",this._loop=new _T(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Bt,this._repeatedEvents=new pT,this._syncedSignals=[],this._swingAmount=0;const e=K(ni.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new ei({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ke(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(At.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Xs(this.context,this._swingTicks*2/3).toSeconds()*r}oh(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),oh(!1)}schedule(e,t){const s=new Jn(this,{callback:e,time:new Vr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new xl(this,{callback:e,duration:new Gt(this.context,r).toTicks(),interval:new Gt(this.context,t).toTicks(),time:new Vr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Jn(this,{callback:e,once:!0,time:new Vr(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Xs(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Ee(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Dt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Gt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Gt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Xs(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Xs(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const i=this.bpm.getValueAtTime(r),o=1/(60/i/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const s=new qe(t);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),vl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ki.mixin(ni);da(n=>{n.transport=new ni({context:n})});fa(n=>{n.transport.dispose()});class yt extends _e{constructor(e){super(e),this.input=void 0,this._state=new bl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=$e,this._syncedStop=$e,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ks({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ke(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(_e.getDefaults(),{mute:!1,onstop:$e,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ge(hr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(rr(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else cp(this.context),this._start(r,t,s);return this}stop(e){let t=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ee(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(hr(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=$e,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class fr extends dr{constructor(){super(K(fr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=K(fr.getDefaults(),arguments,["url","onload"]);Mn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Se({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Fe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(dr.getDefaults(),{url:new Fe,loop:!1,loopEnd:0,loopStart:0,onload:$e,onerror:$e,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){ge(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=rr(t,this.loopStart):t=rr(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;mc(o,a)&&(o=(o-c)%l+c),Wt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,go(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ee(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class si extends yt{constructor(){super(K(si.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=K(si.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(yt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(ge(e in ch,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=ch[this._type];this._source=new fr({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const js=44100*5,$a=2,_n={brown:null,pink:null,white:null},ch={get brown(){if(!_n.brown){const n=[];for(let e=0;e<$a;e++){const t=new Float32Array(js);n[e]=t;let s=0;for(let r=0;r<js;r++){const i=Math.random()*2-1;t[r]=(s+.02*i)/1.02,s=t[r],t[r]*=3.5}}_n.brown=new Fe().fromArray(n)}return _n.brown},get pink(){if(!_n.pink){const n=[];for(let e=0;e<$a;e++){const t=new Float32Array(js);n[e]=t;let s,r,i,o,a,c,l;s=r=i=o=a=c=l=0;for(let u=0;u<js;u++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,c=-.7616*c-h*.016898,t[u]=s+r+i+o+a+c+l+h*.5362,t[u]*=.11,l=h*.115926}}_n.pink=new Fe().fromArray(n)}return _n.pink},get white(){if(!_n.white){const n=[];for(let e=0;e<$a;e++){const t=new Float32Array(js);n[e]=t;for(let s=0;s<js;s++)t[s]=Math.random()*2-1}_n.white=new Fe().fromArray(n)}return _n.white}};function Fs(n,e){return tt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new pa(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class So extends dr{constructor(){super(K(So.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=K(So.getDefaults(),arguments,["frequency","type"]);Mn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Se({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Se({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(dr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Xe extends yt{constructor(){super(K(Xe.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=K(Xe.getDefaults(),arguments,["frequency","type"]);this.frequency=new Be({context:this.context,units:"frequency",value:e.frequency}),ke(this,"frequency"),this.detune=new Be({context:this.context,units:"cents",value:e.detune}),ke(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new So({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Xe._periodicWaveCache.find(t=>t.phase===this._phase&&J2(t.partials,this._partials));{const e=Xe._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Ee(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Xe._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Xe._periodicWaveCache.length>100&&Xe._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Xt(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return tT(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Xe._periodicWaveCache=[];class hn extends _e{constructor(){super(Object.assign(K(hn.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return _a(this,e,t,s),this}}class Os extends hn{constructor(){super(Object.assign(K(Os.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=K(Os.getDefaults(),arguments,["mapping","length"]);Dt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):j2(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Be.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));ge(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class wp extends hn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Os({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class es extends Be{constructor(){super(Object.assign(K(es.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=K(es.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new qe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Be.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ri extends yt{constructor(){super(K(ri.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new wp({context:this.context}),this._modulationNode=new qe({context:this.context});const e=K(ri.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Xe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Xe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new es({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ke(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Xe.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ii extends yt{constructor(){super(K(ii.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new qe({context:this.context,gain:0});const e=K(ii.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Xe({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Be({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Xe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new es({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new es({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ke(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Xe.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pr extends yt{constructor(){super(K(pr.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new qe({context:this.context,gain:0}),this._thresh=new Os({context:this.context,mapping:t=>t<=0?-1:1});const e=K(pr.getDefaults(),arguments,["frequency","width"]);this.width=new Be({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Xe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ke(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class oi extends yt{constructor(){super(K(oi.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=K(oi.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Be({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Be({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(Xe.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Xt(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Xe({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):$e});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ai extends yt{constructor(){super(K(ai.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new es({context:this.context,value:2});const e=K(ai.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new pr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Xe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ke(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(yt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const lh={am:ri,fat:oi,fm:ii,oscillator:Xe,pulse:pr,pwm:ai};class Is extends yt{constructor(){super(K(Is.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=K(Is.getDefaults(),arguments,["frequency","type"]);this.frequency=new Be({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Be({context:this.context,units:"cents",value:e.detune}),ke(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Xe.getDefaults(),ii.getDefaults(),ri.getDefaults(),oi.getDefaults(),pr.getDefaults(),ai.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=lh[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof lh[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&An(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&An(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Nn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return tt(this,void 0,void 0,function*(){return Fs(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Sl extends Be{constructor(){super(Object.assign(K(Sl.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new qe({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Jr(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Be.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ci extends hn{constructor(){super(Object.assign(K(ci.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=K(ci.getDefaults(),arguments,["min","max"]);this._mult=this.input=new es({context:this.context,value:e.max-e.min}),this._add=this.output=new Sl({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(hn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class El extends hn{constructor(){super(Object.assign(K(El.getDefaults(),arguments))),this.name="Zero",this._gain=new qe({context:this.context}),this.output=this._gain,this.input=void 0,Mn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),vp(this.context.getConstant(0),this._gain),this}}class Eo extends _e{constructor(){super(K(Eo.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Se.prototype._fromType,this._toType=Se.prototype._toType,this._is=Se.prototype._is,this._clampValue=Se.prototype._clampValue;const e=K(Eo.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Xe(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new qe({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Be({context:this.context,units:"audioRange",value:0}),this._zeros=new El({context:this.context}),this._a2g=new wp({context:this.context}),this._scaler=this.output=new ci({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ke(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Xe.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,s=this.max;this._units=e,this.min=t,this.max=s}get state(){return this._oscillator.state}connect(e,t,s){return(e instanceof Se||e instanceof Be)&&(this.convert=e.convert,this.units=e.units),_a(this,e,t,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function bp(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Xt(i,n,e),t.set(this,i)}})}}function Fn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Xt(this.toSeconds(i),n,e),t.set(this,i)}})}}class li extends yt{constructor(){super(K(li.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=K(li.getDefaults(),arguments,["url","onload"]);this._buffer=new Fe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(yt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:$e,onerror:$e,playbackRate:1,reverse:!1})}load(e){return tt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=$e){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=rr(t,this._loopStart):t=rr(t,0);const r=this.toSeconds(t),i=s;s=rr(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new fr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Rt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Xt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Xt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}tn([Fn(0)],li.prototype,"fadeIn",void 0);tn([Fn(0)],li.prototype,"fadeOut",void 0);class gT extends hn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Os({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Co extends hn{constructor(){super(Object.assign(K(Co.getDefaults(),arguments,["value"]))),this.name="Pow";const e=K(Co.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Os({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(hn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class qt extends _e{constructor(){super(K(qt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Be({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=K(qt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(_e.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Nn(e))return e;{let s;for(s in ji)if(ji[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Nn(s)&&Reflect.has(ji,s)){const r=ji[s];xs(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Dt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){ge(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(ge(Dt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return _a(this,e,t,s),this}asArray(e=1024){return tt(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new pa(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}tn([Fn(0)],qt.prototype,"attack",void 0);tn([Fn(0)],qt.prototype,"decay",void 0);tn([bp(0,1)],qt.prototype,"sustain",void 0);tn([Fn(0)],qt.prototype,"release",void 0);const ji=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class kn extends _e{constructor(){super(K(kn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=K(kn.getDefaults(),arguments);this._volume=this.output=new ks({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ke(this,"volume")}static getDefaults(){return Object.assign(_e.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class dn extends kn{constructor(){super(K(dn.getDefaults(),arguments));const e=K(dn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(kn.getDefaults(),{detune:0,onsilence:$e,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof Ct?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}tn([Fn(0)],dn.prototype,"portamento",void 0);class ga extends qt{constructor(){super(K(ga.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new qe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class mr extends dn{constructor(){super(K(mr.getDefaults(),arguments)),this.name="Synth";const e=K(mr.getDefaults(),arguments);this.oscillator=new Is(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ga(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ke(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(dn.getDefaults(),{envelope:Object.assign(ys(qt.getDefaults(),Object.keys(_e.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ys(Is.getDefaults(),[...Object.keys(yt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ui extends _e{constructor(){super(K(ui.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=K(ui.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Se({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Se({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Se({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Se({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(_e.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ge(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class hi extends _e{constructor(){super(K(hi.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new qe({context:this.context}),this.output=new qe({context:this.context}),this._filters=[];const e=K(hi.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Be({context:this.context,units:"positive",value:e.Q}),this.frequency=new Be({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Be({context:this.context,units:"cents",value:e.detune}),this.gain=new Be({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,ke(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(_e.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ge(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=An(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(t);ge(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new ui({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,Jr(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new ui({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),vl(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class di extends qt{constructor(){super(K(di.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=K(di.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Co({context:this.context,value:e.exponent}),this._scale=this.output=new ci({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(qt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Xt(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Ao extends dn{constructor(){super(K(Ao.getDefaults(),arguments)),this.name="MonoSynth";const e=K(Ao.getDefaults(),arguments);this.oscillator=new Is(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new hi(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new di(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new ga(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ke(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(dn.getDefaults(),{envelope:Object.assign(ys(qt.getDefaults(),Object.keys(_e.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ys(hi.getDefaults(),Object.keys(_e.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ys(di.getDefaults(),Object.keys(_e.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ys(Is.getDefaults(),Object.keys(yt.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class fi extends mr{constructor(){super(K(fi.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=K(fi.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ke(this,["oscillator","envelope"])}static getDefaults(){return Es(dn.getDefaults(),mr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof Ct?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}tn([bp(0)],fi.prototype,"octaves",void 0);tn([Fn(0)],fi.prototype,"pitchDecay",void 0);const Tp=new Set;function Cl(n){Tp.add(n)}function xp(n,e){const t=`registerProcessor("${n}", ${e})`;Tp.add(t)}const yT=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Cl(yT);const vT=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Cl(vT);const wT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Cl(wT);const bT="feedback-comb-filter",TT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;xp(bT,TT);class No extends kn{constructor(){super(K(No.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r);const e=K(No.getDefaults(),arguments,["voice","options"]);ge(!An(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(kn.getDefaults(),{maxPolyphony:32,options:{},voice:mr})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ge(e instanceof dn,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else ha("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(r=>{const i=new ti(this.context,r).toMidi(),o=this._getNextAvailableVoice();o&&(o.triggerAttack(r,t,s),this._activeVoices.push({midi:i,voice:o,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(s=>{const r=new ti(this.context,s).toMidi(),i=this._activeVoices.find(({midi:o,released:a})=>o===r&&!a);i&&(i.voice.triggerRelease(t),i.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,r){ge(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,r):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,r)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s);if(this.triggerAttack(e,i,r),Dt(t)){ge(Dt(e),"If the duration is an array, the notes must also be an array"),e=e;for(let o=0;o<e.length;o++){const a=t[Math.min(o,t.length-1)],c=this.toSeconds(a);ge(c>0,"The duration must be greater than 0"),this.triggerRelease(e[o],i+c)}}else{const o=this.toSeconds(t);ge(o>0,"The duration must be greater than 0"),this.triggerRelease(e,i+o)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=ys(e,["onsilence","context"]);return this.options=Es(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class pi extends kn{constructor(){super(K(pi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=K(pi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(ge(qi(s)||An(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),qi(s)){const i=new Ct(this.context,s).toMidi();t[i]=e.urls[s]}else An(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Tl({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(kn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:$e,onerror:$e,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=_p(new Ct(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=mp(c+a),d=new fr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,s),Dt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new Ct(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Dt(t)?(ge(Dt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(ge(qi(e)||isFinite(e),`note must be a pitch or midi: ${e}`),qi(e)){const r=new Ct(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}tn([Fn(0)],pi.prototype,"attack",void 0);tn([Fn(0)],pi.prototype,"release",void 0);class Mo extends _e{constructor(){super(Object.assign(K(Mo.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new gT({context:this.context}),this.a=new qe({context:this.context,gain:0}),this.b=new qe({context:this.context,gain:0}),this.output=new qe({context:this.context}),this._internalChannels=[this.a,this.b];const e=K(Mo.getDefaults(),arguments,["fade"]);this.fade=new Be({context:this.context,units:"normalRange",value:e.fade}),ke(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Mn(this._split,this.a.gain,0),Mn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(_e.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class _r extends _e{constructor(e){super(e),this.name="Effect",this._dryWet=new Mo({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new qe({context:this.context}),this.effectReturn=new qe({context:this.context}),this.input=new qe({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ke(this,"wet")}static getDefaults(){return Object.assign(_e.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class uh extends _r{constructor(e){super(e),this.name="LFOEffect",this._lfo=new Eo({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,ke(this,["frequency","depth"])}static getDefaults(){return Object.assign(_r.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class mi extends _e{constructor(){super(Object.assign(K(mi.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=K(mi.getDefaults(),arguments,["pan"]);this.pan=new Se({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ke(this,"pan")}static getDefaults(){return Object.assign(_e.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class ko extends uh{constructor(){super(K(ko.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const e=K(ko.getDefaults(),arguments,["frequency"]);this._panner=new mi({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(uh.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}const xT="bit-crusher",ST=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;xp(xT,ST);class Oo extends _e{constructor(){super(K(Oo.getDefaults(),arguments,["channels"])),this.name="Merge";const e=K(Oo.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(_e.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class hh extends _r{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new qe({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ke(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(_r.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Io extends hh{constructor(){super(K(Io.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const e=K(Io.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new To({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),ke(this,"delayTime")}static getDefaults(){return Object.assign(hh.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Ro extends _r{constructor(){super(K(Ro.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=K(Ro.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(_r.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Xt(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Xt(e,0),this._preDelay=e,this.generate()}generate(){return tt(this,void 0,void 0,function*(){const e=this.ready,t=new pa(2,this._decay+this._preDelay,this.context.sampleRate),s=new si({context:t}),r=new si({context:t}),i=new Oo({context:t});s.connect(i,0,0),r.connect(i,0,1);const o=new qe({context:t}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then($e),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Je extends _e{constructor(){super(K(Je.getDefaults(),arguments,["solo"])),this.name="Solo";const e=K(Je.getDefaults(),arguments,["solo"]);this.input=this.output=new qe({context:this.context}),Je._allSolos.has(this.context)||Je._allSolos.set(this.context,new Set),Je._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(_e.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Je._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Je._soloed.has(this.context)||Je._soloed.set(this.context,new Set),Je._soloed.get(this.context).add(this)}_removeSolo(){Je._soloed.has(this.context)&&Je._soloed.get(this.context).delete(this)}_isSoloed(){return Je._soloed.has(this.context)&&Je._soloed.get(this.context).has(this)}_noSolos(){return!Je._soloed.has(this.context)||Je._soloed.has(this.context)&&Je._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Je._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Je._allSolos=new Map;Je._soloed=new Map;class Do extends _e{constructor(){super(K(Do.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=K(Do.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new mi({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ks({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ke(this,["pan","volume"])}static getDefaults(){return Object.assign(_e.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ms extends _e{constructor(){super(K(ms.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=K(ms.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Je({solo:e.solo,context:this.context}),this._panVol=this.output=new Do({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ke(this,["pan","volume"])}static getDefaults(){return Object.assign(_e.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ms.buses.has(e)||ms.buses.set(e,new qe({context:this.context})),ms.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new qe({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ms.buses=new Map;class ET extends _e{constructor(){super(...arguments),this.name="Listener",this.positionX=new Se({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Se({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Se({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Se({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Se({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Se({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Se({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Se({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Se({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(_e.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}da(n=>{n.listener=new ET({context:n})});fa(n=>{n.listener.dispose()});class Po extends _e{constructor(){super(K(Po.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const e=K(Po.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Se({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Se({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Se({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Se({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Se({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),ke(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(_e.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}const Fa=It().transport;It().destination;It().destination;It().listener;It().draw;It();const Ie={},Ne=Nt({midi:!0,bpm:oc(Tt("tempo-bpm",90),10,500),quantize:Tt("quantize","@8n"),octave:oc(Tt("synth-transpose",0),-2,2),transpose:be(()=>Ne.octave*12),initiated:!1,params:{oscillator:{type:Tt("synth-osc","sawtooth8")},volume:-20,envelope:{attack:.005,decay:.3,sustain:.4,release:.8},filterEnvelope:{attack:.001,decay:.7,sustain:.5,release:1,baseFrequency:60,octaves:5}}});function Sp(){return Ne.initiated||(Yi("z\u044F".split(""),n=>{Ne.octave--}),Yi("x\u0447".split(""),n=>{Ne.octave++}),Yi("Escape",()=>Va()),Fa.bpm.set(Ne.bpm),Fa.start(),dt(()=>Ne.bpm,n=>{Fa.bpm.rampTo(n,2)}),dt(()=>Ne.params,n=>{Ie.poly&&Ie.poly.set(n)},{deep:!0}),dt(()=>L.note,n=>{!Ne.midi||(n.velocity>0?dh(ah(n.number).toFrequency(),n.velocity/127):fh(ah(n.number).toFrequency()))}),dt(()=>L.playing,n=>{n||Va()})),{init:Vs,synth:Ie,synthOptions:Ne,synthOnce:CT,synthAttack:dh,synthRelease:fh,synthReleaseAll:Va}}function Vs(){oT(),!(Ie!=null&&Ie.poly)&&(Ie.compressor=new Po().toDestination(),Ie.pan=new ko({depth:.4,frequency:"8n",wet:.7}).connect(Ie.compressor),Ie.reverb=new Ro(2.5).connect(Ie.pan),Ie.poly=new No(Ao,Ne.params).connect(Ie.pan),Ie.delay=new Io({delayTime:"8n",wet:.3,feedback:.3,maxDelay:"8n"}).toDestination(),Ie.poly.connect(Ie.reverb),Ie.poly.connect(Ie.delay),Ie.poly.connect(Ie.pan),Ie.pan.start(),Ne.initiated=!0)}function CT(n="A4",e="8n",t){if(!Ie.poly||Ne.mute)return Vs();Ie.poly.triggerAttackRelease(n,e),Ie.poly.releaseAll(Ne.quantize)}function dh(n,e){if(!Ie.poly||Ne.mute)return Vs();Ie.poly.triggerAttack(yp(n).transpose(Ne.transpose),Ne.quantize,e)}function fh(n){if(!Ie.poly||Ne.mute)return Vs();Ie.poly.triggerRelease(yp(n).transpose(Ne.transpose),Ne.quantize)}function Va(){if(!Ie.poly||Ne.mute)return Vs();Ie.poly.releaseAll(Ne.quantize)}const L=Nt({enabled:!1,initiated:!1,keyboardInitiated:!1,offset:-1,out:!0,inputs:{},outputs:{},forwards:{},playing:!1,channels:{},channel:Tt("global-midi-channel",1),note:null,time:0,duration:0,maxDuration:3e3,message:null,log:[],cc:{},clock:0,filter:Tt("global-midi-filter",{}),available:be(()=>Object.entries(L.outputs).length>0),total:{hits:0,dur:0,duration:be(()=>L.total.dur+L.duration),notes:[0,0,0,0,0,0,0,0,0,0,0,0],durations:[0,0,0,0,0,0,0,0,0,0,0,0],durs:be(()=>L.total.durations.map((n,e)=>({pitch:e,dur:n})).filter(n=>n.dur>0)),reset(){L.total.hits=0,L.total.dur=0,L.total.notes=new Array(12).fill(0),L.total.durations=new Array(12).fill(0)}}}),Ws={KeyA:{note:"C",offset:0},KeyW:{note:"C#",offset:0},KeyS:{note:"D",offset:0},KeyE:{note:"D#",offset:0},KeyD:{note:"E",offset:0},KeyF:{note:"F",offset:0},KeyT:{note:"F#",offset:0},KeyG:{note:"G",offset:0},KeyY:{note:"G#",offset:0},KeyH:{note:"A",offset:0},KeyU:{note:"A#",offset:0},KeyJ:{note:"B",offset:0},KeyK:{note:"C",offset:1},KeyO:{note:"C#",offset:1},KeyL:{note:"D",offset:1},KeyP:{note:"D#",offset:1},Semicolon:{note:"E",offset:1},Quote:{note:"F",offset:1},BracketRight:{note:"F#",offset:1}};function AT(){L.keyboardInitiated||(document.addEventListener("keydown",n=>{n.code=="KeyZ"&&L.offset--,n.code=="KeyX"&&L.offset++,!(n.repeat||!Ws[n.code])&&(n.ctrlKey||n.altKey||n.metaKey||((n.code=="Slash"||n.code=="Quote")&&n.preventDefault(),ph(Ws[n.code].note,Ws[n.code].offset)))}),document.addEventListener("keyup",n=>{!Ws[n.code]||ph(Ws[n.code].note,Ws[n.code].offset,!0)}),Yi("Enter",()=>L.total.reset()),L.keyboardInitiated=!0)}function ph(n,e,t){let s=n+(4+e+L.offset);const r=new gs(s,{attack:t?0:1}),i={type:t?"noteoff":"noteon",note:r,port:{id:"PC Keyboard"},timestamp:L.time,target:{number:0}};_c(i)}Jc(()=>{var n,e,t;L.time=ee.time,((n=L==null?void 0:L.note)==null?void 0:n.velocity)>0?L.duration=ee.time-((e=L==null?void 0:L.note)==null?void 0:e.timestamp):(L.total.dur+=L.duration,L.total.durations[((t=L==null?void 0:L.note)==null?void 0:t.pitch)||0]+=L.duration,L.duration=0)});dt(()=>L.duration,n=>{n>L.maxDuration&&L.total.reset()});function Ls(){return Ds(()=>{ee.supported&&NT()}),m_(()=>{if(!L.out)return;let n=Object.values(ee.outputs);L.playing?n.forEach(e=>{e.sendContinue()}):n.forEach(e=>{e.sendStop()})}),{midi:L,midiAttack:kT,midiRelease:RT,midiOnce:DT,setCC:PT,WebMidi:ee}}function NT(){L.initiated||(ee.enable(),ee.addListener("enabled",n=>{L.enabled=!0,mh()}),ee.addListener("connected",n=>{mh()}),ee.addListener("disconnected",n=>{delete L[n.port.type+"s"][n.port.id]}),L.initiated=!0)}function mh(){L.inputs=Nt({}),ee.inputs.forEach(n=>{L.enabled=!0,L.inputs[n.id]={name:n.name,manufacturer:n.manufacturer,forwarder:n.addForwarder(),event:null,note:null,cc:null},n.removeListener(),n.addListener("start",()=>{L.playing=!0}),n.addListener("stop",()=>{L.playing=!1,L.channels={}}),n.addListener("midimessage",e=>{var t;((t=e==null?void 0:e.message)==null?void 0:t.type)!="clock"&&(L.inputs[n.id].event=e,L.message=e.message,L.log.unshift(e),L.log.length>100&&L.log.pop())}),n.addListener("noteon",e=>{L.inputs[n.id].note=_c(e)},{channels:"all"}),n.addListener("noteoff",e=>{L.inputs[n.id].note=_c(e)},{channels:"all"}),n.addListener("controlchange",e=>{const t=MT(e);!t||(L.inputs[n.id].cc=t,L.cc=t)},{channels:"all"}),n.addListener("clock",e=>{L.clock=e.timestamp})}),L.outputs=Nt({}),ee.outputs.forEach(n=>{L.outputs[n.id]={name:n.name,manufacturer:n.manufacturer}})}function _c(n){let e=n.note;if(e.port=n.port.id,e.type=n.type,e.timestamp=n.timestamp,e.channel=n.target.number,n.type=="noteoff")e.velocity=0;else{e.velocity=100,L.total.hits++;let t=(n.note.number+3)%12;L.total.notes[t]=L.total.notes[t]+1}if(e.pitch=(e.number+3)%12,e.octA=Math.floor((e.number+3)/12)-1,!L.filter[e.channel])return Ep(e.channel),L.channels[e.channel].notes[e.number]=e,L.note=e,e}function MT(n){if(L.filter[n.target.number])return;let e={channel:n.target.number,timestamp:n.timestamp,number:n.controller.number,value:n.value,raw:n.rawValue,port:n.port.id};return Ep(e.channel),L.channels[e.channel].cc[e.number]=e,e}function Ep(n){L.channels[n]||(L.channels[n]={num:n,activeNotes:{},notes:{},cc:{}})}function Cp(n,e,t){var s,r,i;(i=(r=(s=L.channels)==null?void 0:s[n])==null?void 0:r.notes)!=null&&i[e]&&(L.channels[n].notes[e].velocity=t)}function kT(n,e){if(!L.out)return;let t=(n==null?void 0:n.channel)||L.channel;Cp(t,n==null?void 0:n.number,100),ee.outputs.forEach(s=>{s.playNote(n.number,{channels:t,...e})})}function OT(n,e){!L.out||ee.outputs.forEach(t=>{t.playNote(n,{channels:L.channel,...e})})}function IT(n,e){!L.out||(n?ee.outputs.forEach(t=>{t.stopNote(n,{channels:L.channel,...e})}):ee.outputs.forEach(t=>{t.sendAllNotesOff(),t.sendAllSoundOff({time:"+1"})}))}function RT(n){if(!!L.out)if(n){let e=(n==null?void 0:n.channel)||L.channel;Cp(e,n==null?void 0:n.number,0),ee.outputs.forEach(t=>{t.stopNote(n.number,{channels:e})})}else ee.outputs.forEach(e=>{e.sendAllNotesOff(),e.sendAllSoundOff({time:"+1"})})}function DT(n,e){!L.out||L.filter[L.channel]||(OT(n,e),setTimeout(()=>{IT(n,e)},300))}function PT(n,e){!L.out||ee.outputs.forEach(t=>{t.sendControlChange(Number(n.number),e,n.channel)})}function $T(n,e){var i,o;const t=ee.outputs.find(a=>a.id==e),s=L.inputs[n].forwarder.destinations,r=s.indexOf(t);r==-1?(s.push(t),L.forwards[n]=L.forwards[n]||{},L.forwards[n][e]=!0):(s.splice(r,1),(o=(i=L.forwards)==null?void 0:i[n])==null||delete o[e])}const FT=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];function st(n=0,e,t=1,s=1){return e=e||Math.floor(n/12)+4,`hsla(${n%12*30},${t*100}%,${Math.abs(e+2)*8}%,${s})`}function VT(n=0,e=12,t=35,s=100,r=100){let i=(n-e/4)/(e/2)*Math.PI,o=t*Math.cos(i)+s/2,a=t*Math.sin(i)+r/2;return{x:o,y:a}}const _h=Oe(),LT=Tt("active-scene","Rose");function Vn(){const{width:n,height:e}=k1(_h);return{visual:_h,width:n,height:e,activeScene:LT}}const BT={class:"text-overlay select-none",fill:"currentColor"},qT={fill:"currentColor",x:30,y:30},jT=B("circle",{cx:"18",cy:"22",r:"14",fill:"transparent"},null,-1),WT=["transform"],zT=["x"],UT=["x","transform"],HT=["x"],GT=["x"],YT=["y","x"],KT=B("tspan",{class:"font-normal"},"Made by",-1),ZT=B("tspan",{dx:"4"},[B("a",{href:"https://chromatone.center",target:"_blank"},"Chromatone")],-1),XT=B("tspan",{dx:"4"},"for",-1),QT=B("tspan",{dx:"4"},[B("a",{href:"https://playtronica.com",target:"_blank"},"Playtronica")],-1),JT=B("tspan",{dx:"4"},[B("a",{href:"https://shop.playtronica.com/products/touchme",target:"_blank"},"TouchMe")],-1),ex=[KT,ZT,XT,QT,JT],tx={__name:"stats",setup(n){const{width:e,height:t}=Vn(),s=200;return(r,i)=>{var c,l,u,h,d,f;const o=M0,a=Uc("tooltip");return X(),oe("g",BT,[ht((X(),oe("text",qT,[Zn(Ve((l=(c=v(L))==null?void 0:c.total)==null?void 0:l.hits),1)])),[[a,"Notes played",void 0,{"bottom-start":!0}]]),B("g",{onClick:i[0]||(i[0]=p=>v(L).total.reset())},[jT,Te(o,{x:"8",y:"12"})]),B("g",{transform:`translate(${v(e)/2},${v(t)-60})`,opacity:"0.7"},[B("rect",{x:-s/2,width:s,height:"10",stroke:"currentColor",fill:"none",rx:"4"},null,8,zT),B("rect",{x:-s/2,width:s,transform:`scale(${v(L).duration/v(L).maxDuration},1)`,height:"10",fill:"currentColor",rx:"4"},null,8,UT)],8,WT),ht((X(),oe("text",{"text-anchor":"middle",fill:"currentColor",x:v(e)/2,y:30},[Zn(Ve((h=(u=v(L))==null?void 0:u.note)==null?void 0:h.identifier),1)],8,HT)),[[a,"Current note",void 0,{bottom:!0}]]),ht((X(),oe("text",{fill:"currentColor",x:v(e)-10,y:30,"text-anchor":"end"},[Zn(Ve((((f=(d=v(L))==null?void 0:d.total)==null?void 0:f.duration)/1e3).toFixed())+" / "+Ve((v(L).time/1e3).toFixed())+"s",1)],8,GT)),[[a,"Session time: playing / total",void 0,{"bottom-end":!0}]]),B("text",{class:"text-16px",y:v(t)-20,x:v(e)/2,"text-anchor":"middle",opacity:"0.6"},ex,8,YT)])}}},nx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},sx=B("path",{fill:"currentColor",d:"M22 7h-9v2h9V7zm0 8h-9v2h9v-2zM5.54 11L2 7.46l1.41-1.41l2.12 2.12l4.24-4.24l1.41 1.41L5.54 11zm0 8L2 15.46l1.41-1.41l2.12 2.12l4.24-4.24l1.41 1.41L5.54 19z"},null,-1),rx=[sx];function ix(n,e){return X(),oe("svg",nx,rx)}const ox={name:"ic-baseline-checklist",render:ix},ax={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},cx=B("path",{fill:"currentColor",d:"M20.844 2c-1.64 0-3.297.852-4.407 2.156v.032c-.789.98-1.644 2.527-1.375 4.312c-.128-.05-.136-.035-.28-.094c-.692-.281-1.548-.594-2.563-.594c-3.98 0-7 3.606-7 8.344c0 3.067 1.031 5.942 2.406 8.094c.688 1.078 1.469 1.965 2.281 2.625c.813.66 1.664 1.125 2.625 1.125c.961 0 1.68-.324 2.219-.563c.54-.238.957-.437 1.75-.437c.715 0 1.078.195 1.625.438c.547.242 1.293.562 2.281.562c1.07 0 1.98-.523 2.719-1.188c.738-.664 1.36-1.519 1.875-2.343c.516-.824.922-1.633 1.219-2.282c.148-.324.258-.593.343-.812c.086-.219.13-.281.188-.531l.188-.813l-.75-.343a5.33 5.33 0 0 1-1.5-1.063c-.625-.637-1.157-1.508-1.157-2.844A4.08 4.08 0 0 1 24.563 13c.265-.309.542-.563.75-.719c.105-.078.187-.117.25-.156c.062-.04.05-.027.156-.094l.843-.531l-.562-.844c-1.633-2.511-4.246-2.844-5.281-2.844c-.48 0-.82.168-1.25.25c.242-.226.554-.367.75-.624c.004-.004-.004-.028 0-.032c.011-.011.023-.02.031-.031h.031a6.16 6.16 0 0 0 1.563-4.438L21.78 2zm-1.188 2.313c-.172.66-.453 1.289-.906 1.78l-.063.063c-.382.516-.972.899-1.562 1.125c.164-.652.45-1.312.844-1.812c.008-.012.023-.02.031-.032c.438-.5 1.043-.875 1.656-1.125zm-7.437 5.5c.558 0 1.172.21 1.812.468c.64.258 1.239.594 2.094.594c.852 0 1.496-.336 2.25-.594c.754-.258 1.559-.469 2.344-.469c.523 0 1.816.333 2.906 1.344c-.191.172-.36.297-.563.531a6.21 6.21 0 0 0-1.53 4.094c0 1.906.831 3.34 1.718 4.25c.55.563.89.696 1.313.938c-.055.125-.086.222-.157.375a18.82 18.82 0 0 1-1.093 2.062c-.454.727-1.004 1.434-1.532 1.907c-.527.472-1 .687-1.375.687c-.566 0-.898-.156-1.468-.406S17.581 25 16.5 25c-1.137 0-1.977.336-2.563.594c-.585.258-.89.406-1.406.406c-.246 0-.777-.2-1.375-.688c-.597-.488-1.254-1.23-1.844-2.156c-1.183-1.851-2.093-4.394-2.093-7c0-3.941 2.199-6.343 5-6.343z"},null,-1),lx=[cx];function ux(n,e){return X(),oe("svg",ax,lx)}const hx={name:"la-apple",render:ux},dx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},fx=B("path",{fill:"currentColor",d:"M16 4C9.385 4 4 9.385 4 16s5.385 12 12 12s12-5.385 12-12S22.615 4 16 4zm0 2a9.977 9.977 0 0 1 8.922 5.492l-6.807-.004A4.93 4.93 0 0 0 16 11c-1.625 0-3.06.796-3.975 2.006L8.44 9.459A9.966 9.966 0 0 1 16 6zm-8.367 4.523l3.387 5.87a5.015 5.015 0 0 0 4.369 4.566l-1.276 4.857A9.982 9.982 0 0 1 6 16a9.96 9.96 0 0 1 1.633-5.477zm17.808 2.202A9.986 9.986 0 0 1 16 26c-.186 0-.367-.017-.55-.027l3.392-5.871A4.998 4.998 0 0 0 21 16a4.96 4.96 0 0 0-.398-1.947l4.84-1.328zM16 13c1.671 0 3 1.329 3 3s-1.329 3-3 3s-3-1.329-3-3s1.329-3 3-3z"},null,-1),px=[fx];function mx(n,e){return X(),oe("svg",dx,px)}const _x={name:"la-chrome",render:mx},gx="/pc-keyboard.svg",yx={key:0,class:"text-center absolute z-500 p-4 rounded-xl shadow-xl bg-light-200 mx-auto dark_bg-dark-200 min-w-80",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},vx=B("h2",{class:"text-center text-2xl my-4"},"Let's play music with touch ",-1),wx={key:0,class:"p-4 flex flex-col gap-2"},bx=Zn("This interactive experience needs Web MIDI API support. Unfortunately, your current browser doesn't provide it. Is it Firefox or Safari? Please, use another one here."),Tx={class:"button p-4 flex items-center",href:"https://chrome.google.com",target:"_blank"},xx=B("div",{class:"ml-2"},"Google Chrome for Desktop or Android",-1),Sx={class:"button p-4 flex items-center",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},Ex=B("div",{class:"ml-2"},"Web MIDI Browser for iOS",-1),Cx={class:"button p-4 flex items-center",href:"https://caniuse.com/?search=midi",target:"_blank"},Ax=B("div",{class:"ml-2"},"Other options",-1),Nx=B("div",{class:"mt-4"},"Or play notes with your PC keyboard ",-1),Mx=B("img",{src:gx},null,-1),kx={key:1,class:"px-4"},Ox=["disabled","id","onUpdate:modelValue"],Ix=["for"],Rx={__name:"start",setup(n){const e=Oe(!1),t=Nt({browser:{text:"MIDI enabled browser",checked:be(()=>L==null?void 0:L.enabled),disabled:!0},controller:{text:"TouchMe (or any other MIDI controller)",checked:Tt("touch-me",!1)},usb:{text:"USB cable (you have it in your package)",checked:Tt("usb-cable",!1)},adapter:{text:"Special adapter, if your device doesn\u2019t have a usb port ",checked:Tt("usb-adapter",!1)},friend:{text:"Your best friend ",checked:Tt("your-friend",!1)}});return(s,r)=>{const i=_x,o=hx,a=ox;return v(Ne).initiated?ot("",!0):(X(),oe("div",yx,[vx,v(L).enabled?(X(),oe("div",kx,[(X(!0),oe(Re,null,gt(t,(c,l)=>(X(),oe("div",{class:"flex items-center my-4",key:l},[ht(B("input",{class:"transform scale-200",type:"checkbox",disabled:c.disabled,id:l,"onUpdate:modelValue":u=>c.checked=u},null,8,Ox),[[Rg,c.checked]]),B("label",{class:"ml-4",for:l},Ve(c.text),9,Ix)]))),128))])):(X(),oe("div",wx,[bx,B("a",Tx,[Te(i,{class:"text-2xl"}),xx]),B("a",Sx,[Te(o,{class:"text-2xl"}),Ex]),B("a",Cx,[Te(a,{class:"text-2xl"}),Ax]),Nx,Mx])),B("button",{class:"button mx-auto w-full font-bold",onClick:r[0]||(r[0]=c=>{v(Vs)(),e.value=!0})},"Start")]))}}},Dx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Px=B("path",{fill:"currentColor",d:"M16 3C8.832 3 3 8.832 3 16s5.832 13 13 13s13-5.832 13-13S23.168 3 16 3zm0 2c6.086 0 11 4.914 11 11s-4.914 11-11 11S5 22.086 5 16S9.914 5 16 5zm-3.781 5.781L10.78 12.22L14.562 16l-3.78 3.781l1.437 1.438L16 17.437l3.781 3.782l1.438-1.438L17.437 16l3.782-3.781l-1.438-1.438L16 14.562z"},null,-1),$x=[Px];function Fx(n,e){return X(),oe("svg",Dx,$x)}const Vx={name:"la-times-circle",render:Fx},Lx={class:"-mt-3 mb-1 font-bold"},Bx=B("div",{class:"absolute bottom-1 text-xs"},"BPM",-1),qx={__name:"bpm",setup(n){const e=[60,80,100,120];function t(){let s=e.findIndex(r=>r==Ne.bpm);Ne.bpm=e[++s%e.length]}return(s,r)=>(X(),oe("button",{class:"button relative",onClick:r[0]||(r[0]=i=>t())},[B("div",Lx,Ve(v(Ne).bpm),1),Bx]))}},jx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Wx=B("path",{fill:"currentColor",d:"M128 192v-64h104ZM24 128h104V64Z",opacity:".2"},null,-1),zx=B("path",{fill:"currentColor",d:"m236.2 134.8l-104 64a8 8 0 0 1-8.1.2a8.1 8.1 0 0 1-4.1-7V78.3l-91.8 56.5a8 8 0 0 1-8.4-13.6l104-64A8 8 0 0 1 136 64v113.7l91.8-56.5a8 8 0 0 1 8.4 13.6Z"},null,-1),Ux=[Wx,zx];function Hx(n,e){return X(),oe("svg",jx,Ux)}const Gx={name:"ph-wave-sawtooth-duotone",render:Hx},Yx={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Kx=B("path",{fill:"currentColor",d:"M128 72v56H24V72Zm0 56v56h104v-56Z",opacity:".2"},null,-1),Zx=B("path",{fill:"currentColor",d:"M240 128v56a8 8 0 0 1-8 8H128a8 8 0 0 1-8-8V80H32v48a8 8 0 0 1-16 0V72a8 8 0 0 1 8-8h104a8 8 0 0 1 8 8v104h88v-48a8 8 0 0 1 16 0Z"},null,-1),Xx=[Kx,Zx];function Qx(n,e){return X(),oe("svg",Yx,Xx)}const Jx={name:"ph-wave-square-duotone",render:Qx},eS={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},tS=B("path",{fill:"currentColor",d:"m76 56l52 72H24Zm156 72H128l52 72Z",opacity:".2"},null,-1),nS=B("path",{fill:"currentColor",d:"m238.5 132.7l-52 72a8.1 8.1 0 0 1-13 0L76 69.7l-45.5 63a8 8 0 1 1-13-9.4l52-72a8.1 8.1 0 0 1 13 0l97.5 135l45.5-63a8 8 0 0 1 13 9.4Z"},null,-1),sS=[tS,nS];function rS(n,e){return X(),oe("svg",eS,sS)}const iS={name:"ph-wave-triangle-duotone",render:rS},oS={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},aS=B("path",{fill:"currentColor",d:"M128 128H24c52-112 78-56 104 0Zm0 0c26 56 52 112 104 0Z",opacity:".2"},null,-1),cS=B("path",{fill:"currentColor",d:"M239.3 131.4c-22 47.2-41.4 69.3-61.3 69.3c-25.1 0-40.7-33.7-57.3-69.3c-13-28.2-27.8-60.1-42.7-60.1s-36.3 37.6-46.7 60.1a8.1 8.1 0 1 1-14.6-6.8c22-47.2 41.4-69.3 61.3-69.3c25.1 0 40.7 33.7 57.3 69.3c13 28.2 27.8 60.1 42.7 60.1c16.4 0 36.3-37.6 46.7-60.1a8.1 8.1 0 0 1 14.6 6.8Z"},null,-1),lS=[aS,cS];function uS(n,e){return X(),oe("svg",oS,lS)}const hS={name:"ph-wave-sine-duotone",render:uS},dS={__name:"oscillator",setup(n){const e={sine:"SIN",triangle:"TRI",square8:"SQR",sawtooth8:"SAW"};function t(){let a=Object.keys(e),c=a.findIndex(l=>l==r.params.oscillator.type);r.params.oscillator.type=a[++c%a.length]}const s=be(()=>r.params.oscillator.type),{synthOptions:r,synthOnce:i,init:o}=Sp();return(a,c)=>{const l=hS,u=iS,h=Jx,d=Gx;return X(),oe("div",{class:"button flex-auto flex justify-center m-1 cursor-pointer",onClick:c[0]||(c[0]=f=>{var p,m;t(),v(i)((m=(p=v(L))==null?void 0:p.note)==null?void 0:m.identifier),!v(r).initiated&&v(o)()})},[v(s)=="sine"?(X(),et(l,{key:0})):ot("",!0),v(s)=="triangle"?(X(),et(u,{key:1})):ot("",!0),v(s)=="square8"?(X(),et(h,{key:2})):ot("",!0),v(s)=="sawtooth8"?(X(),et(d,{key:3})):ot("",!0)])}}};const ts={},ya=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},fS={class:"flex flex-col gap-1 mb-4 overflow-x-scroll font-mono pt-4"},pS={class:"txt whitespace-nowrap"},mS={class:"txt"},_S={class:"txt"},gS={class:"txt text-center"},yS={class:"txt text-right"},Ap={__name:"log",setup(n){Oe(!1);const{midi:e,midiAttack:t,midiRelease:s,setCC:r}=Ls();return(i,o)=>(X(),oe("div",fS,[Te(Ng,{name:"fall",mode:"out-in"},{default:Kt(()=>[(X(!0),oe(Re,null,gt(v(e).log,a=>{var c,l;return X(),oe("div",{class:"flex text-xs fall whitespace-nowrap justify-between",key:a},[B("div",{class:"p-2",style:Le({backgroundColor:v(st)(a.message.dataBytes[0]+3||0)})},null,4),B("div",pS,Ve(v(ie).toNoteIdentifier(a.message.dataBytes[0]||1)),1),B("div",mS,Ve((c=a.message)==null?void 0:c.type),1),B("div",_S,Ve((a.message.dataBytes[1]/127).toFixed(2)),1),B("div",gS,Ve(a.data.join(",")),1),B("div",yS,"CH"+Ve((l=a.message)==null?void 0:l.channel),1)])}),128))]),_:1})]))}};typeof ts=="function"&&ts(Ap);const vS=ya(Ap,[["__scopeId","data-v-5ef71097"]]);const wS=n=>(Zo("data-v-b0381278"),n=n(),Xo(),n),bS={class:"p-4 shadow-lg rounded-2xl bg-light-900 dark_bg-dark-300 relative border-2 shadow-lg",style:{flex:"1 1 200px"}},TS={class:"flex justify-between flex-wrap gap-1"},xS={class:"flex-col"},SS={class:"text-sm"},ES={class:"text-xl font-bold"},CS={class:"flex-col text-xs font-mono flex gap-2 text-center"},AS={key:1,class:"display"},NS={class:"flex flex-wrap gap-3 mt-4 items-center"},MS=wS(()=>B("div",{class:"text-xs"},"TO",-1)),kS=["onClick"],OS={class:"text-sm"},IS={__name:"input",props:{input:Object,iid:[Number,String]},setup(n){const e=n,{midi:t}=Ls(),s=be(()=>{var r,i,o;return((i=(r=e.input)==null?void 0:r.note)==null?void 0:i.velocity)>0?st((o=e.input.note)==null?void 0:o.pitch,null,1,.4):"#7773"});return(r,i)=>{var o,a,c,l,u,h,d,f,p,m,_,g,y,x,C,w;return X(),oe("div",bS,[B("div",TS,[B("div",xS,[B("div",SS,Ve(n.input.manufacturer),1),B("div",ES,Ve(n.input.name),1)]),B("div",CS,[n.input.note?(X(),oe("div",{key:0,class:"display",style:Le({backgroundColor:v(s)})},[B("div",{class:"indicator",style:Le({transform:`scale(${(a=(o=n.input)==null?void 0:o.note)==null?void 0:a.attack},1)`})},null,4),B("i",null,"CH"+Ve((l=(c=n.input)==null?void 0:c.note)==null?void 0:l.channel),1),B("div",{class:"px-1 rounded-sm",style:Le({backgroundColor:v(s)})},Ve((h=(u=n.input)==null?void 0:u.note)==null?void 0:h.identifier),5),B("i",null,Ve((f=(d=n.input)==null?void 0:d.note)==null?void 0:f.number),1)],4)):ot("",!0),n.input.cc?(X(),oe("div",AS,[B("div",{class:"indicator",style:Le({transform:`scale(${(m=(p=n.input)==null?void 0:p.cc)==null?void 0:m.value},1)`})},null,4),B("i",null,"CH"+Ve((g=(_=n.input)==null?void 0:_.cc)==null?void 0:g.channel),1),B("i",null,"CC"+Ve((x=(y=n.input)==null?void 0:y.cc)==null?void 0:x.number),1),B("i",null,Ve((w=(C=n.input)==null?void 0:C.cc)==null?void 0:w.raw),1)])):ot("",!0)])]),B("div",NS,[MS,(X(!0),oe(Re,null,gt(v(t).outputs,(O,A)=>{var E,F;return ht((X(),oe("button",{class:ns(["px-2 shadow-sm rounded-xl bg-light-200 dark_bg-dark-500 cursor-pointer border-2 border-transparent select-none",{active:(F=(E=v(t).forwards)==null?void 0:E[n.iid])==null?void 0:F[A]}]),onClick:V=>v($T)(n.iid,A),key:A},[B("div",OS,Ve(O.name),1)],10,kS)),[[io,n.input.name!=O.name]])}),128))])])}}},RS=ya(IS,[["__scopeId","data-v-b0381278"]]);const Al=n=>(Zo("data-v-27bfda27"),n=n(),Xo(),n),DS={class:"z-40 flex flex-col gap-2"},PS={key:0,class:"p-2 border border-red-500 text-red-500"},$S=Zn("MIDI is not available. Use a "),FS=Al(()=>B("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"compatible browser ",-1)),VS=Al(()=>B("span",null,"or ",-1)),LS=Al(()=>B("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),BS=[$S,FS,VS,LS],qS={key:1,class:"flex flex-wrap gap-4 justify-center"},jS={__name:"panel",props:{toChannel:{type:Boolean,default:!0}},setup(n){return Xc(" ",e=>{e.preventDefault(),L.playing=!L.playing}),(e,t)=>{var i;const s=RS,r=vS;return X(),oe("div",DS,[(i=v(L))!=null&&i.enabled?(X(),oe("div",qS,[(X(!0),oe(Re,null,gt(v(L).inputs,(o,a)=>(X(),et(s,{input:o,iid:a,key:a},null,8,["input","iid"]))),128))])):(X(),oe("div",PS,BS)),Te(r,{class:"max-h-40vh mt-6"})])}}},WS=ya(jS,[["__scopeId","data-v-27bfda27"]]),zS={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},US=B("path",{fill:"currentColor",d:"M7.219 5.781L5.78 7.22L14.563 16L5.78 24.781l1.44 1.439L16 17.437l8.781 8.782l1.438-1.438L17.437 16l8.782-8.781L24.78 5.78L16 14.563z"},null,-1),HS=[US];function GS(n,e){return X(),oe("svg",zS,HS)}const YS={name:"la-times",render:GS},KS={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ZS=B("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2zm8.182 10c0-3.82-2.635-7.039-6.182-7.934V6h-4V4.066C6.453 4.96 3.818 8.18 3.818 12c0 4.51 3.673 8.182 8.182 8.182c4.51 0 8.182-3.673 8.182-8.182zM7 10.636a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728zm10 0a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728zm-8.636 3.637a1.364 1.364 0 1 1 0 2.727a1.364 1.364 0 0 1 0-2.727zm7.272 0a1.364 1.364 0 1 1 0 2.727a1.364 1.364 0 0 1 0-2.727zM12 15.636a1.364 1.364 0 1 1 0 2.728a1.364 1.364 0 0 1 0-2.728z",fill:"currentColor"},null,-1),XS=[ZS];function QS(n,e){return X(),oe("svg",KS,XS)}const JS={name:"mdi-midi-input",render:QS},eE={class:"p-0"},tE={__name:"state",setup(n){const e=Tt("global-midi-panel",!1),t=Oe(null);X0(t,()=>{e.value=!1});const{midi:s}=Ls();return(r,i)=>{var l,u;const o=JS,a=YS,c=WS;return X(),oe("div",eE,[B("button",{class:"button text-2xl",onClick:i[0]||(i[0]=Fg(h=>e.value=!v(e),["stop"])),"aria-label":"Toggle MIDI panel"},[Te(o,{class:"transition-all duration-200",style:Le({opacity:v(s).enabled?1:.2,color:v(st)(v(s).enabled?(l=v(s).note)==null?void 0:l.pitch:0,(u=v(s).note)==null?void 0:u.octA)})},null,8,["style"])]),Te(ra,{name:"fade"},{default:Kt(()=>[v(e)?(X(),oe("div",{key:0,class:"panel",ref_key:"target",ref:t},[B("div",{class:"button cursor-pointer p-1 absolute top-4 right-4 z-100",onClick:i[1]||(i[1]=h=>e.value=!1)},[Te(a)]),Te(c)],512)):ot("",!0)]),_:1})])}}},nE={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},sE=Z_('<path d="M256 387c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4v-46.2c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M256 48c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4V63.4c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M125 256c0-8.5-6.9-15.4-15.4-15.4H63.4c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4z" fill="currentColor"></path><path d="M448.6 240.6h-46.2c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4s-6.9-15.4-15.4-15.4z" fill="currentColor"></path><path d="M152.5 344.1c-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5l32.7-32.7c6-6 6-15.8 0-21.8-2.9-2.9-6.8-4.5-10.9-4.5z" fill="currentColor"></path><path d="M359.5 167.9c4.1 0 8-1.6 10.9-4.5l32.7-32.7c2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5z" fill="currentColor"></path><path d="M130.7 108.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-2.9 2.9-4.5 6.8-4.5 10.9 0 4.1 1.6 8 4.5 10.9l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"></path><path d="M370.4 348.6c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-6 6-6 15.8 0 21.8l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"></path><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96z" fill="currentColor"></path>',9),rE=[sE];function iE(n,e){return X(),oe("svg",nE,rE)}const oE={name:"ion-ios-sunny",render:iE},aE={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},cE=B("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),lE=[cE];function uE(n,e){return X(),oe("svg",aE,lE)}const hE={name:"carbon-moon",render:uE},Wi=E1();Nt({initiated:!1,mute:Tt("mute",!1),volume:oc(Tt("main-vol",1),0,1)});const dE={__name:"dark",setup(n){return(e,t)=>{const s=hE,r=oE;return X(),oe("button",{class:"button",onClick:t[0]||(t[0]=i=>Wi.value=!v(Wi)),"aria-label":"Toggle dark mode"},[ht(Te(s,null,null,512),[[io,v(Wi)]]),ht(Te(r,null,null,512),[[io,!v(Wi)]])])}}},fE={style:{"vertical-align":"middle"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},pE=B("path",{fill:"currentColor",d:"M4 4v9h2V6h7V4H4zm15 0v2h7v7h2V4h-9zM4 19v9h9v-2H6v-7H4zm22 0v7h-7v2h9v-9h-2z"},null,-1),mE=[pE];function _E(n,e){return X(),oe("svg",fE,mE)}const gE={name:"la-expand",render:_E},yE={__name:"fullscreen",props:["el"],setup(n){const e=n,t=Oe();Ds(()=>{Sr(()=>{e.el?t.value=e.el:t.value=document.getElementById("screen"),s.value=Vu(t.value)})});const s=Oe();function r(){s.value||(s.value=Vu(t.value)),s.value.toggle()}const i=be(()=>{var o;return(o=s.value)==null?void 0:o.isSupported});return(o,a)=>{const c=gE;return ht((X(),oe("button",{class:"button",onClick:a[0]||(a[0]=l=>r())},[Te(c)],512)),[[io,v(i)]])}}};const vE=n=>(Zo("data-v-9f417c45"),n=n(),Xo(),n),wE={class:"flex gap-4 absolute flex-col right-2 bottom-2 top-20 text-xl items-center opacity-40 hover_opacity-100 transition justify-between items-center"},bE={class:"flex-0 flex flex-col gap-1"},TE=vE(()=>B("div",{class:"flex-auto"},null,-1)),xE={class:"flex-0 flex flex-col items-center gap-2"},SE={__name:"overlay",setup(n){const e=[-2,-1,0,1,2],t=["+0","@4n","@8n","@16n","@32n"],{synthReleaseAll:s}=Sp();function r(){let o=e.findIndex(a=>a==Ne.octave);Ne.octave=e[++o%e.length]}function i(){let o=t.findIndex(a=>a==Ne.quantize);Ne.quantize=t[++o%t.length]}return(o,a)=>{const c=yE,l=dE,u=tE,h=dS,d=qx,f=Vx,p=Uc("tooltip");return X(),oe("div",wE,[B("div",bE,[ht(Te(c,null,null,512),[[p,"Toggle fullscreen mode",void 0,{left:!0}]]),ht(Te(l,null,null,512),[[p,"Toggle dark mode",void 0,{left:!0}]]),ht(Te(u,null,null,512),[[p,"MIDI state",void 0,{left:!0}]])]),TE,B("div",xE,[ht(Te(h,null,null,512),[[p,"Synth oscillator type",void 0,{left:!0}]]),ht((X(),oe("button",{class:"button w-16 font-bold select-none",onClick:a[0]||(a[0]=m=>r()),"aria-label":"Octave offset"},[Zn(Ve(v(Ne).octave>0?"+":"")+Ve(v(Ne).octave),1)])),[[p,"Octave offset",void 0,{left:!0}]]),ht((X(),oe("button",{class:"button font-bold text-sm w-16 select-none",onClick:i,"aria-label":"Synth quantize"},[Zn(Ve(v(Ne).quantize),1)])),[[p,"Synth quantize",void 0,{left:!0}]]),ht(Te(d,null,null,512),[[p,"Increment tempo",void 0,{left:!0}]]),ht((X(),oe("button",{class:"button w-16",onClick:a[1]||(a[1]=m=>v(s)("+1n"))},[Te(f)])),[[p,"Turn off all synth voices",void 0,{left:!0}]])])])}}},EE=ya(SE,[["__scopeId","data-v-9f417c45"]]),CE=.5*(Math.sqrt(3)-1),Rr=(3-Math.sqrt(3))/6,gh=n=>Math.floor(n)|0,yh=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function Np(n=Math.random){const e=AE(n),t=new Float64Array(e).map(r=>yh[r%12*2]),s=new Float64Array(e).map(r=>yh[r%12*2+1]);return function(i,o){let a=0,c=0,l=0;const u=(i+o)*CE,h=gh(i+u),d=gh(o+u),f=(h+d)*Rr,p=h-f,m=d-f,_=i-p,g=o-m;let y,x;_>g?(y=1,x=0):(y=0,x=1);const C=_-y+Rr,w=g-x+Rr,O=_-1+2*Rr,A=g-1+2*Rr,E=h&255,F=d&255;let V=.5-_*_-g*g;if(V>=0){const z=E+e[F],W=t[z],ne=s[z];V*=V,a=V*V*(W*_+ne*g)}let k=.5-C*C-w*w;if(k>=0){const z=E+y+e[F+x],W=t[z],ne=s[z];k*=k,c=k*k*(W*C+ne*w)}let I=.5-O*O-A*A;if(I>=0){const z=E+1+e[F+1],W=t[z],ne=s[z];I*=I,l=I*I*(W*O+ne*A)}return 70*(a+c+l)}}function AE(n){const t=new Uint8Array(512);for(let s=0;s<512/2;s++)t[s]=s;for(let s=0;s<512/2-1;s++){const r=s+~~(n()*(256-s)),i=t[s];t[s]=t[r],t[r]=i}for(let s=256;s<512;s++)t[s]=t[s-256];return t}var zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mp={};(function(n){var e=zs&&zs.__extends||function(){var Q=function(P,q){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,N){se.__proto__=N}||function(se,N){for(var M in N)Object.prototype.hasOwnProperty.call(N,M)&&(se[M]=N[M])},Q(P,q)};return function(P,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");Q(P,q);function se(){this.constructor=P}P.prototype=q===null?Object.create(q):(se.prototype=q.prototype,new se)}}(),t=zs&&zs.__classPrivateFieldSet||function(Q,P,q){if(!P.has(Q))throw new TypeError("attempted to set private field on non-instance");return P.set(Q,q),q},s=zs&&zs.__classPrivateFieldGet||function(Q,P){if(!P.has(Q))throw new TypeError("attempted to get private field on non-instance");return P.get(Q)},r,i,o,a,c,l,u,h,d,f,p,m,_,g,y,x,C,w,O,A,E,F;n.__esModule=!0,n.default=void 0;var V=function(Q){var P=131,q=137,se=0;Q+="x";for(var N=Math.floor(9007199254740991/q),M=0;M<Q.length;M++)se>N&&(se=Math.floor(se/q)),se=se*P+Q.charCodeAt(M);return se},k="0123456789abcdef".split(""),I=[-2147483648,8388608,32768,128],z=[24,16,8,0],W=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ne=[],te=function(){function Q(P,q){P===void 0&&(P=!1),q===void 0&&(q=!1),r.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),_.set(this,void 0),g.set(this,void 0),y.set(this,void 0),x.set(this,void 0),C.set(this,0),w.set(this,void 0),this.init(P,q)}return Q.prototype.init=function(P,q){q?(ne[0]=ne[16]=ne[1]=ne[2]=ne[3]=ne[4]=ne[5]=ne[6]=ne[7]=ne[8]=ne[9]=ne[10]=ne[11]=ne[12]=ne[13]=ne[14]=ne[15]=0,t(this,i,ne)):t(this,i,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),P?(t(this,l,3238371032),t(this,u,914150663),t(this,h,812702999),t(this,d,4144912697),t(this,f,4290775857),t(this,p,1750603025),t(this,m,1694076839),t(this,_,3204075428)):(t(this,l,1779033703),t(this,u,3144134277),t(this,h,1013904242),t(this,d,2773480762),t(this,f,1359893119),t(this,p,2600822924),t(this,m,528734635),t(this,_,1541459225)),t(this,r,t(this,w,t(this,o,t(this,y,0)))),t(this,a,t(this,g,!1)),t(this,c,!0),t(this,x,P)},Q.prototype.update=function(P){if(s(this,a))return this;var q;P instanceof ArrayBuffer?q=new Uint8Array(P):q=P;for(var se=0,N=q.length,M=s(this,i);se<N;){var D=void 0;if(s(this,g)&&(t(this,g,!1),M[0]=s(this,r),M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),typeof q!="string")for(D=s(this,w);se<N&&D<64;++se)M[D>>2]|=q[se]<<z[D++&3];else for(D=s(this,w);se<N&&D<64;++se){var R=q.charCodeAt(se);R<128?M[D>>2]|=R<<z[D++&3]:R<2048?(M[D>>2]|=(192|R>>6)<<z[D++&3],M[D>>2]|=(128|R&63)<<z[D++&3]):R<55296||R>=57344?(M[D>>2]|=(224|R>>12)<<z[D++&3],M[D>>2]|=(128|R>>6&63)<<z[D++&3],M[D>>2]|=(128|R&63)<<z[D++&3]):(R=65536+((R&1023)<<10|q.charCodeAt(++se)&1023),M[D>>2]|=(240|R>>18)<<z[D++&3],M[D>>2]|=(128|R>>12&63)<<z[D++&3],M[D>>2]|=(128|R>>6&63)<<z[D++&3],M[D>>2]|=(128|R&63)<<z[D++&3])}t(this,C,D),t(this,o,s(this,o)+(D-s(this,w))),D>=64?(t(this,r,M[16]),t(this,w,D-64),this.hash(),t(this,g,!0)):t(this,w,D)}return s(this,o)>4294967295&&(t(this,y,s(this,y)+(s(this,o)/4294967296<<0)),t(this,o,s(this,o)%4294967296)),this},Q.prototype.finalize=function(){if(!s(this,a)){t(this,a,!0);var P=s(this,i),q=s(this,C);P[16]=s(this,r),P[q>>2]|=I[q&3],t(this,r,P[16]),q>=56&&(s(this,g)||this.hash(),P[0]=s(this,r),P[16]=P[1]=P[2]=P[3]=P[4]=P[5]=P[6]=P[7]=P[8]=P[9]=P[10]=P[11]=P[12]=P[13]=P[14]=P[15]=0),P[14]=s(this,y)<<3|s(this,o)>>>29,P[15]=s(this,o)<<3,this.hash()}},Q.prototype.hash=function(){for(var P=s(this,l),q=s(this,u),se=s(this,h),N=s(this,d),M=s(this,f),D=s(this,p),R=s(this,m),ce=s(this,_),fe=s(this,i),ue,ae,b,T,S,$,j,Y,Z,G,J=16;J<64;++J)T=fe[J-15],ue=(T>>>7|T<<25)^(T>>>18|T<<14)^T>>>3,T=fe[J-2],ae=(T>>>17|T<<15)^(T>>>19|T<<13)^T>>>10,fe[J]=fe[J-16]+ue+fe[J-7]+ae<<0;G=q&se;for(var H=0;H<64;H+=4)s(this,c)?(s(this,x)?(j=300032,T=fe[0]-1413257819,ce=T-150054599<<0,N=T+24177077<<0):(j=704751109,T=fe[0]-210244248,ce=T-1521486534<<0,N=T+143694565<<0),t(this,c,!1)):(ue=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),ae=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),j=P&q,b=j^P&se^G,$=M&D^~M&R,T=ce+ae+$+W[H]+fe[H],S=ue+b,ce=N+T<<0,N=T+S<<0),ue=(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10),ae=(ce>>>6|ce<<26)^(ce>>>11|ce<<21)^(ce>>>25|ce<<7),Y=N&P,b=Y^N&q^j,$=ce&M^~ce&D,T=R+ae+$+W[H+1]+fe[H+1],S=ue+b,R=se+T<<0,se=T+S<<0,ue=(se>>>2|se<<30)^(se>>>13|se<<19)^(se>>>22|se<<10),ae=(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7),Z=se&N,b=Z^se&P^Y,$=R&ce^~R&M,T=D+ae+$+W[H+2]+fe[H+2],S=ue+b,D=q+T<<0,q=T+S<<0,ue=(q>>>2|q<<30)^(q>>>13|q<<19)^(q>>>22|q<<10),ae=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),G=q&se,b=G^q&N^Z,$=D&R^~D&ce,T=M+ae+$+W[H+3]+fe[H+3],S=ue+b,M=P+T<<0,P=T+S<<0;t(this,l,s(this,l)+P<<0),t(this,u,s(this,u)+q<<0),t(this,h,s(this,h)+se<<0),t(this,d,s(this,d)+N<<0),t(this,f,s(this,f)+M<<0),t(this,p,s(this,p)+D<<0),t(this,m,s(this,m)+R<<0),t(this,_,s(this,_)+ce<<0)},Q.prototype.hex=function(){this.finalize();var P=s(this,l),q=s(this,u),se=s(this,h),N=s(this,d),M=s(this,f),D=s(this,p),R=s(this,m),ce=s(this,_),fe=k[P>>28&15]+k[P>>24&15]+k[P>>20&15]+k[P>>16&15]+k[P>>12&15]+k[P>>8&15]+k[P>>4&15]+k[P&15]+k[q>>28&15]+k[q>>24&15]+k[q>>20&15]+k[q>>16&15]+k[q>>12&15]+k[q>>8&15]+k[q>>4&15]+k[q&15]+k[se>>28&15]+k[se>>24&15]+k[se>>20&15]+k[se>>16&15]+k[se>>12&15]+k[se>>8&15]+k[se>>4&15]+k[se&15]+k[N>>28&15]+k[N>>24&15]+k[N>>20&15]+k[N>>16&15]+k[N>>12&15]+k[N>>8&15]+k[N>>4&15]+k[N&15]+k[M>>28&15]+k[M>>24&15]+k[M>>20&15]+k[M>>16&15]+k[M>>12&15]+k[M>>8&15]+k[M>>4&15]+k[M&15]+k[D>>28&15]+k[D>>24&15]+k[D>>20&15]+k[D>>16&15]+k[D>>12&15]+k[D>>8&15]+k[D>>4&15]+k[D&15]+k[R>>28&15]+k[R>>24&15]+k[R>>20&15]+k[R>>16&15]+k[R>>12&15]+k[R>>8&15]+k[R>>4&15]+k[R&15];return s(this,x)||(fe+=k[ce>>28&15]+k[ce>>24&15]+k[ce>>20&15]+k[ce>>16&15]+k[ce>>12&15]+k[ce>>8&15]+k[ce>>4&15]+k[ce&15]),fe},Q.prototype.toString=function(){return this.hex()},Q.prototype.digest=function(){this.finalize();var P=s(this,l),q=s(this,u),se=s(this,h),N=s(this,d),M=s(this,f),D=s(this,p),R=s(this,m),ce=s(this,_),fe=[P>>24&255,P>>16&255,P>>8&255,P&255,q>>24&255,q>>16&255,q>>8&255,q&255,se>>24&255,se>>16&255,se>>8&255,se&255,N>>24&255,N>>16&255,N>>8&255,N&255,M>>24&255,M>>16&255,M>>8&255,M&255,D>>24&255,D>>16&255,D>>8&255,D&255,R>>24&255,R>>16&255,R>>8&255,R&255];return s(this,x)||fe.push(ce>>24&255,ce>>16&255,ce>>8&255,ce&255),fe},Q.prototype.array=function(){return this.digest()},Q.prototype.arrayBuffer=function(){this.finalize();var P=new ArrayBuffer(s(this,x)?28:32),q=new DataView(P);return q.setUint32(0,s(this,l)),q.setUint32(4,s(this,u)),q.setUint32(8,s(this,h)),q.setUint32(12,s(this,d)),q.setUint32(16,s(this,f)),q.setUint32(20,s(this,p)),q.setUint32(24,s(this,m)),s(this,x)||q.setUint32(28,s(this,_)),P},Q}();r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,_=new WeakMap,g=new WeakMap,y=new WeakMap,x=new WeakMap,C=new WeakMap,w=new WeakMap,function(Q){e(P,Q);function P(q,se,N){se===void 0&&(se=!1),N===void 0&&(N=!1);var M=Q.call(this,se,N)||this;O.set(M,void 0),A.set(M,void 0),E.set(M,void 0),F.set(M,void 0);var D;if(typeof q=="string"){for(var R=[],ce=q.length,fe=0,ue=0;ue<ce;++ue){var ae=q.charCodeAt(ue);ae<128?R[fe++]=ae:ae<2048?(R[fe++]=192|ae>>6,R[fe++]=128|ae&63):ae<55296||ae>=57344?(R[fe++]=224|ae>>12,R[fe++]=128|ae>>6&63,R[fe++]=128|ae&63):(ae=65536+((ae&1023)<<10|q.charCodeAt(++ue)&1023),R[fe++]=240|ae>>18,R[fe++]=128|ae>>12&63,R[fe++]=128|ae>>6&63,R[fe++]=128|ae&63)}D=R}else q instanceof ArrayBuffer?D=new Uint8Array(q):D=q;D.length>64&&(D=new te(se,!0).update(D).array());for(var b=[],T=[],ue=0;ue<64;++ue){var S=D[ue]||0;b[ue]=92^S,T[ue]=54^S}return M.update(T),t(M,E,b),t(M,O,!0),t(M,A,se),t(M,F,N),M}return P.prototype.finalize=function(){if(Q.prototype.finalize.call(this),s(this,O)){t(this,O,!1);var q=this.array();Q.prototype.init.call(this,s(this,A),s(this,F)),this.update(s(this,E)),this.update(q),Q.prototype.finalize.call(this)}},P}(te),O=new WeakMap,A=new WeakMap,E=new WeakMap,F=new WeakMap;function re(Q){var P=new te;return P.update(Q),parseInt(P.hex().substring(0,8),16)}var le=function(Q){var P="#";return Q.forEach(function(q){q<16&&(P+=0),P+=q.toString(16)}),P},he=function(Q,P,q){Q/=360;var se=q<.5?q*(1+P):q+P-q*P,N=2*q-se;return[Q+1/3,Q,Q-1/3].map(function(M){return M<0&&M++,M>1&&M--,M<1/6?M=N+(se-N)*6*M:M<.5?M=se:M<2/3?M=N+(se-N)*6*(2/3-M):M=N,Math.round(M*255)})},ve=function(){function Q(P){P===void 0&&(P={});var q=[P.lightness,P.saturation].map(function(M){return M=M!==void 0?M:[.35,.5,.65],Array.isArray(M)?M.concat():[M]}),se=q[0],N=q[1];this.L=se,this.S=N,typeof P.hue=="number"&&(P.hue={min:P.hue,max:P.hue}),typeof P.hue=="object"&&!Array.isArray(P.hue)&&(P.hue=[P.hue]),typeof P.hue>"u"&&(P.hue=[]),this.hueRanges=P.hue.map(function(M){return{min:typeof M.min>"u"?0:M.min,max:typeof M.max>"u"?360:M.max}}),this.hash=re,typeof P.hash=="function"&&(this.hash=P.hash),P.hash==="bkdr"&&(this.hash=V)}return Q.prototype.hsl=function(P){var q,se,N,M=this.hash(P),D=727;if(this.hueRanges.length){var R=this.hueRanges[M%this.hueRanges.length];q=M/this.hueRanges.length%D*(R.max-R.min)/D+R.min}else q=M%359;return M=Math.ceil(M/360),se=this.S[M%this.S.length],M=Math.ceil(M/this.S.length),N=this.L[M%this.L.length],[q,se,N]},Q.prototype.rgb=function(P){var q=this.hsl(P);return he.apply(this,q)},Q.prototype.hex=function(P){var q=this.rgb(P);return le(q)},Q}();n.default=ve})(Mp);const ME=NE(Mp),kE="modulepreload",OE=function(n){return"/"+n},vh={},Bs=function(e,t,s){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=OE(r),r in vh)return;vh[r]=!0;const i=r.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":kE,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},IE=()=>Bs(()=>Promise.resolve().then(()=>bN),void 0),RE=()=>Bs(()=>Promise.resolve().then(()=>NN),void 0),DE=()=>Bs(()=>Promise.resolve().then(()=>DN),void 0),PE=()=>Bs(()=>Promise.resolve().then(()=>zN),void 0),$E=()=>Bs(()=>Promise.resolve().then(()=>eM),void 0),FE=()=>Bs(()=>Promise.resolve().then(()=>aM),void 0),VE=()=>Bs(()=>Promise.resolve().then(()=>pM),void 0),gc=[{name:"stats",path:"/stats",component:IE,props:!0},{name:"spiral",path:"/spiral",component:RE,props:!0,title:"Electric",subtitle:"by Chromatone"},{name:"rose",path:"/rose",component:DE,props:!0},{name:"level",path:"/level",component:PE,props:!0,title:"Electric",subtitle:"by Chromatone"},{name:"index",path:"/",component:$E,props:!0,title:"Floating",subtitle:"by Chromatone"},{name:"donut",path:"/donut",component:FE,props:!0},{name:"cross",path:"/cross",component:VE,props:!0}];/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ys=typeof window<"u";function LE(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Pe=Object.assign;function La(n,e){const t={};for(const s in e){const r=e[s];t[s]=Qt(r)?r.map(n):n(r)}return t}const Lr=()=>{},Qt=Array.isArray,BE=/\/$/,qE=n=>n.replace(BE,"");function Ba(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=n(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=UE(s!=null?s:e,t),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function jE(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function wh(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function WE(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&gr(e.matched[s],t.matched[r])&&kp(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function gr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function kp(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!zE(n[t],e[t]))return!1;return!0}function zE(n,e){return Qt(n)?bh(n,e):Qt(e)?bh(e,n):n===e}function bh(n,e){return Qt(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function UE(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/");let r=t.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var _i;(function(n){n.pop="pop",n.push="push"})(_i||(_i={}));var Br;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Br||(Br={}));function HE(n){if(!n)if(Ys){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),qE(n)}const GE=/^[^#]+#/;function YE(n,e){return n.replace(GE,"#")+e}function KE(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const va=()=>({left:window.pageXOffset,top:window.pageYOffset});function ZE(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=KE(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Th(n,e){return(history.state?history.state.position-e:-1)+n}const yc=new Map;function XE(n,e){yc.set(n,e)}function QE(n){const e=yc.get(n);return yc.delete(n),e}let JE=()=>location.protocol+"//"+location.host;function Op(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let a=r.includes(n.slice(i))?n.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),wh(c,"")}return wh(t,n)+s+r}function eC(n,e,t,s){let r=[],i=[],o=null;const a=({state:d})=>{const f=Op(n,location),p=t.value,m=e.value;let _=0;if(d){if(t.value=f,e.value=d,o&&o===p){o=null;return}_=m?d.position-m.position:0}else s(f);r.forEach(g=>{g(t.value,p,{delta:_,type:_i.pop,direction:_?_>0?Br.forward:Br.back:Br.unknown})})};function c(){o=t.value}function l(d){r.push(d);const f=()=>{const p=r.indexOf(d);p>-1&&r.splice(p,1)};return i.push(f),f}function u(){const{history:d}=window;!d.state||d.replaceState(Pe({},d.state,{scroll:va()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function xh(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?va():null}}function tC(n){const{history:e,location:t}=window,s={value:Op(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+c:JE()+n+c;try{e[u?"replaceState":"pushState"](l,"",d),r.value=l}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(c,l){const u=Pe({},e.state,xh(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=Pe({},r.value,e.state,{forward:c,scroll:va()});i(u.current,u,!0);const h=Pe({},xh(s.value,c,null),{position:u.position+1},l);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function nC(n){n=HE(n);const e=tC(n),t=eC(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=Pe({location:"",base:n,go:s,createHref:YE.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function sC(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),nC(n)}function rC(n){return typeof n=="string"||n&&typeof n=="object"}function Ip(n){return typeof n=="string"||typeof n=="symbol"}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Rp=Symbol("");var Sh;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Sh||(Sh={}));function yr(n,e){return Pe(new Error,{type:n,[Rp]:!0},e)}function gn(n,e){return n instanceof Error&&Rp in n&&(e==null||!!(n.type&e))}const Eh="[^/]+?",iC={sensitive:!1,strict:!1,start:!0,end:!0},oC=/[.+*?^${}()[\]/\\]/g;function aC(n,e){const t=Pe({},iC,e),s=[];let r=t.start?"^":"";const i=[];for(const l of n){const u=l.length?[]:[90];t.strict&&!l.length&&(r+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(oC,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:_,regexp:g}=d;i.push({name:p,repeatable:m,optional:_});const y=g||Eh;if(y!==Eh){f+=10;try{new RegExp(`(${y})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+C.message)}}let x=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(x=_&&l.length<2?`(?:/${x})`:"/"+x),_&&(x+="?"),r+=x,f+=20,_&&(f+=-8),m&&(f+=-20),y===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(t.strict&&t.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=i[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:_}=f,g=p in l?l[p]:"";if(Qt(g)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Qt(g)?g.join("/"):g;if(!y)if(_)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=y}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function cC(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function lC(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=cC(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(Ch(s))return 1;if(Ch(r))return-1}return r.length-s.length}function Ch(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const uC={type:0,value:""},hC=/[a-zA-Z0-9_]/;function dC(n){if(!n)return[[]];if(n==="/")return[[uC]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${l}": ${f}`)}let t=0,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function h(){!l||(t===0?i.push({type:0,value:l}):t===1||t===2||t===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&t!==2){s=t,t=4;continue}switch(t){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),t=1):d();break;case 4:d(),t=s;break;case 1:c==="("?t=2:hC.test(c)?d():(h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:t=3:u+=c;break;case 3:h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),r}function fC(n,e,t){const s=aC(dC(n.path),t),r=Pe(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function pC(n,e){const t=[],s=new Map;e=Mh({strict:!1,end:!0,sensitive:!1},e);function r(u){return s.get(u)}function i(u,h,d){const f=!d,p=mC(u);p.aliasOf=d&&d.record;const m=Mh(e,u),_=[p];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of x)_.push(Pe({},p,{components:d?d.record.components:p.components,path:C,aliasOf:d?d.record:p}))}let g,y;for(const x of _){const{path:C}=x;if(h&&C[0]!=="/"){const w=h.record.path,O=w[w.length-1]==="/"?"":"/";x.path=h.record.path+(C&&O+C)}if(g=fC(x,h,m),d?d.alias.push(g):(y=y||g,y!==g&&y.alias.push(g),f&&u.name&&!Nh(g)&&o(u.name)),p.children){const w=p.children;for(let O=0;O<w.length;O++)i(w[O],g,d&&d.children[O])}d=d||g,c(g)}return y?()=>{o(y)}:Lr}function o(u){if(Ip(u)){const h=s.get(u);h&&(s.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function c(u){let h=0;for(;h<t.length&&lC(u,t[h])>=0&&(u.record.path!==t[h].record.path||!Dp(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!Nh(u)&&s.set(u.record.name,u)}function l(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw yr(1,{location:u});m=d.record.name,f=Pe(Ah(h.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&Ah(u.params,d.keys.map(y=>y.name))),p=d.stringify(f)}else if("path"in u)p=u.path,d=t.find(y=>y.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?s.get(h.name):t.find(y=>y.re.test(h.path)),!d)throw yr(1,{location:u,currentLocation:h});m=d.record.name,f=Pe({},h.params,u.params),p=d.stringify(f)}const _=[];let g=d;for(;g;)_.unshift(g.record),g=g.parent;return{name:m,path:p,params:f,matched:_,meta:gC(_)}}return n.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Ah(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function mC(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:_C(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function _C(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="boolean"?t:t[s];return e}function Nh(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function gC(n){return n.reduce((e,t)=>Pe(e,t.meta),{})}function Mh(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}function Dp(n,e){return e.children.some(t=>t===n||Dp(n,t))}const Pp=/#/g,yC=/&/g,vC=/\//g,wC=/=/g,bC=/\?/g,$p=/\+/g,TC=/%5B/g,xC=/%5D/g,Fp=/%5E/g,SC=/%60/g,Vp=/%7B/g,EC=/%7C/g,Lp=/%7D/g,CC=/%20/g;function Nl(n){return encodeURI(""+n).replace(EC,"|").replace(TC,"[").replace(xC,"]")}function AC(n){return Nl(n).replace(Vp,"{").replace(Lp,"}").replace(Fp,"^")}function vc(n){return Nl(n).replace($p,"%2B").replace(CC,"+").replace(Pp,"%23").replace(yC,"%26").replace(SC,"`").replace(Vp,"{").replace(Lp,"}").replace(Fp,"^")}function NC(n){return vc(n).replace(wC,"%3D")}function MC(n){return Nl(n).replace(Pp,"%23").replace(bC,"%3F")}function kC(n){return n==null?"":MC(n).replace(vC,"%2F")}function $o(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function OC(n){const e={};if(n===""||n==="?")return e;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace($p," "),o=i.indexOf("="),a=$o(o<0?i:i.slice(0,o)),c=o<0?null:$o(i.slice(o+1));if(a in e){let l=e[a];Qt(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function kh(n){let e="";for(let t in n){const s=n[t];if(t=NC(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(Qt(s)?s.map(i=>i&&vc(i)):[s&&vc(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function IC(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=Qt(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const RC=Symbol(""),Oh=Symbol(""),wa=Symbol(""),Ml=Symbol(""),wc=Symbol("");function Dr(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n,reset:t}}function Gn(n,e,t,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(yr(4,{from:t,to:e})):h instanceof Error?a(h):rC(h)?a(yr(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},l=n.call(s&&s.instances[r],e,t,c);let u=Promise.resolve(l);n.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function qa(n,e,t,s){const r=[];for(const i of n)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(DC(a)){const l=(a.__vccOpts||a)[e];l&&r.push(Gn(l,t,s,i,o))}else{let c=a();r.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=LE(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Gn(d,t,s,i,o)()}))}}return r}function DC(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Ih(n){const e=an(wa),t=an(Ml),s=be(()=>e.resolve(v(n.to))),r=be(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(gr.bind(null,u));if(d>-1)return d;const f=Rh(c[l-2]);return l>1&&Rh(u)===f&&h[h.length-1].path!==f?h.findIndex(gr.bind(null,c[l-2])):d}),i=be(()=>r.value>-1&&VC(t.params,s.value.params)),o=be(()=>r.value>-1&&r.value===t.matched.length-1&&kp(t.params,s.value.params));function a(c={}){return FC(c)?e[v(n.replace)?"replace":"push"](v(n.to)).catch(Lr):Promise.resolve()}return{route:s,href:be(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const PC=Rn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ih,setup(n,{slots:e}){const t=Nt(Ih(n)),{options:s}=an(wa),r=be(()=>({[Dh(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[Dh(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&e.default(t);return n.custom?i:sa("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),$C=PC;function FC(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function VC(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!Qt(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Rh(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Dh=(n,e,t)=>n!=null?n:e!=null?e:t,LC=Rn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=an(wc),r=be(()=>n.route||s.value),i=an(Oh,0),o=be(()=>{let l=v(i);const{matched:u}=r.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=be(()=>r.value.matched[o.value]);Ui(Oh,be(()=>o.value+1)),Ui(RC,a),Ui(wc,r);const c=Oe();return dt(()=>[c.value,a.value,n.name],([l,u,h],[d,f,p])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!gr(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=r.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return Ph(t.default,{Component:d,route:l});const f=h.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,_=sa(d,Pe({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Ph(t.default,{Component:_,route:l})||_}}});function Ph(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const BC=LC;function qC(n){const e=pC(n.routes,n),t=n.parseQuery||OC,s=n.stringifyQuery||kh,r=n.history,i=Dr(),o=Dr(),a=Dr(),c=wd(Wn);let l=Wn;Ys&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=La.bind(null,N=>""+N),h=La.bind(null,kC),d=La.bind(null,$o);function f(N,M){let D,R;return Ip(N)?(D=e.getRecordMatcher(N),R=M):R=N,e.addRoute(R,D)}function p(N){const M=e.getRecordMatcher(N);M&&e.removeRoute(M)}function m(){return e.getRoutes().map(N=>N.record)}function _(N){return!!e.getRecordMatcher(N)}function g(N,M){if(M=Pe({},M||c.value),typeof N=="string"){const ae=Ba(t,N,M.path),b=e.resolve({path:ae.path},M),T=r.createHref(ae.fullPath);return Pe(ae,b,{params:d(b.params),hash:$o(ae.hash),redirectedFrom:void 0,href:T})}let D;if("path"in N)D=Pe({},N,{path:Ba(t,N.path,M.path).path});else{const ae=Pe({},N.params);for(const b in ae)ae[b]==null&&delete ae[b];D=Pe({},N,{params:h(N.params)}),M.params=h(M.params)}const R=e.resolve(D,M),ce=N.hash||"";R.params=u(d(R.params));const fe=jE(s,Pe({},N,{hash:AC(ce),path:R.path})),ue=r.createHref(fe);return Pe({fullPath:fe,hash:ce,query:s===kh?IC(N.query):N.query||{}},R,{redirectedFrom:void 0,href:ue})}function y(N){return typeof N=="string"?Ba(t,N,c.value.path):Pe({},N)}function x(N,M){if(l!==N)return yr(8,{from:M,to:N})}function C(N){return A(N)}function w(N){return C(Pe(y(N),{replace:!0}))}function O(N){const M=N.matched[N.matched.length-1];if(M&&M.redirect){const{redirect:D}=M;let R=typeof D=="function"?D(N):D;return typeof R=="string"&&(R=R.includes("?")||R.includes("#")?R=y(R):{path:R},R.params={}),Pe({query:N.query,hash:N.hash,params:"path"in R?{}:N.params},R)}}function A(N,M){const D=l=g(N),R=c.value,ce=N.state,fe=N.force,ue=N.replace===!0,ae=O(D);if(ae)return A(Pe(y(ae),{state:typeof ae=="object"?Pe({},ce,ae.state):ce,force:fe,replace:ue}),M||D);const b=D;b.redirectedFrom=M;let T;return!fe&&WE(s,R,D)&&(T=yr(16,{to:b,from:R}),ve(R,R,!0,!1)),(T?Promise.resolve(T):F(b,R)).catch(S=>gn(S)?gn(S,2)?S:he(S):re(S,b,R)).then(S=>{if(S){if(gn(S,2))return A(Pe({replace:ue},y(S.to),{state:typeof S.to=="object"?Pe({},ce,S.to.state):ce,force:fe}),M||b)}else S=k(b,R,!0,ue,ce);return V(b,R,S),S})}function E(N,M){const D=x(N,M);return D?Promise.reject(D):Promise.resolve()}function F(N,M){let D;const[R,ce,fe]=jC(N,M);D=qa(R.reverse(),"beforeRouteLeave",N,M);for(const ae of R)ae.leaveGuards.forEach(b=>{D.push(Gn(b,N,M))});const ue=E.bind(null,N,M);return D.push(ue),Us(D).then(()=>{D=[];for(const ae of i.list())D.push(Gn(ae,N,M));return D.push(ue),Us(D)}).then(()=>{D=qa(ce,"beforeRouteUpdate",N,M);for(const ae of ce)ae.updateGuards.forEach(b=>{D.push(Gn(b,N,M))});return D.push(ue),Us(D)}).then(()=>{D=[];for(const ae of N.matched)if(ae.beforeEnter&&!M.matched.includes(ae))if(Qt(ae.beforeEnter))for(const b of ae.beforeEnter)D.push(Gn(b,N,M));else D.push(Gn(ae.beforeEnter,N,M));return D.push(ue),Us(D)}).then(()=>(N.matched.forEach(ae=>ae.enterCallbacks={}),D=qa(fe,"beforeRouteEnter",N,M),D.push(ue),Us(D))).then(()=>{D=[];for(const ae of o.list())D.push(Gn(ae,N,M));return D.push(ue),Us(D)}).catch(ae=>gn(ae,8)?ae:Promise.reject(ae))}function V(N,M,D){for(const R of a.list())R(N,M,D)}function k(N,M,D,R,ce){const fe=x(N,M);if(fe)return fe;const ue=M===Wn,ae=Ys?history.state:{};D&&(R||ue?r.replace(N.fullPath,Pe({scroll:ue&&ae&&ae.scroll},ce)):r.push(N.fullPath,ce)),c.value=N,ve(N,M,D,ue),he()}let I;function z(){I||(I=r.listen((N,M,D)=>{if(!se.listening)return;const R=g(N),ce=O(R);if(ce){A(Pe(ce,{replace:!0}),R).catch(Lr);return}l=R;const fe=c.value;Ys&&XE(Th(fe.fullPath,D.delta),va()),F(R,fe).catch(ue=>gn(ue,12)?ue:gn(ue,2)?(A(ue.to,R).then(ae=>{gn(ae,20)&&!D.delta&&D.type===_i.pop&&r.go(-1,!1)}).catch(Lr),Promise.reject()):(D.delta&&r.go(-D.delta,!1),re(ue,R,fe))).then(ue=>{ue=ue||k(R,fe,!1),ue&&(D.delta&&!gn(ue,8)?r.go(-D.delta,!1):D.type===_i.pop&&gn(ue,20)&&r.go(-1,!1)),V(R,fe,ue)}).catch(Lr)}))}let W=Dr(),ne=Dr(),te;function re(N,M,D){he(N);const R=ne.list();return R.length?R.forEach(ce=>ce(N,M,D)):console.error(N),Promise.reject(N)}function le(){return te&&c.value!==Wn?Promise.resolve():new Promise((N,M)=>{W.add([N,M])})}function he(N){return te||(te=!N,z(),W.list().forEach(([M,D])=>N?D(N):M()),W.reset()),N}function ve(N,M,D,R){const{scrollBehavior:ce}=n;if(!Ys||!ce)return Promise.resolve();const fe=!D&&QE(Th(N.fullPath,0))||(R||!D)&&history.state&&history.state.scroll||null;return Sr().then(()=>ce(N,M,fe)).then(ue=>ue&&ZE(ue)).catch(ue=>re(ue,N,M))}const Q=N=>r.go(N);let P;const q=new Set,se={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,hasRoute:_,getRoutes:m,resolve:g,options:n,push:C,replace:w,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ne.add,isReady:le,install(N){const M=this;N.component("RouterLink",$C),N.component("RouterView",BC),N.config.globalProperties.$router=M,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>v(c)}),Ys&&!P&&c.value===Wn&&(P=!0,C(r.location).catch(ce=>{}));const D={};for(const ce in Wn)D[ce]=be(()=>c.value[ce]);N.provide(wa,M),N.provide(Ml,Nt(D)),N.provide(wc,c);const R=N.unmount;q.add(N),N.unmount=function(){q.delete(N),q.size<1&&(l=Wn,I&&I(),I=null,c.value=Wn,P=!1,te=!1),R()}}};return se}function Us(n){return n.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function jC(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(l=>gr(l,a))?s.push(a):t.push(a));const c=n.matched[o];c&&(e.matched.find(l=>gr(l,c))||r.push(c))}return[t,s,r]}function WC(){return an(wa)}function zC(){return an(Ml)}const UC={class:"flex flex-col h-100vh w-full"},HC={key:0,class:"absolute bottom-20 text-center flex flex-col items-center w-full"},GC={class:"text-sm"},YC={class:"h-full w-full"},KC=["viewBox"],ZC=B("defs",null,[B("filter",{id:"noiseFilter"},[B("feTurbulence",{type:"fractalNoise",basefrequency:"6.29",numoctaves:"6",stitchtiles:"stitch"})])],-1),XC=["width","height"],QC={class:"absolute left-0 top-10 flex flex-col gap-2 m-2 opacity-20 hover_opacity-100 transition"},JC={__name:"app",setup(n){const{midi:e}=Ls(),t=zC(),s=WC(),r=Oe(0),i=Np(),o=Oe();Jc(()=>{r.value++,o.value=i(1,r.value/2e3)});const a=new ME({saturation:[.05,.28,.62],lightness:[.75,.87,.9]}),c=be(()=>a.hex(Math.random()*1e5+"a")),l=be(()=>a.hex(Math.random()*1e5+"b"));be(()=>`linear-gradient(${o.value*360}deg, ${c.value}, ${l.value})`);const{visual:u,width:h,height:d}=Vn(),f=Oe(!1);dt(()=>e.total.hits,m=>{m==0&&s.push(p())}),Xc([" ","Enter"],()=>{Vs(),s.push(p())});function p(){let m,_,g,y;for(let x=0;x<20&&(m=Math.random(),_=Object.values(gc),g=m*_.length,y=_[Math.floor(g)].path,!!t.path.includes(y));x++);return f.value=!0,y}return Ds(()=>{AT()}),(m,_)=>{const g=EE,y=Rx,x=As("router-view"),C=tx,w=S0,O=v0,A=f0,E=c0,F=s0,V=Qg,k=Gg,I=As("router-link"),z=Uc("tooltip");return X(),oe("div",UC,[Te(g),f.value?ot("",!0):(X(),oe("div",HC,[B("div",GC,"Hold any note more than "+Ve(v(e).maxDuration/1e3)+" seconds or press Enter/Spacebar to randomly change current scene.",1)])),Te(y),B("div",YC,[(X(),oe("svg",{class:"h-full w-full",id:"visual",ref_key:"visual",ref:u,version:"1.1",baseProfile:"full",viewBox:`0 0  ${v(h)} ${v(d)}`,xmlns:"http://www.w3.org/2000/svg"},[ZC,B("rect",{filter:"url(#noiseFilter)",fill:"hsl(20,70%,60%)",opacity:"0.1",width:v(h),height:v(d)},null,8,XC),Te(x,null,{default:Kt(({Component:W})=>[Te(ra,{name:"fade",mode:"out-in"},{default:Kt(()=>[(X(),et(v_,null,[(X(),et(M_(W),{id:"content"}))],1024))]),_:2},1024)]),_:1}),Te(C)],8,KC)),B("div",QC,[(X(!0),oe(Re,null,gt(v(gc),(W,ne)=>ht((X(),et(I,{class:ns(["button p-2 cursor-pointer text-3xl",{active:m.$route.path==W.path}]),key:W.path,onClick:_[0]||(_[0]=te=>f.value=!0),to:W},{default:Kt(()=>[W.name=="index"?(X(),et(w,{key:0})):ot("",!0),W.name=="level"?(X(),et(O,{key:1})):ot("",!0),W.name=="rose"?(X(),et(A,{key:2})):ot("",!0),W.name=="cross"?(X(),et(E,{key:3})):ot("",!0),W.name=="donut"?(X(),et(F,{key:4})):ot("",!0),W.name=="stats"?(X(),et(V,{key:5})):ot("",!0),W.name=="spiral"?(X(),et(k,{key:6})):ot("",!0)]),_:2},1032,["to","class"])),[[z,W.name.charAt(0).toUpperCase()+W.name.slice(1)+" scene",void 0,{right:!0}]])),128))])])])}}};function Ln(n){return n.split("-")[0]}function ir(n){return n.split("-")[1]}function Ii(n){return["top","bottom"].includes(Ln(n))?"x":"y"}function kl(n){return n==="y"?"height":"width"}function $h(n){let{reference:e,floating:t,placement:s}=n;const r=e.x+e.width/2-t.width/2,i=e.y+e.height/2-t.height/2;let o;switch(Ln(s)){case"top":o={x:r,y:e.y-t.height};break;case"bottom":o={x:r,y:e.y+e.height};break;case"right":o={x:e.x+e.width,y:i};break;case"left":o={x:e.x-t.width,y:i};break;default:o={x:e.x,y:e.y}}const a=Ii(s),c=kl(a);switch(ir(s)){case"start":o[a]=o[a]-(e[c]/2-t[c]/2);break;case"end":o[a]=o[a]+(e[c]/2-t[c]/2);break}return o}const eA=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t;let a=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:c,y:l}=$h({...a,placement:s}),u=s,h={};for(let d=0;d<i.length;d++){const{name:f,fn:p}=i[d],{x:m,y:_,data:g,reset:y}=await p({x:c,y:l,initialPlacement:s,placement:u,strategy:r,middlewareData:h,rects:a,platform:o,elements:{reference:n,floating:e}});if(c=m!=null?m:c,l=_!=null?_:l,h={...h,[f]:g!=null?g:{}},y){typeof y=="object"&&(y.placement&&(u=y.placement),y.rects&&(a=y.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):y.rects),{x:c,y:l}=$h({...a,placement:u})),d=-1;continue}}return{x:c,y:l,placement:u,strategy:r,middlewareData:h}};function tA(n){return{top:0,right:0,bottom:0,left:0,...n}}function Bp(n){return typeof n!="number"?tA(n):{top:n,right:n,bottom:n,left:n}}function bc(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function ba(n,e){e===void 0&&(e={});const{x:t,y:s,platform:r,rects:i,elements:o,strategy:a}=n,{boundary:c="clippingParents",rootBoundary:l="viewport",elementContext:u="floating",altBoundary:h=!1,padding:d=0}=e,f=Bp(d),m=o[h?u==="floating"?"reference":"floating":u],_=await r.getClippingClientRect({element:await r.isElement(m)?m:m.contextElement||await r.getDocumentElement({element:o.floating}),boundary:c,rootBoundary:l}),g=bc(await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:u==="floating"?{...i.floating,x:t,y:s}:i.reference,offsetParent:await r.getOffsetParent({element:o.floating}),strategy:a}));return{top:_.top-g.top+f.top,bottom:g.bottom-_.bottom+f.bottom,left:_.left-g.left+f.left,right:g.right-_.right+f.right}}const nA=Math.min,hs=Math.max;function Tc(n,e,t){return hs(n,nA(e,t))}const sA=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:s=0}=n!=null?n:{},{x:r,y:i,placement:o,rects:a,platform:c}=e;if(t==null)return{};const l=Bp(s),u={x:r,y:i},h=Ln(o),d=Ii(h),f=kl(d),p=await c.getDimensions({element:t}),m=d==="y"?"top":"left",_=d==="y"?"bottom":"right",g=a.reference[f]+a.reference[d]-u[d]-a.floating[f],y=u[d]-a.reference[d],x=await c.getOffsetParent({element:t}),C=x?d==="y"?x.clientHeight||0:x.clientWidth||0:0,w=g/2-y/2,O=l[m],A=C-p[f]-l[_],E=C/2-p[f]/2+w,F=Tc(O,E,A);return{data:{[d]:F,centerOffset:E-F}}}}),rA={left:"right",right:"left",bottom:"top",top:"bottom"};function Fo(n){return n.replace(/left|right|bottom|top/g,e=>rA[e])}function qp(n,e){const t=ir(n)==="start",s=Ii(n),r=kl(s);let i=s==="x"?t?"right":"left":t?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=Fo(i)),{main:i,cross:Fo(i)}}const iA={start:"end",end:"start"};function xc(n){return n.replace(/start|end/g,e=>iA[e])}const oA=["top","right","bottom","left"],aA=oA.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);function cA(n,e,t){return(n?[...t.filter(r=>ir(r)===n),...t.filter(r=>ir(r)!==n)]:t.filter(r=>Ln(r)===r)).filter(r=>n?ir(r)===n||(e?xc(r)!==r:!1):!0)}const lA=function(n){return n===void 0&&(n={}),{name:"autoPlacement",options:n,async fn(e){var t,s,r,i,o,a;const{x:c,y:l,rects:u,middlewareData:h,placement:d}=e,{alignment:f=null,allowedPlacements:p=aA,autoAlignment:m=!0,..._}=n;if((t=h.autoPlacement)!=null&&t.skip)return{};const g=cA(f,m,p),y=await ba(e,_),x=(s=(r=h.autoPlacement)==null?void 0:r.index)!=null?s:0,C=g[x],{main:w,cross:O}=qp(C,u);if(d!==C)return{x:c,y:l,reset:{placement:g[0]}};const A=[y[Ln(C)],y[w],y[O]],E=[...(i=(o=h.autoPlacement)==null?void 0:o.overflows)!=null?i:[],{placement:C,overflows:A}],F=g[x+1];if(F)return{data:{index:x+1,overflows:E},reset:{placement:F}};const V=E.slice().sort((I,z)=>I.overflows[0]-z.overflows[0]),k=(a=V.find(I=>{let{overflows:z}=I;return z.every(W=>W<=0)}))==null?void 0:a.placement;return{data:{skip:!0},reset:{placement:k!=null?k:V[0].placement}}}}};function uA(n){const e=Fo(n);return[xc(n),e,xc(e)]}const hA=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a}=e;if((t=i.flip)!=null&&t.skip)return{};const{mainAxis:c=!0,crossAxis:l=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",flipAlignment:d=!0,...f}=n,p=Ln(r),_=u||(p===a||!d?[Fo(a)]:uA(a)),g=[a,..._],y=await ba(e,f),x=[];let C=((s=i.flip)==null?void 0:s.overflows)||[];if(c&&x.push(y[p]),l){const{main:E,cross:F}=qp(r,o);x.push(y[E],y[F])}if(C=[...C,{placement:r,overflows:x}],!x.every(E=>E<=0)){var w,O;const E=((w=(O=i.flip)==null?void 0:O.index)!=null?w:0)+1,F=g[E];if(F)return{data:{index:E,overflows:C},reset:{placement:F}};let V="bottom";switch(h){case"bestFit":{var A;const k=(A=C.slice().sort((I,z)=>I.overflows.filter(W=>W>0).reduce((W,ne)=>W+ne,0)-z.overflows.filter(W=>W>0).reduce((W,ne)=>W+ne,0))[0])==null?void 0:A.placement;k&&(V=k);break}case"initialPlacement":V=a;break}return{data:{skip:!0},reset:{placement:V}}}return{}}}};function dA(n){let{placement:e,rects:t,value:s}=n;const r=Ln(e),i=["left","top"].includes(r)?-1:1,o=typeof s=="function"?s({...t,placement:e}):s,{mainAxis:a,crossAxis:c}=typeof o=="number"?{mainAxis:o,crossAxis:0}:{mainAxis:0,crossAxis:0,...o};return Ii(r)==="x"?{x:c,y:a*i}:{x:a*i,y:c}}const fA=function(n){return n===void 0&&(n=0),{name:"offset",options:n,fn(e){const{x:t,y:s,placement:r,rects:i}=e,o=dA({placement:r,rects:i,value:n});return{x:t+o.x,y:s+o.y,data:o}}}};function pA(n){return n==="x"?"y":"x"}const mA=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:g,y}=_;return{x:g,y}}},...c}=n,l={x:t,y:s},u=await ba(e,c),h=Ii(Ln(r)),d=pA(h);let f=l[h],p=l[d];if(i){const _=h==="y"?"top":"left",g=h==="y"?"bottom":"right",y=f+u[_],x=f-u[g];f=Tc(y,f,x)}if(o){const _=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=p+u[_],x=p-u[g];p=Tc(y,p,x)}const m=a.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-t,y:m.y-s}}}}},_A=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t;const{placement:s,rects:r,middlewareData:i}=e,{apply:o,...a}=n;if((t=i.size)!=null&&t.skip)return{};const c=await ba(e,a),l=Ln(s),u=ir(s)==="end";let h,d;l==="top"||l==="bottom"?(h=l,d=u?"left":"right"):(d=l,h=u?"top":"bottom");const f=hs(c.left,0),p=hs(c.right,0),m=hs(c.top,0),_=hs(c.bottom,0),g={height:r.floating.height-(["left","right"].includes(s)?2*(m!==0||_!==0?m+_:hs(c.top,c.bottom)):c[h]),width:r.floating.width-(["top","bottom"].includes(s)?2*(f!==0||p!==0?f+p:hs(c.left,c.right)):c[d])};return o==null||o({...g,...r}),{data:{skip:!0},reset:{rects:!0}}}}};function Ol(n){return(n==null?void 0:n.toString())==="[object Window]"}function is(n){if(n==null)return window;if(!Ol(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ta(n){return is(n).getComputedStyle(n)}function On(n){return Ol(n)?"":n?(n.nodeName||"").toLowerCase():""}function In(n){return n instanceof is(n).HTMLElement}function Vo(n){return n instanceof is(n).Element}function gA(n){return n instanceof is(n).Node}function jp(n){const e=is(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function xa(n){const{overflow:e,overflowX:t,overflowY:s}=Ta(n);return/auto|scroll|overlay|hidden/.test(e+s+t)}function yA(n){return["table","td","th"].includes(On(n))}function Wp(n){const e=navigator.userAgent.toLowerCase().includes("firefox"),t=Ta(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&(t.filter?t.filter!=="none":!1)}const Fh=Math.min,qr=Math.max,Lo=Math.round;function vr(n,e){e===void 0&&(e=!1);const t=n.getBoundingClientRect();let s=1,r=1;return e&&In(n)&&(s=n.offsetWidth>0&&Lo(t.width)/n.offsetWidth||1,r=n.offsetHeight>0&&Lo(t.height)/n.offsetHeight||1),{width:t.width/s,height:t.height/r,top:t.top/r,right:t.right/s,bottom:t.bottom/r,left:t.left/s,x:t.left/s,y:t.top/r}}function os(n){return((gA(n)?n.ownerDocument:n.document)||window.document).documentElement}function Sa(n){return Ol(n)?{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}:{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function zp(n){return vr(os(n)).left+Sa(n).scrollLeft}function vA(n){const e=vr(n);return Lo(e.width)!==n.offsetWidth||Lo(e.height)!==n.offsetHeight}function wA(n,e,t){const s=In(e),r=os(e),i=vr(n,s&&vA(e));let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&t!=="fixed")if((On(e)!=="body"||xa(r))&&(o=Sa(e)),In(e)){const c=vr(e,!0);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else r&&(a.x=zp(r));return{x:i.left+o.scrollLeft-a.x,y:i.top+o.scrollTop-a.y,width:i.width,height:i.height}}function Ea(n){return On(n)==="html"?n:n.assignedSlot||n.parentNode||(jp(n)?n.host:null)||os(n)}function Vh(n){return!In(n)||getComputedStyle(n).position==="fixed"?null:n.offsetParent}function bA(n){let e=Ea(n);for(;In(e)&&!["html","body"].includes(On(e));){if(Wp(e))return e;e=e.parentNode}return null}function Sc(n){const e=is(n);let t=Vh(n);for(;t&&yA(t)&&getComputedStyle(t).position==="static";)t=Vh(t);return t&&(On(t)==="html"||On(t)==="body"&&getComputedStyle(t).position==="static"&&!Wp(t))?e:t||bA(n)||e}function Lh(n){return{width:n.offsetWidth,height:n.offsetHeight}}function TA(n){let{rect:e,offsetParent:t,strategy:s}=n;const r=In(t),i=os(t);if(t===i)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&s!=="fixed")&&((On(t)!=="body"||xa(i))&&(o=Sa(t)),In(t))){const c=vr(t,!0);a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}}function xA(n){const e=is(n),t=os(n),s=e.visualViewport;let r=t.clientWidth,i=t.clientHeight,o=0,a=0;return s&&(r=s.width,i=s.height,Math.abs(e.innerWidth/s.scale-s.width)<.01&&(o=s.offsetLeft,a=s.offsetTop)),{width:r,height:i,x:o,y:a}}function SA(n){var e;const t=os(n),s=Sa(n),r=(e=n.ownerDocument)==null?void 0:e.body,i=qr(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=qr(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let a=-s.scrollLeft+zp(n);const c=-s.scrollTop;return Ta(r||t).direction==="rtl"&&(a+=qr(t.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:a,y:c}}function Up(n){return["html","body","#document"].includes(On(n))?n.ownerDocument.body:In(n)&&xa(n)?n:Up(Ea(n))}function Bo(n,e){var t;e===void 0&&(e=[]);const s=Up(n),r=s===((t=n.ownerDocument)==null?void 0:t.body),i=is(s),o=r?[i].concat(i.visualViewport||[],xa(s)?s:[]):s,a=e.concat(o);return r?a:a.concat(Bo(Ea(o)))}function EA(n,e){const t=e.getRootNode==null?void 0:e.getRootNode();if(n.contains(e))return!0;if(t&&jp(t)){let s=e;do{if(s&&n===s)return!0;s=s.parentNode||s.host}while(s)}return!1}function CA(n){const e=vr(n),t=e.top+n.clientTop,s=e.left+n.clientLeft;return{top:t,left:s,x:s,y:t,right:s+n.clientWidth,bottom:t+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}function Bh(n,e){return e==="viewport"?bc(xA(n)):Vo(e)?CA(e):bc(SA(os(n)))}function AA(n){const e=Bo(Ea(n)),s=["absolute","fixed"].includes(Ta(n).position)&&In(n)?Sc(n):n;return Vo(s)?e.filter(r=>Vo(r)&&EA(r,s)&&On(r)!=="body"):[]}function NA(n){let{element:e,boundary:t,rootBoundary:s}=n;const i=[...t==="clippingParents"?AA(e):[].concat(t),s],o=i[0],a=i.reduce((c,l)=>{const u=Bh(e,l);return c.top=qr(u.top,c.top),c.right=Fh(u.right,c.right),c.bottom=Fh(u.bottom,c.bottom),c.left=qr(u.left,c.left),c},Bh(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}const MA={getElementRects:n=>{let{reference:e,floating:t,strategy:s}=n;return{reference:wA(e,Sc(t),s),floating:{...Lh(t),x:0,y:0}}},convertOffsetParentRelativeRectToViewportRelativeRect:n=>TA(n),getOffsetParent:n=>{let{element:e}=n;return Sc(e)},isElement:n=>Vo(n),getDocumentElement:n=>{let{element:e}=n;return os(e)},getClippingClientRect:n=>NA(n),getDimensions:n=>{let{element:e}=n;return Lh(e)},getClientRects:n=>{let{element:e}=n;return e.getClientRects()}},kA=(n,e,t)=>eA(n,e,{platform:MA,...t});var OA=Object.defineProperty,IA=Object.defineProperties,RA=Object.getOwnPropertyDescriptors,qh=Object.getOwnPropertySymbols,DA=Object.prototype.hasOwnProperty,PA=Object.prototype.propertyIsEnumerable,jh=(n,e,t)=>e in n?OA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xn=(n,e)=>{for(var t in e||(e={}))DA.call(e,t)&&jh(n,t,e[t]);if(qh)for(var t of qh(e))PA.call(e,t)&&jh(n,t,e[t]);return n},Ri=(n,e)=>IA(n,RA(e));function Hp(n,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(typeof e[t]=="object"&&n[t]?Hp(n[t],e[t]):n[t]=e[t])}const Cs={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:5e3,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:n=>[...n,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover","focus"],delay:{show:0,hide:400}}}};function wr(n,e){let t=Cs.themes[n]||{},s;do s=t[e],typeof s>"u"?t.$extend?t=Cs.themes[t.$extend]||{}:(t=null,s=Cs[e]):t=null;while(t);return s}function $A(n){const e=[n];let t=Cs.themes[n]||{};do t.$extend&&!t.$resetCss?(e.push(t.$extend),t=Cs.themes[t.$extend]||{}):t=null;while(t);return e.map(s=>`v-popper--theme-${s}`)}let br=!1;if(typeof window<"u"){br=!1;try{const n=Object.defineProperty({},"passive",{get(){br=!0}});window.addEventListener("test",null,n)}catch{}}let Gp=!1;typeof window<"u"&&typeof navigator<"u"&&(Gp=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const Yp=["auto","top","bottom","left","right"].reduce((n,e)=>n.concat([e,`${e}-start`,`${e}-end`]),[]),Wh={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart"},zh={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend"};function FA(n,e){const t=n.indexOf(e);t!==-1&&n.splice(t,1)}function ja(){return new Promise(n=>requestAnimationFrame(()=>{requestAnimationFrame(n)}))}const on=[];let Hs=null,Ec=function(){};typeof window<"u"&&(Ec=window.Element);function De(n){return function(e){return wr(e.theme,n)}}var Kp=()=>Rn({name:"VPopper",props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,required:!0},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:De("disabled")},placement:{type:String,default:De("placement"),validator:n=>Yp.includes(n)},delay:{type:[String,Number,Object],default:De("delay")},distance:{type:[Number,String],default:De("distance")},skidding:{type:[Number,String],default:De("skidding")},triggers:{type:Array,default:De("triggers")},showTriggers:{type:[Array,Function],default:De("showTriggers")},hideTriggers:{type:[Array,Function],default:De("hideTriggers")},popperTriggers:{type:Array,default:De("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:De("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:De("popperHideTriggers")},container:{type:[String,Object,Ec,Boolean],default:De("container")},boundary:{type:[String,Ec],default:De("boundary")},strategy:{type:String,validator:n=>["absolute","fixed"].includes(n),default:De("strategy")},autoHide:{type:Boolean,default:De("autoHide")},handleResize:{type:Boolean,default:De("handleResize")},instantMove:{type:Boolean,default:De("instantMove")},eagerMount:{type:Boolean,default:De("eagerMount")},popperClass:{type:[String,Array,Object],default:De("popperClass")},computeTransformOrigin:{type:Boolean,default:De("computeTransformOrigin")},autoMinSize:{type:Boolean,default:De("autoMinSize")},autoMaxSize:{type:Boolean,default:De("autoMaxSize")},preventOverflow:{type:Boolean,default:De("preventOverflow")},overflowPadding:{type:[Number,String],default:De("overflowPadding")},arrowPadding:{type:[Number,String],default:De("arrowPadding")},arrowOverflow:{type:Boolean,default:De("arrowOverflow")},flip:{type:Boolean,default:De("flip")},shift:{type:Boolean,default:De("shift")},shiftCrossAxis:{type:Boolean,default:De("shiftCrossAxis")}},emits:["show","hide","update:shown","apply-show","apply-hide","close-group","close-directive","auto-hide","resize","dispose"],data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null}}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:Ri(xn({},this.classes),{popperClass:this.popperClass}),result:this.result}}},watch:xn({shown:"$_autoShowHide",disabled(n){n?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers(){this.$_isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())}},["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((n,e)=>(n[e]="$_computePosition",n),{})),created(){this.$_isDisposed=!0,this.randomId=`popper_${[Math.random(),Date.now()].map(n=>n.toString(36).substring(2,10)).join("_")}`},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:n=null,skipDelay:e=!1,force:t=!1}={}){(t||!this.disabled)&&(this.$_scheduleShow(n,e),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0)},hide({event:n=null,skipDelay:e=!1}={}){this.$_scheduleHide(n,e),this.$emit("hide"),this.$emit("update:shown",!1)},init(){!this.$_isDisposed||(this.$_isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=this.referenceNode(),this.$_targetNodes=this.targetNodes().filter(n=>n.nodeType===n.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.$_isDisposed||(this.$_isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_swapTargetAttrs("data-original-title","title"),this.$emit("dispose"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){var n;if(this.$_isDisposed)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(fA({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");t?e.middleware.push(lA({alignment:(n=this.placement.split("-")[1])!=null?n:""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(mA({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(hA({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(sA({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:r,rects:i,middlewareData:o})=>{let a;const{centerOffset:c}=o.arrow;return r.startsWith("top")||r.startsWith("bottom")?a=Math.abs(c)>i.reference.width/2:a=Math.abs(c)>i.reference.height/2,{data:{overflow:a}}}}),this.autoMinSize&&e.middleware.push({name:"autoMinSize",fn:({rects:r,placement:i,middlewareData:o})=>{var a;if((a=o.autoMinSize)!=null&&a.skip)return{};let c,l;return i.startsWith("top")||i.startsWith("bottom")?c=r.reference.width:l=r.reference.height,this.$_innerNode.style.minWidth=c!=null?`${c}px`:null,this.$_innerNode.style.minHeight=l!=null?`${l}px`:null,{data:{skip:!0},reset:{rects:!0}}}}),this.autoMaxSize&&e.middleware.push(_A({boundary:this.boundary,padding:this.overflowPadding,apply:({width:r,height:i})=>{this.$_innerNode.style.maxWidth=r!=null?`${r}px`:null,this.$_innerNode.style.maxHeight=i!=null?`${i}px`:null}}));const s=await kA(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:s.x,y:s.y,placement:s.placement,strategy:s.strategy,arrow:xn(xn({},s.middlewareData.arrow),s.middlewareData.arrowOverflow)})},$_scheduleShow(n=null,e=!1){if(this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),Hs&&this.instantMove&&Hs.instantMove){Hs.$_applyHide(!0),this.$_applyShow(!0);return}e?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(n=null,e=!1){this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(Hs=this),e?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(n){const e=this.delay;return parseInt(e&&e[n]||e||0)},async $_applyShow(n=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=n,!this.isShown&&(this.$_ensureTeleport(),await ja(),await this.$_computePosition(),await this.$_applyShowEffect())},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const e=this.$_referenceNode.getBoundingClientRect(),t=this.$_popperNode.querySelector(".v-popper__wrapper"),s=t.parentNode.getBoundingClientRect(),r=e.x+e.width/2-(s.left+t.offsetLeft),i=e.y+e.height/2-(s.top+t.offsetTop);this.result.transformOrigin=`${r}px ${i}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const n=this.showGroup;if(n){let e;for(let t=0;t<on.length;t++)e=on[t],e.showGroup!==n&&(e.hide(),e.$emit("close-group"))}on.push(this),this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await ja(),this.classes.showFrom=!1,this.classes.showTo=!0},async $_applyHide(n=!1){if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=n,FA(on,this),Hs===this&&(Hs=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const e=wr(this.theme,"disposeTimeout");e!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},e)),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await ja(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.$_isDisposed)return;let n=this.container;if(typeof n=="string"?n=window.document.querySelector(n):n===!1&&(n=this.$_targetNodes[0].parentNode),!n)throw new Error("No container for popover: "+this.container);n.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const n=(r,i,o)=>{this.$_events.push({targetNodes:r,eventType:i,handler:o}),r.forEach(a=>a.addEventListener(i,o,br?{passive:!0}:void 0))},e=(r,i,o,a,c)=>{let l=o;a!=null&&(l=typeof a=="function"?a(l):a),l.forEach(u=>{const h=i[u];h&&n(r,h,c)})},t=r=>{this.isShown&&!this.$_hideInProgress||(r.usedByTooltip=!0,!this.$_preventShow&&this.show({event:r}))};e(this.$_targetNodes,Wh,this.triggers,this.showTriggers,t),e([this.$_popperNode],Wh,this.popperTriggers,this.popperShowTriggers,t);const s=r=>{r.usedByTooltip||this.hide({event:r})};e(this.$_targetNodes,zh,this.triggers,this.hideTriggers,s),e([this.$_popperNode],zh,this.popperTriggers,this.popperHideTriggers,s),n([...Bo(this.$_referenceNode),...Bo(this.$_popperNode)],"scroll",()=>{this.$_computePosition()})},$_removeEventListeners(){this.$_events.forEach(({targetNodes:n,eventType:e,handler:t})=>{n.forEach(s=>s.removeEventListener(e,t))}),this.$_events=[]},$_handleGlobalClose(n,e=!1){this.$_showFrameLocked||(this.hide({event:n}),n.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),e&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(n,e){for(const t of this.$_targetNodes){const s=t.getAttribute(n);s&&(t.removeAttribute(n),t.setAttribute(e,s))}},$_applyAttrsToTarget(n){for(const e of this.$_targetNodes)for(const t in n){const s=n[t];s==null?e.removeAttribute(t):e.setAttribute(t,s)}}},render(){return this.$slots.default(this.slotData)}});typeof document<"u"&&typeof window<"u"&&(Gp?(document.addEventListener("touchstart",Uh,br?{passive:!0,capture:!0}:!0),document.addEventListener("touchend",LA,br?{passive:!0,capture:!0}:!0)):(window.addEventListener("mousedown",Uh,!0),window.addEventListener("click",VA,!0)),window.addEventListener("resize",BA));function Uh(n){for(let e=0;e<on.length;e++){const t=on[e],s=t.popperNode();t.$_mouseDownContains=s.contains(n.target)}}function VA(n){Zp(n)}function LA(n){Zp(n,!0)}function Zp(n,e=!1){for(let t=0;t<on.length;t++){const s=on[t],r=s.popperNode(),i=s.$_mouseDownContains||r.contains(n.target);requestAnimationFrame(()=>{(n.closeAllPopover||n.closePopover&&i||s.autoHide&&!i)&&s.$_handleGlobalClose(n,e)})}}function BA(n){for(let e=0;e<on.length;e++)on[e].$_computePosition(n)}function qA(){var n=window.navigator.userAgent,e=n.indexOf("MSIE ");if(e>0)return parseInt(n.substring(e+5,n.indexOf(".",e)),10);var t=n.indexOf("Trident/");if(t>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var r=n.indexOf("Edge/");return r>0?parseInt(n.substring(r+5,n.indexOf(".",r)),10):-1}let Xi;function Cc(){Cc.init||(Cc.init=!0,Xi=qA()!==-1)}var Ca={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Cc(),Sr(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const n=document.createElement("object");this._resizeObject=n,n.setAttribute("aria-hidden","true"),n.setAttribute("tabindex",-1),n.onload=this.addResizeHandlers,n.type="text/html",Xi&&this.$el.appendChild(n),n.data="about:blank",Xi||this.$el.appendChild(n)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Xi&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const jA=l_();Zo("data-v-b329ee4c");const WA={class:"resize-observer",tabindex:"-1"};Xo();const zA=jA((n,e,t,s,r,i)=>(X(),et("div",WA)));Ca.render=zA;Ca.__scopeId="data-v-b329ee4c";Ca.__file="src/components/ResizeObserver.vue";var Xp={computed:{themeClass(){return $A(this.theme)}}},Il=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t};const UA=Rn({name:"VPopperContent",components:{ResizeObserver:Ca},mixins:[Xp],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(n){return n!=null&&!isNaN(n)?`${n}px`:null}}}),HA=["id","aria-hidden","tabindex","data-popper-placement"],GA={ref:"inner",class:"v-popper__inner"},YA=B("div",{class:"v-popper__arrow-outer"},null,-1),KA=B("div",{class:"v-popper__arrow-inner"},null,-1),ZA=[YA,KA];function XA(n,e,t,s,r,i){const o=As("ResizeObserver");return X(),oe("div",{id:n.popperId,ref:"popover",class:ns(["v-popper__popper",[n.themeClass,n.classes.popperClass,{"v-popper__popper--shown":n.shown,"v-popper__popper--hidden":!n.shown,"v-popper__popper--show-from":n.classes.showFrom,"v-popper__popper--show-to":n.classes.showTo,"v-popper__popper--hide-from":n.classes.hideFrom,"v-popper__popper--hide-to":n.classes.hideTo,"v-popper__popper--skip-transition":n.skipTransition,"v-popper__popper--arrow-overflow":n.result.arrow.overflow}]]),style:Le({position:n.result.strategy,transform:`translate3d(${Math.round(n.result.x)}px,${Math.round(n.result.y)}px,0)`}),"aria-hidden":n.shown?"false":"true",tabindex:n.autoHide?0:void 0,"data-popper-placement":n.result.placement,onKeyup:e[1]||(e[1]=Lg(a=>n.autoHide&&n.$emit("hide"),["esc"]))},[B("div",{class:"v-popper__wrapper",style:Le({transformOrigin:n.result.transformOrigin})},[B("div",GA,[n.mounted?(X(),oe(Re,{key:0},[B("div",null,[no(n.$slots,"default")]),n.handleResize?(X(),et(o,{key:0,onNotify:e[0]||(e[0]=a=>n.$emit("resize",a))})):ot("",!0)],64)):ot("",!0)],512),B("div",{ref:"arrow",class:"v-popper__arrow-container",style:Le({left:n.toPx(n.result.arrow.x),top:n.toPx(n.result.arrow.y)})},ZA,4)],4)],46,HA)}var Qp=Il(UA,[["render",XA]]),Jp={methods:{show(...n){return this.$refs.popper.show(...n)},hide(...n){return this.$refs.popper.hide(...n)},dispose(...n){return this.$refs.popper.dispose(...n)},onResize(...n){return this.$refs.popper.onResize(...n)}}};const QA=Rn({name:"VPopperWrapper",components:{Popper:Kp(),PopperContent:Qp},mixins:[Jp,Xp],inheritAttrs:!1,props:{theme:{type:String,default:null}},computed:{finalTheme(){var n;return(n=this.theme)!=null?n:this.$options.vPopperTheme},popperAttrs(){const n=xn({},this.$attrs);return delete n.class,delete n.style,n}},methods:{getTargetNodes(){return Array.from(this.$refs.reference.children).filter(n=>n!==this.$refs.popperContent.$el)}}});function JA(n,e,t,s,r,i){const o=As("PopperContent"),a=As("Popper");return X(),et(a,ta({ref:"popper"},n.popperAttrs,{theme:n.finalTheme,"target-nodes":n.getTargetNodes,"reference-node":()=>n.$refs.reference,"popper-node":()=>n.$refs.popperContent.$el}),{default:Kt(({popperId:c,isShown:l,shouldMountContent:u,skipTransition:h,autoHide:d,show:f,hide:p,handleResize:m,onResize:_,classes:g,result:y})=>[B("div",{ref:"reference",class:ns(["v-popper",[n.$attrs.class,n.themeClass,{"v-popper--shown":l}]]),style:Le(n.$attrs.style)},[no(n.$slots,"default",{shown:l,show:f,hide:p}),Te(o,{ref:"popperContent","popper-id":c,theme:n.finalTheme,shown:l,mounted:u,"skip-transition":h,"auto-hide":d,"handle-resize":m,classes:g,result:y,onHide:p,onResize:_},{default:Kt(()=>[no(n.$slots,"popper",{shown:l,hide:p})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])],6)]),_:3},16,["theme","target-nodes","reference-node","popper-node"])}var Rl=Il(QA,[["render",JA]]);const Hh=Rn(Ri(xn({},Rl),{name:"VDropdown",vPopperTheme:"dropdown"})),Gh=Rn(Ri(xn({},Rl),{name:"VMenu",vPopperTheme:"menu"})),Yh=Rn(Ri(xn({},Rl),{name:"VTooltip",vPopperTheme:"tooltip"})),eN=Rn({name:"VTooltipDirective",components:{Popper:Kp(),PopperContent:Qp},mixins:[Jp],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:n=>wr(n.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:n=>wr(n.theme,"loadingContent")}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(n){if(typeof this.content=="function"&&this.$_isShown&&(n||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const e=++this.$_fetchId,t=this.content(this);t.then?t.then(s=>this.onResult(e,s)):this.onResult(e,t)}},onResult(n,e){n===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=e)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),tN=["innerHTML"],nN=["textContent"];function sN(n,e,t,s,r,i){const o=As("PopperContent"),a=As("Popper");return X(),et(a,ta({ref:"popper"},n.$attrs,{theme:n.theme,"popper-node":()=>n.$refs.popperContent.$el,onApplyShow:n.onShow,onApplyHide:n.onHide}),{default:Kt(({popperId:c,isShown:l,shouldMountContent:u,skipTransition:h,autoHide:d,hide:f,handleResize:p,onResize:m,classes:_,result:g})=>[Te(o,{ref:"popperContent",class:ns({"v-popper--tooltip-loading":n.loading}),"popper-id":c,theme:n.theme,shown:l,mounted:u,"skip-transition":h,"auto-hide":d,"handle-resize":p,classes:_,result:g,onHide:f,onResize:m},{default:Kt(()=>[n.html?(X(),oe("div",{key:0,innerHTML:n.finalContent},null,8,tN)):(X(),oe("div",{key:1,textContent:Ve(n.finalContent)},null,8,nN))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","popper-node","onApplyShow","onApplyHide"])}var rN=Il(eN,[["render",sN]]);const em="v-popper--has-tooltip";function iN(n,e){let t=n.placement;if(!t&&e)for(const s of Yp)e[s]&&(t=s);return t||(t=wr(n.theme||"tooltip","placement")),t}function tm(n,e,t){let s;const r=typeof e;return r==="string"?s={content:e}:e&&r==="object"?s=e:s={content:!1},s.placement=iN(s,t),s.targetNodes=()=>[n],s.referenceNode=()=>n,s}let Wa,gi,oN=0;function aN(){if(Wa)return;gi=Oe([]),Wa=cf({name:"VTooltipDirectiveApp",setup(){return{directives:gi}},render(){return this.directives.map(e=>sa(rN,Ri(xn({},e.options),{shown:e.shown.value||e.options.shown,key:e.id})))},devtools:{hide:!0}});const n=document.createElement("div");document.body.appendChild(n),Wa.mount(n)}function cN(n,e,t){aN();const s=Oe(tm(n,e,t)),r=Oe(!1),i={id:oN++,options:s,shown:r};return gi.value.push(i),n.classList&&n.classList.add(em),n.$_popper={options:s,item:i,show(){r.value=!0},hide(){r.value=!1}}}function nm(n){if(n.$_popper){const e=gi.value.indexOf(n.$_popper.item);e!==-1&&gi.value.splice(e,1),delete n.$_popper,delete n.$_popperOldShown,delete n.$_popperMountTarget}n.classList&&n.classList.remove(em)}function Kh(n,{value:e,oldValue:t,modifiers:s}){const r=tm(n,e,s);if(!r.content||wr(r.theme||"tooltip","disabled"))nm(n);else{let i;n.$_popper?(i=n.$_popper,i.options.value=r):i=cN(n,e,s),typeof e.shown<"u"&&e.shown!==n.$_popperOldShown&&(n.$_popperOldShown=e.shown,e.shown?i.show():i.hide())}}var lN={beforeMount:Kh,updated:Kh,beforeUnmount(n){nm(n)}};function Zh(n){n.addEventListener("click",sm),n.addEventListener("touchstart",rm,br?{passive:!0}:!1)}function Xh(n){n.removeEventListener("click",sm),n.removeEventListener("touchstart",rm),n.removeEventListener("touchend",im),n.removeEventListener("touchcancel",om)}function sm(n){const e=n.currentTarget;n.closePopover=!e.$_vclosepopover_touch,n.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}function rm(n){if(n.changedTouches.length===1){const e=n.currentTarget;e.$_vclosepopover_touch=!0;const t=n.changedTouches[0];e.$_vclosepopover_touchPoint=t,e.addEventListener("touchend",im),e.addEventListener("touchcancel",om)}}function im(n){const e=n.currentTarget;if(e.$_vclosepopover_touch=!1,n.changedTouches.length===1){const t=n.changedTouches[0],s=e.$_vclosepopover_touchPoint;n.closePopover=Math.abs(t.screenY-s.screenY)<20&&Math.abs(t.screenX-s.screenX)<20,n.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}}function om(n){const e=n.currentTarget;e.$_vclosepopover_touch=!1}var uN={beforeMount(n,{value:e,modifiers:t}){n.$_closePopoverModifiers=t,(typeof e>"u"||e)&&Zh(n)},updated(n,{value:e,oldValue:t,modifiers:s}){n.$_closePopoverModifiers=s,e!==t&&(typeof e>"u"||e?Zh(n):Xh(n))},beforeUnmount(n){Xh(n)}};function hN(n,e={}){n.$_vTooltipInstalled||(n.$_vTooltipInstalled=!0,Hp(Cs,e),n.directive("tooltip",lN),n.directive("close-popper",uN),n.component("v-tooltip",Yh),n.component("VTooltip",Yh),n.component("v-dropdown",Hh),n.component("VDropdown",Hh),n.component("v-menu",Gh),n.component("VMenu",Gh))}const dN={version:"2.0.0-y.0",install:hN,options:Cs},fN=qC({history:sC(),routes:[...gc],scrollBehavior(n,e,t){return t||{top:0,behavior:"smooth"}}}),Dl=cf(JC);Dl.use(fN);Dl.use(dN);Dl.mount("#touchme-app");const pN={class:"stats"},mN={class:"grid"},_N=["x","y","width","height","transform-origin","fill"],gN=["transform"],yN=["height","width","fill","transform-origin"],vN=["x","y"],wN={__name:"stats",setup(n){const{width:e,height:t}=Vn();return(s,r)=>(X(),oe("g",pN,[B("g",mN,[(X(),oe(Re,null,gt(10,(i,o)=>B("g",{class:"note",key:i},[(X(),oe(Re,null,gt(12,(a,c)=>{var l,u,h,d,f,p,m,_,g;return B("rect",{style:Le([{transition:"all 300ms ease-out"},`transform: scale(1,${a-4+i*12==((u=(l=v(L))==null?void 0:l.note)==null?void 0:u.number)&&((d=(h=v(L))==null?void 0:h.note)==null?void 0:d.attack)?((f=v(L))==null?void 0:f.duration)/300+1:1})`]),key:c,x:c*v(e)/12,y:v(t)-v(t)/9*o,width:v(e)/12,height:v(t)/9,"transform-origin":`${v(e)/12} ${v(t)-v(t)/9*(o-.5)}`,fill:v(st)(c+12*a,3,1,a-4+i*12==((m=(p=v(L))==null?void 0:p.note)==null?void 0:m.number)&&((g=(_=v(L))==null?void 0:_.note)==null?void 0:g.attack)?1:.05)},null,12,_N)}),64))])),64))]),(X(!0),oe(Re,null,gt(v(L).total.durations,(i,o)=>(X(),oe("g",{class:"stat",key:o,transform:`translate(${o*v(e)/12})`},[B("rect",{x:0,y:0,height:v(t),width:v(e)/12,fill:v(st)(o,2),"transform-origin":`${0} ${v(t)}`,style:Le([{transition:"all 200ms ease-out"},`transform: scale(1,${i/v(L).total.duration||0})`])},null,12,yN),B("text",{x:v(e)/24,y:v(t)-20,"text-anchor":"middle",fill:"currentColor"},Ve(v(FT)[o]),9,vN)],8,gN))),128))]))}},bN=Object.freeze(Object.defineProperty({__proto__:null,default:wN},Symbol.toStringTag,{value:"Module"})),TN={class:"arrows pointer-events-none transition",transform:"translate(0 40)"},xN=["cx","cy","fill","transform-origin"],SN={class:"ticks"},EN=["transform-origin"],CN=["x1","x2","stroke-width","stroke","transform-origin","transform"],AN=["x1","y1","x2","transform-origin"],am={__name:"spiral",setup(n){const{width:e,height:t}=Vn(),{midi:s}=Ls();return be(()=>(s.time/1e3).toFixed()),(r,i)=>{var o,a,c,l;return X(),oe("g",TN,[B("circle",{class:"center",style:Le([{transition:"all 400ms ease-out"},{transform:`scale(${((o=v(s).note)==null?void 0:o.attack)*v(s).duration/20+1})`}]),cx:v(e)/2,cy:v(t)/2,fill:((a=v(s).note)==null?void 0:a.attack)>0?v(st)((((c=v(s).note)==null?void 0:c.number)-9)%12):"currentColor",r:5,"transform-origin":`${v(e)/2} ${v(t)/2}`},null,12,xN),B("g",SN,[(X(),oe(Re,null,gt(120,u=>{var h,d,f,p;return B("g",{key:u,"transform-origin":`${v(e)/2} ${v(t)/2}`,style:Le({transform:`rotate(${u-60}deg)`})},[B("line",{style:{transition:"all 400ms ease-out"},x1:v(e)/2,x2:v(e)/2,y1:10,y2:100,"stroke-width":((h=v(s).note)==null?void 0:h.number)==u&&((d=v(s).note)==null?void 0:d.attack)?50*(1+v(s).duration/1e3):2,stroke:((f=v(s).note)==null?void 0:f.number)==u&&((p=v(s).note)==null?void 0:p.attack)?v(st)((u+3)%12):"currentColor","stroke-linecap":"round","transform-origin":`${v(e)/2} ${v(t)/2}`,transform:`rotate(${u*v(s).time/2e4}) scale(${1-u/120*v(s).time/5e5})`},null,8,CN)],12,EN)}),64))]),B("line",{class:"arrow",style:Le([{transition:"all 400ms ease-out"},{transform:`rotate(${((l=v(s).note)==null?void 0:l.number)*(1+v(s).time/2e4)-60}deg)`}]),x1:v(e)/2,y1:v(t)/2,"stroke-width":"4",stroke:"currentColor","stroke-linecap":"round",x2:v(e)/2,y2:20,"transform-origin":`${v(e)/2} ${v(t)/2}`},null,12,AN)])}}};typeof ts=="function"&&ts(am);const NN=Object.freeze(Object.defineProperty({__proto__:null,default:am},Symbol.toStringTag,{value:"Module"})),MN=["x1","x2","y1","y2","stroke-width","stroke","transform-origin","transform"],kN=["cx","cy","fill","transform-origin"],ON=["x1","x2","y1","y2","transform-origin","transform"],IN=["cx","cy","transform-origin","fill"],RN={__name:"rose",setup(n){const{width:e,height:t}=Vn(),s=be(()=>new Array(12).fill(1).map((i,o)=>L.total.notes[o]?VT(o,12,L.total.notes[o]/L.total.hits*e.value*1.2+50,e.value,t.value):{})),r=be(()=>{const i=s.value.filter(a=>a.x&&a.y);return i.map((a,c)=>({x1:a.x,y1:a.y,x2:i[c==i.length-1?0:c+1].x,y2:i[c==i.length-1?0:c+1].y}))});return(i,o)=>{var a,c,l,u,h,d;return X(),oe("g",null,[(X(),oe(Re,null,gt(12,(f,p)=>{var m,_,g,y;return B("line",{style:{transition:"all 500ms ease-out"},key:f,x1:v(e)/2,x2:v(e)/2,y1:v(t)/2,y2:-v(t)/2,"stroke-linecap":"round","stroke-width":((_=(m=v(L))==null?void 0:m.note)==null?void 0:_.pitch)==p&&((y=(g=v(L))==null?void 0:g.note)==null?void 0:y.attack)?v(L).duration/10:2,stroke:v(st)(p,4),"transform-origin":`${v(e)/2} ${v(t)/2}`,transform:`rotate(${30*p})`},null,8,MN)}),64)),(X(!0),oe(Re,null,gt(v(s),(f,p)=>(X(),oe("circle",{class:"mix-blend-multiply dark_mix-blend-difference",style:Le([{transition:"all 400ms ease-out"},`transform: scale(${50*v(L).total.durations[p]/v(L).total.duration})`]),key:p,cx:f.x||v(e)/2,r:10,cy:f.y||v(t)/2,fill:v(st)(p),"stroke-width":"4","transform-origin":`${f.x} ${f.y}`},null,12,kN))),128)),(X(!0),oe(Re,null,gt(v(r),f=>(X(),oe("line",ta({class:"mix-blend-exclusion",style:{transition:"all 300ms ease-out"},key:f},f,{stroke:"currentColor","stroke-width":"4","stroke-linecap":"round"}),null,16))),128)),B("line",{class:"mix-blend-difference",style:{transition:"all 300ms ease-out"},x1:v(e)/2,x2:v(e)/2,y1:v(t)/2-v(L).duration/5-100,y2:v(t)/2,"transform-origin":`${v(e)/2} ${v(t)/2}`,transform:`rotate(${30*((c=(a=v(L))==null?void 0:a.note)==null?void 0:c.pitch)||0})`,stroke:"white","stroke-width":"4","stroke-linecap":"round"},null,8,ON),B("circle",{style:Le([{transition:"all 200ms ease-out"},`transform: scale(${v(L).duration/1e3})`]),cx:v(e)/2,cy:v(t)/2,r:30,"transform-origin":`${v(e)/2} ${v(t)/2}`,fill:v(st)((u=(l=v(L))==null?void 0:l.note)==null?void 0:u.pitch,3,(d=(h=v(L))==null?void 0:h.note)==null?void 0:d.attack)},null,12,IN)])}}},DN=Object.freeze(Object.defineProperty({__proto__:null,default:RN},Symbol.toStringTag,{value:"Module"})),PN={class:"arrows pointer-events-none transition",transform:"translate(0 40)"},$N={class:"ticks"},FN=["transform-origin"],VN=["x1","x2","stroke-width","stroke"],LN=["x1","y1","x2","transform-origin"],BN=["cx","cy","fill","transform-origin"],qN=["fill"],jN=["x","y","transform-origin","transform"],WN=["width","x","y","transform-origin","transform"],cm={__name:"level",setup(n){const{width:e,height:t}=Vn(),{midi:s}=Ls();return be(()=>(s.time/1e3).toFixed()),(r,i)=>{var o,a,c,l,u,h,d,f,p,m;return X(),oe("g",PN,[B("g",$N,[(X(),oe(Re,null,gt(120,_=>{var g,y,x,C;return B("g",{key:_,"transform-origin":`${v(e)/2} ${v(t)/2}`,style:Le({transform:`rotate(${_-60}deg)`})},[B("line",{x1:v(e)/2,x2:v(e)/2,y1:10,y2:70,"stroke-width":((g=v(s).note)==null?void 0:g.number)==_&&((y=v(s).note)==null?void 0:y.attack)?2+50*v(s).duration/1e3:2,stroke:((x=v(s).note)==null?void 0:x.number)==_&&((C=v(s).note)==null?void 0:C.attack)?v(st)((_+3)%12):"currentColor","stroke-linecap":"round"},null,8,VN)],12,FN)}),64))]),B("line",{class:"arrow transition",x1:v(e)/2,y1:v(t)/2,"stroke-width":"4",stroke:"currentColor","stroke-linecap":"round",x2:v(e)/2,y2:20,"transform-origin":`${v(e)/2} ${v(t)/2}`,style:Le({transform:`rotate(${((o=v(s).note)==null?void 0:o.number)*((a=v(s).note)==null?void 0:a.attack)-60}deg)`})},null,12,LN),B("circle",{class:"center transition",cx:v(e)/2,cy:v(t)/2,fill:((c=v(s).note)==null?void 0:c.attack)>0?v(st)((((l=v(s).note)==null?void 0:l.number)-9)%12):"currentColor",r:5,"transform-origin":`${v(e)/2} ${v(t)/2}`,style:Le({transform:`scale(${((u=v(s).note)==null?void 0:u.attack)*10+1})`})},null,12,BN),B("g",{fill:((h=v(s).note)==null?void 0:h.attack)>0?v(st)((((d=v(s).note)==null?void 0:d.number)-9)%12):"currentColor"},[B("text",{class:"transition font-bold","text-anchor":"middle","alignment-baseline":"central",x:v(e)/2,y:v(t)/2*1.5,"font-size":"4em","transform-origin":`${v(e)/2} ${v(t)/2*1.5}`,transform:`scale(${((p=(f=v(s))==null?void 0:f.note)==null?void 0:p.attack)||0})`},Ve(((m=v(s).note)==null?void 0:m.identifier)||""),9,jN),B("rect",{width:v(e)/2,x:v(e)/2-v(e)/4,y:v(t)/2*1.6,height:300,"transform-origin":`${v(e)/2} ${v(t)/2*1.5}`,transform:`scale(${v(s).duration/2e3} 1)`},null,8,WN)],8,qN)])}}};typeof ts=="function"&&ts(cm);const zN=Object.freeze(Object.defineProperty({__proto__:null,default:cm},Symbol.toStringTag,{value:"Module"})),UN=["viewBox"],HN=B("defs",null,[B("filter",{id:"blur",x:"-300%",y:"-300%",width:"600%",height:"600%"},[B("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"50"})])],-1),GN=["width","height"],YN=["stroke-width","stroke","x1","x2","y1","y2"],KN=B("circle",{"stroke-width":"2",stroke:"white",fill:"hsl(30,90%,80%)",r:"30"},null,-1),ZN=B("circle",{r:"3",cx:"20"},null,-1),XN=B("circle",{r:"3",cx:"10"},null,-1),QN=[KN,ZN,XN],JN=["cx","cy","r","fill","opacity"],lm={__name:"index",setup(n){const{width:e,height:t}=Vn(),{midi:s}=Ls(),r=Np();function i(){const a=Nt({x:100,y:100,angle:0}),c=Oe(0),l=Math.random();return Jc(()=>{c.value++,a.x=(r(l*100,c.value/2e3)+1)/2,a.y=(r(l*200,c.value/2e3)+1)/2,a.angle=(r(l*300,c.value/2e3)+1)/2}),a}const o=Nt([]);return o.push(i()),o.push(i()),(a,c)=>{var l,u,h,d,f,p,m,_,g,y;return X(),oe("svg",{class:"h-full",id:"visual",version:"1.1",baseProfile:"full",viewBox:`0 0  ${v(e)} ${v(t)}`,xmlns:"http://www.w3.org/2000/svg"},[HN,B("rect",{opacity:"0.1",width:v(e),height:v(t)},null,8,GN),B("line",{style:{transition:"stroke-width 0.2s ease-out"},"stroke-width":((u=(l=v(s))==null?void 0:l.note)==null?void 0:u.number)*((d=(h=v(s))==null?void 0:h.note)==null?void 0:d.velocity)/200*v(s).duration/100,stroke:v(st)(((p=(f=v(s))==null?void 0:f.note)==null?void 0:p.number)-21),"stroke-linecap":"round",x1:o[0].x*v(e),x2:o[1].x*v(e),y1:o[0].y*v(t),y2:o[1].y*v(t)},null,8,YN),(X(!0),oe(Re,null,gt(o,x=>(X(),oe("g",{style:Le([{transition:"transform 0.1s ease-out"},`transform: translate(${x.x*v(e)}px,${x.y*v(t)}px) rotate(${x.angle*360}deg) scale(${v(s).duration/1e3+1})`]),key:x},QN,4))),128)),B("circle",{cx:(o[0].x+o[1].x)*v(e)/2,cy:(o[0].y+o[1].y)*v(t)/2,r:v(s).duration/20+25,fill:v(st)(((_=(m=v(s))==null?void 0:m.note)==null?void 0:_.number)-9),opacity:.75*((y=(g=v(s))==null?void 0:g.note)==null?void 0:y.attack)||0},null,8,JN)],8,UN)}}};typeof ts=="function"&&ts(lm);const eM=Object.freeze(Object.defineProperty({__proto__:null,default:lm},Symbol.toStringTag,{value:"Module"})),tM=["d","fill","stroke","stroke-width","fill-opacity","transform-origin"],nM={__name:"ring",props:{fill:{type:String,default:"gray"},stroke:{type:String,default:"none"},sWidth:{type:Number,default:0},cx:{type:Number,default:500},cy:{type:Number,default:500},radius:{type:Number,default:450},from:{type:Number,default:0},to:{type:Number,default:360},thickness:{type:Number,default:100},op:{type:Number,default:1},round:{type:Boolean,default:!1}},setup(n){const e=n,t=Nt({from:be(()=>e.from<=e.to?e.from:e.to),to:be(()=>e.from>e.to?e.from:e.to),start:be(()=>s(t.to)),end:be(()=>s(t.from)),largeArcFlag:be(()=>t.to-t.from<=180?"0":"1"),cutout:be(()=>e.radius-e.thickness),start2:be(()=>s(t.to,t.cutout)),end2:be(()=>s(t.from,t.cutout))});function s(a=0,c=e.radius){return o(e.cx,e.cy,c,a)}const r=be(()=>["M",t.start.x,t.start.y,"A",e.radius,e.radius,0,t.largeArcFlag,0,t.end.x,t.end.y,"L",t.end2.x,t.end2.y,"A",t.cutout,t.cutout,0,t.largeArcFlag,1,t.start2.x,t.start2.y,"L",t.start.x,t.start.y,"Z"].join(" ")),i=be(()=>["M",t.start.x,t.start.y,"A",e.radius,e.radius,0,t.largeArcFlag,0,t.end.x,t.end.y,"A",e.thickness/2,e.thickness/2,0,0,0,t.end2.x,t.end2.y,"A",t.cutout,t.cutout,0,t.largeArcFlag,1,t.start2.x,t.start2.y,"A",e.thickness/2,e.thickness/2,0,0,0,t.start.x,t.start.y,"Z"].join(" "));function o(a,c,l,u){var h=(u-90)*Math.PI/180;return{x:a+l*Math.cos(h),y:c+l*Math.sin(h)}}return(a,c)=>(X(),oe("path",{style:{transition:"all 200ms ease-out"},d:n.round?v(i):v(r),fill:n.fill,stroke:n.stroke,"stroke-width":n.sWidth,"fill-rule":"evenodd","stroke-linejoin":"round","fill-opacity":n.op,"transform-origin":`${n.cx} ${n.cy}`},[no(a.$slots,"default")],8,tM))}},sM={class:"donut"},rM=["cx","cy","transform","transform-origin","fill"],iM=["x","y"],oM={__name:"donut",setup(n){const{width:e,height:t}=Vn(),s=be(()=>(t.value<e.value?t.value/2:e.value/2)-20);be(()=>2*Math.PI*s.value);const r=be(()=>L.total.durations.reduce((a,c)=>a+c)||1),i=be(()=>L.total.durations.map(a=>a/r.value)),o=be(()=>{let a=0;const c=[0];return i.value.forEach(l=>{a+=Number(l),c.push(a)}),c});return(a,c)=>{var u,h,d,f,p,m,_,g;const l=nM;return X(),oe("g",sM,[(X(!0),oe(Re,null,gt(v(i),(y,x)=>(X(),oe("g",null,[Te(l,{style:{transition:"all 500ms ease-out"},cx:v(e)/2,cy:v(t)/2,radius:v(s),fill:v(st)(x),from:v(o)[x]*360,to:(v(o)[x]+v(i)[x])*360,thickness:v(e)/3},null,8,["cx","cy","radius","fill","from","to","thickness"])]))),256)),B("circle",{style:{transition:"all 200ms ease-out"},cx:v(e)/2,cy:v(t)/2,r:30,opacity:"0.9",transform:`scale(${((h=(u=v(L))==null?void 0:u.note)==null?void 0:h.attack)*v(L).duration/500+1||1})`,"transform-origin":`${v(e)/2} ${v(t)/2}`,fill:v(st)((f=(d=v(L))==null?void 0:d.note)==null?void 0:f.pitch,3,(m=(p=v(L))==null?void 0:p.note)==null?void 0:m.attack)},null,8,rM),B("text",{x:v(e)/2,y:v(t)/2+8,"text-anchor":"middle","font-size":"14"},Ve((g=(_=v(L))==null?void 0:_.note)==null?void 0:g.identifier),9,iM)])}}},aM=Object.freeze(Object.defineProperty({__proto__:null,default:oM},Symbol.toStringTag,{value:"Module"})),cM={class:"cross"},lM=["x","height","transform-origin","fill"],uM=["x2","stroke","stroke-width","transform-origin"],hM=["cx","cy","transform-origin","fill","opacity"],dM=["transform-origin","width","height"],fM={__name:"cross",setup(n){const{width:e,height:t}=Vn();return(s,r)=>{var i,o,a,c,l,u;return X(),oe("g",cM,[B("rect",{style:Le([{transition:"all 300ms ease-in-out"},`transform: scale(${v(L).duration/100}, 1)`]),x:v(e)/2-50,y:0,height:v(t),width:100,"transform-origin":`${v(e)/2} ${0}`,fill:v(st)(((o=(i=v(L))==null?void 0:i.note)==null?void 0:o.pitch)-24+7)},null,12,lM),B("line",{class:"mix-blend-multiply dark_mix-blend-difference",style:Le([{transition:"all 300ms ease-in-out"},`transform: translateY(${(127-((c=(a=v(L))==null?void 0:a.note)==null?void 0:c.number))/127*v(t)||0}px)`]),x1:0,x2:v(e),y1:0,y2:0,stroke:v(st)((u=(l=v(L))==null?void 0:l.note)==null?void 0:u.pitch),"stroke-width":v(L).duration,"transform-origin":`${v(e)/2} ${0}`},null,12,uM),(X(),oe(Re,null,gt(127,h=>{var d,f,p,m;return B("circle",{style:Le([{transition:"all 300ms ease-in-out"},`transform: scale(${((f=(d=v(L))==null?void 0:d.note)==null?void 0:f.number)==h?v(L).duration/50:1})`]),key:h,cx:v(e)/2,cy:(127-h)/127*v(t)||0,"transform-origin":`${v(e)/2} ${(127-h)/127*v(t)||0}`,r:60,fill:v(st)((h+3)%12),opacity:((m=(p=v(L))==null?void 0:p.note)==null?void 0:m.number)==h?.9:0},null,12,hM)}),64)),B("rect",{class:"mix-blend-exclusion",style:Le([{transition:"all 100ms ease-in-out"},`transform: scale(1,${v(L).total.duration/v(L).time})`]),fill:"white",opacity:"0.1",x:0,y:0,"transform-origin":`${0} ${v(t)}`,width:v(e),height:v(t)},null,12,dM)])}}},pM=Object.freeze(Object.defineProperty({__proto__:null,default:fM},Symbol.toStringTag,{value:"Module"}));
//# sourceMappingURL=index.2dfbaf3e.js.map
